{"version":3,"sources":["agent.js","images/chemistry-background.jpg","images/chem-cash-logo.png","images/songs-background.jpg","images/doc-may-profile.jpg","components/Theme.js","components/Logo.js","constants/actionTypes.js","components/Header.js","components/Navigation.js","components/PageWrapper.js","components/NotFound.js","components/ProtectedRoute.js","components/ControlledSwitch.js","components/ListErrors.js","components/PageHeader.js","components/Settings.js","components/ActionButton.js","components/Teacher/ResetStudentPasswordAlert.js","components/Points.js","components/Teacher/ProductSelector.js","components/Teacher/TransactionDialog.js","converter.js","components/AccountView.js","components/Student/StudentAccount.js","components/Student/SongRequestDialog.js","components/Student/StudentSongs.js","components/Alert.js","components/Teacher/EconomySummaryTable.js","components/Spinner.js","transitions.js","components/Teacher/EconomyDialog.js","components/Teacher/StudentSearch.js","components/Teacher/CourseSelector.js","components/Teacher/StudentsTable.js","components/Teacher/BulkTransactionsDialog.js","components/Filedrop.js","components/Teacher/ImportScoresDialog.js","components/Teacher/UpdateAccountsMenu.js","components/Teacher/TeacherAccounts.js","components/Teacher/CourseDialog.js","components/Teacher/DeleteStudentAlert.js","components/Teacher/StudentDialog.js","components/Teacher/StudentTransferDialog.js","components/Teacher/CourseStudentList.js","components/Teacher/DeleteCourseAlert.js","components/Teacher/ImportStudentsDialog.js","components/Teacher/TasksTable.js","components/Teacher/TasksDialog.js","components/Teacher/CourseList.js","components/Teacher/TeacherCourses.js","components/AccountBalance.js","components/FabBadge.js","components/Teacher/ProcessSongRequestsDialog.js","components/Teacher/TeacherSongs.js","hooks.js","components/Purchases/PurchaseDetailsList.js","components/Purchases/ManagePurchasesTable.js","components/Purchases/ProcessPurchasesDialog.js","components/Purchases/ManagePurchases.js","components/Admin/ResetWhatsNewAlert.js","components/Admin/TeacherDialog.js","components/Admin/DeleteTeacherAlert.js","components/Admin/TeacherList.js","components/Admin/ManageTeachers.js","components/ImagePreview.js","components/TextFieldLimit.js","components/Products/ProductDialog.js","components/Products/DeleteProductDialog.js","components/Products/ProductsGallery.js","components/DialogAppBar.js","components/Purchases/ShoppingCart.js","components/Purchases/StudentPurchasesTable.js","components/Purchases/StudentPurchasesDialog.js","components/Products/Products.js","components/Home.js","components/Loading.js","components/About.js","components/Login/LoginForm.js","components/Login/index.js","components/Notifier.js","components/WhatsNewDialog.js","reducers/auth.js","reducers/common.js","reducers/courses.js","reducers/economy.js","reducers/nav.js","reducers/notifier.js","reducers/products.js","reducers/purchases.js","reducers/scores.js","reducers/settings.js","reducers/tasks.js","reducers/teachers.js","reducers/songs.js","middleware.js","store.js","reducer.js","components/App.js","index.js"],"names":["superagent","superagentPromise","_superagent","global","Promise","API_ROOT","encode","encodeURIComponent","responseBody","res","body","token","tokenPlugin","req","set","requests","url","del","use","then","get","post","put","Auth","current","login","username","password","user","register","save","Courses","add","course","delete","slug","enroll","getAll","unenroll","update","Products","product","Purchases","purchase","id","forStudent","forTeacher","Scores","getStudentScores","import","data","Settings","settings","Songs","request","song","Spotify","getAuthUrl","removeAuth","Students","courseId","users","Tasks","task","Teachers","resetFlags","role","Transactions","transaction","addMany","transactions","_id","setToken","_token","module","exports","ChemCashTheme","createMuiTheme","breakpoints","values","md","lg","palette","primary","lightGreen","secondary","amber","overrides","MuiDialogActions","root","padding","Logo","props","alt","src","logo","ASYNC_START","LOGIN","useStyles","makeStyles","theme","title","color","flexGrow","height","marginTop","spacing","marginRight","marginBottom","connect","state","navTabValue","nav","dispatch","onClickLogout","type","classes","currentUser","AppBar","position","Container","Toolbar","className","Typography","variant","align","charAt","toUpperCase","slice","Button","onClick","bottom","width","zIndex","common","path","router","location","pathname","onLoad","tabValue","redirectTo","value","onTabChange","onUnload","userRole","enabled","beta","enableBetaFeatures","products","productsEnabled","songs","songRequestEnabled","store","storeEnabled","handleTabChange","useEffect","tabFromPath","split","BottomNavigation","onChange","event","newValue","showLabels","BottomNavigationAction","label","icon","LocalAtm","QueueMusic","Store","SupervisorAccount","People","wrapper","PageWrapper","children","NotFound","exact","component","to","ControlledSwitch","controlledBy","disabled","name","useFormikContext","setFieldValue","useField","field","Switch","alert","alertList","ListErrors","errors","Object","keys","map","key","readableKey","replace","toLowerCase","severity","headerLeft","alignItems","display","headerRight","justifyContent","pageHeader","PageHeader","Grid","container","item","xs","paper","onSubmitForm","payload","all","agent","snackbar","message","onWhatsNewClick","viewedChanges","inProgress","enableReinitialize","initialValues","allowPurchasesWithInsufficientFunds","defaultStudentPassword","firstName","lastName","score100","scoreConverter","score90","score80","score70","score60","score50","songRemovalPurchaseAmount","songRemovalRequestEnabled","songRemovalRefundAmount","songRequestPurchaseAmount","taxRate","validationSchema","Yup","typeError","onSubmit","form","a","userSettings","100","90","80","70","60","50","40","30","20","10","0","resetForm","formik","size","Fab","SaveAlt","Paper","gutterBottom","TextField","fullWidth","actionButton","text","ActionButton","action","Tooltip","arrow","enterTouchDelay","IconButton","aria-label","ev","stopPropagation","onFocus","btnSize","student","useState","open","setOpen","handleClose","LockOpen","fontSize","Dialog","onClose","DialogTitle","DialogContent","DialogContentText","DialogActions","autoFocus","Points","suffix","displayType","thousandSeparator","Math","round","ProductSelector","options","status","quantity","sort","b","localeCompare","Autocomplete","autoHighlight","freeSolo","getOptionLabel","groupBy","noOptionsText","onInputChange","renderInput","params","placeholder","required","renderOption","option","inputValue","matches","match","parts","parse","part","index","style","fontWeight","highlight","scores","onAdd","typeTitle","onExit","useTheme","fullScreen","useMediaQuery","down","handleSubmitAdd","Grade","maxWidth","amount","description","productId","cost","convertScore","score","conversions","total","totalPoints","nonZeroTotal","percent","floor","actions","balance","borderTop","fontStyle","textTransform","edit","backgroundColor","main","subtotal","typography","pxToRem","unit","AccountHeader","canEdit","doEdit","onEditClick","period","bonuses","purchases","Close","Edit","TransactionList","onDelete","onUpdate","setData","mapTransaction","createdAt","Date","toDateString","mappedData","mapped","bonus","mapScore","editable","defaultSort","render","rowData","columns","localization","emptyDataSourceMessage","editRow","deleteText","actionsColumnIndex","paging","toolbar","onRowUpdate","newData","oldData","resolve","reject","dataUpdate","tableData","onRowDelete","splice","setDoEdit","button","dialog","backgroundImage","background","backgroundPosition","backgroundSize","input","inputLabel","handleSubmit","Add","artist","InputLabelProps","marginLeft","paddingLeft","courseSongs","userSongs","mySongsOnly","setMySongsOnly","setColumns","lookup","approved","pending","pendingApproval","pendingRemoval","rejected","removed","renderType","statusDescription","InfoOutlined","purchasedBy","grid","FormControlLabel","control","Checkbox","checked","target","saveTooltip","isDeletable","isDeleteHidden","disableClose","Collapse","in","EconomySummaryTable","accounts","account","accountTotal","totals","assessmentTotal","assessments","bonusTotal","purchaseTotal","songTotal","grouping","boxShadow","minWidth","spinner","Spinner","CircularProgress","SlideUpTransition","React","forwardRef","ref","Slide","direction","white","margin","GridTile","elevation","overflow","Dashboard","reduce","prev","cur","length","economy","students","TransitionComponent","edge","AlertTitle","search","courses","setMappedData","flat","shadows","light","onSelect","tabIndex","StudentsTable","fullName","nRowsSelected","onSelectionChange","rows","selection","up","curStudent","isClosed","isOpen","setCourse","setStudents","filedrop","grey","borderRadius","flexDirection","outline","transition","filedropActive","contrastText","filedropReject","Filedrop","onFiledrop","onDrop","useCallback","acceptedFiles","forEach","file","reader","FileReader","onabort","console","log","onerror","onload","parsedFile","result","skip_empty_lines","readAsBinaryString","useDropzone","accept","multiple","onDropAccepted","getRootProps","getInputProps","isDragActive","isDragReject","ScoreImportStepper","onDataChange","onShowImport","setFile","tasks","setTasks","handleTaskChange","tasksSelected","some","el","FormControl","FormGroup","onImport","ready","setReady","importData","selected","usernames","pop","filter","parsed","taskName","find","row","endsWith","push","UpdateAccountsMenu","menuAnchorEl","setMenuAnchorEl","menuSelection","setMenuSelection","handleMenuSelect","currentTarget","dataset","handleDialogClose","Money","Menu","anchorEl","Boolean","MenuItem","data-type","ListItemIcon","Publish","ListItemText","importSummary","setStudent","plural","qty","tasksCreated","scoresImported","scoresUpdated","handleClickOpen","handleSubmitUpdate","Delete","PersonAdd","courseOut","courseIn","Loop","ds","select","borderBottomColor","rowHeader","studentUsername","StudentListRow","Chip","CourseStudentList","column","trim","element","minHeight","Assignment","courseDetails","courseHeader","coursePeriod","courseTitle","CourseList","expanded","setExpanded","ExpansionPanel","panel","isExpanded","ExpansionPanelSummary","expandIcon","ExpandMore","Avatar","ExpansionPanelDetails","importCount","pageLoaded","insufficient","error","sufficient","success","textAlign","count","badge","left","top","FabBadge","anchorOrigin","horizontal","vertical","badgeContent","overlap","removalAlert","border","dark","h6","songInfo","statusButton","studentInfo","borderTopColor","borderTopStyle","borderTopWidth","paddingTop","studentName","setCount","setSong","setStatus","setStatusDescription","skippedSongs","setSkippedSongs","totalCount","setTotalCount","getSongCount","songCount","startsWith","getNextSong","nextSong","includes","handleStatusButtonClick","handleStatusDescriptionChange","handleSubmitApproval","handleSubmitRemoval","purchaseAmount","refundAmount","removedBy","PlaylistAddCheck","ButtonGroup","href","getSpotifySearchUrl","ThumbUp","ThumbDown","RadioGroup","Radio","dataDelete","useGetInvoice","quantities","items","desc","imgUrl","photoUrl","max","maxPurchaseQuantity","onHand","price","sum","i","taxes","invoice","emptyCart","tableCellImg","handleQtyUpdate","hasOwnProperty","setInvoice","TableContainer","Table","TableHead","TableRow","TableCell","colSpan","TableBody","Select","maxOptions","getOptions","rowSpan","note","totalCost","totalItems","detailPanel","onRowClick","togglePanel","purchaseNote","setPurchase","setPurchaseNote","skippedPurchases","setSkippedPurchases","getPurchaseCount","handleSaveButtonClick","prevPurchaseId","nextPurchase","getNextPurchase","handleDeletePurchaseItemClick","handleUpdatePurchaseItemQuantity","onPageChange","onReset","teachers","teacher","teacherDetails","teacherHeader","teacherUsername","teacherName","TeacherList","header","paddingRight","img","maxHeight","window","borderColor","borderStyle","borderWidth","ImagePreview","TextFieldLimit","inputProps","maxLength","limit","helperText","addIcon","updateIcon","CHAR_LIMITS","as","actionIcon","opacity","h5","whiteSpace","tile","tileBar","paddingBottom","ProductsGallery","onAddToCart","onInventoryChange","cart","isSmall","isMedium","cols","handleInventoryChangeClick","GridList","maxQuantityReached","GridListTile","GridListTileBar","placement","subtitle","Remove","DeleteProductDialog","handleAddToCartClick","Badge","AddShoppingCart","DialogAppBar","cartIcon","getTotalItemsInCart","hasInsufficientFunds","showTitle","onUpdateInventory","isTeacher","inStockProducts","outOfStockProducts","handleInventoryChange","StudentAccount","StudentSongs","TeacherAccounts","TeacherCourses","TeacherSongs","ManagePurchases","ManageTeachers","flexFlow","overflowY","Loading","page","profile","float","About","Link","auth","submitForm","aboutLink","right","loginLink","textDecoration","progress","AboutLink","LoginLink","startIcon","ArrowBackIos","LinearProgress","Notification","enqueueSnackbar","useSnackbar","notifier","onSnackbarClose","notistackRef","createRef","onSnackbarDismiss","closeSnackbar","maxSnack","NewDate","date","NewItem","StudentWhatsNewContent","TeacherWhatsNewContent","subtype","defaultState","appName","viewChangeCounter","appLoaded","spotifyTokens","undefined","sortByLastName","sortByPeriod","courseCopy","toString","updatedUser","sortByCost","productIndex","findIndex","isAdded","updatedQuantity","withoutDeleted","getTotals","sumTransactions","addScores","added","curUser","curUserId","usersAdded","unionBy","addTransaction","addBulkTransaction","deleteTransaction","deleted","updateTransaction","updated","addedTransactions","addedBulkTransactions","deletedTransactions","addedScores","results","updatedTransactions","spotifyAuthUrl","songsByUser","songsByCourse","promiseMiddleware","next","v","currentView","getState","skipTracking","currentState","promise","response","localStorageMiddleware","localStorage","setItem","history","createBrowserHistory","myRouterMiddleware","routerMiddleware","createStore","combineReducers","connectRouter","composeWithDevTools","applyMiddleware","onRedirect","getItem","ThemeProvider","CssBaseline","fallback","Login","Home","ReactDOM","App","document","getElementById"],"mappings":"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","file":"static/js/main.e9efca5b.chunk.js","sourcesContent":["import superagentPromise from 'superagent-promise'\nimport _superagent from 'superagent'\n\nconst superagent = superagentPromise(_superagent, global.Promise)\n\nconst API_ROOT =\n  process.env.NODE_ENV === 'production'\n    ? 'https://chem-cash.herokuapp.com/api'\n    : 'http://localhost:4000/api'\n\nconst encode = encodeURIComponent\nconst responseBody = (res) => res.body\n\nlet token = null\nlet tokenPlugin = (req) => {\n  if (token) {\n    req.set('authorization', `Token ${token}`)\n  }\n}\n\nconst requests = {\n  // @todo update superagent-promise from v1.1.0 when available\n  // superagent-promise does not allow for body to pass, so it has been manually added to the package file\n  // This is a known issue, see: https://github.com/lightsofapollo/superagent-promise/issues/28\n  del: (url, body) =>\n    superagent\n      .del(`${API_ROOT}${url}`, body)\n      .use(tokenPlugin)\n      .then(responseBody),\n  get: (url) =>\n    superagent.get(`${API_ROOT}${url}`).use(tokenPlugin).then(responseBody),\n  post: (url, body) =>\n    superagent\n      .post(`${API_ROOT}${url}`, body)\n      .use(tokenPlugin)\n      .then(responseBody),\n  put: (url, body) =>\n    superagent\n      .put(`${API_ROOT}${url}`, body)\n      .use(tokenPlugin)\n      .then(responseBody),\n}\n\nconst Auth = {\n  current: () => requests.get('/user'),\n  login: (username, password) =>\n    requests.post('/users/login', { user: { username, password } }),\n  register: (user) => requests.post('/users', { user }),\n  save: (user) => requests.put('/user', { user }),\n}\n\nconst Courses = {\n  add: (course) => requests.post('/courses', { course }),\n  delete: (slug) => requests.del(`/courses/${slug}`),\n  enroll: (course) =>\n    requests.post(`/courses/${course.slug}/enroll`, { course }),\n  getAll: () => requests.get('/courses'),\n  unenroll: (course) =>\n    requests.del(`/courses/${course.slug}/enroll`, { course }),\n  update: (course) => requests.put(`/courses/${course.slug}`, { course }),\n}\n\nconst Products = {\n  add: (product) => requests.post('/products', { product }),\n  delete: (slug) => requests.del(`/products/${slug}`),\n  getAll: () => requests.get('/products'),\n  update: (product) => requests.put(`/products/${product.slug}`, { product }),\n}\n\nconst Purchases = {\n  add: (purchase) => requests.post('/purchases', { purchase }),\n  delete: (id) => requests.del(`/purchases/${id}`),\n  forStudent: () => requests.get('/purchases/student'),\n  forTeacher: () => requests.get('/purchases/teacher'),\n  update: (purchase) => requests.put(`/purchases/${purchase.id}`, { purchase }),\n}\n\nconst Scores = {\n  getAll: () => requests.get('/scores/all'),\n  getStudentScores: (username) => requests.get(`/scores?username=${username}`),\n  import: (data) => requests.post('/scores/import', { data }),\n}\n\nconst Settings = {\n  // get: () => requests.get('/user/settings'),\n  update: (settings) => requests.put('/user/settings', { settings }),\n}\n\nconst Songs = {\n  delete: (id) => requests.del(`/songs/${id}`),\n  forStudent: () => requests.get('/songs/student'),\n  forTeacher: () => requests.get('/songs/teacher'),\n  request: (song) => requests.post('/songs', { song }),\n  update: (song) => requests.put(`/songs/${song.id}`, { song }),\n}\n\nconst Spotify = {\n  getAuthUrl: () => requests.get('/spotify/auth'),\n  removeAuth: () => requests.del('/spotify/auth'),\n}\n\nconst Students = {\n  add: (user, courseId) =>\n    requests.post(`/users?courseId=${encode(courseId)}`, { user }),\n  delete: (user) => requests.del(`/users/student/${user.username}`),\n  import: (users, courseId) =>\n    requests.post(`/users/import?courseId=${encode(courseId)}`, { users }),\n  update: (user) => requests.put(`/users/${user.username}`, { user }),\n}\n\nconst Tasks = {\n  getAll: (courseId) => requests.get(`/tasks?courseId=${courseId}`),\n  delete: (task) => requests.del(`/tasks/${task.slug}`),\n  update: (task) => requests.put(`/tasks/${task.slug}`, { task }),\n}\n\nconst Teachers = {\n  getAll: () => requests.get('/users?role=teacher'),\n  delete: (user) => requests.del(`/users/teacher/${user.username}`),\n  resetFlags: (role) => requests.put(`/users/reset?role=${role}`),\n  update: (user) => requests.put(`/users/${user.username}`, { user }),\n}\n\nconst Transactions = {\n  add: (transaction) => requests.post('/transactions', { transaction }),\n  addMany: (transactions) =>\n    requests.post('/transactions/bulk', { transactions }),\n  delete: (transaction) => requests.del(`/transactions/${transaction._id}`),\n  update: (transaction) =>\n    requests.put(`/transactions/${transaction._id}`, { transaction }),\n}\n\nexport default {\n  Auth,\n  Courses,\n  Products,\n  Purchases,\n  Scores,\n  Settings,\n  Songs,\n  Spotify,\n  Students,\n  Tasks,\n  Teachers,\n  Transactions,\n  setToken: (_token) => {\n    token = _token\n  },\n}\n","module.exports = __webpack_public_path__ + \"static/media/chemistry-background.11d1d297.jpg\";","module.exports = __webpack_public_path__ + \"static/media/chem-cash-logo.30174016.png\";","module.exports = __webpack_public_path__ + \"static/media/songs-background.cfcd4ce6.jpg\";","module.exports = __webpack_public_path__ + \"static/media/doc-may-profile.f927335d.jpg\";","import { createMuiTheme } from '@material-ui/core/styles'\nimport lightGreen from '@material-ui/core/colors/lightGreen'\nimport amber from '@material-ui/core/colors/amber'\n\nconst ChemCashTheme = createMuiTheme({\n  breakpoints: {\n    values: {\n      md: 768,\n      lg: 1024,\n    },\n  },\n  palette: {\n    primary: lightGreen,\n    secondary: amber,\n  },\n  overrides: {\n    MuiDialogActions: {\n      root: {\n        padding: '16px 24px',\n      },\n    },\n  },\n})\n\nexport default ChemCashTheme\n","import React from 'react'\nimport logo from '../images/chem-cash-logo.png'\n\nconst Logo = (props) => {\n  return <img alt='Chem Cash Logo' src={logo} {...props} />\n}\n\nexport default Logo\n","export const APP_LOAD = 'APP_LOAD'\nexport const REDIRECT = 'REDIRECT'\n\nexport const ASYNC_START = 'ASYNC_START'\nexport const ASYNC_END = 'ASYNC_END'\n\nexport const LOGIN = 'LOGIN'\nexport const LOGIN_PAGE_UNLOADED = 'LOGIN_PAGE_UNLOADED'\nexport const LOGOUT = 'LOGOUT'\n\nexport const REGISTER = 'REGISTER'\nexport const REGISTER_PAGE_UNLOADED = 'REGISTER_PAGE_UNLOADED'\n\nexport const SETTINGS_PAGE_UNLOADED = 'SETTINGS_PAGE_UNLOADED'\nexport const SETTINGS_SAVED = 'SETTINGS_SAVED'\n\nexport const NAV_LOADED = 'NAV_LOADED'\nexport const NAV_UNLOADED = 'NAV_UNLOADED'\nexport const NAV_TAB_CHANGE = 'NAV_TAB_CHANGE'\n\nexport const ALERT_CLOSED = 'ALERT_CLOSED'\nexport const SNACKBAR_CLOSED = 'SNACKBAR_CLOSED'\n\nexport const DELETE_SONG_REQUEST = 'DELETE_SONG_REQUEST'\nexport const SONG_REQUESTS_DIALOG_UNLOADED = 'SONG_REQUESTS_DIALOG_UNLOADED'\nexport const SONGS_PAGE_UNLOADED = 'SONGS_PAGE_UNLOADED'\nexport const STUDENT_SONGS_PAGE_LOADED = 'STUDENT_SONGS_PAGE_LOADED'\nexport const SUBMIT_SONG_REQUEST = 'SUBMIT_SONG_REQUEST'\nexport const SUBMIT_SONG_REMOVAL_REQUEST = 'SUBMIT_SONG_REMOVAL_REQUEST'\nexport const TEACHER_SONGS_PAGE_LOADED = 'TEACHER_SONGS_PAGE_LOADED'\nexport const UPDATE_SONG_REQUEST = 'UPDATE_SONG_REQUEST'\n\nexport const ADD_COURSE = 'ADD_COURSE'\nexport const COURSE_DIALOG_UNLOADED = 'COURSE_DIALOG_UNLOADED'\nexport const COURSES_PAGE_LOADED = 'COURSES_PAGE_LOADED'\nexport const COURSES_PAGE_UNLOADED = 'COURSES_PAGE_UNLOADED'\nexport const DELETE_COURSE = 'DELETE_COURSE'\nexport const UPDATE_COURSE = 'UPDATE_COURSE'\n\nexport const ADD_STUDENT = 'ADD_STUDENT'\nexport const DELETE_STUDENT = 'DELETE_STUDENT'\nexport const IMPORT_STUDENTS = 'IMPORT_STUDENTS'\nexport const MOVE_STUDENT = 'MOVE_STUDENT'\nexport const RESET_STUDENT_PASSWORD = 'RESET_STUDENT_PASSWORD'\nexport const STUDENT_DIALOG_UNLOADED = 'STUDENT_DIALOG_UNLOADED'\nexport const UPDATE_STUDENT = 'UPDATE_STUDENT'\n\nexport const ADD_TEACHER = 'ADD_TEACHER'\nexport const DELETE_TEACHER = 'DELETE_TEACHER'\nexport const MANAGE_TEACHERS_PAGE_LOADED = 'MANAGE_TEACHERS_PAGE_LOADED'\nexport const MANAGE_TEACHERS_PAGE_UNLOADED = 'MANAGE_TEACHERS_PAGE_UNLOADED'\nexport const TEACHER_DIALOG_UNLOADED = 'TEACHER_DIALOG_UNLOADED'\nexport const UPDATE_TEACHER = 'UPDATE_TEACHER'\n\nexport const SPOTIFY_REMOVE_AUTH = 'SPOTIFY_REMOVE_AUTH'\nexport const SPOTIFY_LINKER_LOADED = 'SPOTIFY_LINKER_LOADED'\nexport const SPOTIFY_LINKER_UNLOADED = 'SPOTIFY_LINKER_UNLOADED'\n\nexport const IMPORT_SCORES = 'IMPORT_SCORES'\nexport const IMPORT_SCORES_DIALOG_UNLOADED = 'IMPORT_SCORES_DIALOG_UNLOADED'\n\nexport const DELETE_TASK = 'DELETE_TASK'\nexport const TASKS_DIALOG_LOADED = 'TASKS_DIALOG_LOADED'\nexport const TASKS_DIALOG_UNLOADED = 'TASKS_DIALOG_UNLOADED'\nexport const UPDATE_TASK = 'UPDATE_TASK'\n\nexport const ACCOUNT_BALANCE_LOADED = 'ACCOUNT_BALANCE_LOADED'\nexport const ACCOUNT_BALANCE_UNLOADED = 'ACCOUNT_BALANCE_UNLOADED'\nexport const ACCOUNT_VIEW_LOADED = 'ACCOUNT_VIEW_LOADED'\nexport const ACCOUNT_VIEW_UNLOADED = 'ACCOUNT_VIEW_UNLOADED'\nexport const ACCOUNTS_PAGE_UNLOADED = 'ACCOUNTS_PAGE_UNLOADED'\nexport const ADD_TRANSACTION = 'ADD_TRANSACTION'\nexport const ADD_TRANSACTIONS = 'ADD_TRANSACTIONS'\nexport const DELETE_TRANSACTION = 'DELETE_TRANSACTION'\nexport const UPDATE_TRANSACTION = 'UPDATE_TRANSACTION'\nexport const TRANSACTION_DIALOG_UNLOADED = 'TRANSACTION_DIALOG_UNLOADED'\nexport const TRANSACTIONS_DIALOG_UNLOADED = 'TRANSACTIONS_DIALOG_UNLOADED'\n\nexport const STUDENT_SEARCH_LOADED = 'STUDENT_SEARCH_LOADED'\nexport const STUDENT_SEARCH_UNLOADED = 'STUDENT_SEARCH_UNLOADED'\n\nexport const PRODUCTS_PAGE_LOADED = 'PRODUCTS_PAGE_LOADED'\nexport const PRODUCTS_PAGE_UNLOADED = 'PRODUCTS_PAGE_UNLOADED'\nexport const PRODUCT_DIALOG_UNLOADED = 'PRODUCT_DIALOG_UNLOADED'\nexport const ADD_PRODUCT = 'ADD_PRODUCT'\nexport const DELETE_PRODUCT = 'DELETE_PRODUCT'\nexport const UPDATE_PRODUCT = 'UPDATE_PRODUCT'\n\nexport const WHATS_NEW_DIALOG_LOADED = 'WHATS_NEW_DIALOG_LOADED'\nexport const WHATS_NEW_DIALOG_UNLOADED = 'WHATS_NEW_DIALOG_UNLOADED'\nexport const WHATS_NEW_FLAGS_RESET = 'WHATS_NEW_FLAGS_RESET'\n\nexport const ECONOMY_DIALOG_LOADED = 'ECONOMY_DIALOG_LOADED'\nexport const ECONOMY_DIALOG_UNLOADED = 'ECONOMY_DIALOG_UNLOADED'\n\nexport const ADD_TO_CART = 'ADD_TO_CART'\nexport const DELETE_CART_PRODUCT = 'DELETE_CART_PRODUCT'\nexport const DELETE_PURCHASE = 'DELETE_PURCHASE'\nexport const PURCHASES_DIALOG_UNLOADED = 'PURCHASES_DIALOG_UNLOADED'\nexport const STUDENT_CART_LOADED = 'STUDENT_CART_LOADED'\nexport const STUDENT_CART_UNLOADED = 'STUDENT_CART_UNLOADED'\nexport const STUDENT_DELETE_PURCHASE = 'STUDENT_DELETE_PURCHASE'\nexport const STUDENT_PURCHASES_LOADED = 'STUDENT_PURCHASES_LOADED'\nexport const STUDENT_PURCHASES_UNLOADED = 'STUDENT_PURCHASES_UNLOADED'\nexport const SUBMIT_PURCHASE = 'SUBMIT_PURCHASE'\nexport const TEACHER_PURCHASES_LOADED = 'TEACHER_PURCHASES_LOADED'\nexport const TEACHER_PURCHASES_UNLOADED = 'TEACHER_PURCHASES_UNLOADED'\nexport const UPDATE_CART_PRODUCT_QUANTITY = 'UPDATE_CART_PRODUCT_QUANTITY'\nexport const UPDATE_PURCHASE = 'UPDATE_PURCHASE'\n// export const X = 'X'\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport {\n  AppBar,\n  Button,\n  Container,\n  Toolbar,\n  Typography,\n  makeStyles,\n} from '@material-ui/core'\n\nimport Logo from '../components/Logo'\n\nimport { LOGOUT } from '../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  title: {\n    color: 'white',\n    flexGrow: 1,\n  },\n  logo: {\n    height: 65,\n    marginTop: theme.spacing(2),\n    marginRight: theme.spacing(3),\n    marginBottom: theme.spacing(2),\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  navTabValue: state.nav.navTabValue,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onClickLogout: () => dispatch({ type: LOGOUT }),\n})\n\nconst Header = (props) => {\n  const classes = useStyles()\n  const title = props.navTabValue\n\n  if (props.currentUser) {\n    return (\n      <AppBar position='static'>\n        <Container>\n          <Toolbar>\n            <Logo className={classes.logo} />\n            <Typography variant='h5' align='center' className={classes.title}>\n              {title && title.charAt(0).toUpperCase() + title.slice(1)}\n            </Typography>\n            <Button color='inherit' onClick={props.onClickLogout}>\n              Logout\n            </Button>\n          </Toolbar>\n        </Container>\n      </AppBar>\n    )\n  } else {\n    return null\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Header)\n","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  BottomNavigation,\n  BottomNavigationAction,\n  makeStyles,\n} from '@material-ui/core'\nimport {\n  LocalAtm,\n  People,\n  QueueMusic,\n  Settings,\n  Store,\n  SupervisorAccount,\n} from '@material-ui/icons'\n\nimport {\n  NAV_TAB_CHANGE,\n  NAV_LOADED,\n  NAV_UNLOADED,\n} from '../constants/actionTypes'\n\nconst useStyles = makeStyles({\n  nav: {\n    position: 'fixed',\n    bottom: 0,\n    width: '100%',\n    zIndex: '1000',\n  },\n})\n\nconst mapStateToProps = (state) => ({\n  currentUser: state.common.currentUser,\n  navTabValue: state.nav.navTabValue,\n  path: state.router.location.pathname,\n  settings: state.common.settings,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onLoad: (tabValue, redirectTo) =>\n    dispatch({ type: NAV_LOADED, value: tabValue, redirectTo: redirectTo }),\n  onTabChange: (tabValue, redirectTo) =>\n    dispatch({ type: NAV_TAB_CHANGE, value: tabValue, redirectTo: redirectTo }),\n  onUnload: () => dispatch({ type: NAV_UNLOADED }),\n})\n\nconst Navigation = (props) => {\n  const classes = useStyles()\n  const userRole = props.currentUser.role\n  const enabled = {\n    beta: props.settings.enableBetaFeatures, // @beta\n    products: props.settings.productsEnabled,\n    songs: props.settings.songRequestEnabled,\n    store: props.settings.storeEnabled,\n  }\n\n  const handleTabChange = (tabValue) => {\n    props.onTabChange(tabValue, `/${userRole}/${tabValue}`)\n  }\n\n  useEffect(() => {\n    const tabFromPath = props.path.split('/')[2]\n    const tabValue =\n      tabFromPath ??\n      (userRole === 'student'\n        ? 'account'\n        : userRole === 'admin'\n        ? 'teachers'\n        : 'accounts')\n    const redirectTo = `/${userRole}/${tabValue}`\n    if (enabled.store && enabled.beta && tabValue === 'products') {\n      // @beta (may still need to keep this loop to set active the 'store' tab when loading the products page)\n      props.onLoad('store', redirectTo)\n    } else {\n      props.onLoad(tabValue, redirectTo)\n    }\n\n    return () => {\n      props.onUnload()\n    }\n  }, [])\n\n  if (userRole === 'student') {\n    return (\n      <BottomNavigation\n        className={classes.nav}\n        onChange={(event, newValue) => handleTabChange(newValue)}\n        showLabels\n        value={props.navTabValue}\n      >\n        <BottomNavigationAction\n          label='Account'\n          icon={<LocalAtm />}\n          value='account'\n        />\n        {enabled.songs && (\n          <BottomNavigationAction\n            label='Songs'\n            icon={<QueueMusic />}\n            value='songs'\n          />\n        )}\n        {(enabled.products || enabled.store) && (\n          <BottomNavigationAction\n            label={enabled.store && enabled.beta ? 'Store' : 'Products'} // @beta\n            icon={<Store />}\n            value='store'\n          />\n        )}\n        <BottomNavigationAction\n          label='Settings'\n          icon={<Settings />}\n          value='settings'\n        />\n      </BottomNavigation>\n    )\n  }\n\n  if (userRole === 'admin') {\n    return (\n      <BottomNavigation\n        className={classes.nav}\n        onChange={(event, newValue) => handleTabChange(newValue)}\n        showLabels\n        value={props.navTabValue}\n      >\n        <BottomNavigationAction\n          label='Teachers'\n          icon={<SupervisorAccount />}\n          value='teachers'\n        />\n        <BottomNavigationAction\n          label='Settings'\n          icon={<Settings />}\n          value='settings'\n        />\n      </BottomNavigation>\n    )\n  }\n\n  return (\n    <BottomNavigation\n      className={classes.nav}\n      onChange={(event, newValue) => handleTabChange(newValue)}\n      showLabels\n      value={props.navTabValue}\n    >\n      <BottomNavigationAction\n        label='Accounts'\n        icon={<LocalAtm />}\n        value='accounts'\n      />\n      {enabled.songs && (\n        <BottomNavigationAction\n          label='Songs'\n          icon={<QueueMusic />}\n          value='songs'\n        />\n      )}\n      {(enabled.products || enabled.store) && (\n        <BottomNavigationAction\n          label={enabled.store && enabled.beta ? 'Store' : 'Products'} // @beta\n          icon={<Store />}\n          value={enabled.store && enabled.beta ? 'store' : 'products'} // @beta\n        />\n      )}\n      <BottomNavigationAction\n        label='Courses'\n        icon={<People />}\n        value='courses'\n      />\n      <BottomNavigationAction\n        label='Settings'\n        icon={<Settings />}\n        value='settings'\n      />\n    </BottomNavigation>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Navigation)\n","import React from 'react'\nimport { makeStyles } from '@material-ui/core/styles'\n\nconst useStyles = makeStyles((theme) => ({\n  wrapper: {\n    marginTop: theme.spacing(4),\n    marginBottom: theme.spacing(11),\n  },\n}))\n\nconst PageWrapper = (props) => {\n  const classes = useStyles()\n\n  return <div className={classes.wrapper}>{props.children}</div>\n}\n\nexport default PageWrapper\n","import React from 'react'\nimport { Container, Typography } from '@material-ui/core'\nimport PageWrapper from './PageWrapper'\n\nconst NotFound = (props) => {\n  return (\n    <PageWrapper>\n      <Container>\n        <Typography variant='h2'>Error 404: Page Not Found</Typography>\n      </Container>\n    </PageWrapper>\n  )\n}\n\nexport default NotFound\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Route, Redirect } from 'react-router-dom'\n\nconst mapStateToProps = (state) => ({ currentUser: state.common.currentUser })\n\nconst ProtectedRoute = (props) => {\n  if (!props.currentUser) {\n    return <Redirect to='/' />\n  }\n\n  return <Route exact path={props.path} component={props.component} />\n}\n\nexport default connect(mapStateToProps, () => ({}))(ProtectedRoute)\n","import React, { useEffect } from 'react'\nimport { Field, useField, useFormikContext } from 'formik'\nimport { Switch } from 'formik-material-ui'\n\n// @todo: this component throws an unresolved warning: 'Warning: property type=checkbox is missing from field productsEnabled, this can caused unexpected behaviour'\nconst ControlledSwitch = ({ controlledBy, disabled, label, name }) => {\n  const { values, setFieldValue } = useFormikContext()\n  const [field] = useField({ name, type: 'checkbox' })\n\n  useEffect(() => {\n    if (values[controlledBy] === true) {\n      setFieldValue(name, true)\n    }\n  }, [values[controlledBy], setFieldValue, name])\n\n  return (\n    <Field component={Switch} disabled={disabled} label={label} {...field} />\n  )\n}\n\nexport default ControlledSwitch\n","import React from 'react'\nimport { makeStyles } from '@material-ui/core/styles'\nimport Alert from '@material-ui/lab/Alert'\n\nconst useStyles = makeStyles((theme) => ({\n  alert: {\n    'width': '100%',\n    '&:not(:last-of-type)': {\n      marginBottom: theme.spacing(1),\n    },\n  },\n  alertList: {\n    marginBottom: theme.spacing(2),\n  },\n}))\n\nconst ListErrors = ({ errors }) => {\n  const classes = useStyles()\n\n  if (errors) {\n    return (\n      <div className={classes.alertList}>\n        {Object.keys(errors).map((key) => {\n          const readableKey = key\n            .replace(/([a-z0-9])([A-Z])/g, '$1 $2')\n            .toLowerCase()\n          return (\n            <Alert className={classes.alert} severity='error' key={key}>\n              {readableKey} {errors[key]}\n            </Alert>\n          )\n        })}\n      </div>\n    )\n  }\n\n  return null\n}\n\nexport default ListErrors\n","import React from 'react'\nimport { Grid, Typography, makeStyles } from '@material-ui/core'\n\nconst useStyles = makeStyles((theme) => ({\n  headerLeft: {\n    alignItems: 'center',\n    display: 'flex',\n  },\n  headerRight: {\n    alignItems: 'center',\n    display: 'flex',\n    justifyContent: 'flex-end',\n  },\n  pageHeader: {\n    'marginBottom': theme.spacing(4),\n    '& button:not(:last-of-type)': { marginRight: theme.spacing(2) },\n  },\n}))\n\nconst PageHeader = ({ children, title }) => {\n  const classes = useStyles()\n\n  return (\n    <Grid container spacing={2} className={classes.pageHeader}>\n      <Grid item xs={12} md={6} className={classes.headerLeft}>\n        <Typography variant='h4'>{title}</Typography>\n      </Grid>\n      <Grid item xs={12} md={6} className={classes.headerRight}>\n        {children}\n      </Grid>\n    </Grid>\n  )\n}\n\nexport default PageHeader\n","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Form, Field } from 'formik'\nimport { Switch, TextField } from 'formik-material-ui'\nimport * as Yup from 'yup'\nimport {\n  Button,\n  Fab,\n  Grid,\n  Paper,\n  Typography,\n  makeStyles,\n} from '@material-ui/core'\nimport { SaveAlt } from '@material-ui/icons'\n\nimport ControlledSwitch from './ControlledSwitch'\nimport ListErrors from './ListErrors'\nimport PageHeader from './PageHeader'\n// import SpotifyLinker from './Teacher/SpotifyLinker'\nimport agent from '../agent'\n\nimport {\n  SETTINGS_PAGE_UNLOADED,\n  SETTINGS_SAVED,\n  WHATS_NEW_DIALOG_LOADED,\n} from '../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  icon: {\n    marginRight: theme.spacing(1),\n  },\n  paper: {\n    padding: theme.spacing(2),\n    marginBottom: theme.spacing(4),\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.settings,\n  currentUser: state.common.currentUser,\n  settings: state.common.settings,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onSubmitForm: (settings) =>\n    dispatch({\n      type: SETTINGS_SAVED,\n      payload: Promise.all([\n        agent.Auth.save(settings),\n        agent.Settings.update(settings),\n      ]),\n      snackbar: { message: 'Settings saved', variant: 'success' },\n    }),\n  onUnload: () => dispatch({ type: SETTINGS_PAGE_UNLOADED }),\n  onWhatsNewClick: () =>\n    dispatch({\n      type: WHATS_NEW_DIALOG_LOADED,\n      payload: agent.Auth.save({ viewedChanges: false }),\n    }),\n})\n\nconst Settings = ({\n  currentUser,\n  errors,\n  inProgress,\n  onSubmitForm,\n  onUnload,\n  onWhatsNewClick,\n  settings,\n}) => {\n  const classes = useStyles()\n\n  useEffect(() => {\n    return () => {\n      onUnload()\n    }\n  }, [])\n\n  return (\n    <Formik\n      enableReinitialize={true}\n      initialValues={{\n        allowPurchasesWithInsufficientFunds:\n          settings?.allowPurchasesWithInsufficientFunds || false,\n        defaultStudentPassword: settings?.defaultStudentPassword || '',\n        enableBetaFeatures: settings?.enableBetaFeatures || false,\n        firstName: currentUser.firstName,\n        lastName: currentUser.lastName,\n        password: '',\n        productsEnabled: settings?.productsEnabled || false,\n        score100: settings?.scoreConverter?.[100] || 1200,\n        score90: settings?.scoreConverter?.[90] || 1000,\n        score80: settings?.scoreConverter?.[80] || 800,\n        score70: settings?.scoreConverter?.[70] || 600,\n        score60: settings?.scoreConverter?.[60] || 0,\n        score50: settings?.scoreConverter?.[50] || 0,\n        songRemovalPurchaseAmount: settings?.songRemovalPurchaseAmount || 0,\n        songRemovalRequestEnabled: settings?.songRemovalRequestEnabled || false,\n        songRemovalRefundAmount: settings?.songRemovalRefundAmount || 0,\n        songRequestEnabled: settings?.songRequestEnabled || false,\n        songRequestPurchaseAmount: settings?.songRequestPurchaseAmount || 0,\n        storeEnabled: settings?.storeEnabled || false,\n        taxRate: settings?.taxRate || 0,\n      }}\n      validationSchema={Yup.object({\n        allowPurchasesWithInsufficientFunds: Yup.boolean(),\n        defaultStudentPassword: Yup.string(),\n        enableBetaFeatures: Yup.boolean(),\n        firstName: Yup.string(),\n        lastName: Yup.string(),\n        password: Yup.string(),\n        productsEnabled: Yup.boolean(),\n        score100: Yup.number().typeError('Numbers only'),\n        score90: Yup.number().typeError('Numbers only'),\n        score80: Yup.number().typeError('Numbers only'),\n        score70: Yup.number().typeError('Numbers only'),\n        score60: Yup.number().typeError('Numbers only'),\n        score50: Yup.number().typeError('Numbers only'),\n        songRemovalPurchaseAmount: Yup.number().typeError('Numbers only'),\n        songRemovalRequestEnabled: Yup.boolean(),\n        songRemovalRefundAmount: Yup.number().typeError('Numbers only'),\n        songRequestEnabled: Yup.boolean(),\n        songRequestPurchaseAmount: Yup.number().typeError('Numbers only'),\n        storeEnabled: Yup.boolean(),\n        taxRate: Yup.number().typeError('Numbers only'),\n      })}\n      onSubmit={async (values, form) => {\n        const userSettings = { ...values }\n\n        if (!userSettings.password && currentUser.role !== 'student')\n          delete userSettings.password\n\n        if (currentUser.role !== 'student')\n          userSettings.scoreConverter = {\n            100: values.score100,\n            90: values.score90,\n            80: values.score80,\n            70: values.score70,\n            60: values.score60,\n            50: values.score50,\n            40: 0,\n            30: 0,\n            20: 0,\n            10: 0,\n            0: 0,\n          }\n\n        onSubmitForm(userSettings)\n\n        form.resetForm({\n          values: { ...userSettings, password: '' },\n        })\n      }}\n    >\n      {(formik) => (\n        <Form>\n          <PageHeader title='Manage Account'>\n            <Button onClick={onWhatsNewClick} size='small'>\n              See What's New\n            </Button>\n            <Fab\n              color='primary'\n              disabled={inProgress}\n              type='sumbit'\n              variant='extended'\n            >\n              <SaveAlt className={classes.icon} />\n              {inProgress ? 'Saving...' : 'Save settings'}\n            </Fab>\n          </PageHeader>\n          <ListErrors errors={errors} />\n\n          {currentUser.role === 'teacher' && (\n            <Paper className={classes.paper}>\n              <Grid container spacing={2}>\n                <Grid item xs={12}>\n                  <Typography variant='h5' gutterBottom>\n                    Song Requests\n                  </Typography>\n                </Grid>\n                <Grid item xs={12} md={4}>\n                  <label>\n                    <Field\n                      component={Switch}\n                      label='Allow song requests'\n                      name='songRequestEnabled'\n                      type='checkbox'\n                    />\n                    Allow song requests\n                  </label>\n                </Grid>\n                <Grid item xs={12} md={4}>\n                  <Field\n                    component={TextField}\n                    label='Song request purchase amount'\n                    name='songRequestPurchaseAmount'\n                    type='number'\n                    variant='outlined'\n                    fullWidth\n                  />\n                </Grid>\n                <Grid item xs={12}>\n                  <Typography variant='h6' gutterBottom>\n                    Song Removal Requests\n                  </Typography>\n                </Grid>\n                <Grid item xs={12} md={4}>\n                  <label>\n                    <Field\n                      component={Switch}\n                      label='Allow students to request song removals'\n                      name='songRemovalRequestEnabled'\n                      type='checkbox'\n                    />\n                    Allow song removal requests\n                  </label>\n                </Grid>\n                <Grid item xs={12} md={4}>\n                  <Field\n                    component={TextField}\n                    label='Song removal purchase amount'\n                    name='songRemovalPurchaseAmount'\n                    type='number'\n                    variant='outlined'\n                    fullWidth\n                  />\n                </Grid>\n                <Grid item xs={12} md={4}>\n                  <Field\n                    component={TextField}\n                    label='Song removal refund amount'\n                    name='songRemovalRefundAmount'\n                    type='number'\n                    variant='outlined'\n                    fullWidth\n                  />\n                </Grid>\n                {/* <Grid item xs={12} md={6}>\n                <SpotifyLinker />\n              </Grid> */}\n              </Grid>\n            </Paper>\n          )}\n\n          {currentUser.role === 'teacher' && (\n            <Paper className={classes.paper}>\n              <Grid container spacing={2}>\n                <Grid item xs={12}>\n                  <Typography variant='h5' gutterBottom>\n                    {formik.values.enableBetaFeatures\n                      ? 'Products and Online Purchases'\n                      : 'Products'}\n                  </Typography>\n                </Grid>\n                {formik.values.enableBetaFeatures ? (\n                  <>\n                    <Grid item xs={12} md={6}>\n                      <label>\n                        <Field\n                          component={Switch}\n                          label='Enable online purchases'\n                          name='storeEnabled'\n                          type='checkbox'\n                        />\n                        Allow online purchases\n                      </label>\n                    </Grid>\n                    <Grid item xs={12} md={4}>\n                      <Field\n                        component={TextField}\n                        label='Tax rate'\n                        name='taxRate'\n                        type='number'\n                        variant='outlined'\n                        fullWidth\n                      />\n                    </Grid>\n                    <Grid item xs={12} md={6}>\n                      <label>\n                        <ControlledSwitch\n                          controlledBy={'storeEnabled'}\n                          disabled={formik.values.storeEnabled}\n                          label='Display the Products page'\n                          name='productsEnabled'\n                        />\n                        Display the Products page\n                        {formik.values.storeEnabled && (\n                          <em> (required for purchases)</em>\n                        )}\n                      </label>\n                    </Grid>\n                    <Grid item xs={12} md={6}>\n                      <label>\n                        <Field\n                          component={Switch}\n                          label='Allow purchases with insufficient funds'\n                          name='allowPurchasesWithInsufficientFunds'\n                          type='checkbox'\n                        />\n                        Allow purchases with insufficient funds\n                      </label>\n                    </Grid>\n                  </>\n                ) : (\n                  <Grid item xs={12} md={6}>\n                    <label>\n                      <Field\n                        component={Switch}\n                        label='Display the products page'\n                        name='productsEnabled'\n                        type='checkbox'\n                      />\n                      Display the Products page\n                    </label>\n                  </Grid>\n                )}\n              </Grid>\n            </Paper>\n          )}\n\n          {currentUser.role === 'teacher' && (\n            <Paper className={classes.paper}>\n              <Grid container spacing={2}>\n                <Grid item xs={12}>\n                  <Typography variant='h5' gutterBottom>\n                    Student Accounts\n                  </Typography>\n                </Grid>\n                <Grid item xs={12} md={6}>\n                  <Field\n                    component={TextField}\n                    label='Default student password'\n                    name='defaultStudentPassword'\n                    type='text'\n                    variant='outlined'\n                    fullWidth\n                  />\n                </Grid>\n              </Grid>\n            </Paper>\n          )}\n\n          {currentUser.role === 'teacher' && (\n            <Paper className={classes.paper}>\n              <Grid container spacing={2}>\n                <Grid item xs={12}>\n                  <Typography variant='h5' gutterBottom>\n                    Score Conversions\n                  </Typography>\n                </Grid>\n                <Grid item xs={12} md={2}>\n                  <Field\n                    component={TextField}\n                    label='100% and up'\n                    name='score100'\n                    type='number'\n                    variant='outlined'\n                    fullWidth\n                  />\n                </Grid>\n                <Grid item xs={12} md={2}>\n                  <Field\n                    component={TextField}\n                    label='90% and up'\n                    name='score90'\n                    type='number'\n                    variant='outlined'\n                    fullWidth\n                  />\n                </Grid>\n                <Grid item xs={12} md={2}>\n                  <Field\n                    component={TextField}\n                    label='80% and up'\n                    name='score80'\n                    type='number'\n                    variant='outlined'\n                    fullWidth\n                  />\n                </Grid>\n                <Grid item xs={12} md={2}>\n                  <Field\n                    component={TextField}\n                    label='70% and up'\n                    name='score70'\n                    type='number'\n                    variant='outlined'\n                    fullWidth\n                  />\n                </Grid>\n                <Grid item xs={12} md={2}>\n                  <Field\n                    component={TextField}\n                    label='60% and up'\n                    name='score60'\n                    type='number'\n                    variant='outlined'\n                    fullWidth\n                  />\n                </Grid>\n                <Grid item xs={12} md={2}>\n                  <Field\n                    component={TextField}\n                    label='50% and up'\n                    name='score50'\n                    type='number'\n                    variant='outlined'\n                    fullWidth\n                  />\n                </Grid>\n              </Grid>\n            </Paper>\n          )}\n\n          {currentUser.role !== 'student' && (\n            <Paper className={classes.paper}>\n              <Grid container spacing={2}>\n                <Grid item xs={12}>\n                  <Typography variant='h5' gutterBottom>\n                    Account Details\n                  </Typography>\n                </Grid>\n                <Grid item xs={12} md={6}>\n                  <Field\n                    component={TextField}\n                    label='First name'\n                    name='firstName'\n                    type='text'\n                    variant='outlined'\n                    fullWidth\n                  />\n                </Grid>\n                <Grid item xs={12} md={6}>\n                  <Field\n                    component={TextField}\n                    label='Last name'\n                    name='lastName'\n                    type='text'\n                    variant='outlined'\n                    fullWidth\n                  />\n                </Grid>\n                {currentUser.role === 'teacher' && (\n                  <Grid item xs={12} md={4}>\n                    <label>\n                      <Field\n                        component={Switch}\n                        label='Enable beta features'\n                        name='enableBetaFeatures'\n                        type='checkbox'\n                      />\n                      Enable beta features\n                    </label>\n                  </Grid>\n                )}\n              </Grid>\n            </Paper>\n          )}\n\n          <Paper className={classes.paper}>\n            <Grid container spacing={2}>\n              <Grid item xs={12}>\n                <Typography variant='h5' gutterBottom>\n                  Account Security\n                </Typography>\n              </Grid>\n              <Grid item xs={12} md={6}>\n                <Field\n                  component={TextField}\n                  label='New password'\n                  name='password'\n                  type='password'\n                  variant='outlined'\n                  fullWidth\n                />\n              </Grid>\n            </Grid>\n          </Paper>\n        </Form>\n      )}\n    </Formik>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Settings)\n","import React from 'react'\nimport { IconButton, Tooltip, makeStyles } from '@material-ui/core'\n\nconst useStyles = makeStyles((theme) => ({\n  actionButton: {\n    color: theme.palette.text.disabled,\n  },\n}))\n\nconst ActionButton = ({\n  action,\n  children,\n  className,\n  disabled,\n  onClick,\n  size,\n}) => {\n  const classes = useStyles()\n\n  const handleClick = (ev) => {\n    ev.stopPropagation()\n    onClick()\n  }\n\n  return (\n    <Tooltip arrow enterTouchDelay={0} title={action}>\n      <span>\n        <IconButton\n          aria-label={action}\n          className={`${classes.actionButton} ${className || ''}`}\n          disabled={disabled}\n          onClick={handleClick}\n          onFocus={(ev) => ev.stopPropagation()}\n          size={size}\n        >\n          {children}\n        </IconButton>\n      </span>\n    </Tooltip>\n  )\n}\n\nexport default ActionButton\n","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n} from '@material-ui/core'\nimport { LockOpen } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport agent from '../../agent'\n\nimport { RESET_STUDENT_PASSWORD } from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  defaultStudentPassword: state.common.settings.defaultStudentPassword,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onSubmit: (user) =>\n    dispatch({\n      type: RESET_STUDENT_PASSWORD,\n      payload: agent.Students.update(user),\n      snackbar: { message: 'Password reset', variant: 'success' },\n    }),\n})\n\nconst ResetStudentPasswordAlert = ({\n  btnSize,\n  defaultStudentPassword,\n  onSubmit,\n  student,\n}) => {\n  const [open, setOpen] = useState(false)\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmit = () => {\n    const user = { ...student, password: defaultStudentPassword }\n    onSubmit(user)\n    setOpen(false)\n  }\n\n  return (\n    <>\n      <ActionButton\n        action='Reset password'\n        onClick={handleClickOpen}\n        size={btnSize ?? 'small'}\n      >\n        <LockOpen fontSize='inherit' />\n      </ActionButton>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        onClick={(ev) => ev.stopPropagation()}\n        onFocus={(ev) => ev.stopPropagation()}\n      >\n        <DialogTitle>Reset Password</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Do you want to reset{' '}\n            <b>\n              {student.firstName} {student.lastName}\n            </b>\n            's password to <strong>{defaultStudentPassword}</strong>?\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button\n            onClick={handleSubmit}\n            color='primary'\n            variant='contained'\n            autoFocus\n          >\n            Reset\n          </Button>\n          <Button onClick={handleClose} variant='contained'>\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ResetStudentPasswordAlert)\n","import React from 'react'\nimport NumberFormat from 'react-number-format'\n\nconst Points = ({ suffix, value }) => (\n  <NumberFormat\n    displayType='text'\n    suffix={suffix || ' pts'}\n    thousandSeparator={true}\n    value={Math.round(value)}\n  />\n)\n\nexport default Points\n","import React from 'react'\nimport { TextField } from '@material-ui/core'\nimport { Autocomplete } from '@material-ui/lab'\nimport parse from 'autosuggest-highlight/parse'\nimport match from 'autosuggest-highlight/match'\n\nconst ProductSelector = ({ onChange, products }) => {\n  // Add stock status and sort products by stock status\n  const options = products\n    .map((product) => ({\n      ...product,\n      status: product.quantity > 0 ? 'In Stock' : 'Out of Stock',\n    }))\n    .sort((a, b) => -b.status.localeCompare(a.status))\n\n  return (\n    <Autocomplete\n      autoHighlight\n      freeSolo\n      getOptionLabel={(product) => product.name}\n      groupBy={(product) => product.status}\n      noOptionsText='No products have been added'\n      onInputChange={(ev, value) => {\n        onChange(value)\n      }}\n      onChange={(ev, value) => {\n        onChange(value)\n      }}\n      options={options}\n      renderInput={(params) => (\n        <TextField\n          {...params}\n          label='Description'\n          placeholder='Type or select a product'\n          required\n        />\n      )}\n      renderOption={(option, { inputValue }) => {\n        const matches = match(option.name, inputValue)\n        const parts = parse(option.name, matches)\n\n        return (\n          <div>\n            {parts.map((part, index) => (\n              <span\n                key={index}\n                style={{\n                  fontWeight: part.highlight ? 700 : 400,\n                }}\n              >\n                {part.text}\n              </span>\n            ))}\n          </div>\n        )\n      }}\n    />\n  )\n}\n\nexport default ProductSelector\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Form, Field } from 'formik'\nimport { TextField } from 'formik-material-ui'\nimport * as Yup from 'yup'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Grid,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport { Grade, ShoppingCart } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport ListErrors from '../ListErrors'\nimport ProductSelector from './ProductSelector'\nimport agent from '../../agent'\n\nimport {\n  ADD_TRANSACTION,\n  TRANSACTION_DIALOG_UNLOADED,\n} from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  ...state.scores,\n  products: state.products.products,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onAdd: (transaction) =>\n    dispatch({\n      type: ADD_TRANSACTION,\n      payload: agent.Transactions.add(transaction),\n      snackbar: {\n        message: `${transaction.typeTitle} added`,\n        variant: 'success',\n      },\n    }),\n  onExit: () => dispatch({ type: TRANSACTION_DIALOG_UNLOADED }),\n})\n\nconst TransactionDialog = ({\n  errors,\n  inProgress,\n  onAdd,\n  onExit,\n  products,\n  student,\n  type,\n}) => {\n  const [open, setOpen] = useState(false)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmitAdd = (values) => {\n    onAdd({ ...values, student, type: type.toLowerCase(), typeTitle: type })\n  }\n\n  useEffect(() => {\n    // Close the dialog only if there are no errors\n    if (!inProgress && !errors) setOpen(false)\n  }, [inProgress])\n\n  return (\n    <>\n      <ActionButton\n        action={`Add ${type.toLowerCase()}`}\n        onClick={handleClickOpen}\n      >\n        {type === 'Bonus' && <Grade />}\n        {type === 'Purchase' && <ShoppingCart />}\n      </ActionButton>\n\n      <Dialog\n        fullScreen={fullScreen}\n        fullWidth={true}\n        maxWidth={'md'}\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onExit={onExit}\n        onFocus={(ev) => ev.stopPropagation()}\n        open={open}\n      >\n        <Formik\n          initialValues={{\n            amount: '',\n            description: '',\n            productId: '',\n          }}\n          validationSchema={Yup.object({\n            amount: Yup.number().typeError('Numbers only').required('Required'),\n            description: Yup.string().required('Required'),\n            productId: Yup.string(),\n          })}\n          onSubmit={async (values) => {\n            handleSubmitAdd(values)\n          }}\n        >\n          {(formik) => (\n            <Form>\n              <DialogTitle>Add {type}</DialogTitle>\n              <DialogContent>\n                <ListErrors errors={errors} />\n                <Grid container spacing={2}>\n                  <Grid item xs={12} md={6}>\n                    {type === 'Bonus' ? (\n                      <Field\n                        autoFocus\n                        color='primary'\n                        component={TextField}\n                        disabled={inProgress}\n                        label='Description'\n                        name='description'\n                        type='text'\n                        fullWidth\n                      />\n                    ) : (\n                      <ProductSelector\n                        products={products}\n                        onChange={(product) => {\n                          if (typeof product === 'string') {\n                            formik.setFieldValue('description', product)\n                          } else if (product && typeof product === 'object') {\n                            formik.setFieldValue('amount', product.cost)\n                            formik.setFieldValue('description', product.name)\n                            formik.setFieldValue('productId', product._id)\n                          } else {\n                            formik.setFieldValue('amount', '')\n                            formik.setFieldValue('description', '')\n                          }\n                        }}\n                      />\n                    )}\n                  </Grid>\n                  <Grid item xs={12} md={6}>\n                    <Field\n                      color='primary'\n                      component={TextField}\n                      disabled={inProgress}\n                      label='Amount'\n                      name='amount'\n                      type='text'\n                      fullWidth\n                    />\n                  </Grid>\n                </Grid>\n              </DialogContent>\n              <DialogActions>\n                <Button\n                  disabled={inProgress}\n                  color='primary'\n                  type='submit'\n                  variant='contained'\n                >\n                  {inProgress ? 'Adding...' : 'Add'}\n                </Button>\n                <Button\n                  disabled={inProgress}\n                  onClick={handleClose}\n                  variant='contained'\n                >\n                  Cancel\n                </Button>\n              </DialogActions>\n            </Form>\n          )}\n        </Formik>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TransactionDialog)\n","// Convert the given score to points using the given conversions\nconst convertScore = (score, conversions) => {\n  const total = score.task.totalPoints\n  const nonZeroTotal = total === 0 ? 1 : total\n  const percent = Math.round((score.value / nonZeroTotal) * 100)\n  const conversionKey = Math.floor((percent > 100 ? 100 : percent) / 10) * 10\n  return conversions[conversionKey]\n}\n\nexport default convertScore\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport MaterialTable from 'material-table'\nimport { Grid, Paper, Typography, makeStyles } from '@material-ui/core'\nimport { Close, Edit } from '@material-ui/icons'\n\nimport ActionButton from './ActionButton'\nimport ResetStudentPasswordAlert from './Teacher/ResetStudentPasswordAlert'\nimport Points from './Points'\nimport TransactionDialog from './Teacher/TransactionDialog'\nimport agent from '../agent'\nimport convertScore from '../converter'\n\nimport {\n  ACCOUNT_VIEW_LOADED,\n  ACCOUNT_VIEW_UNLOADED,\n  DELETE_TRANSACTION,\n  UPDATE_TRANSACTION,\n} from '../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  actions: {\n    alignItems: 'flex-start',\n    display: 'flex',\n    justifyContent: 'flex-end',\n  },\n  balance: {\n    'textAlign': 'center',\n    '& > h6': {\n      borderTop: '1px solid #ccc',\n      fontStyle: 'italic',\n      textTransform: 'lowercase',\n    },\n  },\n  edit: {\n    backgroundColor: theme.palette.primary.main,\n  },\n  paper: {\n    padding: theme.spacing(2),\n  },\n  subtotal: {\n    'position': 'relative',\n    'textAlign': 'center',\n    '& > p': {\n      position: 'relative',\n      bottom: -theme.spacing(1),\n    },\n    '& > h6': {\n      fontSize: theme.typography.pxToRem(12),\n      fontStyle: 'italic',\n      textTransform: 'lowercase',\n    },\n  },\n  unit: {\n    fontSize: theme.typography.pxToRem(12),\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  conversions: state.scores.conversions,\n  total: state.scores.total,\n  transactions: state.scores.transactions,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onDelete: (transaction) =>\n    dispatch({\n      type: DELETE_TRANSACTION,\n      payload: agent.Transactions.delete(transaction),\n      snackbar: { message: 'Transaction deleted', variant: 'success' },\n    }),\n  onLoad: (username) =>\n    dispatch({\n      type: ACCOUNT_VIEW_LOADED,\n      payload: Promise.all([\n        agent.Scores.getStudentScores(username),\n        agent.Products.getAll(),\n      ]),\n    }),\n  onUnload: () => dispatch({ type: ACCOUNT_VIEW_UNLOADED }),\n  onUpdate: (transaction) =>\n    dispatch({\n      type: UPDATE_TRANSACTION,\n      payload: agent.Transactions.update(transaction),\n      snackbar: { message: 'Transaction updated', variant: 'success' },\n    }),\n})\n\nconst AccountHeader = ({ canEdit, doEdit, onEditClick, student, total }) => {\n  const classes = useStyles()\n\n  return (\n    <Paper className={classes.paper}>\n      <Grid container spacing={2}>\n        <Grid item xs={12} md={4}>\n          <Typography gutterBottom variant='h5'>\n            {student.firstName} {student.lastName}\n          </Typography>\n          {student.course && (\n            <Typography gutterBottom color='textSecondary' variant='subtitle1'>\n              {student.course} &middot; Period {student.period}\n            </Typography>\n          )}\n          <Typography color='textSecondary' variant='subtitle2'>\n            {student.username}\n          </Typography>\n        </Grid>\n        <Grid item xs={12} md={4} container>\n          <Grid item xs={12} className={classes.balance}>\n            <Typography\n              color={total?.balance >= 0 ? 'primary' : 'secondary'}\n              variant='h4'\n            >\n              <Points suffix=' ' value={total?.balance} />\n              <span className={classes.unit}>pts</span>\n            </Typography>\n            <Typography color='textSecondary' variant='subtitle2'>\n              Balance\n            </Typography>\n          </Grid>\n          <Grid item xs={4} className={classes.subtotal}>\n            <Typography color='primary' variant='body1'>\n              <Points suffix=' ' value={total?.bonuses} />\n              <span className={classes.unit}>pts</span>\n            </Typography>\n            <Typography color='primary' variant='subtitle2'>\n              Bonuses\n            </Typography>\n          </Grid>\n          <Grid item xs={4} className={classes.subtotal}>\n            <Typography color='secondary' variant='body1'>\n              <Points suffix=' ' value={total?.purchases} />\n              <span className={classes.unit}>pts</span>\n            </Typography>\n            <Typography color='secondary' variant='subtitle2'>\n              Purchases\n            </Typography>\n          </Grid>\n          <Grid item xs={4} className={classes.subtotal}>\n            <Typography color='primary' variant='body1'>\n              <Points suffix=' ' value={total?.scores} />\n              <span className={classes.unit}>pts</span>\n            </Typography>\n            <Typography color='primary' variant='subtitle2'>\n              Assessments\n            </Typography>\n          </Grid>\n        </Grid>\n        {canEdit && (\n          <Grid item xs={12} md={4} className={classes.actions}>\n            <TransactionDialog student={student} type='Bonus' />\n            <TransactionDialog student={student} type='Purchase' />\n            <ActionButton\n              action={doEdit ? 'Finish editing' : 'Edit transactions'}\n              className={doEdit && classes.edit}\n              onClick={onEditClick}\n            >\n              {doEdit ? <Close /> : <Edit />}\n            </ActionButton>\n            <ResetStudentPasswordAlert btnSize='medium' student={student} />\n          </Grid>\n        )}\n      </Grid>\n    </Paper>\n  )\n}\n\nconst TransactionList = ({\n  conversions,\n  doEdit,\n  onDelete,\n  onUpdate,\n  transactions,\n}) => {\n  const [data, setData] = useState([])\n\n  const mapTransaction = (transaction) => ({\n    amount: transaction.amount,\n    createdAt: new Date(transaction.createdAt).toDateString(),\n    description: transaction.description,\n    type: transaction.type,\n    _id: transaction._id,\n  })\n\n  const mapScore = (score) => ({\n    amount: convertScore(score, conversions),\n    createdAt: new Date(score.createdAt).toDateString(),\n    description: score.task.title,\n    type: 'assessment',\n  })\n\n  // @todo: sort by date?\n  const mappedData = (transactions) => {\n    const { bonuses, purchases, scores } = transactions\n    const mapped = [\n      ...bonuses.map((bonus) => mapTransaction(bonus)),\n      ...purchases.map((purchase) => mapTransaction(purchase)),\n    ]\n    if (doEdit) {\n      return mapped\n    } else {\n      return [...mapped, ...scores.map((score) => mapScore(score))]\n    }\n  }\n\n  const [columns] = useState([\n    {\n      title: 'Date',\n      field: 'createdAt',\n      editable: 'never',\n      defaultSort: 'desc',\n    },\n    { title: 'Description', field: 'description' },\n    {\n      title: 'Amount',\n      field: 'amount',\n      render: (rowData) => <Points value={rowData.amount} />,\n    },\n    { title: 'Type', field: 'type', editable: 'never' },\n  ])\n\n  useEffect(() => {\n    transactions && setData(mappedData(transactions))\n  }, [doEdit, transactions])\n\n  return (\n    <MaterialTable\n      columns={columns}\n      data={data}\n      localization={{\n        body: {\n          emptyDataSourceMessage: 'No activity to report',\n          editRow: {\n            deleteText: 'Delete this transaction?',\n          },\n        },\n      }}\n      options={{ actionsColumnIndex: -1, paging: false, toolbar: false }}\n      editable={\n        doEdit\n          ? {\n              onRowUpdate: (newData, oldData) =>\n                new Promise((resolve, reject) => {\n                  const dataUpdate = [...data]\n                  const index = oldData.tableData.id\n                  dataUpdate[index] = newData\n                  setData([...dataUpdate])\n                  onUpdate(newData)\n                  resolve()\n                }),\n              onRowDelete: (oldData) =>\n                new Promise((resolve, reject) => {\n                  const newData = [...data]\n                  const index = oldData.tableData.id\n                  newData.splice(index, 1)\n                  setData([...newData])\n                  onDelete(oldData)\n                  resolve()\n                }),\n            }\n          : {}\n      }\n    />\n  )\n}\n\nconst AccountView = ({\n  canEdit,\n  conversions,\n  onDelete,\n  onLoad,\n  onUnload,\n  onUpdate,\n  student,\n  total,\n  transactions,\n}) => {\n  const [doEdit, setDoEdit] = useState(false)\n\n  const handleEditClick = () => {\n    setDoEdit(!doEdit)\n  }\n\n  useEffect(() => {\n    return () => {\n      onUnload()\n    }\n  }, [])\n\n  useEffect(() => {\n    onLoad(student.username)\n  }, [student])\n\n  return (\n    <>\n      {transactions && (\n        <Grid container spacing={2}>\n          <Grid item xs={12}>\n            <AccountHeader\n              canEdit={canEdit}\n              doEdit={doEdit}\n              onEditClick={handleEditClick}\n              student={student}\n              total={total}\n            />\n          </Grid>\n          <Grid item xs={12}>\n            <TransactionList\n              conversions={conversions}\n              doEdit={doEdit}\n              onDelete={onDelete}\n              onUpdate={onUpdate}\n              transactions={transactions}\n            />\n          </Grid>\n        </Grid>\n      )}\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AccountView)\n","import React from 'react'\nimport { connect } from 'react-redux'\n\nimport AccountView from '../AccountView'\n\nconst mapStateToProps = (state) => ({\n  currentUser: state.common.currentUser,\n})\n\nconst StudentAccount = ({ currentUser }) => {\n  return <AccountView student={currentUser} />\n}\n\nexport default connect(mapStateToProps, () => ({}))(StudentAccount)\n","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Form, Field } from 'formik'\nimport { TextField } from 'formik-material-ui'\nimport * as Yup from 'yup'\nimport {\n  Button,\n  Dialog,\n  Fab,\n  Grid,\n  Typography,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport { Add } from '@material-ui/icons'\n\nimport agent from '../../agent'\nimport background from './../../images/songs-background.jpg'\n\nimport { SUBMIT_SONG_REQUEST } from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  button: {\n    marginBottom: theme.spacing(2),\n    marginRight: theme.spacing(2),\n  },\n  dialog: {\n    backgroundImage: `url(${background})`,\n    backgroundPosition: 'center bottom',\n    backgroundSize: 'cover',\n    color: 'white',\n    padding: theme.spacing(4),\n  },\n  icon: {\n    marginRight: theme.spacing(1),\n  },\n  input: {\n    'backgroundColor': 'rgba(0,65,91,0.8)',\n    'borderRadius': theme.spacing(1),\n    'height': 78,\n    '& input': {\n      color: theme.palette.secondary.main,\n    },\n  },\n  inputLabel: {\n    color: 'white',\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  settings: state.common.settings,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onSubmit: (song) =>\n    dispatch({\n      type: SUBMIT_SONG_REQUEST,\n      payload: agent.Songs.request(song),\n      snackbar: { message: 'Song requested', variant: 'success' },\n    }),\n})\n\nconst SongRequestDialog = ({ onSubmit, settings }) => {\n  const [open, setOpen] = useState(false)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n  const classes = useStyles()\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmit = (values) => {\n    onSubmit(values)\n    setOpen(false)\n  }\n\n  return (\n    <>\n      <Fab color='primary' onClick={handleClickOpen} variant='extended'>\n        <Add className={classes.icon} />\n        Buy a song\n      </Fab>\n      <Dialog\n        classes={{\n          paper: classes.dialog,\n        }}\n        fullScreen={fullScreen}\n        open={open}\n        onClose={handleClose}\n      >\n        <Typography variant='h3' align='center' color='secondary' gutterBottom>\n          Purchase a Song\n        </Typography>\n        <Typography variant='body1' gutterBottom>\n          Please provide the song and artist title for your request. If\n          approved, {settings.songRequestPurchaseAmount} points will be charged\n          to your account.\n        </Typography>\n        <Formik\n          initialValues={{\n            artist: '',\n            title: '',\n          }}\n          validationSchema={Yup.object({\n            artist: Yup.string().required('Required'),\n            title: Yup.string().required('Required'),\n          })}\n          onSubmit={async (values) => {\n            handleSubmit(values)\n          }}\n        >\n          <Form>\n            <Grid container spacing={4}>\n              <Grid item xs={12} md={6}>\n                <Field\n                  autoFocus\n                  className={classes.input}\n                  color='primary'\n                  component={TextField}\n                  InputLabelProps={{\n                    classes: {\n                      root: classes.inputLabel,\n                    },\n                  }}\n                  label='Song Title'\n                  name='title'\n                  type='text'\n                  variant='filled'\n                  fullWidth\n                />\n              </Grid>\n              <Grid item xs={12} md={6}>\n                <Field\n                  className={classes.input}\n                  color='primary'\n                  component={TextField}\n                  InputLabelProps={{\n                    classes: {\n                      root: classes.inputLabel,\n                    },\n                  }}\n                  label='Artist'\n                  name='artist'\n                  type='text'\n                  variant='filled'\n                  fullWidth\n                />\n              </Grid>\n              <Grid item xs={12}>\n                <Button\n                  className={classes.button}\n                  color='primary'\n                  type='submit'\n                  variant='contained'\n                >\n                  Buy\n                </Button>\n                <Button\n                  className={classes.button}\n                  onClick={handleClose}\n                  variant='contained'\n                >\n                  Cancel\n                </Button>\n              </Grid>\n            </Grid>\n          </Form>\n        </Formik>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SongRequestDialog)\n","import React, { useState, useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Checkbox,\n  Grid,\n  FormControlLabel,\n  Paper,\n  Tooltip,\n  makeStyles,\n} from '@material-ui/core'\nimport { InfoOutlined } from '@material-ui/icons'\n\nimport PageHeader from '../PageHeader'\nimport SongRequestDialog from './SongRequestDialog'\nimport agent from '../../agent'\n\nimport MaterialTable from 'material-table'\n\nimport {\n  SONGS_PAGE_UNLOADED,\n  STUDENT_SONGS_PAGE_LOADED,\n  SUBMIT_SONG_REMOVAL_REQUEST,\n} from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  icon: {\n    marginLeft: theme.spacing(1),\n  },\n  paper: {\n    paddingLeft: theme.spacing(2),\n    marginBottom: theme.spacing(4),\n  },\n  status: {\n    alignItems: 'center',\n    display: 'flex',\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.songs,\n  currentUser: state.common.currentUser,\n  settings: state.common.settings,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onDelete: (song) =>\n    dispatch({\n      type: SUBMIT_SONG_REMOVAL_REQUEST,\n      payload: agent.Songs.update(song),\n      snackbar: {\n        message: 'Song removal request submitted',\n        variant: 'success',\n      },\n    }),\n  onLoad: () =>\n    dispatch({\n      type: STUDENT_SONGS_PAGE_LOADED,\n      payload: agent.Songs.forStudent(),\n    }),\n  onUnload: () => dispatch({ type: SONGS_PAGE_UNLOADED }),\n})\n\nconst StudentSongs = ({\n  course,\n  courseSongs,\n  currentUser,\n  onDelete,\n  onLoad,\n  onUnload,\n  settings,\n  userSongs,\n}) => {\n  const [mySongsOnly, setMySongsOnly] = useState(true)\n  const [data, setData] = useState([])\n  const [columns, setColumns] = useState([])\n\n  const classes = useStyles()\n\n  const handleMySongsOnlyClick = (event) => {\n    setMySongsOnly(event.target.checked)\n  }\n\n  const getColumns = () => [\n    { title: 'Request Date', field: 'createdAt', editable: 'never' },\n    { title: 'Song Title', field: 'title' },\n    { title: 'Song Artist', field: 'artist' },\n    ...(!mySongsOnly\n      ? [\n          {\n            title: 'Purchased by',\n            field: 'purchasedBy',\n            editable: 'never',\n          },\n        ]\n      : []),\n    {\n      title: 'Status',\n      field: 'status',\n      lookup: {\n        approved: 'approved',\n        pending: 'pending', // @todo: remove [for backwards compatibility]\n        pendingApproval: 'pending approval',\n        pendingRemoval: 'pending removal',\n        rejected: 'rejected',\n        removed: 'removed',\n      },\n      render: (rowData, renderType) =>\n        renderType === 'row' ? (\n          <span style={{ alignItems: 'center', display: 'flex' }}>\n            {rowData.statusDescription ? (\n              <>\n                {rowData.status}\n                <Tooltip\n                  arrow\n                  color='primary'\n                  enterTouchDelay={0}\n                  title={rowData.statusDescription}\n                >\n                  <InfoOutlined style={{ marginLeft: '8px' }} />\n                </Tooltip>\n              </>\n            ) : (\n              rowData.status\n            )}\n          </span>\n        ) : (\n          <span>{rowData}</span>\n        ),\n    },\n  ]\n\n  const getMappedData = (source) =>\n    source.map((song) => ({\n      createdAt: new Date(song.createdAt).toDateString(),\n      title: song.title,\n      artist: song.artist,\n      purchasedBy: `${song.student.firstName} ${song.student.lastName}`,\n      status: song.status,\n      statusDescription: song.statusDescription,\n      _id: song._id,\n    }))\n\n  useEffect(() => {\n    onLoad()\n\n    return () => {\n      return onUnload()\n    }\n  }, [])\n\n  useEffect(() => {\n    setColumns(getColumns())\n    setData(getMappedData(mySongsOnly ? userSongs : courseSongs))\n  }, [courseSongs, mySongsOnly, userSongs])\n\n  return (\n    <>\n      <PageHeader\n        title={\n          'Songs for ' +\n          (mySongsOnly ? currentUser.firstName : 'Period ' + course.period)\n        }\n      >\n        <SongRequestDialog />\n      </PageHeader>\n\n      <Paper className={classes.paper}>\n        <Grid container spacing={2} className={classes.grid}>\n          <Grid item xs={12} className={classes.grid}>\n            <FormControlLabel\n              control={\n                <Checkbox\n                  checked={mySongsOnly}\n                  onChange={handleMySongsOnlyClick}\n                  name='mySongsOnly'\n                />\n              }\n              label='show only my songs'\n            />\n          </Grid>\n        </Grid>\n      </Paper>\n\n      <MaterialTable\n        title='Class Playlist'\n        columns={columns}\n        data={data}\n        localization={{\n          body: {\n            emptyDataSourceMessage:\n              'No songs have been added to this class playlist',\n            editRow: {\n              deleteText: `Delete this song for ${settings.songRemovalPurchaseAmount} points?`,\n              saveTooltip: 'Delete song',\n            },\n          },\n        }}\n        options={{ actionsColumnIndex: -1, paging: false, toolbar: false }}\n        editable={{\n          isDeletable: (rowData) => rowData.status === 'approved',\n          isDeleteHidden: () => !settings.songRemovalRequestEnabled,\n          onRowDelete: (song) =>\n            new Promise((resolve) => {\n              onDelete({\n                id: song._id,\n                status: 'pending removal',\n                statusDescription: '',\n              })\n              resolve()\n            }),\n        }}\n      />\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StudentSongs)\n","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Collapse, IconButton, makeStyles } from '@material-ui/core'\nimport { Alert as MuiAlert } from '@material-ui/lab'\nimport { Close } from '@material-ui/icons'\n\nimport { ALERT_CLOSED } from '../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  alert: {\n    marginBottom: theme.spacing(2),\n  },\n}))\n\nconst mapDispatchToProps = (dispatch) => ({\n  onClose: () => dispatch({ type: ALERT_CLOSED }),\n})\n\nconst Alert = ({ children, disableClose, onClose, severity, variant }) => {\n  const classes = useStyles()\n  const [open, setOpen] = useState(true)\n\n  return (\n    <div className={classes.alert}>\n      <Collapse in={open}>\n        <MuiAlert\n          action={\n            !disableClose && (\n              <IconButton\n                aria-label='close'\n                color='inherit'\n                size='small'\n                onClick={() => {\n                  setOpen(false)\n                  onClose()\n                }}\n              >\n                <Close fontSize='inherit' />\n              </IconButton>\n            )\n          }\n          severity={severity || 'info'}\n          variant={variant || 'outlined'}\n        >\n          {children}\n        </MuiAlert>\n      </Collapse>\n    </div>\n  )\n}\n\nexport default connect(() => ({}), mapDispatchToProps)(Alert)\n","import React, { useEffect, useState } from 'react'\nimport MaterialTable from 'material-table'\n\nconst EconomySummaryTable = ({ accounts }) => {\n  const [data, setData] = useState([])\n\n  const mappedData = accounts.map((account) => ({\n    accountTotal: account.totals.account,\n    assessmentTotal: account.totals.assessments,\n    bonusTotal: account.totals.bonuses,\n    course: account.course,\n    firstName: account.firstName,\n    id: account.id,\n    lastName: account.lastName,\n    period: account.period,\n    purchaseTotal: account.totals.purchases,\n    songTotal: account.totals.songs,\n  }))\n\n  const [columns] = useState([\n    { title: 'First Name', field: 'firstName' },\n    { title: 'Last Name', field: 'lastName' },\n    { title: 'Period', field: 'period' },\n    { title: 'Account Total', field: 'accountTotal' },\n    { title: 'Assessment Total', field: 'assessmentTotal' },\n    { title: 'Bonus Total', field: 'bonusTotal' },\n    { title: 'Purchase Total', field: 'purchaseTotal' },\n    { title: 'Song Total', field: 'songTotal' },\n  ])\n\n  useEffect(() => {\n    setData(mappedData)\n  }, [accounts])\n\n  return (\n    <MaterialTable\n      columns={columns}\n      data={data}\n      options={{ grouping: true, paging: false, toolbar: false }}\n      style={{ boxShadow: 'none' }}\n      title='Account Summary'\n    />\n  )\n}\n\nexport default EconomySummaryTable\n","import React from 'react'\nimport { CircularProgress, Typography, makeStyles } from '@material-ui/core'\n\nconst useStyles = makeStyles((theme) => ({\n  message: {\n    fontStyle: 'italic',\n  },\n  root: {\n    alignItems: 'center',\n    display: 'flex',\n    justifyContent: 'center',\n    minWidth: theme.spacing(40),\n  },\n  spinner: {\n    marginRight: theme.spacing(2),\n  },\n}))\n\nconst Spinner = ({ message }) => {\n  const classes = useStyles()\n\n  return (\n    <div className={classes.root}>\n      <CircularProgress className={classes.spinner} />\n      <Typography className={classes.message}>\n        {message || 'Working...'}\n      </Typography>\n    </div>\n  )\n}\n\nexport default Spinner\n","import React from 'react'\nimport { Slide } from '@material-ui/core'\n\nexport const SlideUpTransition = React.forwardRef((props, ref) => {\n  return <Slide direction='up' ref={ref} {...props} />\n})\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  AppBar,\n  Button,\n  Container,\n  Dialog,\n  Grid,\n  IconButton,\n  Paper,\n  Toolbar,\n  Typography,\n  makeStyles,\n} from '@material-ui/core'\nimport { Alert, AlertTitle } from '@material-ui/lab'\nimport { Close } from '@material-ui/icons'\n\nimport EconomySummaryTable from './EconomySummaryTable'\nimport ListErrors from '../ListErrors'\nimport PageHeader from '../PageHeader'\nimport PageWrapper from '../PageWrapper'\nimport Points from '../Points'\nimport Spinner from '../Spinner'\nimport { SlideUpTransition } from '../../transitions'\n\nimport agent from '../../agent'\n\nimport {\n  ECONOMY_DIALOG_LOADED,\n  ECONOMY_DIALOG_UNLOADED,\n} from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  title: {\n    color: theme.palette.common.white,\n    margin: '0 auto',\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.economy,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onLoad: () =>\n    dispatch({\n      type: ECONOMY_DIALOG_LOADED,\n      payload: agent.Scores.getAll(),\n    }),\n  onUnload: () =>\n    dispatch({\n      type: ECONOMY_DIALOG_UNLOADED,\n    }),\n})\n\nconst GridTile = ({ children, md, title, unit, value }) => (\n  <Grid item xs={12} md={md || 4}>\n    <Paper elevation={3} style={{ padding: '16px', overflow: 'scroll' }}>\n      {title && (\n        <Typography gutterBottom variant='h6'>\n          {title}\n        </Typography>\n      )}\n      {value && (\n        <Typography align='center' variant='h5'>\n          <Points\n            suffix={value !== 1 ? ` ${unit}` : ` ${unit.slice(0, -1)}`}\n            value={value}\n          />\n        </Typography>\n      )}\n      {children}\n    </Paper>\n  </Grid>\n)\n\nconst Dashboard = ({ data }) => (\n  <Grid container spacing={3}>\n    <GridTile\n      title='Total Points'\n      unit='pts'\n      value={data.reduce((prev, cur) => prev + (cur.totals.account || 0), 0)}\n    />\n    <GridTile title='Top Student' unit='pts' value={data[0]?.totals.account}>\n      <Typography align='center' variant='body1'>\n        {data[0]?.firstName} {data[0]?.lastName}\n      </Typography>\n    </GridTile>\n    <GridTile\n      title='Total Assessments'\n      unit='pts'\n      value={data.reduce(\n        (prev, cur) => prev + (cur.totals.assessments || 0),\n        0\n      )}\n    />\n    <GridTile\n      title='Total Bonuses'\n      unit='pts'\n      value={data.reduce((prev, cur) => prev + (cur.totals.bonuses || 0), 0)}\n    />\n    <GridTile\n      title='Total Purchases'\n      unit='pts'\n      value={data.reduce((prev, cur) => prev + (cur.totals.purchases || 0), 0)}\n    />\n    <GridTile\n      title='Total Songs'\n      unit='songs'\n      value={data.reduce((prev, cur) => prev + cur.totals.songs, 0)}\n    />\n    <GridTile title='Total Students' unit='students' value={data.length} />\n    <GridTile md={12} title='Account Summary'>\n      <EconomySummaryTable accounts={data} />\n    </GridTile>\n  </Grid>\n)\n\nconst EconomyDialog = ({ errors, inProgress, onLoad, onUnload, students }) => {\n  const [data, setData] = useState([])\n  const [open, setOpen] = useState(false)\n\n  const classes = useStyles()\n\n  const handleClickOpen = () => {\n    setOpen(true)\n    onLoad()\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n    onUnload()\n  }\n\n  useEffect(() => {\n    setData(students.sort((a, b) => b.totals.account - a.totals.account))\n  }, [students])\n\n  return (\n    <>\n      <Button onClick={handleClickOpen} size='small'>\n        View Economy\n      </Button>\n      <Dialog\n        fullScreen\n        open={open}\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onFocus={(ev) => ev.stopPropagation()}\n        TransitionComponent={SlideUpTransition}\n      >\n        <AppBar position='relative'>\n          <Toolbar>\n            <IconButton edge='start' onClick={handleClose}>\n              <Close />\n            </IconButton>\n            <Typography variant='h5' className={classes.title}>\n              Accounts\n            </Typography>\n          </Toolbar>\n        </AppBar>\n        <PageWrapper>\n          <Container>\n            <PageHeader title='Economy View' />\n            <ListErrors errors={errors} />\n            {inProgress ? (\n              <Spinner message='Computing...' />\n            ) : data.length > 0 ? (\n              <Dashboard data={data} />\n            ) : (\n              <Alert severity='info'>\n                <AlertTitle>No data available</AlertTitle>\n                You must create at least one course, add students to that\n                course, and add bonuses, purchases, or scores before any data\n                will be visible here\n              </Alert>\n            )}\n          </Container>\n        </PageWrapper>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EconomyDialog)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Paper, TextField, makeStyles } from '@material-ui/core'\nimport { Autocomplete } from '@material-ui/lab'\nimport parse from 'autosuggest-highlight/parse'\nimport match from 'autosuggest-highlight/match'\n\nimport agent from '../../agent'\n\nimport {\n  STUDENT_SEARCH_LOADED,\n  STUDENT_SEARCH_UNLOADED,\n} from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  search: {\n    padding: theme.spacing(2),\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  courses: state.courses.courses,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onLoad: () =>\n    dispatch({ type: STUDENT_SEARCH_LOADED, payload: agent.Courses.getAll() }),\n  onUnload: () => dispatch({ type: STUDENT_SEARCH_UNLOADED }),\n})\n\nconst StudentSearch = ({ courses, onChange, onLoad, onUnload }) => {\n  const [mappedData, setMappedData] = useState([])\n\n  const classes = useStyles()\n\n  useEffect(() => {\n    onLoad()\n\n    return () => {\n      onUnload()\n    }\n  }, [])\n\n  useEffect(() => {\n    const mapped = courses\n      .map((course) =>\n        course.students.map((student) => ({\n          ...student,\n          course: course.name,\n          period: course.period,\n          name: `${student.firstName} ${student.lastName}`,\n        }))\n      )\n      .flat()\n    setMappedData(mapped)\n  }, [courses])\n\n  return (\n    <Paper className={classes.search}>\n      <Autocomplete\n        autoHighlight\n        getOptionLabel={(option) => option.name}\n        groupBy={(option) => `Period ${option.period} | ${option.course}`}\n        noOptionsText='No students have been added'\n        onChange={(ev, value) => onChange(value)}\n        options={mappedData}\n        renderInput={(params) => (\n          <TextField\n            {...params}\n            label='Student'\n            placeholder='Type or select a name'\n          />\n        )}\n        renderOption={(option, { inputValue }) => {\n          const matches = match(option.name, inputValue)\n          const parts = parse(option.name, matches)\n\n          return (\n            <div>\n              {parts.map((part, index) => (\n                <span\n                  key={index}\n                  style={{ fontWeight: part.highlight ? 700 : 400 }}\n                >\n                  {part.text}\n                </span>\n              ))}\n            </div>\n          )\n        }}\n      />\n    </Paper>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StudentSearch)\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Typography, makeStyles } from '@material-ui/core'\nimport { Alert } from '@material-ui/lab'\n\nconst useStyles = makeStyles((theme) => ({\n  courses: {\n    '& div': {\n      'boxShadow': theme.shadows[4],\n      'cursor': 'pointer',\n      'marginBottom': theme.spacing(1),\n      'padding': `${theme.spacing(3)}px ${theme.spacing(4)}px`,\n      'transition': 'all 0.15s ease-in-out',\n      '&:focus': {\n        backgroundColor: theme.palette.primary.main,\n        boxShadow: theme.shadows[1],\n      },\n      '&:hover': {\n        backgroundColor: theme.palette.primary.light,\n        boxShadow: theme.shadows[1],\n      },\n    },\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  courses: state.courses.courses,\n})\n\nconst CourseSelector = ({ courses, onSelect }) => {\n  const classes = useStyles()\n\n  return (\n    <div>\n      <Typography gutterBottom variant='h6'>\n        Select a course\n      </Typography>\n      {courses.length > 0 ? (\n        <div className={classes.courses}>\n          {courses.map((course) => (\n            <div\n              key={course.slug}\n              onClick={() => {\n                onSelect(course)\n              }}\n              tabIndex='0'\n            >\n              <Typography variant='body1'>\n                <b>{course.name}</b> &middot; Period {course.period}\n              </Typography>\n            </div>\n          ))}\n        </div>\n      ) : (\n        <Alert severity='info'>\n          You must create a course before continuing\n        </Alert>\n      )}\n    </div>\n  )\n}\n\nexport default connect(mapStateToProps, () => ({}))(CourseSelector)\n","import React, { useEffect, useState } from 'react'\nimport MaterialTable from 'material-table'\n\nconst StudentsTable = ({ course, onSelect }) => {\n  const [data, setData] = useState([])\n\n  const mappedData = course.students.map((student) => ({\n    username: student.username,\n    firstName: student.firstName,\n    lastName: student.lastName,\n    fullName: `${student.firstName} ${student.lastName}`,\n    role: student.role,\n    _id: student._id,\n  }))\n\n  const [columns] = useState([{ title: 'Students', field: 'fullName' }])\n\n  useEffect(() => {\n    setData(mappedData)\n  }, [course])\n\n  return (\n    <MaterialTable\n      columns={columns}\n      data={data}\n      localization={{\n        body: {\n          emptyDataSourceMessage: 'No students found for this course',\n        },\n        toolbar: {\n          nRowsSelected: '{0} student(s) selected',\n        },\n      }}\n      onSelectionChange={(rows) => onSelect(rows)}\n      options={{ paging: false, selection: true, toolbar: true }}\n      title={`${course.name} | Period ${course.period}`}\n    />\n  )\n}\n\nexport default StudentsTable\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Form, Field } from 'formik'\nimport { TextField } from 'formik-material-ui'\nimport * as Yup from 'yup'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Grid,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\n\nimport CourseSelector from './CourseSelector'\nimport ListErrors from '../ListErrors'\nimport StudentsTable from './StudentsTable'\nimport agent from '../../agent'\n\nimport {\n  ADD_TRANSACTIONS,\n  TRANSACTIONS_DIALOG_UNLOADED,\n} from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  dialog: {\n    '& > .MuiDialog-container > .MuiPaper-root': {\n      [theme.breakpoints.up('lg')]: {\n        width: theme.spacing(80),\n      },\n    },\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.scores,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onAdd: (transactions, curStudent) =>\n    dispatch({\n      type: ADD_TRANSACTIONS,\n      payload: agent.Transactions.addMany(transactions),\n      curStudent,\n      snackbar: {\n        message: `${transactions.typeTitle} added`,\n        variant: 'success',\n      },\n    }),\n  onExit: () => dispatch({ type: TRANSACTIONS_DIALOG_UNLOADED }),\n})\n\nconst BulkTransactionsDialog = ({\n  curStudent,\n  errors,\n  inProgress,\n  isClosed,\n  isOpen,\n  onAdd,\n  onExit,\n  type,\n}) => {\n  const [open, setOpen] = useState(false)\n  const [course, setCourse] = useState(null)\n  const [students, setStudents] = useState([])\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n  const classes = useStyles()\n\n  const handleClose = () => {\n    setOpen(false)\n    setCourse(null)\n    isClosed()\n  }\n\n  const handleSubmitAdd = (values) => {\n    onAdd(\n      {\n        ...values,\n        students: students.map((student) => student._id),\n        type: type === 'Bonuses' ? 'bonus' : 'purchase',\n        typeTitle: type,\n      },\n      curStudent\n    )\n  }\n\n  const handleCourseSelect = (slug) => {\n    setCourse(slug)\n  }\n\n  const handleStudentSelect = (rows) => {\n    setStudents(rows)\n  }\n\n  useEffect(() => {\n    // Close the dialog only if there are no errors\n    if (!inProgress && !errors) handleClose()\n  }, [inProgress])\n\n  // Allow for external component control of displaying the dialog\n  useEffect(() => {\n    setOpen(isOpen)\n  }, [isOpen])\n\n  return (\n    <Dialog\n      className={classes.dialog}\n      fullScreen={fullScreen}\n      onClick={(ev) => ev.stopPropagation()}\n      onClose={handleClose}\n      onExit={onExit}\n      onFocus={(ev) => ev.stopPropagation()}\n      open={open}\n    >\n      <Formik\n        initialValues={{\n          amount: '',\n          description: '',\n        }}\n        validationSchema={Yup.object({\n          amount: Yup.number().typeError('Numbers only').required('Required'),\n          description: Yup.string().required('Required'),\n        })}\n        onSubmit={async (values) => {\n          handleSubmitAdd(values)\n        }}\n      >\n        <Form>\n          <DialogTitle>Add {type}</DialogTitle>\n          <DialogContent>\n            <ListErrors errors={errors} />\n            {!course && <CourseSelector onSelect={handleCourseSelect} />}\n            {course && (\n              <Grid container spacing={2}>\n                <Grid item xs={12} md={6}>\n                  <Field\n                    autoFocus\n                    color='primary'\n                    component={TextField}\n                    disabled={inProgress}\n                    label='Description'\n                    name='description'\n                    type='text'\n                    fullWidth\n                  />\n                </Grid>\n                <Grid item xs={12} md={6}>\n                  <Field\n                    color='primary'\n                    component={TextField}\n                    disabled={inProgress}\n                    label='Amount'\n                    name='amount'\n                    type='text'\n                    fullWidth\n                  />\n                </Grid>\n                <Grid item xs={12}>\n                  <StudentsTable\n                    course={course}\n                    onSelect={handleStudentSelect}\n                  />\n                </Grid>\n              </Grid>\n            )}\n          </DialogContent>\n          <DialogActions>\n            <Button\n              disabled={inProgress || students.length === 0}\n              color='primary'\n              type='submit'\n              variant='contained'\n            >\n              {inProgress ? 'Adding...' : 'Add'}\n            </Button>\n            <Button\n              disabled={inProgress}\n              onClick={handleClose}\n              variant='contained'\n            >\n              Cancel\n            </Button>\n          </DialogActions>\n        </Form>\n      </Formik>\n    </Dialog>\n  )\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(BulkTransactionsDialog)\n","import React, { useCallback } from 'react'\nimport { useDropzone } from 'react-dropzone'\nimport parse from 'csv-parse/lib/sync'\nimport { Typography, makeStyles } from '@material-ui/core'\n\nconst useStyles = makeStyles((theme) => ({\n  filedrop: {\n    alignItems: 'center',\n    backgroundColor: theme.palette.grey[300],\n    borderRadius: theme.spacing(1),\n    color: theme.palette.grey[600],\n    display: 'flex',\n    flexDirection: 'column',\n    outline: 'none',\n    padding: '20px',\n    transition: 'all 0.25s ease-in-out',\n  },\n  filedropActive: {\n    backgroundColor: theme.palette.primary.light,\n    color: theme.palette.primary.contrastText,\n  },\n  filedropReject: {\n    backgroundColor: theme.palette.secondary.light,\n    color: theme.palette.secondary.contrastText,\n  },\n}))\n\nfunction Filedrop({ onFiledrop }) {\n  const classes = useStyles()\n\n  const onDrop = useCallback((acceptedFiles) => {\n    // Due to {multiple: false} in useDropzone(), only one file will be received\n    acceptedFiles.forEach((file) => {\n      const reader = new FileReader()\n      reader.onabort = () => console.log('file reading was aborted')\n      reader.onerror = () => console.log('file reading has failed')\n      reader.onload = () => {\n        const parsedFile = parse(reader.result, {\n          columns: true,\n          skip_empty_lines: true,\n        })\n        onFiledrop(parsedFile)\n      }\n      reader.readAsBinaryString(file)\n    })\n  }, [])\n\n  const {\n    getRootProps,\n    getInputProps,\n    isDragActive,\n    isDragReject,\n  } = useDropzone({\n    accept: 'text/csv, text/plain',\n    multiple: false,\n    onDropAccepted: onDrop,\n  })\n\n  return (\n    <div\n      {...getRootProps({\n        className: `${classes.filedrop} ${\n          isDragActive ? classes.filedropActive : ''\n        } ${isDragReject ? classes.filedropReject : ''}`,\n      })}\n    >\n      <input {...getInputProps()} />\n      {!isDragActive && (\n        <Typography>\n          Drop a .csv file here or click to select a .csv file\n        </Typography>\n      )}\n      {isDragActive && !isDragReject && (\n        <Typography>Drop .csv file here</Typography>\n      )}\n      {isDragReject && <Typography>File type not accepted</Typography>}\n    </div>\n  )\n}\n\nexport default Filedrop\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Checkbox,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  FormControl,\n  FormControlLabel,\n  FormGroup,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n  Typography,\n} from '@material-ui/core'\n\nimport CourseSelector from './CourseSelector'\nimport Filedrop from '../Filedrop'\nimport ListErrors from '../ListErrors'\nimport Spinner from '../Spinner'\nimport agent from '../../agent'\n\nimport {\n  IMPORT_SCORES,\n  IMPORT_SCORES_DIALOG_UNLOADED,\n} from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  dialog: {\n    '& > .MuiDialog-container > .MuiPaper-root': {\n      [theme.breakpoints.up('lg')]: {\n        width: theme.spacing(100),\n      },\n    },\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.scores,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onImport: (data, curStudent) =>\n    dispatch({\n      type: IMPORT_SCORES,\n      payload: agent.Scores.import(data),\n      curStudent,\n      snackbar: { message: 'Scores imported', variant: 'success' },\n    }),\n  onExit: () => dispatch({ type: IMPORT_SCORES_DIALOG_UNLOADED }),\n})\n\nconst ScoreImportStepper = ({ onDataChange, onShowImport }) => {\n  const [file, setFile] = useState(null)\n  const [course, setCourse] = useState(null)\n  const [tasks, setTasks] = useState(null)\n\n  const handleCourseSelect = (course) => {\n    setCourse(course)\n  }\n\n  const handleFiledrop = (file) => {\n    const tasks = {}\n    Object.keys(file[0])\n      .slice(1)\n      .forEach((task) => {\n        tasks[task] = false\n      })\n    setFile(file)\n    setTasks(tasks)\n  }\n\n  const handleTaskChange = (ev) => {\n    setTasks({ ...tasks, [ev.target.name]: ev.target.checked })\n  }\n\n  // Determine if any tasks have been checked/selected\n  useEffect(() => {\n    const tasksSelected = tasks\n      ? Object.values(tasks).some((el) => el === true)\n      : false\n    onShowImport(tasksSelected)\n  }, [tasks])\n\n  // Keep the imported data object current\n  useEffect(() => {\n    onDataChange({ file, course, tasks })\n  }, [file, course, tasks])\n\n  return (\n    <>\n      {!file && !course && !tasks && (\n        <CourseSelector onSelect={handleCourseSelect} />\n      )}\n\n      {!file && course && !tasks && (\n        <div>\n          <Typography gutterBottom>\n            Scores must be imported from a .csv file exported from Infinite\n            Campus\n          </Typography>\n          <Filedrop onFiledrop={handleFiledrop} />\n        </div>\n      )}\n\n      {file &&\n      course &&\n      tasks && ( // @todo: use material-table here?\n          <FormControl component='fieldset'>\n            <Typography gutterBottom variant='body1'>\n              Select the assignments to import\n            </Typography>\n            <FormGroup>\n              {Object.keys(tasks).map((task) => (\n                <FormControlLabel\n                  control={\n                    <Checkbox\n                      checked={tasks[task]}\n                      onChange={handleTaskChange}\n                      name={task}\n                    />\n                  }\n                  key={task}\n                  label={task}\n                />\n              ))}\n            </FormGroup>\n          </FormControl>\n        )}\n    </>\n  )\n}\n\nconst ImportScoresDialog = ({\n  curStudent,\n  errors,\n  inProgress,\n  isClosed,\n  isOpen,\n  onExit,\n  onImport,\n}) => {\n  const [open, setOpen] = useState(false)\n  const [ready, setReady] = useState(false)\n  const [data, setData] = useState(null)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n  const classes = useStyles()\n\n  const handleClose = () => {\n    setOpen(false)\n    isClosed()\n  }\n\n  const handleDataChange = (importData) => {\n    setData(importData)\n  }\n\n  const handleShowImport = (selected) => {\n    setReady(selected)\n  }\n\n  const handleClickImport = () => {\n    // Get student usernames (student numbers)\n    const usernames = data.file\n      .map(\n        (student, index) =>\n          index > 1 && student['Assignment Name'].split('#').pop()\n      )\n      .filter((username) => username !== false)\n\n    // Prepare data to send to server\n    const parsed = { course: data.course, tasks: [] }\n    for (const taskName in data.tasks) {\n      const selected = data.tasks[taskName]\n      if (selected) {\n        const task = {\n          title: taskName,\n          totalPoints: data.file[1][taskName],\n          scores: {},\n        }\n\n        for (const username of usernames) {\n          const student = data.file.find((row) =>\n            row['Assignment Name'].endsWith(username)\n          )\n          if (student) task.scores[username] = student[taskName]\n        }\n\n        parsed.tasks.push(task)\n      }\n    }\n\n    onImport(parsed, curStudent)\n  }\n\n  useEffect(() => {\n    // Close the dialog only if there are no errors\n    if (!inProgress && !errors) handleClose()\n  }, [inProgress])\n\n  // Allow for external component control of displaying the dialog\n  useEffect(() => {\n    setOpen(isOpen)\n  }, [isOpen])\n\n  return (\n    <Dialog\n      className={classes.dialog}\n      fullScreen={fullScreen}\n      onClick={(ev) => ev.stopPropagation()}\n      onClose={handleClose}\n      onExit={onExit}\n      onFocus={(ev) => ev.stopPropagation()}\n      open={open}\n    >\n      <DialogTitle>Import Scores</DialogTitle>\n      <DialogContent>\n        <ListErrors errors={errors} />\n        {inProgress ? (\n          <Spinner message='Importing...' />\n        ) : (\n          <ScoreImportStepper\n            onDataChange={handleDataChange}\n            onShowImport={handleShowImport}\n          />\n        )}\n      </DialogContent>\n      <DialogActions>\n        {ready && (\n          <Button\n            color='primary'\n            disabled={inProgress}\n            onClick={handleClickImport}\n            variant='contained'\n          >\n            {inProgress ? 'Importing...' : 'Import'}\n          </Button>\n        )}\n        <Button disabled={inProgress} onClick={handleClose} variant='contained'>\n          Cancel\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ImportScoresDialog)\n","import React, { useState } from 'react'\nimport {\n  Fab,\n  ListItemIcon,\n  ListItemText,\n  Menu,\n  MenuItem,\n  makeStyles,\n} from '@material-ui/core'\nimport { Grade, Money, Publish, ShoppingCart } from '@material-ui/icons'\n\nimport BulkTransactionsDialog from './BulkTransactionsDialog'\nimport ImportScoresDialog from '../Teacher/ImportScoresDialog'\n\nconst useStyles = makeStyles((theme) => ({\n  icon: {\n    marginRight: theme.spacing(1),\n  },\n}))\n\nconst UpdateAccountsMenu = ({ curStudent }) => {\n  const [menuAnchorEl, setMenuAnchorEl] = useState(null)\n  const [menuSelection, setMenuSelection] = useState(null)\n\n  const classes = useStyles()\n\n  const handleMenuOpen = (ev) => {\n    setMenuAnchorEl(ev.currentTarget)\n  }\n\n  const handleMenuClose = () => {\n    setMenuAnchorEl(null)\n  }\n\n  const handleMenuSelect = (ev) => {\n    setMenuSelection(ev.currentTarget.dataset.type)\n    setMenuAnchorEl(null)\n  }\n\n  const handleDialogClose = () => {\n    setMenuSelection(null)\n  }\n\n  return (\n    <>\n      <Fab color='primary' onClick={handleMenuOpen} variant='extended'>\n        <Money className={classes.icon} />\n        Update Accounts\n      </Fab>\n      <Menu\n        anchorEl={menuAnchorEl}\n        open={Boolean(menuAnchorEl)}\n        onClose={handleMenuClose}\n      >\n        <MenuItem data-type='scores' onClick={handleMenuSelect}>\n          <ListItemIcon>\n            <Publish />\n          </ListItemIcon>\n          <ListItemText>Import scores</ListItemText>\n        </MenuItem>\n        <MenuItem data-type='bonuses' onClick={handleMenuSelect}>\n          <ListItemIcon>\n            <Grade />\n          </ListItemIcon>\n          <ListItemText>Add Bonuses</ListItemText>\n        </MenuItem>\n        <MenuItem data-type='purchases' onClick={handleMenuSelect}>\n          <ListItemIcon>\n            <ShoppingCart />\n          </ListItemIcon>\n          <ListItemText>Add Purchases</ListItemText>\n        </MenuItem>\n      </Menu>\n      <ImportScoresDialog\n        curStudent={curStudent}\n        isClosed={handleDialogClose}\n        isOpen={menuSelection === 'scores'}\n      />\n      <BulkTransactionsDialog\n        curStudent={curStudent}\n        isClosed={handleDialogClose}\n        isOpen={menuSelection === 'bonuses'}\n        type='Bonuses'\n      />\n      <BulkTransactionsDialog\n        curStudent={curStudent}\n        isClosed={handleDialogClose}\n        isOpen={menuSelection === 'purchases'}\n        type='Purchases'\n      />\n    </>\n  )\n}\n\nexport default UpdateAccountsMenu\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Grid } from '@material-ui/core'\n\nimport AccountView from '../AccountView'\nimport Alert from '../Alert'\nimport EconomyDialog from './EconomyDialog'\nimport PageHeader from '../PageHeader'\nimport StudentSearch from './StudentSearch'\nimport UpdateAccountsMenu from './UpdateAccountsMenu'\n\nimport { ACCOUNTS_PAGE_UNLOADED } from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  importSummary: state.scores.importSummary,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onUnload: () => dispatch({ type: ACCOUNTS_PAGE_UNLOADED }),\n})\n\nconst TeacherAccounts = ({ importSummary, onUnload }) => {\n  const [student, setStudent] = useState(null)\n\n  const plural = (qty, unit) => `${qty} ${unit}${qty !== 1 ? 's' : ''}`\n\n  const handleStudentSelect = (student) => {\n    setStudent(student)\n  }\n\n  useEffect(() => {\n    return () => {\n      onUnload()\n    }\n  }, [])\n\n  return (\n    <>\n      <PageHeader title='Manage Accounts'>\n        <EconomyDialog />\n        <UpdateAccountsMenu curStudent={student} />\n      </PageHeader>\n\n      {importSummary && (\n        <Alert>\n          Created {plural(importSummary.tasksCreated, 'assignment')}, imported{' '}\n          {plural(importSummary.scoresImported, 'score')}, and updated{' '}\n          {plural(importSummary.scoresUpdated, 'score')}\n        </Alert>\n      )}\n\n      <Grid container spacing={4}>\n        <Grid item xs={12}>\n          <StudentSearch onChange={handleStudentSelect} />\n        </Grid>\n        <Grid item xs={12}>\n          {student && <AccountView canEdit={true} student={student} />}\n        </Grid>\n      </Grid>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TeacherAccounts)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Form, Field } from 'formik'\nimport { TextField } from 'formik-material-ui'\nimport * as Yup from 'yup'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Fab,\n  Grid,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport { Add, Edit } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport ListErrors from '../ListErrors'\nimport agent from '../../agent'\n\nimport {\n  ADD_COURSE,\n  COURSE_DIALOG_UNLOADED,\n  UPDATE_COURSE,\n} from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  icon: {\n    marginRight: theme.spacing(1),\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.courses,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onAdd: (course) =>\n    dispatch({\n      type: ADD_COURSE,\n      payload: agent.Courses.add(course),\n      snackbar: { message: 'Course added', variant: 'success' },\n    }),\n  onExit: () => dispatch({ type: COURSE_DIALOG_UNLOADED }),\n  onUpdate: (course) =>\n    dispatch({\n      type: UPDATE_COURSE,\n      payload: agent.Courses.update(course),\n      snackbar: { message: 'Course updated', variant: 'success' },\n    }),\n})\n\nconst CourseDialog = ({\n  course,\n  errors,\n  inProgress,\n  onAdd,\n  onExit,\n  onUpdate,\n}) => {\n  const [open, setOpen] = useState(false)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n  const classes = useStyles()\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmitAdd = (values) => {\n    onAdd({ ...values })\n  }\n\n  const handleSubmitUpdate = (values) => {\n    onUpdate({ ...course, ...values })\n  }\n\n  useEffect(() => {\n    // Close the dialog only if there are no errors\n    if (!inProgress && !errors) setOpen(false)\n  }, [inProgress])\n\n  return (\n    <>\n      {course ? (\n        <ActionButton action='Edit course' onClick={handleClickOpen}>\n          <Edit />\n        </ActionButton>\n      ) : (\n        <Fab color='primary' onClick={handleClickOpen} variant='extended'>\n          <Add className={classes.icon} />\n          Create course\n        </Fab>\n      )}\n\n      <Dialog\n        fullScreen={fullScreen}\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onExit={onExit}\n        onFocus={(ev) => ev.stopPropagation()}\n        open={open}\n      >\n        <Formik\n          initialValues={{\n            name: course?.name || '',\n            period: course?.period || '',\n          }}\n          validationSchema={Yup.object({\n            name: Yup.string().required('Required'),\n            period: Yup.number().typeError('Numbers only').required('Required'),\n          })}\n          onSubmit={async (values) => {\n            course ? handleSubmitUpdate(values) : handleSubmitAdd(values)\n          }}\n        >\n          <Form>\n            <DialogTitle>\n              {course ? 'Edit Course' : 'Create Course'}\n            </DialogTitle>\n            <DialogContent>\n              <ListErrors errors={errors} />\n              <Grid container spacing={2}>\n                <Grid item xs={12} md={6}>\n                  <Field\n                    autoFocus={course ? false : true}\n                    color='primary'\n                    component={TextField}\n                    disabled={inProgress}\n                    label='Course Name'\n                    name='name'\n                    type='text'\n                    fullWidth\n                  />\n                </Grid>\n                <Grid item xs={12} md={6}>\n                  <Field\n                    color='primary'\n                    component={TextField}\n                    disabled={inProgress}\n                    label='Period'\n                    name='period'\n                    type='text'\n                    fullWidth\n                  />\n                </Grid>\n              </Grid>\n            </DialogContent>\n            <DialogActions>\n              <Button\n                disabled={inProgress}\n                color='primary'\n                type='submit'\n                variant='contained'\n              >\n                {course\n                  ? inProgress\n                    ? 'Updating...'\n                    : 'Update'\n                  : inProgress\n                  ? 'Adding...'\n                  : 'Add'}\n              </Button>\n              <Button\n                disabled={inProgress}\n                onClick={handleClose}\n                variant='contained'\n              >\n                Cancel\n              </Button>\n            </DialogActions>\n          </Form>\n        </Formik>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CourseDialog)\n","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n} from '@material-ui/core'\nimport { Delete } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport agent from '../../agent'\n\nimport { DELETE_STUDENT } from '../../constants/actionTypes'\n\nconst mapDispatchToProps = (dispatch) => ({\n  onDelete: (user) =>\n    dispatch({\n      type: DELETE_STUDENT,\n      payload: agent.Students.delete(user),\n      snackbar: { message: 'Student deleted', variant: 'success' },\n    }),\n})\n\nconst DeleteStudentAlert = ({ course, onDelete, student }) => {\n  const [open, setOpen] = useState(false)\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmit = () => {\n    setOpen(false)\n    onDelete(student)\n  }\n\n  return (\n    <>\n      <ActionButton\n        action='Delete student'\n        onClick={handleClickOpen}\n        size='small'\n      >\n        <Delete fontSize='inherit' />\n      </ActionButton>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        onClick={(ev) => ev.stopPropagation()}\n        onFocus={(ev) => ev.stopPropagation()}\n      >\n        <DialogTitle>Delete Student</DialogTitle>\n        <DialogContent>\n          <DialogContentText component='div'>\n            Are you sure you want to delete{' '}\n            <b>\n              {student.firstName} {student.lastName}\n            </b>\n            ? This action will permanently delete:\n            <ul>\n              <li>the student's account, and</li>\n              <li>all song requests</li>\n              <li>all transactions</li>\n              <li>all purchases</li>\n              <li>all scores</li>\n            </ul>\n            associated with this student. This action <b>cannot be undone</b>.\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button\n            onClick={handleSubmit}\n            color='secondary'\n            variant='contained'\n            autoFocus\n          >\n            Delete\n          </Button>\n          <Button onClick={handleClose} variant='contained'>\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(() => ({}), mapDispatchToProps)(DeleteStudentAlert)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Form, Field } from 'formik'\nimport { TextField } from 'formik-material-ui'\nimport * as Yup from 'yup'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Grid,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport { Edit, PersonAdd } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport ListErrors from '../ListErrors'\nimport agent from '../../agent'\n\nimport {\n  ADD_STUDENT,\n  STUDENT_DIALOG_UNLOADED,\n  UPDATE_STUDENT,\n} from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  ...state.common.settings,\n  ...state.courses,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onAdd: (user, courseId) =>\n    dispatch({\n      type: ADD_STUDENT,\n      payload: agent.Students.add(user, courseId),\n      courseId,\n      snackbar: { message: 'Student added', variant: 'success' },\n    }),\n  onExit: () => dispatch({ type: STUDENT_DIALOG_UNLOADED }),\n  onUpdate: (user, courseId) =>\n    dispatch({\n      type: UPDATE_STUDENT,\n      payload: agent.Students.update(user),\n      courseId,\n      snackbar: { message: 'Student updated', variant: 'success' },\n    }),\n})\n\nconst StudentDialog = ({\n  course,\n  defaultStudentPassword,\n  errors,\n  inProgress,\n  onAdd,\n  onExit,\n  onUpdate,\n  student,\n}) => {\n  const [open, setOpen] = useState(false)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmitAdd = (values) => {\n    const user = { ...values }\n    const courseId = course._id\n    user.role = 'student'\n    onAdd(user, courseId)\n  }\n\n  const handleSubmitUpdate = (values) => {\n    const user = { ...student, ...values }\n    const courseId = course._id\n    onUpdate(user, courseId)\n  }\n\n  useEffect(() => {\n    // Close the dialog only if there are no errors\n    if (!inProgress && !errors) setOpen(false)\n  }, [inProgress])\n\n  return (\n    <>\n      {student ? (\n        <ActionButton\n          action='Edit student'\n          onClick={handleClickOpen}\n          size='small'\n        >\n          <Edit fontSize='inherit' />\n        </ActionButton>\n      ) : (\n        <ActionButton action='Add student' onClick={handleClickOpen}>\n          <PersonAdd />\n        </ActionButton>\n      )}\n\n      <Dialog\n        fullScreen={fullScreen}\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onExit={onExit}\n        onFocus={(ev) => ev.stopPropagation()}\n        open={open}\n      >\n        <Formik\n          initialValues={{\n            firstName: student?.firstName || '',\n            lastName: student?.lastName || '',\n            username: student?.username || '',\n            password: !student ? defaultStudentPassword : '',\n          }}\n          validationSchema={Yup.object({\n            firstName: Yup.string().required('Required'),\n            lastName: Yup.string().required('Required'),\n            username: Yup.number()\n              .typeError('Numbers only')\n              .required('Required'),\n            password: Yup.string().required(!student ? 'Required' : ''),\n          })}\n          onSubmit={async (values) => {\n            student ? handleSubmitUpdate(values) : handleSubmitAdd(values)\n          }}\n        >\n          <Form>\n            <DialogTitle>\n              {student ? 'Edit Student' : 'Add Student'}\n            </DialogTitle>\n            <DialogContent>\n              <ListErrors errors={errors} />\n              <Grid container spacing={2}>\n                <Grid item xs={12} md={6}>\n                  <Field\n                    autoFocus={student ? false : true}\n                    color='primary'\n                    component={TextField}\n                    disabled={inProgress}\n                    label='First Name'\n                    name='firstName'\n                    type='text'\n                    fullWidth\n                  />\n                </Grid>\n                <Grid item xs={12} md={6}>\n                  <Field\n                    color='primary'\n                    component={TextField}\n                    disabled={inProgress}\n                    label='Last Name'\n                    name='lastName'\n                    type='text'\n                    fullWidth\n                  />\n                </Grid>\n                <Grid item xs={12} md={6}>\n                  <Field\n                    color='primary'\n                    component={TextField}\n                    disabled={!!student || inProgress}\n                    label='Student Number'\n                    name='username'\n                    type='text'\n                    fullWidth\n                  />\n                </Grid>\n                <Grid item xs={12} md={6}>\n                  <Field\n                    color='primary'\n                    component={TextField}\n                    disabled={inProgress}\n                    label='Password'\n                    name='password'\n                    type='text'\n                    fullWidth\n                  />\n                </Grid>\n              </Grid>\n            </DialogContent>\n            <DialogActions>\n              <Button\n                color='primary'\n                disabled={inProgress}\n                type='submit'\n                variant='contained'\n              >\n                {student\n                  ? inProgress\n                    ? 'Updating...'\n                    : 'Update'\n                  : inProgress\n                  ? 'Adding...'\n                  : 'Add'}\n              </Button>\n              <Button\n                disabled={inProgress}\n                onClick={handleClose}\n                variant='contained'\n              >\n                Cancel\n              </Button>\n            </DialogActions>\n          </Form>\n        </Formik>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StudentDialog)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Form, Field } from 'formik'\nimport { TextField } from 'formik-material-ui'\nimport * as Yup from 'yup'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Grid,\n  MenuItem,\n} from '@material-ui/core'\nimport { Loop } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport ListErrors from '../ListErrors'\nimport agent from '../../agent'\n\nimport { MOVE_STUDENT } from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  ...state.courses,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onSubmit: (courseOut, courseIn) =>\n    dispatch({\n      type: MOVE_STUDENT,\n      payload: Promise.all([\n        agent.Courses.unenroll(courseOut),\n        agent.Courses.enroll(courseIn),\n      ]),\n      snackbar: { message: 'Student moved', variant: 'success' },\n    }),\n})\n\nconst StudentTransferDialog = ({\n  course,\n  courses,\n  errors,\n  inProgress,\n  onSubmit,\n  student,\n}) => {\n  const [open, setOpen] = useState(false)\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmit = (values) => {\n    if (course.slug !== values.course) {\n      const courseOut = { usernames: [student.username], slug: course.slug }\n      const courseIn = { usernames: [student.username], slug: values.course }\n      onSubmit(courseOut, courseIn)\n    }\n  }\n\n  useEffect(() => {\n    // Close the dialog only if there are no errors\n    if (!inProgress && !errors) setOpen(false)\n  }, [inProgress])\n\n  return (\n    <>\n      <ActionButton\n        action='Move student'\n        onClick={handleClickOpen}\n        size='small'\n      >\n        <Loop fontSize='inherit' />\n      </ActionButton>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        onClick={(ev) => ev.stopPropagation()}\n        onFocus={(ev) => ev.stopPropagation()}\n      >\n        <Formik\n          initialValues={{\n            course: course.slug || '',\n          }}\n          validationSchema={Yup.object({\n            course: Yup.string().required('Required'),\n          })}\n          onSubmit={async (values) => {\n            handleSubmit(values)\n          }}\n        >\n          {(formik) => (\n            <Form>\n              <DialogTitle>Move Student</DialogTitle>\n              <DialogContent>\n                <ListErrors errors={errors} />\n                <Grid container spacing={2}>\n                  <Grid item ds={12}>\n                    Move{' '}\n                    <b>\n                      {student.firstName} {student.lastName}\n                    </b>{' '}\n                    to...\n                  </Grid>\n                  <Grid item xs={12}>\n                    <Field\n                      color='primary'\n                      component={TextField}\n                      disabled={inProgress}\n                      id='course'\n                      label='Course'\n                      name='course'\n                      type='select'\n                      select\n                      fullWidth\n                    >\n                      {courses.map((course) => (\n                        <MenuItem key={course.slug} value={course.slug}>\n                          {`Period ${course.period} | ${course.name}`}\n                        </MenuItem>\n                      ))}\n                    </Field>\n                  </Grid>\n                </Grid>\n              </DialogContent>\n              <DialogActions>\n                <Button\n                  color='primary'\n                  disabled={inProgress || formik.values.course === course.slug}\n                  type='submit'\n                  variant='contained'\n                >\n                  {inProgress ? 'Moving...' : 'Move'}\n                </Button>\n                <Button onClick={handleClose} variant='contained'>\n                  Cancel\n                </Button>\n              </DialogActions>\n            </Form>\n          )}\n        </Formik>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(StudentTransferDialog)\n","import React from 'react'\nimport { Chip, Typography, makeStyles } from '@material-ui/core'\n\nimport DeleteStudentAlert from './DeleteStudentAlert'\nimport ResetStudentPasswordAlert from './ResetStudentPasswordAlert'\nimport StudentDialog from './StudentDialog'\nimport StudentTransferDialog from './StudentTransferDialog'\n\nconst useStyles = makeStyles((theme) => ({\n  row: {\n    'alignItems': 'center',\n    'borderBottom': 'solid 2px white',\n    'display': 'flex',\n    'height': theme.spacing(5),\n    'justifyContent': 'space-between',\n    'padding': theme.spacing(1),\n    '&:hover': {\n      borderBottomColor: theme.palette.secondary.main,\n    },\n  },\n  rowHeader: {\n    alignItems: 'center',\n    display: 'flex',\n  },\n  studentUsername: {\n    marginRight: theme.spacing(2),\n    minWidth: theme.spacing(12),\n  },\n}))\n\nconst StudentListRow = ({ course, student }) => {\n  const classes = useStyles()\n\n  return (\n    <div className={classes.row}>\n      <div className={classes.rowHeader}>\n        <Chip\n          color='primary'\n          label={student.username}\n          className={classes.studentUsername}\n        />\n        <Typography>\n          {student.lastName}, {student.firstName}\n        </Typography>\n      </div>\n      <div>\n        <ResetStudentPasswordAlert student={student} />\n        <StudentTransferDialog course={course} student={student} />\n        <StudentDialog course={course} student={student} />\n        <DeleteStudentAlert course={course} student={student} />\n      </div>\n    </div>\n  )\n}\n\nconst CourseStudentList = ({ course }) => {\n  return (\n    <>\n      <Typography variant='h6'>Students</Typography>{' '}\n      {course.students && course.students.length > 0 ? (\n        course.students.map((student) => {\n          return (\n            <StudentListRow\n              key={student._id}\n              course={course}\n              student={student}\n            />\n          )\n        })\n      ) : (\n        <div>\n          <Typography>No students have been added to this course</Typography>\n        </div>\n      )}\n    </>\n  )\n}\n\nexport default CourseStudentList\n","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n} from '@material-ui/core'\nimport { Delete } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport agent from '../../agent'\n\nimport { DELETE_COURSE } from '../../constants/actionTypes'\n\nconst mapDispatchToProps = (dispatch) => ({\n  onDelete: (slug) =>\n    dispatch({\n      type: DELETE_COURSE,\n      payload: agent.Courses.delete(slug),\n      snackbar: { message: 'Course deleted', variant: 'success' },\n    }),\n})\n\nconst DeleteCourseAlert = ({ course, onDelete }) => {\n  const [open, setOpen] = useState(false)\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmit = () => {\n    setOpen(false)\n    onDelete(course.slug)\n  }\n\n  return (\n    <>\n      <ActionButton action='Delete course' onClick={handleClickOpen}>\n        <Delete />\n      </ActionButton>\n\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        onClick={(ev) => ev.stopPropagation()}\n        onFocus={(ev) => ev.stopPropagation()}\n      >\n        <DialogTitle>Delete Course</DialogTitle>\n        <DialogContent>\n          <DialogContentText component='div'>\n            Are you sure you want to delete{' '}\n            <b>\n              {course.name} Period {course.period}\n            </b>\n            ? This action will permanently delete:\n            <ul>\n              <li>all student accounts</li>\n              <li>all song requests</li>\n              <li>all transactions</li>\n              <li>all purchases</li>\n              <li>all scores</li>\n            </ul>\n            associated with this course. This action <b>cannot be undone</b>.\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button\n            onClick={handleSubmit}\n            color='secondary'\n            variant='contained'\n            autoFocus\n          >\n            Delete\n          </Button>\n          <Button onClick={handleClose} variant='contained'>\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(() => ({}), mapDispatchToProps)(DeleteCourseAlert)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  useMediaQuery,\n  useTheme,\n  Typography,\n} from '@material-ui/core'\nimport { Publish } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport Filedrop from '../Filedrop'\nimport Spinner from '../Spinner'\nimport agent from '../../agent'\n\nimport {\n  IMPORT_STUDENTS,\n  STUDENT_DIALOG_UNLOADED,\n} from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  ...state.common.settings,\n  ...state.courses,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onDrop: (users, courseId) =>\n    dispatch({\n      type: IMPORT_STUDENTS,\n      payload: agent.Students.import(users, courseId),\n      snackbar: { message: 'Students imported', variant: 'success' },\n    }),\n  onExit: () => dispatch({ type: STUDENT_DIALOG_UNLOADED }),\n})\n\nconst ImportStudentsDialog = ({\n  course,\n  defaultStudentPassword,\n  errors,\n  inProgress,\n  onDrop,\n  onExit,\n}) => {\n  const [open, setOpen] = useState(false)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleFiledrop = (file) => {\n    const column = Object.keys(file[0])\n    const users = file\n      .map((row, index) => {\n        // Parse csv data for Infinite Campus grade book export\n        if (index < 2) return null\n        const student = row[column[0]]\n        const user = {\n          firstName: student\n            .split(',')[1]\n            .split(/(\\s\\w)*\\s#/)[0]\n            .trim(),\n          lastName: student.split(',')[0],\n          username: student.split('#')[1],\n          password: defaultStudentPassword,\n          role: 'student',\n        }\n        return user\n      })\n      .filter((element) => element !== null)\n    onDrop(users, course._id)\n  }\n\n  useEffect(() => {\n    // Close the dialog only if there are no errors\n    if (!inProgress && !errors) setOpen(false)\n  }, [inProgress])\n\n  return (\n    <>\n      <ActionButton action='Import students' onClick={handleClickOpen}>\n        <Publish />\n      </ActionButton>\n\n      <Dialog\n        fullScreen={fullScreen}\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onExit={onExit}\n        onFocus={(ev) => ev.stopPropagation()}\n        open={open}\n      >\n        <DialogTitle>Import Students</DialogTitle>\n        <DialogContent>\n          {inProgress ? (\n            <Spinner message='Importing...' />\n          ) : (\n            <>\n              <Typography gutterBottom>\n                Students can be imported from a .csv file exported from Infinite\n                Campus\n              </Typography>\n              <Filedrop onFiledrop={handleFiledrop} />\n            </>\n          )}\n        </DialogContent>\n        <DialogActions>\n          <Button\n            disabled={inProgress}\n            onClick={handleClose}\n            variant='contained'\n          >\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ImportStudentsDialog)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport MaterialTable from 'material-table'\n\nimport agent from '../../agent'\n\nimport {\n  DELETE_TASK,\n  TASKS_DIALOG_LOADED,\n  UPDATE_TASK,\n} from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  tasks: state.tasks.tasks,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onDelete: (task) =>\n    dispatch({\n      type: DELETE_TASK,\n      payload: agent.Tasks.delete(task),\n      snackbar: { message: 'Assignment removed', variant: 'success' },\n    }),\n  onLoad: (courseId) =>\n    dispatch({\n      type: TASKS_DIALOG_LOADED,\n      payload: agent.Tasks.getAll(courseId),\n    }),\n  onUpdate: (task) =>\n    dispatch({\n      type: UPDATE_TASK,\n      payload: agent.Tasks.update(task),\n      snackbar: { message: 'Assignment updated', variant: 'success' },\n    }),\n})\n\nconst TasksTable = ({ course, onDelete, onLoad, onUpdate, tasks }) => {\n  const [data, setData] = useState([])\n\n  const mappedData = tasks.map((task) => ({\n    createdAt: new Date(task.createdAt).toDateString(),\n    title: task.title,\n    totalPoints: task.totalPoints,\n    slug: task.slug,\n  }))\n\n  const [columns] = useState([\n    { title: 'Date', field: 'createdAt', editable: 'never' },\n    { title: 'Title', field: 'title', editable: 'never' },\n    { title: 'Total Points', field: 'totalPoints' },\n  ])\n\n  useEffect(() => {\n    onLoad(course._id)\n  }, [])\n\n  useEffect(() => {\n    setData(mappedData)\n  }, [tasks])\n\n  return (\n    <MaterialTable\n      columns={columns}\n      data={data}\n      localization={{\n        body: {\n          emptyDataSourceMessage: 'No assignments found for this course',\n          editRow: {\n            deleteText:\n              'Delete assignment? This will delete all scores for this assignment.',\n            saveTooltip: 'Delete assignment',\n          },\n        },\n      }}\n      options={{ actionsColumnIndex: -1, paging: false, toolbar: false }}\n      editable={{\n        onRowUpdate: (newData, oldData) =>\n          new Promise((resolve, reject) => {\n            const dataUpdate = [...data]\n            const index = oldData.tableData.id\n            dataUpdate[index] = newData\n            setData([...dataUpdate])\n            onUpdate(newData)\n            resolve()\n          }),\n        onRowDelete: (oldData) =>\n          new Promise((resolve, reject) => {\n            const newData = [...data]\n            const index = oldData.tableData.id\n            newData.splice(index, 1)\n            setData([...newData])\n            onDelete(oldData)\n            resolve()\n          }),\n      }}\n    />\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TasksTable)\n","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport { Assignment } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport ListErrors from '../ListErrors'\nimport TasksTable from './TasksTable'\n\nimport { TASKS_DIALOG_UNLOADED } from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  dialog: {\n    '& > .MuiDialog-container > .MuiPaper-root': {\n      [theme.breakpoints.up('lg')]: {\n        minHeight: theme.spacing(54),\n        width: theme.spacing(100),\n      },\n    },\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.tasks,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onExit: () => dispatch({ type: TASKS_DIALOG_UNLOADED }),\n})\n\nconst TasksDialog = ({ course, errors, inProgress, onExit }) => {\n  const [open, setOpen] = useState(false)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n  const classes = useStyles()\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  return (\n    <>\n      <ActionButton action='Manage assignments' onClick={handleClickOpen}>\n        <Assignment />\n      </ActionButton>\n\n      <Dialog\n        className={classes.dialog}\n        fullScreen={fullScreen}\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onExit={onExit}\n        onFocus={(ev) => ev.stopPropagation()}\n        open={open}\n      >\n        <DialogTitle>Manage Assignments</DialogTitle>\n        <DialogContent>\n          <ListErrors errors={errors} />\n          <TasksTable course={course} />\n        </DialogContent>\n        <DialogActions>\n          <Button\n            disabled={inProgress}\n            onClick={handleClose}\n            variant='contained'\n          >\n            Close\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TasksDialog)\n","import React, { useState } from 'react'\nimport {\n  Avatar,\n  ExpansionPanel,\n  ExpansionPanelDetails,\n  ExpansionPanelSummary,\n  Typography,\n  makeStyles,\n} from '@material-ui/core'\nimport { ExpandMore } from '@material-ui/icons'\n\nimport CourseDialog from './CourseDialog'\nimport CourseStudentList from './CourseStudentList'\nimport DeleteCourseAlert from './DeleteCourseAlert'\nimport ImportStudentsDialog from './ImportStudentsDialog'\nimport StudentDialog from './StudentDialog'\nimport TasksDialog from './TasksDialog'\n\nconst useStyles = makeStyles((theme) => ({\n  courseDetails: {\n    display: 'block',\n  },\n  courseHeader: {\n    alignItems: 'center',\n    display: 'flex',\n    justifyContent: 'space-between',\n    width: '100%',\n  },\n  coursePeriod: {\n    backgroundColor: theme.palette.secondary.main,\n    marginRight: theme.spacing(2),\n  },\n  courseTitle: {\n    flexGrow: '1',\n  },\n}))\n\nconst CourseList = ({ courses }) => {\n  const [expanded, setExpanded] = useState(false)\n\n  const classes = useStyles()\n\n  const handleChange = (panel) => (ev, isExpanded) => {\n    setExpanded(isExpanded ? panel : false)\n  }\n\n  return (\n    <>\n      {courses?.length > 0 ? (\n        courses.map((course) => {\n          return (\n            <ExpansionPanel\n              expanded={expanded === course._id}\n              key={course._id}\n              onChange={handleChange(course._id)}\n            >\n              <ExpansionPanelSummary expandIcon={<ExpandMore />}>\n                <div className={classes.courseHeader}>\n                  <Avatar className={classes.coursePeriod}>\n                    {course.period}\n                  </Avatar>\n                  <Typography className={classes.courseTitle} variant='h5'>\n                    {course.name}\n                  </Typography>\n                  <TasksDialog course={course} />\n                  <StudentDialog course={course} />\n                  <ImportStudentsDialog course={course} />\n                  <CourseDialog course={course} />\n                  <DeleteCourseAlert course={course} />\n                </div>\n              </ExpansionPanelSummary>\n              <ExpansionPanelDetails className={classes.courseDetails}>\n                <CourseStudentList course={course} />\n              </ExpansionPanelDetails>\n            </ExpansionPanel>\n          )\n        })\n      ) : (\n        <Typography>You have no courses</Typography>\n      )}\n    </>\n  )\n}\n\nexport default CourseList\n","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\n\nimport Alert from '../Alert'\nimport CourseDialog from './CourseDialog'\nimport CourseList from './CourseList'\nimport PageHeader from '../PageHeader'\nimport Spinner from '../Spinner'\nimport agent from '../../agent'\n\nimport {\n  COURSES_PAGE_LOADED,\n  COURSES_PAGE_UNLOADED,\n} from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  ...state.courses,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onLoad: () =>\n    dispatch({ type: COURSES_PAGE_LOADED, payload: agent.Courses.getAll() }),\n  onUnload: () => dispatch({ type: COURSES_PAGE_UNLOADED }),\n})\n\nconst TeacherCourses = ({\n  courses,\n  importCount,\n  onLoad,\n  onUnload,\n  pageLoaded,\n}) => {\n  useEffect(() => {\n    onLoad()\n\n    return () => {\n      onUnload()\n    }\n  }, [])\n\n  return (\n    <>\n      <PageHeader title='Manage Courses'>\n        <CourseDialog />\n      </PageHeader>\n      {importCount !== null && <Alert>{importCount} students imported</Alert>}\n      {pageLoaded ? (\n        <Spinner message='Loading...' />\n      ) : (\n        <CourseList courses={courses} />\n      )}\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TeacherCourses)\n","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { Typography, makeStyles } from '@material-ui/core'\n\nimport Points from './Points'\nimport agent from '../agent'\n\nimport {\n  ACCOUNT_BALANCE_LOADED,\n  ACCOUNT_BALANCE_UNLOADED,\n} from '../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  insufficient: {\n    backgroundColor: theme.palette.error.light,\n  },\n  sufficient: {\n    backgroundColor: theme.palette.success.light,\n  },\n  root: {\n    borderRadius: theme.spacing(1),\n    color: theme.palette.common.white,\n    padding: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\n    textAlign: 'center',\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.scores.total,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onLoad: (username) =>\n    dispatch({\n      type: ACCOUNT_BALANCE_LOADED,\n      payload: agent.Scores.getStudentScores(username),\n    }),\n  onUnload: () => dispatch({ type: ACCOUNT_BALANCE_UNLOADED }),\n})\n\nconst AccountBalance = ({\n  balance,\n  cost,\n  count,\n  onLoad,\n  onUnload,\n  username,\n}) => {\n  const classes = useStyles()\n\n  useEffect(() => {\n    onLoad(username)\n\n    return () => {\n      onUnload()\n    }\n  }, [])\n\n  useEffect(() => {\n    onLoad(username)\n  }, [count, username])\n\n  return (\n    <div\n      className={`${classes.root} ${\n        balance >= cost ? classes.sufficient : classes.insufficient\n      }`}\n    >\n      <Typography variant='h5'>\n        <Points value={balance} />\n      </Typography>\n      <Typography variant='subtitle2'>\n        <em>Account Balance</em>\n      </Typography>\n    </div>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AccountBalance)\n","import React from 'react'\nimport { Badge as MuiBadge, makeStyles } from '@material-ui/core'\n\nconst useStyles = makeStyles((theme) => ({\n  badge: {\n    left: '-6%',\n    top: '-30%',\n  },\n}))\n\nconst FabBadge = ({ children, value }) => {\n  const classes = useStyles()\n\n  return (\n    <MuiBadge\n      anchorOrigin={{ horizontal: 'left', vertical: 'top' }}\n      badgeContent={value}\n      classes={{ badge: classes.badge }}\n      color='secondary'\n      overlap='circle'\n    >\n      {children}\n    </MuiBadge>\n  )\n}\n\nexport default FabBadge\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  ButtonGroup,\n  Chip,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Fab,\n  FormControl,\n  FormControlLabel,\n  Grid,\n  Radio,\n  RadioGroup,\n  Tooltip,\n  Typography,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport { Alert, AlertTitle } from '@material-ui/lab'\nimport { PlaylistAddCheck, ThumbDown, ThumbUp } from '@material-ui/icons'\n\nimport AccountBalance from '../AccountBalance'\nimport FabBadge from '../FabBadge'\nimport ListErrors from '../ListErrors'\nimport agent from '../../agent'\n\nimport {\n  SONG_REQUESTS_DIALOG_UNLOADED,\n  UPDATE_SONG_REQUEST,\n} from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  dialog: {\n    '& > .MuiDialog-container > .MuiPaper-root': {\n      [theme.breakpoints.up('lg')]: {\n        minHeight: theme.spacing(54),\n        width: theme.spacing(100),\n      },\n    },\n  },\n  icon: {\n    marginRight: theme.spacing(1),\n  },\n  panel: {\n    minWidth: theme.spacing(40),\n    maxWidth: theme.spacing(60),\n  },\n  removalAlert: {\n    backgroundColor: theme.palette.error.light,\n    border: `2px solid ${theme.palette.error.dark}`,\n    borderRadius: theme.spacing(2),\n    color: theme.palette.common.white,\n    fontSize: theme.typography.h6.fontSize,\n    padding: theme.spacing(1),\n    textAlign: 'center',\n    textTransform: 'uppercase',\n  },\n  selected: {\n    backgroundColor: theme.palette.primary.main,\n  },\n  songInfo: {\n    marginBottom: theme.spacing(4),\n  },\n  statusButton: {\n    '&:hover': {\n      backgroundColor: theme.palette.primary.light,\n    },\n  },\n  statusDescription: {\n    backgroundColor: theme.palette.grey[100],\n    borderRadius: theme.spacing(1),\n    marginTop: theme.spacing(2),\n    padding: theme.spacing(2),\n  },\n  studentInfo: {\n    alignItems: 'center',\n    display: 'flex',\n    justifyContent: 'space-between',\n    marginTop: theme.spacing(4),\n    [theme.breakpoints.up('md')]: {\n      borderTopColor: theme.palette.primary.main,\n      borderTopStyle: 'dotted',\n      borderTopWidth: '4px',\n      paddingTop: theme.spacing(2),\n    },\n  },\n  studentName: {\n    'alignItems': 'center',\n    'display': 'flex',\n    '& > div': {\n      marginRight: theme.spacing(1),\n    },\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.songs,\n  songRemovalPurchaseAmount: state.common.settings.songRemovalPurchaseAmount,\n  songRemovalRefundAmount: state.common.settings.songRemovalRefundAmount,\n  songRequestPurchaseAmount: state.common.settings.songRequestPurchaseAmount,\n  // spotifyTokens: state.common.settings.spotifyTokens,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onExit: () => dispatch({ type: SONG_REQUESTS_DIALOG_UNLOADED }),\n  onSubmit: (song) =>\n    dispatch({\n      type: UPDATE_SONG_REQUEST,\n      payload: agent.Songs.update(song),\n    }),\n})\n\nconst ProcessSongRequestsDialog = ({\n  courses,\n  errors,\n  inProgress,\n  onExit,\n  onSubmit,\n  songRemovalPurchaseAmount,\n  songRemovalRefundAmount,\n  songRequestPurchaseAmount,\n  // spotifyTokens,\n}) => {\n  const [count, setCount] = useState(0)\n  const [open, setOpen] = useState(false)\n  const [song, setSong] = useState(null)\n  const [status, setStatus] = useState(null)\n  const [statusDescription, setStatusDescription] = useState(null)\n  const [skippedSongs, setSkippedSongs] = useState([])\n  const [totalCount, setTotalCount] = useState(0)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n  const classes = useStyles()\n\n  const getLyricSearchUrl = (artist, title) =>\n    `http://www.google.com/search?q=${encodeURIComponent(\n      `lyrics: ${title} by ${artist}`\n    )}`\n\n  const getSpotifySearchUrl = (artist, title) =>\n    `https://open.spotify.com/search/${encodeURIComponent(\n      `${title} ${artist}`\n    )}`\n\n  const getSongCount = () => {\n    let songCount = 0\n    if (courses.length > 0)\n      for (const course of courses)\n        songCount += course.songs.filter((song) =>\n          song.status.startsWith('pending')\n        ).length\n    return songCount\n  }\n\n  const getNextSong = () => {\n    setSong(null)\n    if (courses.length > 0) {\n      for (const course of courses) {\n        if (course.songs.length > 0) {\n          const nextSong = course.songs.find(\n            (song) =>\n              song.status.startsWith('pending') &&\n              !skippedSongs.includes(song._id)\n          )\n          if (nextSong) {\n            nextSong.period = course.period\n            setSong(nextSong)\n            setCount(count + 1)\n            break\n          }\n        }\n      }\n    }\n  }\n\n  const handleClickOpen = () => {\n    setOpen(true)\n    setTotalCount(getSongCount())\n  }\n\n  const handleClose = () => {\n    setCount(0)\n    setOpen(false)\n    setStatus(null)\n    setStatusDescription(null)\n    setSkippedSongs([])\n  }\n\n  const handleStatusButtonClick = (status) => {\n    setStatus(status)\n  }\n\n  const handleStatusDescriptionChange = (ev) => {\n    setStatusDescription(ev.target.value)\n  }\n\n  const handleSkip = () => {\n    setSkippedSongs([...skippedSongs, song._id])\n  }\n\n  const handleSubmitApproval = async () => {\n    onSubmit({\n      amount: songRequestPurchaseAmount,\n      id: song._id,\n      status,\n      statusDescription,\n    })\n    setStatus(null)\n    setStatusDescription(null)\n  }\n\n  const handleSubmitRemoval = async () => {\n    onSubmit({\n      id: song._id,\n      purchaseAmount: songRemovalPurchaseAmount,\n      refundAmount: songRemovalRefundAmount,\n      status: 'removed',\n      statusDescription: `${song.removedBy.firstName} ${song.removedBy.lastName} paid to remove this song`,\n    })\n  }\n\n  useEffect(() => {\n    setTotalCount(getSongCount())\n  })\n\n  useEffect(() => {\n    getNextSong()\n  }, [courses])\n\n  useEffect(() => {\n    getNextSong()\n  }, [skippedSongs])\n\n  return (\n    <>\n      <Fab color='primary' onClick={handleClickOpen} variant='extended'>\n        <FabBadge value={totalCount}>\n          <PlaylistAddCheck className={classes.icon} />\n          Process requests\n        </FabBadge>\n      </Fab>\n\n      <Dialog\n        className={classes.dialog}\n        fullScreen={fullScreen}\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onExit={onExit}\n        onFocus={(ev) => ev.stopPropagation()}\n        open={open}\n      >\n        <DialogTitle>Process Song Requests</DialogTitle>\n        <DialogContent>\n          <ListErrors errors={errors} />\n          {song ? (\n            song.status !== 'pending removal' ? (\n              <Grid container spacing={2}>\n                <Grid item xs={12} md={6}>\n                  <div className={classes.panel}>\n                    <div className={classes.songInfo}>\n                      <Typography variant='h6'>{song.title}</Typography>\n                      <Typography\n                        color='textSecondary'\n                        variant='body1'\n                        gutterBottom\n                      >\n                        Song\n                      </Typography>\n                      <Typography variant='h6'>{song.artist}</Typography>\n                      <Typography color='textSecondary' variant='body1'>\n                        Artist\n                      </Typography>\n                    </div>\n\n                    <ButtonGroup>\n                      <Button\n                        href={getLyricSearchUrl(song.artist, song.title)}\n                        target='_blank'\n                      >\n                        Search Lyrics\n                      </Button>\n                      <Button\n                        href={getSpotifySearchUrl(song.artist, song.title)}\n                        target='_blank'\n                      >\n                        Search Spotify\n                      </Button>\n                    </ButtonGroup>\n\n                    <div className={classes.studentInfo}>\n                      <div className={classes.studentName}>\n                        <Chip color='secondary' label={song.period} />\n                        <Typography>\n                          {song.student.firstName} {song.student.lastName}\n                        </Typography>\n                      </div>\n                      <AccountBalance\n                        cost={songRequestPurchaseAmount}\n                        count={count}\n                        username={song.student.username}\n                      />\n                    </div>\n                  </div>\n                </Grid>\n\n                <Grid item xs={12} md={6}>\n                  <div className={classes.panel}>\n                    <Typography variant='h6'>Status</Typography>\n\n                    <ButtonGroup fullWidth size='large'>\n                      <Tooltip arrow enterTouchDelay={0} title='Approve'>\n                        <Button\n                          className={`${classes.statusButton} ${\n                            status === 'approved' && classes.selected\n                          }`}\n                          onClick={() => handleStatusButtonClick('approved')}\n                        >\n                          <ThumbUp />\n                        </Button>\n                      </Tooltip>\n                      <Tooltip arrow enterTouchDelay={0} title='Reject'>\n                        <Button\n                          className={`${classes.statusButton} ${\n                            status === 'rejected' && classes.selected\n                          }`}\n                          onClick={() => handleStatusButtonClick('rejected')}\n                        >\n                          <ThumbDown />\n                        </Button>\n                      </Tooltip>\n                    </ButtonGroup>\n                    {status === 'approved' && (\n                      <div className={classes.statusDescription}>\n                        <Typography gutterBottom>\n                          <strong>Condition for Approval</strong> (optional)\n                        </Typography>\n                        <FormControl component='fieldset'>\n                          <RadioGroup\n                            name='statusDescription'\n                            value={statusDescription}\n                            onChange={handleStatusDescriptionChange}\n                          >\n                            <FormControlLabel\n                              value='Clean version'\n                              control={<Radio />}\n                              label='Clean version'\n                            />\n                            <FormControlLabel\n                              value='Instrumental version'\n                              control={<Radio />}\n                              label='Instrumental version'\n                            />\n                            <FormControlLabel\n                              value='Picked my best guess'\n                              control={<Radio />}\n                              label='Picked my best guess'\n                            />\n                          </RadioGroup>\n                        </FormControl>\n                      </div>\n                    )}\n                    {status === 'rejected' && (\n                      <div className={classes.statusDescription}>\n                        <Typography gutterBottom>\n                          <strong>Reason for Rejection</strong> (optional)\n                        </Typography>\n                        <FormControl component='fieldset'>\n                          <RadioGroup\n                            name='statusDescription'\n                            value={statusDescription}\n                            onChange={handleStatusDescriptionChange}\n                          >\n                            <FormControlLabel\n                              value='Inappropriate content (language, drugs, sex, and/or violence)'\n                              control={<Radio />}\n                              label='Inappropriate content (language, drugs, sex, and/or violence)'\n                            />\n                            <FormControlLabel\n                              value='Not available on Spotify'\n                              control={<Radio />}\n                              label='Not available on Spotify'\n                            />\n                            <FormControlLabel\n                              value='other'\n                              control={<Radio />}\n                              label='Other'\n                            />\n                          </RadioGroup>\n                        </FormControl>\n                      </div>\n                    )}\n                  </div>\n                </Grid>\n              </Grid>\n            ) : (\n              <Grid container spacing={2}>\n                <Grid item xs={12}>\n                  <div className={classes.panel}>\n                    <div className={classes.songInfo}>\n                      <Typography variant='h6'>{song.title}</Typography>\n                      <Typography\n                        color='textSecondary'\n                        variant='body1'\n                        gutterBottom\n                      >\n                        Song\n                      </Typography>\n                      <Typography variant='h6'>{song.artist}</Typography>\n                      <Typography color='textSecondary' variant='body1'>\n                        Artist\n                      </Typography>\n                    </div>\n\n                    <div className={classes.removalAlert}>\n                      Removal Requested by{' '}\n                      {`${song.removedBy.firstName} ${song.removedBy.lastName}`}\n                    </div>\n\n                    <div className={classes.studentInfo}>\n                      <div className={classes.studentName}>\n                        <Chip color='secondary' label={song.period} />\n                        <Typography>\n                          {song.student.firstName} {song.student.lastName}\n                        </Typography>\n                      </div>\n                      <AccountBalance\n                        cost={songRemovalPurchaseAmount}\n                        count={count}\n                        username={song.removedBy.username}\n                      />\n                    </div>\n                  </div>\n                </Grid>\n              </Grid>\n            )\n          ) : (\n            <Alert severity='info'>\n              <AlertTitle>All caught up!</AlertTitle>\n              There are no songs to process at this time\n            </Alert>\n          )}\n        </DialogContent>\n\n        <DialogActions>\n          {song && (\n            <Typography\n              style={{ marginRight: 'auto' }}\n              variant='subtitle2'\n            >{`Song ${count} of ${totalCount}`}</Typography>\n          )}\n          {song &&\n            (song.status !== 'pending removal' ? (\n              <Button\n                color='primary'\n                disabled={inProgress || !status}\n                onClick={handleSubmitApproval}\n                variant='contained'\n              >\n                {inProgress ? 'Saving...' : 'Save & Continue'}\n              </Button>\n            ) : (\n              <Button\n                color='secondary'\n                disabled={inProgress}\n                onClick={handleSubmitRemoval}\n                variant='contained'\n              >\n                {inProgress ? 'Removing...' : 'Remove & Continue'}\n              </Button>\n            ))}\n          {song && (\n            <Button\n              disabled={inProgress}\n              onClick={handleSkip}\n              variant='contained'\n            >\n              Skip\n            </Button>\n          )}\n          <Button\n            disabled={inProgress}\n            onClick={handleClose}\n            variant='contained'\n          >\n            {song ? 'Cancel' : 'Close'}\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ProcessSongRequestsDialog)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport MaterialTable from 'material-table'\nimport { Chip, Tooltip } from '@material-ui/core'\nimport { InfoOutlined } from '@material-ui/icons'\n\nimport PageHeader from '../PageHeader'\nimport ProcessSongRequestsDialog from './ProcessSongRequestsDialog'\nimport agent from '../../agent'\n\nimport {\n  DELETE_SONG_REQUEST,\n  SONGS_PAGE_UNLOADED,\n  TEACHER_SONGS_PAGE_LOADED,\n} from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({ ...state.songs })\n\nconst mapDispatchToProps = (dispatch) => ({\n  onDelete: (id) =>\n    dispatch({\n      type: DELETE_SONG_REQUEST,\n      payload: agent.Songs.delete(id),\n      snackbar: { message: 'Song request removed', variant: 'success' },\n    }),\n  onLoad: () =>\n    dispatch({\n      type: TEACHER_SONGS_PAGE_LOADED,\n      payload: agent.Songs.forTeacher(),\n    }),\n  onUnload: () => dispatch({ type: SONGS_PAGE_UNLOADED }),\n})\n\nconst TeacherSongs = ({ courses, onDelete, onLoad, onUnload }) => {\n  const [data, setData] = useState([])\n\n  const mappedData = courses\n    .map((course) =>\n      course.songs.map((song) => ({\n        createdAt: new Date(song.createdAt).toDateString(),\n        title: song.title,\n        artist: song.artist,\n        purchasedBy: `${song.student.firstName} ${song.student.lastName}`,\n        period: course.period,\n        status: song.status,\n        statusDescription: song.statusDescription,\n        _id: song._id,\n      }))\n    )\n    .flat()\n\n  const [columns] = useState([\n    { title: 'Request Date', field: 'createdAt', editable: 'never' },\n    { title: 'Song Title', field: 'title' },\n    { title: 'Song Artist', field: 'artist' },\n    { title: 'Purchased by', field: 'purchasedBy', editable: 'never' },\n    {\n      title: 'Period',\n      field: 'period',\n      editable: 'never',\n      render: (rowData, renderType) =>\n        renderType === 'row' ? (\n          <Chip label={rowData.period} color='secondary' />\n        ) : (\n          <Chip label={rowData} color='secondary' />\n        ),\n    },\n    {\n      title: 'Status',\n      field: 'status',\n      lookup: {\n        'approved': 'approved',\n        'pending': 'pending', // @todo: remove [for backwards compatibility]\n        'pending approval': 'pending approval',\n        'pending removal': 'pending removal',\n        'rejected': 'rejected',\n        'removed': 'removed',\n      },\n      render: (rowData, renderType) =>\n        renderType === 'row' ? (\n          <span style={{ alignItems: 'center', display: 'flex' }}>\n            {rowData.statusDescription ? (\n              <>\n                {rowData.status}\n                <Tooltip\n                  arrow\n                  color='primary'\n                  enterTouchDelay={0}\n                  title={rowData.statusDescription}\n                >\n                  <InfoOutlined style={{ marginLeft: '8px' }} />\n                </Tooltip>\n              </>\n            ) : (\n              rowData.status\n            )}\n          </span>\n        ) : (\n          <span>{rowData}</span>\n        ),\n    },\n  ])\n\n  useEffect(() => {\n    onLoad()\n\n    return () => {\n      return onUnload()\n    }\n  }, [])\n\n  useEffect(() => {\n    setData(mappedData)\n  }, [courses])\n\n  return (\n    <>\n      <PageHeader title='Manage Song Requests'>\n        <ProcessSongRequestsDialog />\n      </PageHeader>\n\n      <MaterialTable\n        title='Song Requests'\n        columns={columns}\n        data={data}\n        localization={{\n          body: {\n            emptyDataSourceMessage: 'No song requests have been submitted',\n            editRow: {\n              deleteText: 'Delete song request?',\n              saveTooltip: 'Delete song',\n            },\n          },\n        }}\n        options={{ actionsColumnIndex: -1, paging: false, grouping: true }}\n        editable={{\n          onRowDelete: (oldData) =>\n            new Promise((resolve, reject) => {\n              const dataDelete = [...data]\n              const index = oldData.tableData.id\n              dataDelete.splice(index, 1)\n              setData([...dataDelete])\n              onDelete(oldData._id)\n              resolve()\n            }),\n        }}\n      />\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TeacherSongs)\n","export const useGetInvoice = (products, quantities, taxRate) => {\n  if (products && quantities) {\n    const items = products.map((product) => ({\n      desc: product.name,\n      imgUrl: product.photoUrl,\n      max: product.maxPurchaseQuantity,\n      onHand: product.quantity,\n      price: quantities[product._id] * product.cost,\n      qty: quantities[product._id],\n      unit: product.cost,\n      _id: product._id,\n    }))\n\n    const subtotal = items\n      .map(({ price }) => price)\n      .reduce((sum, i) => sum + i, 0)\n    const taxes = (taxRate / 100) * subtotal\n    const total = taxes + subtotal\n\n    const invoice = { subtotal, taxes, total }\n\n    return { items, invoice }\n  } else {\n    return {}\n  }\n}\n","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  MenuItem,\n  Select,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  makeStyles,\n} from '@material-ui/core'\nimport { Delete } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport Points from '../Points'\nimport { useGetInvoice } from '../../hooks'\n\nconst useStyles = makeStyles((theme) => ({\n  emptyCart: {\n    textAlign: 'center',\n  },\n  tableCellImg: {\n    'alignItems': 'center',\n    'display': 'flex',\n    '& img': {\n      height: '50px',\n      marginRight: theme.spacing(2),\n    },\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.common.settings,\n})\n\nconst getOptions = (max) => {\n  const maxOptions = max === 0 ? 100 : max\n  let options = []\n  for (let i = 1; i <= maxOptions; i++) {\n    options.push(\n      <MenuItem value={i} key={i}>\n        {i}\n      </MenuItem>\n    )\n  }\n  return options\n}\n\nconst PurchaseDetailsList = ({ actions, products, quantities, taxRate }) => {\n  const classes = useStyles()\n\n  const { items, invoice } = useGetInvoice(products, quantities, taxRate)\n\n  const handleDeleteProduct = (productId) => actions.delete(productId)\n\n  const handleQtyUpdate = (event) =>\n    actions.update(event.target.name, event.target.value)\n\n  useEffect(() => {\n    if (actions && actions.hasOwnProperty('setInvoice'))\n      actions.setInvoice(invoice)\n  }, [products, quantities, taxRate])\n\n  return (\n    <TableContainer>\n      <Table>\n        <TableHead>\n          <TableRow>\n            <TableCell align='center' colSpan={3}>\n              Purchase Details\n            </TableCell>\n            <TableCell align='right'>Cost</TableCell>\n          </TableRow>\n          <TableRow>\n            <TableCell>Items</TableCell>\n            <TableCell align='right'>Quantity</TableCell>\n            <TableCell align='right'>Item Cost</TableCell>\n            <TableCell align='right'>Total Cost</TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {items.length > 0 ? (\n            items.map((row) => (\n              <TableRow key={row.desc}>\n                <TableCell className={classes.tableCellImg}>\n                  <img height='50px' src={row.imgUrl} />\n                  {row.desc}\n                </TableCell>\n                <TableCell align='right'>\n                  {actions ? (\n                    <>\n                      <ActionButton\n                        action='Remove from cart'\n                        onClick={() => handleDeleteProduct(row._id)}\n                      >\n                        <Delete />\n                      </ActionButton>\n                      <Select\n                        name={row._id}\n                        onChange={handleQtyUpdate}\n                        value={row.qty}\n                      >\n                        {getOptions(\n                          row.onHand < row.max || row.max === 0\n                            ? row.onHand\n                            : row.max\n                        )}\n                      </Select>\n                    </>\n                  ) : (\n                    row.qty\n                  )}\n                </TableCell>\n                <TableCell align='right'>\n                  <Points value={row.unit} />\n                </TableCell>\n                <TableCell align='right'>\n                  <Points value={row.price} />\n                </TableCell>\n              </TableRow>\n            ))\n          ) : (\n            <TableRow>\n              <TableCell colSpan={4} className={classes.emptyCart}>\n                Your cart is empty\n              </TableCell>\n            </TableRow>\n          )}\n\n          <TableRow>\n            <TableCell rowSpan={3} />\n            <TableCell colSpan={2}>Subtotal</TableCell>\n            <TableCell align='right'>\n              <Points value={invoice.subtotal} />\n            </TableCell>\n          </TableRow>\n          <TableRow>\n            <TableCell>Taxes & Fees</TableCell>\n            <TableCell align='right'>{`${taxRate}%`}</TableCell>\n            <TableCell align='right'>\n              <Points value={invoice.taxes} />\n            </TableCell>\n          </TableRow>\n          <TableRow>\n            <TableCell colSpan={2}>Total</TableCell>\n            <TableCell align='right'>\n              <Points value={invoice.total} />\n            </TableCell>\n          </TableRow>\n        </TableBody>\n      </Table>\n    </TableContainer>\n  )\n}\n\nexport default connect(mapStateToProps, {})(PurchaseDetailsList)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Chip } from '@material-ui/core'\nimport MaterialTable from 'material-table'\n\nimport Points from '../Points'\nimport PurchaseDetailsList from './PurchaseDetailsList'\nimport agent from '../../agent'\n\nimport { DELETE_PURCHASE } from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  ...state.common.settings,\n  ...state.purchases,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onDelete: (id) =>\n    dispatch({\n      type: DELETE_PURCHASE,\n      payload: agent.Purchases.delete(id),\n      snackbar: { message: 'Purchase removed', variant: 'success' },\n    }),\n})\n\nconst ManagePurchasesTable = ({ courses, onDelete, taxRate }) => {\n  const [data, setData] = useState([])\n\n  const mappedData = courses\n    .map((course) =>\n      course.purchases.map((purchase) => ({\n        createdAt: new Date(purchase.createdAt).toDateString(),\n        note: purchase.note,\n        period: course.period,\n        products: purchase.products,\n        purchasedBy: `${purchase.student.firstName} ${purchase.student.lastName}`,\n        quantities: purchase.quantities,\n        status: purchase.status,\n        totalCost: purchase.products.reduce(\n          (prev, cur) =>\n            prev +\n            cur.cost * purchase.quantities[cur._id] * (taxRate / 100 + 1),\n          0\n        ),\n        totalItems: Object.values(purchase.quantities).reduce(\n          (prev, cur) => prev + cur,\n          0\n        ),\n        _id: purchase._id,\n      }))\n    )\n    .flat()\n\n  const [columns] = useState([\n    { title: 'Purchase Date', field: 'createdAt', editable: 'never' },\n    { title: 'Total Items', field: 'totalItems' },\n    {\n      title: 'Total Cost',\n      field: 'totalCost',\n      render: (rowData, renderType) =>\n        renderType === 'row' ? (\n          <Points value={rowData.totalCost} />\n        ) : (\n          <Points value={rowData} />\n        ),\n    },\n    { title: 'Purchased by', field: 'purchasedBy' },\n    {\n      title: 'Period',\n      field: 'period',\n      editable: 'never',\n      render: (rowData, renderType) =>\n        renderType === 'row' ? (\n          <Chip label={rowData.period} color='secondary' />\n        ) : (\n          <Chip label={rowData} color='secondary' />\n        ),\n    },\n    { title: 'Notes', field: 'note' },\n    { title: 'Status', field: 'status' },\n  ])\n\n  useEffect(() => {\n    setData(mappedData)\n  }, [courses])\n\n  return (\n    <MaterialTable\n      title='Purchases'\n      columns={columns}\n      data={data}\n      localization={{\n        body: {\n          emptyDataSourceMessage: 'No purchases have been made',\n          editRow: {\n            deleteText: 'Delete purchase?',\n            saveTooltip: 'Delete purchase',\n          },\n        },\n      }}\n      options={{ actionsColumnIndex: -1, paging: false, grouping: true }}\n      detailPanel={(rowData) => {\n        return (\n          <PurchaseDetailsList\n            products={rowData.products}\n            quantities={rowData.quantities}\n          />\n        )\n      }}\n      onRowClick={(event, rowData, togglePanel) => togglePanel()}\n      editable={{\n        onRowDelete: (oldData) =>\n          new Promise((resolve, reject) => {\n            const dataDelete = [...data]\n            const index = oldData.tableData.id\n            dataDelete.splice(index, 1)\n            setData([...dataDelete])\n            onDelete(oldData._id)\n            resolve()\n          }),\n      }}\n    />\n  )\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ManagePurchasesTable)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  ButtonGroup,\n  Chip,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Fab,\n  Grid,\n  TextField,\n  Tooltip,\n  Typography,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport { Alert, AlertTitle } from '@material-ui/lab'\nimport { ShoppingCart, ThumbDown, ThumbUp } from '@material-ui/icons'\n\nimport AccountBalance from '../AccountBalance'\nimport FabBadge from '../FabBadge'\nimport ListErrors from '../ListErrors'\nimport PurchaseDetailsList from '../Purchases/PurchaseDetailsList'\nimport agent from '../../agent'\n\nimport {\n  PURCHASES_DIALOG_UNLOADED,\n  UPDATE_PURCHASE,\n} from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  dialog: {\n    '& > .MuiDialog-container > .MuiPaper-root': {\n      [theme.breakpoints.up('lg')]: {\n        minHeight: theme.spacing(54),\n        width: theme.spacing(100),\n      },\n    },\n  },\n  icon: {\n    marginRight: theme.spacing(1),\n  },\n  panel: {\n    minWidth: theme.spacing(40),\n    maxWidth: theme.spacing(60),\n  },\n  purchaseNote: {\n    backgroundColor: theme.palette.grey[100],\n    borderRadius: theme.spacing(1),\n    marginTop: theme.spacing(2),\n    padding: theme.spacing(2),\n  },\n  removalAlert: {\n    backgroundColor: theme.palette.error.light,\n    border: `2px solid ${theme.palette.error.dark}`,\n    borderRadius: theme.spacing(2),\n    color: theme.palette.common.white,\n    fontSize: theme.typography.h6.fontSize,\n    padding: theme.spacing(1),\n    textAlign: 'center',\n    textTransform: 'uppercase',\n  },\n  selected: {\n    backgroundColor: theme.palette.primary.main,\n  },\n  songInfo: {\n    marginBottom: theme.spacing(4),\n  },\n  statusButton: {\n    '&:hover': {\n      backgroundColor: theme.palette.primary.light,\n    },\n  },\n  studentInfo: {\n    alignItems: 'center',\n    display: 'flex',\n    justifyContent: 'space-between',\n    marginTop: theme.spacing(4),\n    [theme.breakpoints.up('md')]: {\n      borderTopColor: theme.palette.primary.main,\n      borderTopStyle: 'dotted',\n      borderTopWidth: '4px',\n      paddingTop: theme.spacing(2),\n    },\n  },\n  studentName: {\n    'alignItems': 'center',\n    'display': 'flex',\n    '& > div': {\n      marginRight: theme.spacing(1),\n    },\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.common.settings,\n  ...state.purchases,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onExit: () => dispatch({ type: PURCHASES_DIALOG_UNLOADED }),\n  onUpdate: (purchase) =>\n    dispatch({\n      type: UPDATE_PURCHASE,\n      payload: agent.Purchases.update(purchase),\n    }),\n})\n\nconst ProcessPurchasesDialog = ({\n  courses,\n  errors,\n  inProgress,\n  onExit,\n  onUpdate,\n  taxRate,\n}) => {\n  const [count, setCount] = useState(0)\n  const [invoice, setInvoice] = useState({})\n  const [open, setOpen] = useState(false)\n  const [purchase, setPurchase] = useState(null)\n  const [purchaseNote, setPurchaseNote] = useState('')\n  const [skippedPurchases, setSkippedPurchases] = useState([])\n  const [status, setStatus] = useState(null)\n  const [totalCount, setTotalCount] = useState(0)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n  const classes = useStyles()\n\n  const getPurchaseCount = () => {\n    let count = 0\n    if (courses.length > 0)\n      for (const course of courses)\n        count += course.purchases.filter((purchase) =>\n          purchase.status.startsWith('pending')\n        ).length\n    return count\n  }\n\n  const getNextPurchase = () => {\n    const prevPurchaseId = purchase?._id\n    setPurchase(null)\n    if (courses.length > 0) {\n      for (const course of courses) {\n        if (course.purchases.length > 0) {\n          const nextPurchase = course.purchases.find(\n            (purchase) =>\n              purchase.status.startsWith('pending') &&\n              !skippedPurchases.includes(purchase._id)\n          )\n          if (nextPurchase) {\n            nextPurchase.period = course.period\n            setPurchase(nextPurchase)\n            if (prevPurchaseId !== nextPurchase._id) setCount(count + 1)\n            break\n          }\n        }\n      }\n    }\n  }\n\n  const handleClickOpen = () => {\n    setOpen(true)\n    setTotalCount(getPurchaseCount())\n  }\n\n  const handleClose = () => {\n    setCount(0)\n    setOpen(false)\n    setStatus(null)\n    setPurchaseNote('')\n    setSkippedPurchases([])\n  }\n\n  const handleDeletePurchaseItemClick = (productId, purchase) => {\n    const products = purchase.products.filter(\n      (product) => product._id !== productId\n    )\n    const quantities = { ...purchase.quantities }\n    delete quantities[productId]\n    onUpdate({\n      ...purchase,\n      products,\n      quantities,\n      id: purchase._id,\n    })\n  }\n\n  const handleUpdatePurchaseItemQuantity = (productId, quantity) => {\n    const quantities = { ...purchase.quantities, [productId]: quantity }\n    onUpdate({ ...purchase, quantities, id: purchase._id })\n  }\n\n  const handleSaveButtonClick = async () => {\n    onUpdate({\n      ...purchase,\n      id: purchase._id,\n      invoice,\n      note: purchaseNote,\n      status,\n    })\n    setStatus(null)\n    setPurchaseNote('')\n  }\n\n  const handleStatusButtonClick = (status) => {\n    setStatus(status)\n  }\n\n  const handlePurchaseNoteChange = (ev) => {\n    setPurchaseNote(ev.target.value)\n  }\n\n  const handleSkip = () => {\n    setSkippedPurchases([...skippedPurchases, purchase._id])\n    setStatus(null)\n  }\n\n  useEffect(() => {\n    setTotalCount(getPurchaseCount())\n  })\n\n  useEffect(() => {\n    getNextPurchase()\n  }, [courses, skippedPurchases])\n\n  return (\n    <>\n      <Fab color='primary' onClick={handleClickOpen} variant='extended'>\n        <FabBadge value={totalCount}>\n          <ShoppingCart className={classes.icon} />\n          Process purchases\n        </FabBadge>\n      </Fab>\n\n      <Dialog\n        className={classes.dialog}\n        fullScreen={fullScreen}\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onExit={onExit}\n        onFocus={(ev) => ev.stopPropagation()}\n        open={open}\n      >\n        <DialogTitle>Process Purchases</DialogTitle>\n        <DialogContent>\n          <ListErrors errors={errors} />\n          {purchase ? (\n            <Grid container spacing={2}>\n              <Grid item xs={12}>\n                <PurchaseDetailsList\n                  actions={{\n                    delete: (productId) =>\n                      handleDeletePurchaseItemClick(productId, purchase),\n                    setInvoice: (invoice) => setInvoice(invoice),\n                    update: (productId, quantity) =>\n                      handleUpdatePurchaseItemQuantity(productId, quantity),\n                  }}\n                  products={purchase.products}\n                  quantities={purchase.quantities}\n                  taxRate={taxRate}\n                />\n              </Grid>\n              <Grid item xs={12} md={6}>\n                <div className={classes.panel}>\n                  <div className={classes.studentInfo}>\n                    <div className={classes.studentName}>\n                      <Chip color='secondary' label={purchase.period} />\n                      <Typography>\n                        {purchase.student.firstName} {purchase.student.lastName}\n                      </Typography>\n                    </div>\n                    <AccountBalance\n                      cost={invoice.total}\n                      count={count}\n                      username={purchase.student.username}\n                    />\n                  </div>\n                </div>\n              </Grid>\n\n              <Grid item xs={12} md={6}>\n                <div className={classes.panel}>\n                  <Typography variant='h6'>Status</Typography>\n\n                  <ButtonGroup fullWidth size='large'>\n                    <Tooltip arrow enterTouchDelay={0} title='Approve'>\n                      <Button\n                        className={`${classes.statusButton} ${\n                          status === 'approved' && classes.selected\n                        }`}\n                        onClick={() => handleStatusButtonClick('approved')}\n                      >\n                        <ThumbUp />\n                      </Button>\n                    </Tooltip>\n                    <Tooltip arrow enterTouchDelay={0} title='Decline'>\n                      <Button\n                        className={`${classes.statusButton} ${\n                          status === 'declined' && classes.selected\n                        }`}\n                        onClick={() => handleStatusButtonClick('declined')}\n                      >\n                        <ThumbDown />\n                      </Button>\n                    </Tooltip>\n                  </ButtonGroup>\n                  <div className={classes.purchaseNote}>\n                    <TextField\n                      fullWidth\n                      label='Notes (optional)'\n                      name='purchaseNote'\n                      onChange={handlePurchaseNoteChange}\n                      value={purchaseNote}\n                    />\n                  </div>\n                </div>\n              </Grid>\n            </Grid>\n          ) : (\n            <Alert severity='info'>\n              <AlertTitle>All caught up!</AlertTitle>\n              There are no purchases to process at this time\n            </Alert>\n          )}\n        </DialogContent>\n\n        <DialogActions>\n          {purchase && (\n            <>\n              <Typography\n                style={{ marginRight: 'auto' }}\n                variant='subtitle2'\n              >{`Purchase ${count} of ${totalCount}`}</Typography>\n              <Button\n                color='primary'\n                disabled={inProgress || !status}\n                onClick={handleSaveButtonClick}\n                variant='contained'\n              >\n                {inProgress ? 'Saving...' : 'Save & Continue'}\n              </Button>\n              <Button\n                disabled={inProgress}\n                onClick={handleSkip}\n                variant='contained'\n              >\n                Skip\n              </Button>\n            </>\n          )}\n          <Button\n            disabled={inProgress}\n            onClick={handleClose}\n            variant='contained'\n          >\n            {purchase ? 'Cancel' : 'Close'}\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ProcessPurchasesDialog)\n","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { Button } from '@material-ui/core'\n\nimport ManagePurchasesTable from './ManagePurchasesTable'\nimport PageHeader from '../PageHeader'\nimport ProcessPurchasesDialog from './ProcessPurchasesDialog'\nimport agent from '../../agent'\n\nimport {\n  NAV_TAB_CHANGE,\n  TEACHER_PURCHASES_LOADED,\n  TEACHER_PURCHASES_UNLOADED,\n} from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  ...state.common.currentUser,\n  ...state.purchases,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onLoad: () =>\n    dispatch({\n      type: TEACHER_PURCHASES_LOADED,\n      payload: agent.Purchases.forTeacher(),\n    }),\n  onPageChange: (value, redirectTo) =>\n    dispatch({ type: NAV_TAB_CHANGE, value, redirectTo }),\n  onUnload: () => dispatch({ type: TEACHER_PURCHASES_UNLOADED }),\n})\n\nconst ManagePurchases = ({ onLoad, onPageChange, onUnload, role }) => {\n  const handlePageChange = () => onPageChange('store', `/${role}/products`)\n\n  useEffect(() => {\n    onLoad()\n\n    return () => {\n      onUnload()\n    }\n  }, [])\n\n  return (\n    <>\n      <PageHeader title='Manage Purchases'>\n        <Button onClick={handlePageChange} size='small'>\n          Manage Products\n        </Button>\n        <ProcessPurchasesDialog />\n      </PageHeader>\n      <ManagePurchasesTable />\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ManagePurchases)\n","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  makeStyles,\n} from '@material-ui/core'\n\nimport agent from '../../agent'\n\nimport { WHATS_NEW_FLAGS_RESET } from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  button: {\n    marginRight: theme.spacing(2),\n  },\n}))\n\nconst mapDispatchToProps = (dispatch) => ({\n  onReset: (role) =>\n    dispatch({\n      type: WHATS_NEW_FLAGS_RESET,\n      payload: agent.Teachers.resetFlags(role),\n      snackbar: {\n        message: `${role.charAt(0).toUpperCase() + role.slice(1)} flags reset`,\n        variant: 'success',\n      },\n    }),\n})\n\nconst ResetWhatsNewAlert = ({ onReset }) => {\n  const [open, setOpen] = useState(false)\n\n  const classes = useStyles()\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmit = (role) => {\n    setOpen(false)\n    onReset(role)\n  }\n\n  return (\n    <>\n      <Button className={classes.button} onClick={handleClickOpen} size='small'>\n        Reset Viewed Changes\n      </Button>\n      <Dialog\n        open={open}\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onFocus={(ev) => ev.stopPropagation()}\n      >\n        <DialogTitle>Reset Viewed Changes</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Reset viewed changes flag for all student or teacher accounts?\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button\n            onClick={() => handleSubmit('student')}\n            color='secondary'\n            variant='contained'\n            autoFocus\n          >\n            Reset Students\n          </Button>\n          <Button\n            onClick={() => handleSubmit('teacher')}\n            color='secondary'\n            variant='contained'\n            autoFocus\n          >\n            Reset Teachers\n          </Button>\n          <Button onClick={handleClose} variant='contained'>\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(() => ({}), mapDispatchToProps)(ResetWhatsNewAlert)\n","import React, { useState, useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Form, Field } from 'formik'\nimport { TextField } from 'formik-material-ui'\nimport * as Yup from 'yup'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Fab,\n  Grid,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport { Add, Edit } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport ListErrors from '../ListErrors'\nimport agent from '../../agent'\n\nimport {\n  ADD_TEACHER,\n  TEACHER_DIALOG_UNLOADED,\n  UPDATE_TEACHER,\n} from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  icon: {\n    marginRight: theme.spacing(1),\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.teachers,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onAdd: (user) =>\n    dispatch({\n      type: ADD_TEACHER,\n      payload: agent.Auth.register(user),\n      snackbar: { message: 'Teacher added', variant: 'success' },\n    }),\n  onExit: () => dispatch({ type: TEACHER_DIALOG_UNLOADED }),\n  onUpdate: (user) =>\n    dispatch({\n      type: UPDATE_TEACHER,\n      payload: agent.Teachers.update(user),\n      snackbar: { message: 'Teacher updated', variant: 'success' },\n    }),\n})\n\nconst TeacherDialog = ({\n  errors,\n  inProgress,\n  onAdd,\n  onExit,\n  onUpdate,\n  teacher,\n}) => {\n  const [open, setOpen] = useState(false)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n  const classes = useStyles()\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmitAdd = (values) => {\n    onAdd({ ...values, role: 'teacher' })\n  }\n\n  const handleSubmitUpdate = (values) => {\n    onUpdate({ ...teacher, ...values })\n  }\n\n  useEffect(() => {\n    // Close the dialog only if there are no errors\n    if (!inProgress && !errors) setOpen(false)\n  }, [inProgress])\n\n  return (\n    <>\n      {teacher ? (\n        <ActionButton action='Update teacher' onClick={handleClickOpen}>\n          <Edit />\n        </ActionButton>\n      ) : (\n        <Fab color='primary' onClick={handleClickOpen} variant='extended'>\n          <Add className={classes.icon} />\n          Add teacher\n        </Fab>\n      )}\n      <Dialog\n        fullScreen={fullScreen}\n        open={open}\n        onClose={handleClose}\n        onClick={(ev) => ev.stopPropagation()}\n        onExit={onExit}\n        onFocus={(ev) => ev.stopPropagation()}\n      >\n        <Formik\n          initialValues={{\n            firstName: teacher?.firstName || '',\n            lastName: teacher?.lastName || '',\n            username: teacher?.username || '',\n            password: '',\n          }}\n          validationSchema={Yup.object({\n            firstName: Yup.string().required('Required'),\n            lastName: Yup.string().required('Required'),\n            username: Yup.string().required('Required'),\n            password: Yup.string().required(!teacher ? 'Required' : ''),\n          })}\n          onSubmit={async (values) => {\n            teacher ? handleSubmitUpdate(values) : handleSubmitAdd(values)\n          }}\n        >\n          <Form>\n            <DialogTitle>\n              {teacher ? 'Edit Teacher' : 'Add Teacher'}\n            </DialogTitle>\n            <DialogContent>\n              <ListErrors errors={errors} />\n              <Grid container spacing={2}>\n                <Grid item xs={12} md={6}>\n                  <Field\n                    autoFocus={teacher ? false : true}\n                    color='primary'\n                    component={TextField}\n                    disabled={inProgress}\n                    label='First Name'\n                    name='firstName'\n                    type='text'\n                    fullWidth\n                  />\n                </Grid>\n                <Grid item xs={12} md={6}>\n                  <Field\n                    color='primary'\n                    component={TextField}\n                    disabled={inProgress}\n                    label='Last Name'\n                    name='lastName'\n                    type='text'\n                    fullWidth\n                  />\n                </Grid>\n                <Grid item xs={12} md={6}>\n                  <Field\n                    color='primary'\n                    component={TextField}\n                    disabled={!!teacher || inProgress}\n                    label='Username'\n                    name='username'\n                    type='text'\n                    fullWidth\n                  />\n                </Grid>\n                <Grid item xs={12} md={6}>\n                  <Field\n                    color='primary'\n                    component={TextField}\n                    disabled={inProgress}\n                    label='Password'\n                    name='password'\n                    type='text'\n                    fullWidth\n                  />\n                </Grid>\n              </Grid>\n            </DialogContent>\n            <DialogActions>\n              <Button\n                color='primary'\n                disabled={inProgress}\n                type='submit'\n                variant='contained'\n              >\n                {teacher\n                  ? inProgress\n                    ? 'Updating...'\n                    : 'Update'\n                  : inProgress\n                  ? 'Adding...'\n                  : 'Add'}\n              </Button>\n              <Button\n                disabled={inProgress}\n                onClick={handleClose}\n                variant='contained'\n              >\n                Cancel\n              </Button>\n            </DialogActions>\n          </Form>\n        </Formik>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TeacherDialog)\n","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n} from '@material-ui/core'\nimport { Delete } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport agent from '../../agent'\n\nimport { DELETE_TEACHER } from '../../constants/actionTypes'\n\nconst mapDispatchToProps = (dispatch) => ({\n  onDelete: (user) =>\n    dispatch({\n      type: DELETE_TEACHER,\n      payload: agent.Teachers.delete(user),\n      snackbar: { message: 'Teacher deleted', variant: 'success' },\n    }),\n})\n\nconst DeleteTeacherAlert = ({ onDelete, teacher }) => {\n  const [open, setOpen] = useState(false)\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmit = () => {\n    setOpen(false)\n    onDelete(teacher)\n  }\n\n  return (\n    <>\n      <ActionButton action='Delete teacher' onClick={handleClickOpen}>\n        <Delete />\n      </ActionButton>\n      <Dialog\n        open={open}\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onFocus={(ev) => ev.stopPropagation()}\n      >\n        <DialogTitle>Delete Teacher</DialogTitle>\n        <DialogContent>\n          <DialogContentText component='div'>\n            Are you sure you want to delete{' '}\n            <b>\n              {teacher.firstName} {teacher.lastName}\n            </b>\n            ? This action will permanently delete:\n            <ul>\n              <li>all student accounts</li>\n              <li>all song requests</li>\n              <li>all transactions</li>\n              <li>all purchases</li>\n              <li>all products</li>\n              <li>all scores</li>\n            </ul>\n            associated with this teacher. This action <b>cannot be undone</b>.\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button\n            onClick={handleSubmit}\n            color='secondary'\n            variant='contained'\n            autoFocus\n          >\n            Delete\n          </Button>\n          <Button onClick={handleClose} variant='contained'>\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(() => ({}), mapDispatchToProps)(DeleteTeacherAlert)\n","import React, { useState } from 'react'\nimport {\n  Chip,\n  ExpansionPanel,\n  ExpansionPanelDetails,\n  ExpansionPanelSummary,\n  Typography,\n  makeStyles,\n} from '@material-ui/core'\nimport { ExpandMore } from '@material-ui/icons'\n\nimport TeacherDialog from './TeacherDialog'\nimport DeleteTeacherAlert from './DeleteTeacherAlert'\n\nconst useStyles = makeStyles((theme) => ({\n  teacherDetails: {\n    display: 'block',\n  },\n  teacherHeader: {\n    alignItems: 'center',\n    display: 'flex',\n    justifyContent: 'space-between',\n    width: '100%',\n  },\n  teacherUsername: {\n    marginRight: theme.spacing(2),\n    minWidth: theme.spacing(12),\n  },\n  teacherName: {\n    flexGrow: '1',\n  },\n}))\n\nconst TeacherList = ({ teachers }) => {\n  const [expanded, setExpanded] = useState(false)\n\n  const classes = useStyles()\n\n  const handleChange = (panel) => (ev, isExpanded) => {\n    setExpanded(isExpanded ? panel : false)\n  }\n\n  return (\n    <>\n      {teachers?.length > 0 ? (\n        teachers.map((teacher) => {\n          return (\n            <ExpansionPanel\n              expanded={expanded === teacher.username}\n              key={teacher.username}\n              onChange={handleChange(teacher.username)}\n            >\n              <ExpansionPanelSummary expandIcon={<ExpandMore />}>\n                <div className={classes.teacherHeader}>\n                  <Chip\n                    color='secondary'\n                    label={teacher.username}\n                    className={classes.teacherUsername}\n                  />\n                  <Typography className={classes.teacherName} variant='h5'>\n                    {teacher.firstName} {teacher.lastName}\n                  </Typography>\n                  <TeacherDialog teacher={teacher} />\n                  <DeleteTeacherAlert teacher={teacher} />\n                </div>\n              </ExpansionPanelSummary>\n              <ExpansionPanelDetails className={classes.teacherDetails}>\n                <Typography variant='h6'>Courses</Typography>\n                {teacher.courses && teacher.courses.length > 0 ? (\n                  teacher.courses.map((course) => {\n                    return (\n                      <div key={course._id}>\n                        <Typography>\n                          Period {course.period} | {course.name} |{' '}\n                          {course.students.length} students\n                        </Typography>\n                      </div>\n                    )\n                  })\n                ) : (\n                  <div>\n                    <Typography>No courses have been created</Typography>\n                  </div>\n                )}\n              </ExpansionPanelDetails>\n            </ExpansionPanel>\n          )\n        })\n      ) : (\n        <Typography>No teachers found</Typography>\n      )}\n    </>\n  )\n}\n\nexport default TeacherList\n","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\n\nimport PageHeader from './../PageHeader'\nimport ResetWhatsNewAlert from './ResetWhatsNewAlert'\nimport TeacherDialog from './TeacherDialog'\nimport TeacherList from './TeacherList'\nimport agent from '../../agent'\n\nimport {\n  MANAGE_TEACHERS_PAGE_LOADED,\n  MANAGE_TEACHERS_PAGE_UNLOADED,\n} from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  ...state.teachers,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onLoad: () =>\n    dispatch({\n      type: MANAGE_TEACHERS_PAGE_LOADED,\n      payload: agent.Teachers.getAll(),\n    }),\n  onUnload: () => dispatch({ type: MANAGE_TEACHERS_PAGE_UNLOADED }),\n})\n\nconst ManageTeachers = ({ onLoad, onUnload, teachers }) => {\n  useEffect(() => {\n    onLoad()\n\n    return () => {\n      onUnload()\n    }\n  }, [])\n\n  return (\n    <>\n      <PageHeader title={'Manage Teachers'}>\n        <ResetWhatsNewAlert />\n        <TeacherDialog />\n      </PageHeader>\n      <TeacherList teachers={teachers} />\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ManageTeachers)\n","import React from 'react'\nimport { Typography, makeStyles } from '@material-ui/core'\n\nconst useStyles = makeStyles((theme) => ({\n  header: {\n    backgroundColor: 'white',\n    paddingLeft: theme.spacing(1),\n    paddingRight: theme.spacing(1),\n    position: 'absolute',\n    top: '-18px',\n  },\n  img: {\n    maxHeight: '100%',\n    maxWidth: '100%',\n    minWidth: '20px',\n  },\n  window: {\n    alignItems: 'center',\n    display: 'flex',\n    borderColor: theme.palette.secondary.main,\n    borderStyle: 'solid',\n    borderWidth: '4px',\n    height: '300px',\n    justifyContent: 'center',\n    padding: theme.spacing(2),\n    position: 'relative',\n  },\n}))\n\nconst ImagePreview = ({ src }) => {\n  const classes = useStyles()\n\n  return (\n    <div className={classes.window}>\n      <Typography variant='h6' className={classes.header}>\n        Image Preview\n      </Typography>\n      {src ? (\n        <img className={classes.img} src={src} />\n      ) : (\n        <Typography>No photo url provided</Typography>\n      )}\n    </div>\n  )\n}\n\nexport default ImagePreview\n","import React from 'react'\nimport { TextField } from '@material-ui/core'\n\nconst TextFieldLimit = (props) => {\n  return (\n    <TextField\n      error={Boolean(props.errors)}\n      inputProps={{ maxLength: props.limit }}\n      helperText={\n        props.errors\n          ? `${props.errors} | ${props.value.length}/${props.limit}`\n          : `${props.value.length}/${props.limit}`\n      }\n      {...props}\n    />\n  )\n}\n\nexport default TextFieldLimit\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Form, Field } from 'formik'\nimport { TextField } from 'formik-material-ui'\nimport * as Yup from 'yup'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Fab,\n  Grid,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport { Add, Edit } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport ImagePreview from '../ImagePreview'\nimport ListErrors from '../ListErrors'\nimport TextFieldLimit from '../TextFieldLimit'\nimport agent from '../../agent'\n\nimport {\n  ADD_PRODUCT,\n  PRODUCT_DIALOG_UNLOADED,\n  UPDATE_PRODUCT,\n} from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  addIcon: {\n    marginRight: theme.spacing(1),\n  },\n  updateIcon: {\n    'color': 'rgba(255, 255, 255, 0.7)',\n    '&:hover': { backgroundColor: 'rgba(255, 255, 255, 0.3)', color: 'white' },\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.products,\n  currentUser: state.common.currentUser,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onAdd: (product) =>\n    dispatch({\n      type: ADD_PRODUCT,\n      payload: agent.Products.add(product),\n      snackbar: { message: 'Product added', variant: 'success' },\n    }),\n  onExit: () => dispatch({ type: PRODUCT_DIALOG_UNLOADED }),\n  onUpdate: (product) =>\n    dispatch({\n      type: UPDATE_PRODUCT,\n      payload: agent.Products.update(product),\n      snackbar: { message: 'Product updated', variant: 'success' },\n    }),\n})\n\nconst ProductDialog = ({\n  currentUser,\n  product,\n  errors,\n  inProgress,\n  onAdd,\n  onExit,\n  onUpdate,\n}) => {\n  const CHAR_LIMITS = { name: 60, description: 140 }\n\n  const [open, setOpen] = useState(false)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n  const classes = useStyles()\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmitAdd = (values) => {\n    onAdd({ ...values })\n  }\n\n  const handleSubmitUpdate = (values) => {\n    onUpdate({ ...product, ...values })\n  }\n\n  useEffect(() => {\n    // Close the dialog only if there are no errors\n    if (!inProgress && !errors) setOpen(false)\n  }, [inProgress])\n\n  return (\n    <>\n      {product ? (\n        currentUser.role === 'teacher' && (\n          <ActionButton\n            action='Edit product'\n            onClick={handleClickOpen}\n            className={classes.updateIcon}\n          >\n            <Edit />\n          </ActionButton>\n        )\n      ) : (\n        <Fab color='primary' onClick={handleClickOpen} variant='extended'>\n          <Add className={classes.addIcon} />\n          Add product\n        </Fab>\n      )}\n\n      <Dialog\n        fullScreen={fullScreen}\n        maxWidth='lg'\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onExit={onExit}\n        onFocus={(ev) => ev.stopPropagation()}\n        open={open}\n      >\n        <Formik\n          initialValues={{\n            name: product?.name || '',\n            description: product?.description || '',\n            photoUrl: product?.photoUrl || '',\n            cost: product?.cost || 0,\n            maxPurchaseQuantity: product?.maxPurchaseQuantity || 0,\n            quantity: product?.quantity || 0,\n          }}\n          validationSchema={Yup.object({\n            name: Yup.string()\n              .max(\n                CHAR_LIMITS.name,\n                `Cannot be longer than ${CHAR_LIMITS.name} characters`\n              )\n              .required('Required'),\n            description: Yup.string().max(\n              CHAR_LIMITS.description,\n              `Cannot be longer than ${CHAR_LIMITS.description} characters`\n            ),\n            photoUrl: Yup.string().url('Not a valid url').required('Required'),\n            cost: Yup.number().typeError('Numbers only').required('Required'),\n            maxPurchaseQuantity: Yup.number()\n              .typeError('Numbers only')\n              .required('Required'),\n            quantity: Yup.number()\n              .typeError('Numbers only')\n              .required('Required'),\n          })}\n          onSubmit={async (values) => {\n            product ? handleSubmitUpdate(values) : handleSubmitAdd(values)\n          }}\n        >\n          {(formik) => (\n            <Form>\n              <DialogTitle>\n                {product ? 'Edit product' : 'Add product'}\n              </DialogTitle>\n              <DialogContent>\n                <ListErrors errors={errors} />\n                <Grid container spacing={2}>\n                  <Grid item xs={12}>\n                    <Field\n                      as={TextFieldLimit}\n                      autoFocus={product ? false : true}\n                      color='primary'\n                      disabled={inProgress}\n                      label='Product Name'\n                      name='name'\n                      type='text'\n                      limit={CHAR_LIMITS.name}\n                      errors={formik.errors.name}\n                      fullWidth\n                    />\n                  </Grid>\n                  <Grid item xs={12}>\n                    <Field\n                      as={TextFieldLimit}\n                      color='primary'\n                      disabled={inProgress}\n                      label='Product Description'\n                      name='description'\n                      type='text'\n                      limit={CHAR_LIMITS.description}\n                      errors={formik.errors.description}\n                      fullWidth\n                    />\n                  </Grid>\n                  <Grid item xs={12}>\n                    <Field\n                      color='primary'\n                      component={TextField}\n                      disabled={inProgress}\n                      label='Photo Url'\n                      name='photoUrl'\n                      type='url'\n                      fullWidth\n                    />\n                  </Grid>\n                  <Grid item xs={12} md={4}>\n                    <Field\n                      color='primary'\n                      component={TextField}\n                      disabled={inProgress}\n                      label='Cost'\n                      name='cost'\n                      type='number'\n                      fullWidth\n                    />\n                  </Grid>\n                  <Grid item xs={12} md={4}>\n                    <Field\n                      color='primary'\n                      component={TextField}\n                      disabled={inProgress}\n                      label='Quantity'\n                      name='quantity'\n                      type='number'\n                      fullWidth\n                    />\n                  </Grid>\n                  <Grid item xs={12} md={4}>\n                    <Field\n                      color='primary'\n                      component={TextField}\n                      disabled={inProgress}\n                      label='Max purchase quantity'\n                      name='maxPurchaseQuantity'\n                      type='number'\n                      fullWidth\n                    />\n                  </Grid>\n                  <Grid item xs={12} md={6}>\n                    <ImagePreview src={formik.values.photoUrl} />\n                  </Grid>\n                </Grid>\n              </DialogContent>\n              <DialogActions>\n                <Button\n                  disabled={inProgress}\n                  color='primary'\n                  type='submit'\n                  variant='contained'\n                >\n                  {product\n                    ? inProgress\n                      ? 'Updating...'\n                      : 'Update'\n                    : inProgress\n                    ? 'Adding...'\n                    : 'Add'}\n                </Button>\n                <Button\n                  disabled={inProgress}\n                  onClick={handleClose}\n                  variant='contained'\n                >\n                  Cancel\n                </Button>\n              </DialogActions>\n            </Form>\n          )}\n        </Formik>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductDialog)\n","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  makeStyles,\n} from '@material-ui/core'\nimport { Delete } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport agent from '../../agent'\n\nimport { DELETE_PRODUCT } from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  icon: {\n    'color': 'rgba(255, 255, 255, 0.7)',\n    '&:hover': { backgroundColor: 'rgba(255, 255, 255, 0.3)', color: 'white' },\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  currentUser: state.common.currentUser,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onDelete: (slug) =>\n    dispatch({\n      type: DELETE_PRODUCT,\n      payload: agent.Products.delete(slug),\n      snackbar: { message: 'Product deleted', variant: 'success' },\n    }),\n})\n\nconst DeleteProductAlert = ({ currentUser, product, onDelete }) => {\n  const classes = useStyles()\n\n  const [open, setOpen] = useState(false)\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmit = () => {\n    setOpen(false)\n    onDelete(product.slug)\n  }\n\n  return (\n    <>\n      {currentUser.role === 'teacher' && (\n        <ActionButton\n          action='Delete product'\n          onClick={handleClickOpen}\n          className={classes.icon}\n        >\n          <Delete />\n        </ActionButton>\n      )}\n\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        onClick={(ev) => ev.stopPropagation()}\n        onFocus={(ev) => ev.stopPropagation()}\n      >\n        <DialogTitle>Delete Product</DialogTitle>\n        <DialogContent>\n          <DialogContentText component='div'>\n            Are you sure you want to delete <b>{product.name}</b>? This action{' '}\n            <b>cannot be undone</b>.\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button\n            onClick={handleSubmit}\n            color='secondary'\n            variant='contained'\n            autoFocus\n          >\n            Delete\n          </Button>\n          <Button onClick={handleClose} variant='contained'>\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DeleteProductAlert)\n","import React from 'react'\nimport {\n  Badge,\n  Chip,\n  GridList,\n  GridListTile,\n  GridListTileBar,\n  Tooltip,\n  Typography,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport { Add, AddShoppingCart, Remove } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport DeleteProductDialog from './DeleteProductDialog'\nimport Points from '../Points'\nimport ProductDialog from './ProductDialog'\n\nconst useStyles = makeStyles((theme) => ({\n  actionIcon: { display: 'flex' },\n  cost: {\n    color: 'white',\n  },\n  description: {\n    marginBottom: '-1.5rem',\n    opacity: 0,\n    transition: 'opacity 0s ease-in-out',\n  },\n  icon: {\n    'color': 'rgba(255, 255, 255, 0.7)',\n    '&:hover': { backgroundColor: 'rgba(255, 255, 255, 0.3)', color: 'white' },\n  },\n  name: {\n    color: theme.palette.secondary.main,\n    fontSize: theme.typography.h5.fontSize,\n    marginBottom: theme.spacing(0.5),\n    whiteSpace: 'nowrap',\n  },\n  quantity: {\n    marginLeft: theme.spacing(2),\n  },\n  tile: {\n    '&:hover .MuiGridListTileBar-root': {\n      'height': '100%',\n      '& #description': {\n        marginBottom: 0,\n        opacity: 1,\n        transition: 'margin-bottom 0.35s ease-in-out, opacity 0.5s ease-in-out',\n      },\n    },\n  },\n  tileBar: {\n    alignItems: 'flex-end',\n    paddingBottom: theme.spacing(1),\n    paddingRight: theme.spacing(1),\n    transition: 'height 0.35s ease-in-out',\n  },\n  title: {\n    whiteSpace: 'normal',\n  },\n}))\n\nconst ProductsGallery = ({\n  onAddToCart,\n  onInventoryChange,\n  cart,\n  products,\n  storeEnabled,\n  userRole,\n}) => {\n  const classes = useStyles()\n\n  const theme = useTheme()\n  const isSmall = useMediaQuery(theme.breakpoints.down('sm'))\n  const isMedium = useMediaQuery(theme.breakpoints.down('md'))\n  const cols = isSmall ? 1 : isMedium || userRole === 'teacher' ? 2 : 3\n\n  const handleAddToCartClick = (product) => onAddToCart(product)\n\n  const handleInventoryChangeClick = (product, type) =>\n    onInventoryChange({\n      ...product,\n      quantity: type === 'add' ? product.quantity + 1 : product.quantity - 1,\n    })\n\n  return (\n    <div>\n      <GridList cols={cols} spacing={8}>\n        {products?.length > 0 ? (\n          products.map((product) => {\n            const max =\n              product.maxPurchaseQuantity < product.quantity &&\n              product.maxPurchaseQuantity !== 0\n                ? product.maxPurchaseQuantity\n                : product.quantity\n            const maxQuantityReached =\n              max > 0 && cart?.quantities[product._id] >= max\n            return (\n              <GridListTile key={product.slug} className={classes.tile}>\n                <img src={product.photoUrl} alt={product.name} />\n\n                <GridListTileBar\n                  classes={{\n                    actionIcon: classes.actionIcon,\n                    title: classes.title,\n                  }}\n                  className={classes.tileBar}\n                  title={\n                    <div>\n                      <div className={classes.description} id='description'>\n                        {product.description}{' '}\n                        {product.maxPurchaseQuantity > 0 && (\n                          <em>(Limit {product.maxPurchaseQuantity})</em>\n                        )}\n                      </div>\n                      <Tooltip\n                        arrow\n                        enterTouchDelay={0}\n                        placement='bottom-start'\n                        title={product.name}\n                      >\n                        <div className={classes.name}>{product.name}</div>\n                      </Tooltip>\n                    </div>\n                  }\n                  subtitle={\n                    <div>\n                      <Chip\n                        className={classes.cost}\n                        color='primary'\n                        label={<Points value={product.cost} />}\n                        size='small'\n                      />\n                      {(userRole === 'teacher' || product.quantity < 5) && (\n                        <Chip\n                          className={classes.quantity}\n                          color='secondary'\n                          label={\n                            userRole === 'teacher'\n                              ? `${product.quantity} available`\n                              : `only ${product.quantity} left`\n                          }\n                          size='small'\n                          variant='outlined'\n                        />\n                      )}\n                    </div>\n                  }\n                  actionIcon={\n                    userRole === 'teacher' ? (\n                      <>\n                        <ActionButton\n                          action='Remove inventory'\n                          className={classes.icon}\n                          onClick={() =>\n                            handleInventoryChangeClick(product, 'remove')\n                          }\n                        >\n                          <Remove />\n                        </ActionButton>\n                        <ActionButton\n                          action='Add inventory'\n                          className={classes.icon}\n                          onClick={() =>\n                            handleInventoryChangeClick(product, 'add')\n                          }\n                        >\n                          <Add />\n                        </ActionButton>\n                        <ProductDialog product={product} />\n                        <DeleteProductDialog product={product} />\n                      </>\n                    ) : (\n                      storeEnabled && (\n                        <ActionButton\n                          action={\n                            !maxQuantityReached\n                              ? 'Add to cart'\n                              : 'Max limit reached'\n                          }\n                          disabled={maxQuantityReached}\n                          onClick={() => handleAddToCartClick(product)}\n                          className={classes.icon}\n                        >\n                          <Badge\n                            badgeContent={cart.quantities[product._id]}\n                            color='secondary'\n                          >\n                            <AddShoppingCart />\n                          </Badge>\n                        </ActionButton>\n                      )\n                    )\n                  }\n                />\n              </GridListTile>\n            )\n          })\n        ) : (\n          <Typography>\n            {userRole === 'teacher'\n              ? 'You have no products'\n              : 'Your teacher has not added any products'}\n          </Typography>\n        )}\n      </GridList>\n    </div>\n  )\n}\n\nexport default ProductsGallery\n","import React from 'react'\nimport {\n  AppBar,\n  IconButton,\n  Toolbar,\n  Typography,\n  makeStyles,\n} from '@material-ui/core'\nimport { Close } from '@material-ui/icons'\n\nconst useStyles = makeStyles((theme) => ({\n  title: {\n    color: theme.palette.common.white,\n    margin: '0 auto',\n  },\n}))\n\nconst DialogAppBar = ({ onClose, title }) => {\n  const classes = useStyles()\n\n  return (\n    <AppBar position='relative'>\n      <Toolbar>\n        <IconButton edge='start' onClick={onClose}>\n          <Close />\n        </IconButton>\n        <Typography variant='h5' className={classes.title}>\n          {title}\n        </Typography>\n      </Toolbar>\n    </AppBar>\n  )\n}\n\nexport default DialogAppBar\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Container, Dialog, Fab, makeStyles } from '@material-ui/core'\nimport ShoppingBasketIcon from '@material-ui/icons/ShoppingBasket'\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart'\n\nimport Alert from '../Alert'\nimport FabBadge from '../FabBadge'\nimport DialogAppBar from '../DialogAppBar'\nimport ListErrors from '../ListErrors'\nimport PageHeader from '../PageHeader'\nimport PageWrapper from '../PageWrapper'\nimport PurchaseDetailsList from './PurchaseDetailsList'\nimport Spinner from '../Spinner'\nimport { SlideUpTransition } from '../../transitions'\n\nimport agent from '../../agent'\n\nimport {\n  DELETE_CART_PRODUCT,\n  STUDENT_CART_LOADED,\n  STUDENT_CART_UNLOADED,\n  SUBMIT_PURCHASE,\n  UPDATE_CART_PRODUCT_QUANTITY,\n} from '../../constants/actionTypes'\nimport { useGetInvoice } from '../../hooks'\n\nconst useStyles = makeStyles((theme) => ({\n  cartIcon: {\n    marginRight: theme.spacing(1),\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.common.currentUser,\n  ...state.common.settings,\n  ...state.purchases,\n  ...state.scores.total,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onDelete: (productId) => dispatch({ type: DELETE_CART_PRODUCT, productId }),\n  onLoad: (username) =>\n    dispatch({\n      type: STUDENT_CART_LOADED,\n      payload: agent.Scores.getStudentScores(username),\n    }),\n  onSubmit: (purchase) =>\n    dispatch({\n      type: SUBMIT_PURCHASE,\n      payload: agent.Purchases.add(purchase),\n      snackbar: { message: 'Order submitted', variant: 'success' },\n    }),\n  onUnload: () => dispatch({ type: STUDENT_CART_UNLOADED }),\n  onUpdate: (productId, qty) =>\n    dispatch({ type: UPDATE_CART_PRODUCT_QUANTITY, productId, qty }),\n})\n\nconst ShoppingCart = ({\n  allowPurchasesWithInsufficientFunds,\n  balance,\n  cart,\n  errors,\n  inProgress,\n  onDelete,\n  onLoad,\n  onSubmit,\n  onUnload,\n  onUpdate,\n  taxRate,\n  username,\n}) => {\n  const [open, setOpen] = useState(false)\n  const { invoice } = useGetInvoice(cart.products, cart.quantities, taxRate)\n\n  const classes = useStyles()\n\n  const handleClickOpen = () => setOpen(true)\n\n  const handleClose = () => setOpen(false)\n\n  const handleSubmitClick = () => {\n    onSubmit({\n      products: cart.products,\n      quantities: cart.quantities,\n      status: 'pending',\n    })\n    handleClose()\n  }\n\n  const getTotalItemsInCart = Object.values(cart.quantities).reduce(\n    (prev, cur) => prev + cur,\n    0\n  )\n\n  const hasInsufficientFunds =\n    !allowPurchasesWithInsufficientFunds && invoice.total > balance\n\n  useEffect(() => {\n    onLoad(username)\n\n    return () => {\n      onUnload()\n    }\n  }, [])\n\n  return (\n    <>\n      <Fab\n        color='primary'\n        disabled={cart.products.length === 0}\n        onClick={handleClickOpen}\n        variant='extended'\n      >\n        <FabBadge value={getTotalItemsInCart}>\n          <ShoppingCartIcon className={classes.cartIcon} />\n          Checkout\n        </FabBadge>\n      </Fab>\n      <Dialog\n        fullScreen\n        open={open}\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onFocus={(ev) => ev.stopPropagation()}\n        TransitionComponent={SlideUpTransition}\n      >\n        <DialogAppBar onClose={handleClose} title='Store' />\n        <PageWrapper>\n          <Container>\n            <PageHeader title='Complete Your Order'>\n              <Fab\n                color='primary'\n                disabled={cart.products.length === 0 || hasInsufficientFunds}\n                onClick={handleSubmitClick}\n                variant='extended'\n              >\n                <ShoppingBasketIcon className={classes.cartIcon} />\n                Place Your Order\n              </Fab>\n            </PageHeader>\n            <ListErrors errors={errors} />\n            {(hasInsufficientFunds || invoice.total > balance) && (\n              <Alert disableClose={true} severity='warning'>\n                Insufficient funds! You have {balance} pts\n              </Alert>\n            )}\n            {inProgress ? (\n              <Spinner message='Loading...' />\n            ) : (\n              <PurchaseDetailsList\n                actions={{\n                  delete: onDelete,\n                  update: onUpdate,\n                }}\n                products={cart.products}\n                quantities={cart.quantities}\n              />\n            )}\n          </Container>\n        </PageWrapper>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ShoppingCart)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport MaterialTable from 'material-table'\n\nimport Points from '../Points'\nimport PurchaseDetailsList from './PurchaseDetailsList'\nimport agent from '../../agent'\n\nimport { STUDENT_DELETE_PURCHASE } from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  ...state.common.settings,\n  ...state.purchases,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onDelete: (id) =>\n    dispatch({\n      type: STUDENT_DELETE_PURCHASE,\n      payload: agent.Purchases.delete(id),\n      snackbar: { message: 'Purchase deleted', variant: 'success' },\n    }),\n})\n\nconst StudentPurchasesTable = ({ onDelete, purchases, taxRate }) => {\n  const [data, setData] = useState([])\n\n  const mappedData = purchases.map((purchase) => ({\n    createdAt: new Date(purchase.createdAt).toDateString(),\n    note: purchase.note,\n    quantities: purchase.quantities,\n    products: purchase.products,\n    status: purchase.status,\n    totalCost: purchase.products.reduce(\n      (prev, cur) =>\n        prev + cur.cost * purchase.quantities[cur._id] * (taxRate / 100 + 1),\n      0\n    ),\n    totalItems: Object.values(purchase.quantities).reduce(\n      (prev, cur) => prev + cur,\n      0\n    ),\n    _id: purchase._id,\n  }))\n\n  const [columns] = useState([\n    { title: 'Purchase Date', field: 'createdAt', editable: 'never' },\n    { title: 'Total Items', field: 'totalItems' },\n    {\n      title: 'Total Cost',\n      field: 'totalCost',\n      render: (rowData) => <Points value={rowData.totalCost} />,\n    },\n    { title: 'Notes', field: 'note' },\n    { title: 'Status', field: 'status' },\n  ])\n\n  useEffect(() => {\n    setData(mappedData)\n  }, [purchases])\n\n  return (\n    <MaterialTable\n      title='Orders'\n      columns={columns}\n      data={data}\n      localization={{\n        body: {\n          emptyDataSourceMessage: 'No purchases have been made',\n          editRow: {\n            deleteText: 'Delete purchase? This will cancel your order',\n            saveTooltip: 'Delete purchase',\n          },\n        },\n      }}\n      options={{ actionsColumnIndex: -1, paging: false, showTitle: false }}\n      detailPanel={(rowData) => {\n        return (\n          <PurchaseDetailsList\n            products={rowData.products}\n            quantities={rowData.quantities}\n          />\n        )\n      }}\n      onRowClick={(event, rowData, togglePanel) => togglePanel()}\n      editable={{\n        isDeletable: (rowData) => rowData.status === 'pending',\n        onRowDelete: (oldData) =>\n          new Promise((resolve, reject) => {\n            const dataDelete = [...data]\n            const index = oldData.tableData.id\n            dataDelete.splice(index, 1)\n            setData([...dataDelete])\n            onDelete(oldData._id)\n            resolve()\n          }),\n      }}\n    />\n  )\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(StudentPurchasesTable)\n","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Button, Container, Dialog } from '@material-ui/core'\n\nimport DialogAppBar from '../DialogAppBar'\nimport ListErrors from '../ListErrors'\nimport PageHeader from '../PageHeader'\nimport PageWrapper from '../PageWrapper'\nimport Spinner from '../Spinner'\nimport StudentPurchasesTable from './StudentPurchasesTable'\nimport { SlideUpTransition } from './../../transitions'\n\nimport agent from '../../agent'\n\nimport {\n  STUDENT_PURCHASES_LOADED,\n  STUDENT_PURCHASES_UNLOADED,\n} from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  ...state.purchases,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onLoad: () =>\n    dispatch({\n      type: STUDENT_PURCHASES_LOADED,\n      payload: agent.Purchases.forStudent(),\n    }),\n  onUnload: () =>\n    dispatch({\n      type: STUDENT_PURCHASES_UNLOADED,\n    }),\n})\n\nconst StudentPurchasesDialog = ({ errors, inProgress, onLoad, onUnload }) => {\n  const [open, setOpen] = useState(false)\n\n  const handleClickOpen = () => {\n    setOpen(true)\n    onLoad()\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n    onUnload()\n  }\n\n  return (\n    <>\n      <Button onClick={handleClickOpen} size='small'>\n        Your orders\n      </Button>\n      <Dialog\n        fullScreen\n        open={open}\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onFocus={(ev) => ev.stopPropagation()}\n        TransitionComponent={SlideUpTransition}\n      >\n        <DialogAppBar onClose={handleClose} title='Store' />\n        <PageWrapper>\n          <Container>\n            <PageHeader title='Your Orders' />\n            <ListErrors errors={errors} />\n            {inProgress ? (\n              <Spinner message='Loading...' />\n            ) : (\n              <StudentPurchasesTable />\n            )}\n          </Container>\n        </PageWrapper>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(StudentPurchasesDialog)\n","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { Button, Grid, Typography } from '@material-ui/core'\n\nimport PageHeader from '../PageHeader'\nimport ProductDialog from './ProductDialog'\nimport ProductsGallery from './ProductsGallery'\nimport ShoppingCart from '../Purchases/ShoppingCart'\nimport Spinner from '../Spinner'\nimport StudentPurchasesDialog from '../Purchases/StudentPurchasesDialog'\nimport agent from '../../agent'\n\nimport {\n  ADD_TO_CART,\n  NAV_TAB_CHANGE,\n  PRODUCTS_PAGE_LOADED,\n  PRODUCTS_PAGE_UNLOADED,\n  UPDATE_PRODUCT,\n} from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  settings: state.common.settings,\n  ...state.common.currentUser,\n  ...state.products,\n  ...state.purchases,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onAddToCart: (product) => dispatch({ type: ADD_TO_CART, product }),\n  onLoad: () =>\n    dispatch({ type: PRODUCTS_PAGE_LOADED, payload: agent.Products.getAll() }),\n  onPageChange: (value, redirectTo) =>\n    dispatch({ type: NAV_TAB_CHANGE, value, redirectTo }),\n  onUnload: () => dispatch({ type: PRODUCTS_PAGE_UNLOADED }),\n  onUpdateInventory: (product) =>\n    dispatch({\n      type: UPDATE_PRODUCT,\n      payload: agent.Products.update(product),\n    }),\n})\n\nconst Products = ({\n  cart,\n  onAddToCart,\n  onLoad,\n  onPageChange,\n  onUnload,\n  onUpdateInventory,\n  pageLoaded,\n  products,\n  role,\n  settings,\n}) => {\n  useEffect(() => {\n    onLoad()\n\n    return () => {\n      onUnload()\n    }\n  }, [])\n\n  const isTeacher = role === 'teacher'\n\n  const inStockProducts = products.filter((product) => product.quantity > 0)\n\n  const outOfStockProducts = products.filter((product) => product.quantity <= 0)\n\n  const handlePageChange = () => onPageChange('store', `/${role}/store`)\n\n  const handleAddToCart = (product) => onAddToCart(product)\n\n  const handleInventoryChange = (product) => onUpdateInventory(product)\n\n  return (\n    <>\n      <PageHeader title={isTeacher ? 'Manage Products' : 'View Products'}>\n        {isTeacher ? (\n          <>\n            {settings.storeEnabled &&\n              settings.enableBetaFeatures && ( // @beta\n                <Button onClick={handlePageChange} size='small'>\n                  Manage purchases\n                </Button>\n              )}\n            <ProductDialog />\n          </>\n        ) : (\n          settings.storeEnabled &&\n          settings.enableBetaFeatures && ( // @beta\n            <>\n              <StudentPurchasesDialog />\n              <ShoppingCart />\n            </>\n          )\n        )}\n      </PageHeader>\n      {pageLoaded ? (\n        <Spinner message='Loading...' />\n      ) : (\n        <Grid container spacing={8}>\n          <Grid item xs={12}>\n            {isTeacher ? (\n              <>\n                <Typography variant='h5' gutterBottom>\n                  In Stock\n                </Typography>\n                <ProductsGallery\n                  onInventoryChange={handleInventoryChange}\n                  products={inStockProducts}\n                  userRole={role}\n                />\n              </>\n            ) : (\n              <ProductsGallery\n                cart={cart}\n                products={inStockProducts}\n                onAddToCart={handleAddToCart}\n                storeEnabled={\n                  settings.storeEnabled && settings.enableBetaFeatures // @beta\n                }\n                userRole={role}\n              />\n            )}\n          </Grid>\n          {isTeacher && (\n            <Grid item xs={12}>\n              <Typography variant='h5' gutterBottom>\n                Out of Stock\n              </Typography>\n              <ProductsGallery\n                onInventoryChange={handleInventoryChange}\n                products={outOfStockProducts}\n                userRole={role}\n              />\n            </Grid>\n          )}\n        </Grid>\n      )}\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Products)\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Redirect } from 'react-router-dom'\nimport { Route, Switch } from 'react-router-dom'\nimport { Container } from '@material-ui/core'\n\nimport Header from './Header'\nimport Navigation from './Navigation'\nimport NotFound from './NotFound'\nimport PageWrapper from './PageWrapper'\nimport ProtectedRoute from './ProtectedRoute'\nimport Settings from './Settings'\nimport StudentAccount from './Student/StudentAccount'\nimport StudentSongs from './Student/StudentSongs'\nimport TeacherAccounts from './Teacher/TeacherAccounts'\nimport TeacherCourses from './Teacher/TeacherCourses'\nimport TeacherSongs from './Teacher/TeacherSongs'\nimport ManagePurchases from './Purchases/ManagePurchases'\nimport ManageTeachers from './Admin/ManageTeachers'\nimport Products from './Products/Products'\n\nconst mapStateToProps = (state) => ({\n  currentUser: state.common.currentUser,\n})\n\nconst Home = (props) => {\n  const { currentUser } = props\n\n  if (!currentUser) {\n    return <Redirect to='/login' />\n  }\n\n  return (\n    <>\n      <Header currentUser={currentUser} />\n      <PageWrapper>\n        <Container>\n          <Switch>\n            <ProtectedRoute\n              path='/student/account'\n              component={StudentAccount}\n            />\n            <ProtectedRoute path='/student/settings' component={Settings} />\n            <ProtectedRoute path='/student/songs' component={StudentSongs} />\n            <ProtectedRoute path='/student/store' component={Products} />\n\n            <ProtectedRoute\n              path='/teacher/accounts'\n              component={TeacherAccounts}\n            />\n            <ProtectedRoute\n              path='/teacher/courses'\n              component={TeacherCourses}\n            />\n            <ProtectedRoute path='/teacher/products' component={Products} />\n            <ProtectedRoute path='/teacher/settings' component={Settings} />\n            <ProtectedRoute path='/teacher/songs' component={TeacherSongs} />\n            <ProtectedRoute path='/teacher/store' component={ManagePurchases} />\n\n            <ProtectedRoute path='/admin/settings' component={Settings} />\n            <ProtectedRoute path='/admin/teachers' component={ManageTeachers} />\n\n            <Route component={NotFound} />\n          </Switch>\n        </Container>\n        <Navigation />\n      </PageWrapper>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, () => ({}))(Home)\n","import React from 'react'\nimport { Paper, Typography, makeStyles } from '@material-ui/core'\nimport Div100vh from 'react-div-100vh'\n\nimport Logo from './Logo'\nimport background from './../images/chemistry-background.jpg'\n\nconst useStyles = makeStyles((theme) => ({\n  background: {\n    alignItems: 'center',\n    backgroundImage: `url(${background})`,\n    backgroundSize: 'cover',\n    display: 'flex',\n    height: '100%',\n    justifyContent: 'center',\n  },\n  logo: {\n    marginBottom: theme.spacing(4),\n    width: 160,\n  },\n  panel: {\n    alignItems: 'center',\n    borderRadius: '1rem',\n    display: 'flex',\n    flexFlow: 'column nowrap',\n    overflowY: 'scroll',\n    padding: '2rem 4rem',\n    position: 'relative',\n  },\n  text: {\n    color: theme.palette.primary.main,\n    fontStyle: 'italic',\n  },\n}))\n\nconst Loading = (props) => {\n  const classes = useStyles()\n\n  return (\n    <Div100vh className={classes.background}>\n      <Paper elevation={12} className={classes.panel}>\n        <Logo className={classes.logo} />\n        <Typography className={classes.text} variant='h4'>\n          Loading...\n        </Typography>\n      </Paper>\n    </Div100vh>\n  )\n}\n\nexport default Loading\n","import React from 'react'\nimport { Grid, Link, Typography, makeStyles } from '@material-ui/core'\n\nimport profile from '../images/doc-may-profile.jpg'\n\nconst useStyles = makeStyles((theme) => ({\n  page: {\n    '& p:not(:last-of-type)': {\n      marginBottom: theme.spacing(2),\n    },\n  },\n  profile: {\n    borderRadius: '100%',\n    boxShadow: theme.shadows[10],\n    float: 'right',\n    marginBottom: theme.spacing(2),\n    marginLeft: theme.spacing(2),\n    width: '120px',\n  },\n}))\n\nconst About = () => {\n  const classes = useStyles()\n\n  return (\n    <Grid className={classes.page} container spacing={2}>\n      <Grid item xs={12}>\n        <Typography align='center' gutterBottom variant='h5'>\n          What is Chem Cash?\n        </Typography>\n        <img className={classes.profile} src={profile} />\n        <Typography variant='body2'>\n          Hi! I'm Joseph May, a high school chemistry teacher from Las Vegas.\n          While I love teaching chemistry, I also love programming for the web,\n          so why not combine the two.\n        </Typography>\n        <Typography variant='body2'>\n          Chem Cash is a points-based rewards system I use in my classroom. The\n          idea for this site came from a colleage who was inspired by one of his\n          own high school science teachers.\n        </Typography>\n        <Typography variant='body2'>\n          Students earn points in two ways: (1) through payouts based on their\n          assessment scores and (2) with bonus points earned for anything I deam\n          worthy of reward such as winning in-class competitions or going above\n          and beyond to help me or a student.\n        </Typography>\n        <Typography variant='body2'>\n          These points can be used to \"purchase\" goods such as school supplies,\n          electronics, and anything I can find for cheap or get for free.\n        </Typography>\n        <Typography variant='body2'>\n          However, the hottest-selling item is song requests. During work time\n          in my class I play music for my students. Each class period has its\n          own playlist and students can only add songs to the playlist by\n          spending their Chem Cash points.\n        </Typography>\n        <Typography variant='body2'>\n          I created this program to help manage all of the logistics behind this\n          system of incentives. While it can support multiple teachers, I am\n          running it on no-cost servers, so it was not intended to be a public\n          program. Although, if you are interested in learning more, please\n          reach out to me{' '}\n          <Link href='mailto:jwmay87+chemcash@gmail.com'>here</Link>.\n        </Typography>\n      </Grid>\n    </Grid>\n  )\n}\n\nexport default About\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Form, Field } from 'formik'\nimport { TextField } from 'formik-material-ui'\nimport { Button, Grid } from '@material-ui/core'\nimport * as Yup from 'yup'\n\nimport ListErrors from '../ListErrors'\nimport agent from '../../agent'\n\nimport { LOGIN } from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({ ...state.auth })\n\nconst mapDispatchToProps = (dispatch) => ({\n  onSubmit: (username, password) =>\n    dispatch({ type: LOGIN, payload: agent.Auth.login(username, password) }),\n})\n\nconst LoginForm = (props) => {\n  const submitForm = (username, password) => {\n    props.onSubmit(username, password)\n  }\n\n  return (\n    <Formik\n      initialValues={{\n        username: '',\n        password: '',\n      }}\n      validationSchema={Yup.object({\n        username: Yup.string().required('Required'),\n        // .matches(/^[0-9]+$/, 'Must be numbers only')\n        password: Yup.string().required('Required'),\n        // .matches(/^[0-9]{4}$/, 'Must be exactly 4 numbers')\n      })}\n      onSubmit={(values) => {\n        const { username, password } = values\n        submitForm(username, password)\n      }}\n    >\n      <Form>\n        <Grid container spacing={4}>\n          <Grid item xs={12}>\n            <ListErrors errors={props.errors} />\n            <Field\n              component={TextField}\n              disabled={props.inProgress}\n              fullWidth\n              label='Username'\n              name='username'\n              type='text'\n              variant='outlined'\n            />\n          </Grid>\n          <Grid item xs={12}>\n            <Field\n              component={TextField}\n              disabled={props.inProgress}\n              fullWidth\n              label='Password'\n              name='password'\n              type='password'\n              variant='outlined'\n            />\n          </Grid>\n          <Grid item xs={12}>\n            <Button\n              color='primary'\n              disabled={props.inProgress}\n              size='large'\n              type='submit'\n              variant='contained'\n            >\n              {props.inProgress ? 'Loading...' : 'Login'}\n            </Button>\n          </Grid>\n        </Grid>\n      </Form>\n    </Formik>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LoginForm)\n","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { Link, Redirect } from 'react-router-dom'\nimport Div100vh from 'react-div-100vh'\nimport {\n  Button,\n  Grid,\n  LinearProgress,\n  Paper,\n  Tooltip,\n  makeStyles,\n} from '@material-ui/core'\nimport { ArrowBackIos, InfoOutlined } from '@material-ui/icons'\n\nimport About from '../About'\nimport Logo from '../Logo'\nimport LoginForm from './LoginForm'\nimport background from '../../images/chemistry-background.jpg'\n\nimport { LOGIN_PAGE_UNLOADED } from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  aboutLink: {\n    bottom: theme.spacing(2),\n    position: 'absolute',\n    right: theme.spacing(4),\n  },\n  loginLink: {\n    'marginBottom': theme.spacing(2),\n    '& > a': {\n      textDecoration: 'none',\n    },\n  },\n  logo: {\n    display: 'block',\n    margin: '0 auto',\n    width: 120,\n  },\n  page: {\n    alignItems: 'center',\n    backgroundImage: `url(${background})`,\n    backgroundSize: 'cover',\n    display: 'flex',\n    height: '100%',\n    justifyContent: 'center',\n    [theme.breakpoints.up('lg')]: {\n      backgroundSize: 'initial',\n      justifyContent: 'flex-end',\n    },\n  },\n  panel: {\n    borderRadius: '1rem',\n    maxHeight: '90%',\n    overflowY: 'scroll',\n    padding: '4rem 2rem',\n    position: 'relative',\n    width: '80%',\n    [theme.breakpoints.up('lg')]: {\n      borderRadius: '0',\n      height: '100%',\n      maxHeight: '100%',\n      width: '40%',\n    },\n  },\n  progress: {\n    height: 10,\n    left: '0',\n    position: 'absolute',\n    top: '0',\n    width: '100%',\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.auth,\n  currentUser: state.common.currentUser,\n  pathname: state.router.location.pathname,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onUnload: () => dispatch({ type: LOGIN_PAGE_UNLOADED }),\n})\n\nconst AboutLink = () => {\n  const classes = useStyles()\n  return (\n    <span className={classes.aboutLink}>\n      <Tooltip arrow enterTouchDelay={0} title='Learn more'>\n        <Link to='/about'>\n          <InfoOutlined color='secondary' fontSize='small' />\n        </Link>\n      </Tooltip>\n    </span>\n  )\n}\n\nconst LoginLink = () => {\n  const classes = useStyles()\n  return (\n    <div className={classes.loginLink}>\n      <Link to='/login'>\n        <Button color='secondary' startIcon={<ArrowBackIos />}>\n          Login\n        </Button>\n      </Link>\n    </div>\n  )\n}\n\nconst Login = ({ currentUser, inProgress, onUnload, pathname }) => {\n  const classes = useStyles()\n\n  useEffect(() => {\n    return () => onUnload()\n  }, [])\n\n  if (currentUser) {\n    return <Redirect to='/' />\n  }\n\n  return (\n    <Div100vh>\n      <div className={classes.page}>\n        <Paper elevation={12} className={classes.panel}>\n          {inProgress && <LinearProgress className={classes.progress} />}\n          <Grid container spacing={4}>\n            <Grid item xs={12}>\n              <Logo className={classes.logo} />\n            </Grid>\n            <Grid item xs={12}>\n              {pathname.includes('about') ? (\n                <>\n                  <LoginLink />\n                  <About />\n                </>\n              ) : (\n                <>\n                  <AboutLink />\n                  <LoginForm />\n                </>\n              )}\n            </Grid>\n          </Grid>\n        </Paper>\n      </div>\n    </Div100vh>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login)\n","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { SnackbarProvider, useSnackbar } from 'notistack'\nimport { Button } from '@material-ui/core'\n\nimport { SNACKBAR_CLOSED } from '../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  snackbar: state.notifier.snackbar,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onSnackbarClose: () => dispatch({ type: SNACKBAR_CLOSED }),\n})\n\nconst Notification = (props) => {\n  const { snackbar } = props\n  const { enqueueSnackbar } = useSnackbar()\n\n  useEffect(() => {\n    if (snackbar) {\n      enqueueSnackbar(snackbar.message, { variant: snackbar.variant })\n    }\n  }, [snackbar])\n\n  return props.children\n}\n\nconst Notifier = (props) => {\n  const notistackRef = React.createRef()\n  const onSnackbarDismiss = (key) => () => {\n    notistackRef.current.closeSnackbar(key)\n  }\n\n  return (\n    <SnackbarProvider\n      maxSnack={3}\n      ref={notistackRef}\n      action={(key) => (\n        <Button onClick={onSnackbarDismiss(key)}>Dismiss</Button>\n      )}\n      onClose={() => {\n        props.onSnackbarClose()\n      }}\n    >\n      <Notification snackbar={props.snackbar}>{props.children}</Notification>\n    </SnackbarProvider>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Notifier)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Grid,\n  Typography,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\n\nimport agent from '../agent'\n\nimport { WHATS_NEW_DIALOG_UNLOADED } from '../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  ...state.common,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onExit: () =>\n    dispatch({\n      type: WHATS_NEW_DIALOG_UNLOADED,\n      payload: agent.Auth.save({ viewedChanges: true }), // @note: set to 'false' when testing\n    }),\n})\n\nconst WhatsNewDialog = ({ currentUser, onExit }) => {\n  const [open, setOpen] = useState(false)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  useEffect(() => {\n    if (currentUser) setOpen(!currentUser.viewedChanges)\n  }, [currentUser])\n\n  return (\n    <Dialog\n      fullScreen={fullScreen}\n      fullWidth={true}\n      maxWidth={'md'}\n      open={open}\n      onClose={handleClose}\n      onClick={(ev) => ev.stopPropagation()}\n      onExit={onExit}\n      onFocus={(ev) => ev.stopPropagation()}\n    >\n      <DialogTitle>What's New in Chem Cash!</DialogTitle>\n      <DialogContent>\n        {currentUser?.role === 'student'\n          ? StudentWhatsNewContent()\n          : TeacherWhatsNewContent()}\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={handleClose} variant='contained'>\n          Close\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n\nconst NewDate = ({ date }) => (\n  <Grid item xs={12}>\n    <Typography variant='body1'>\n      <em>{date}</em>\n    </Typography>\n  </Grid>\n)\n\nconst NewItem = ({ children, title }) => (\n  <Grid item xs={12}>\n    <Typography variant='subtitle2'>{title}</Typography>\n    <Typography variant='body2'>{children}</Typography>\n  </Grid>\n)\n\nconst StudentWhatsNewContent = () => (\n  <Grid container spacing={4}>\n    <Grid item xs={12} container spacing={2}>\n      <Grid item xs={12}>\n        <Typography variant='h6'>Latest Updates</Typography>\n      </Grid>\n      <NewDate date='May 28, 2022' />\n      <NewItem title='Product Quantities'>\n        You can now see when there are fewer than five items of any given\n        product with a new badge shown on the products page.\n      </NewItem>\n      <NewItem title='Online Purchases'>\n        If your teacher has enabled the feature, you can now make purchases\n        online! You can add items to your cart on the <em>Store</em> page\n        (formerlly the <em>Products</em> page), manage your cart, submit your\n        order, and view your previous orders.\n      </NewItem>\n    </Grid>\n    <Grid item xs={12} container spacing={2}>\n      <Grid item xs={12}>\n        <Typography variant='h6'>Previous Updates</Typography>\n      </Grid>\n      <NewDate date='Dec 30, 2021' />\n      <NewItem title='Delete Songs'>\n        You can now request songs to be removed from your class playlist by\n        going to the 'Songs' tab and clicking the trash can icon next to the\n        song you want removed. This feature is only available if your teacher\n        has activated it.\n      </NewItem>\n      <NewItem title=\"What's New Notifications\">\n        This notification is a new feature! When new Chem Cash udpates are\n        released this notification will appear once on the first time you access\n        the website after the update is released.\n      </NewItem>\n    </Grid>\n  </Grid>\n)\n\nconst TeacherWhatsNewContent = () => (\n  <Grid container spacing={4}>\n    <Grid item xs={12} container spacing={2}>\n      <Grid item xs={12}>\n        <Typography variant='h6'>Latest Updates</Typography>\n      </Grid>\n      <NewDate date='May 28, 2022' />\n      <NewItem title='Automatic Inventory Management with Purchases'>\n        When you add a purchase of a product to a student's account from the{' '}\n        <em>Accounts</em> page, the on-hand quantity of the purchased item is\n        automatically reduced by one.\n      </NewItem>\n      <NewItem title='Inventory Control Buttons and Quantity Display for Products'>\n        On the <em>Products</em> page, two new inventory control buttons are now\n        available to quickly increase or decrease the amount of on-hand product.\n        The quantity of each product is also now visible directly on each\n        product image. Students will only see the on-hand quantity when there\n        are fewer then five items remaining in stock.\n      </NewItem>\n      <NewItem title='Song Requests and Purchase Requests Badges'>\n        Badges now appear on the <em>Process Songs</em> and{' '}\n        <em>Process Purchases</em> buttons to indicate the number of song and\n        purchase requests that are pending approval.\n      </NewItem>\n      <NewItem title='Max Purchase Quantity for Products'>\n        A new input field is now available for products that sets the maximum\n        purchase quantity limit for each product. When combined with the online\n        store feature in beta (see below), this will limit the quantity of items\n        a student can add to their cart for each product.\n      </NewItem>\n      <NewItem title='Online Orders (beta)'>\n        Students can now submit online orders for products! If you have enabled\n        beta features, you will have access to new settings in the{' '}\n        <em>Products and Online Purchases</em> section that allow you to control\n        whether students can submit online purchases or not, whether students\n        can submit online purchases if they do not have sufficient points, and a\n        tax rate to be applied to all online purchases of products (does not\n        apply to song requests; can be set to zero if you do not want to charge\n        a tax).\n      </NewItem>\n      <NewItem title='Processing Purchases (beta)'>\n        If you have enabled online purchases, a new <em>Process Purchases</em>{' '}\n        dialog is available to approve or reject online purchases submitted by\n        students in a manner similar to the song request processing feature.\n        When processing purchases, you will have the option to update the order\n        quantity of each item, remove items from the order, add a note to the\n        order, and approve or reject the order. Upon approval of the order, the\n        on-hand quantity of each product will be automaticaly adjusted.\n      </NewItem>\n    </Grid>\n    <Grid item xs={12} container spacing={2}>\n      <Grid item xs={12}>\n        <Typography variant='h6'>Previous Updates</Typography>\n      </Grid>\n      <NewDate date='Jan 31, 2022' />\n      <NewItem title='In Stock and Out of Stock Products'>\n        Products with a quantity of zero will no longer be visible to students.\n        Teachers will see these products in an \"Out of Stock\" section on the\n        Products page. Once the product's quantity is greater than zero, the\n        product will appear in the \"In Stock\" section for teachers and will be\n        visible to students.\n      </NewItem>\n      <NewDate date='Jan 23, 2022' />\n      <NewItem title='Student Account Balances Visible When Processing Song Requests'>\n        Student account balances are now visible in the song request processing\n        dialog so you can quickly identify with a red/green color indicator if a\n        student has enough points to buy a song request or a song removal\n        request.\n      </NewItem>\n      <NewItem title='Song Totals Visible When Processing Song Requests'>\n        The total number of song requests to process is now visible in the song\n        request processing dialog along with a running count of requests\n        remaining to process.\n      </NewItem>\n      <NewDate date='Jan 17, 2022' />\n      <NewItem title='Economy View'>\n        You can now view a summary of details about the account balances for\n        students in your courses including the total number of points available\n        in your economy and an interactive table containing the account balances\n        of all students in all of your courses.\n      </NewItem>\n      <NewItem title='Beta Features Flag'>\n        A new flag that enables beta features when they are available can now be\n        found in the Account Details section of the Settings page.\n      </NewItem>\n      <NewDate date='Dec 30, 2021' />\n      <NewItem title='Delete Songs'>\n        Students can now request songs to be removed from thier class playlist\n        by going to the 'Songs' tab and clicking the trash can icon, once you\n        have activated the feature in the Settings.\n      </NewItem>\n      <NewItem title='Delete Songs Settings'>\n        New settings have been added to control student ability to request songs\n        for deletion as well as settings for the amount of points charged for a\n        song removal and the amount of points refunded to the person whose song\n        was removed.\n      </NewItem>\n      <NewItem title='Search for Products'>\n        You can now search for products in a dropdown menu when entering\n        purchases on the accounts page and the cost of the product will\n        automatically populate in the amount field.\n      </NewItem>\n      <NewItem title=\"What's New Notifications\">\n        This notification is a new feature! When new Chem Cash udpates are\n        released this notification will appear once on the first time you access\n        the website after the update is released.\n      </NewItem>\n    </Grid>\n  </Grid>\n)\n\nexport default connect(mapStateToProps, mapDispatchToProps)(WhatsNewDialog)\n","import {\n  ASYNC_START,\n  LOGIN,\n  LOGIN_PAGE_UNLOADED,\n  REGISTER,\n  REGISTER_PAGE_UNLOADED,\n} from '../constants/actionTypes'\n\nexport default (state = {}, action) => {\n  switch (action.type) {\n    case ASYNC_START:\n      if (action.subtype === LOGIN || action.subtype === REGISTER) {\n        return { ...state, inProgress: true }\n      }\n      break\n    case LOGIN:\n    case REGISTER:\n      return {\n        ...state,\n        inProgress: false,\n        errors: action.error ? action.payload.errors : null,\n      }\n    case LOGIN_PAGE_UNLOADED:\n    case REGISTER_PAGE_UNLOADED:\n      return {}\n    default:\n      return state\n  }\n\n  return state\n}\n","import {\n  APP_LOAD,\n  LOGIN,\n  LOGIN_PAGE_UNLOADED,\n  LOGOUT,\n  REDIRECT,\n  REGISTER,\n  REGISTER_PAGE_UNLOADED,\n  SETTINGS_SAVED,\n  SETTINGS_PAGE_UNLOADED,\n  SPOTIFY_REMOVE_AUTH,\n  NAV_LOADED,\n  NAV_TAB_CHANGE,\n  WHATS_NEW_DIALOG_LOADED,\n  WHATS_NEW_DIALOG_UNLOADED,\n} from '../constants/actionTypes'\n\nconst defaultState = {\n  appName: 'Chem Cash',\n  token: null,\n  viewChangeCounter: 0,\n}\n\nexport default (state = defaultState, action) => {\n  switch (action.type) {\n    case APP_LOAD:\n      return {\n        ...state,\n        token: action.token || null,\n        appLoaded: true,\n        currentUser: action.payload ? action.payload.user : null,\n        settings: action.payload ? action.payload.settings : null,\n      }\n    case LOGOUT:\n      return { ...state, redirectTo: '/login', token: null, currentUser: null }\n    case LOGIN:\n    case REGISTER:\n      return {\n        ...state,\n        redirectTo: action.error ? null : '/',\n        token: action.error ? null : action.payload.user.token,\n        currentUser: action.error ? null : action.payload.user,\n        settings: action.error ? null : action.payload.settings,\n      }\n    case LOGIN_PAGE_UNLOADED:\n    case REGISTER_PAGE_UNLOADED:\n    case SETTINGS_PAGE_UNLOADED:\n      return { ...state, viewChangeCounter: state.viewChangeCounter + 1 }\n    case NAV_LOADED:\n    case NAV_TAB_CHANGE:\n      return { ...state, redirectTo: action.redirectTo }\n    case REDIRECT:\n      return { ...state, redirectTo: null }\n    case SETTINGS_SAVED:\n      return {\n        ...state,\n        currentUser: action.error ? state.currentUser : action.payload[0].user,\n        // settings: action.error ? state.settings : action.payload[1].settings,\n        // @todo: the sharing of teacher settings with student accounts needs some cleanup to avoid messes like this\n        settings:\n          action.error || state.currentUser.role === 'student'\n            ? state.settings\n            : action.payload[1].settings,\n      }\n    case SPOTIFY_REMOVE_AUTH:\n      return {\n        ...state,\n        settings: action.error\n          ? state.settings\n          : { ...state.settings, spotifyTokens: undefined },\n      }\n    case WHATS_NEW_DIALOG_LOADED:\n    case WHATS_NEW_DIALOG_UNLOADED:\n      return {\n        ...state,\n        currentUser: action.payload ? action.payload.user : null,\n      }\n    default:\n      return state\n  }\n}\n","import {\n  ADD_COURSE,\n  ADD_STUDENT,\n  ALERT_CLOSED,\n  ASYNC_START,\n  COURSE_DIALOG_UNLOADED,\n  COURSES_PAGE_LOADED,\n  COURSES_PAGE_UNLOADED,\n  DELETE_COURSE,\n  DELETE_STUDENT,\n  IMPORT_STUDENTS,\n  MOVE_STUDENT,\n  RESET_STUDENT_PASSWORD,\n  STUDENT_DIALOG_UNLOADED,\n  STUDENT_SEARCH_LOADED,\n  STUDENT_SEARCH_UNLOADED,\n  UPDATE_COURSE,\n  UPDATE_STUDENT,\n} from '../constants/actionTypes'\n\nconst defaultState = {\n  courses: [],\n  errors: null,\n  importCount: null,\n  inProgress: false,\n  pageLoaded: false,\n}\n\nconst sortByLastName = (a, b) => a.lastName.localeCompare(b.lastName)\nconst sortByPeriod = (a, b) => a.period - b.period\n\nexport default (state = defaultState, action) => {\n  let courses = []\n  switch (action.type) {\n    case ADD_COURSE:\n      return {\n        ...state,\n        courses: action.error\n          ? state.courses\n          : [...state.courses, action.payload.course].sort((a, b) =>\n              sortByPeriod(a, b)\n            ),\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n      }\n    case ADD_STUDENT:\n      // Changing a deep-nested array requires deep-copying\n      // to avoid altering the previous state\n      courses = []\n      state.courses.forEach((course) => {\n        const courseCopy = { ...course }\n        if (course._id.toString() === action.courseId) {\n          courseCopy.students = [...course.students, action.payload.user].sort(\n            (a, b) => sortByLastName(a, b)\n          )\n        }\n        courses.push(courseCopy)\n      })\n      return {\n        ...state,\n        courses: action.error ? state.courses : courses,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n      }\n    case ALERT_CLOSED:\n      return { ...state, importCount: null }\n    case ASYNC_START:\n      if (\n        action.subtype === ADD_STUDENT ||\n        action.subtype === ADD_COURSE ||\n        action.subtype === MOVE_STUDENT ||\n        action.subtype === UPDATE_COURSE ||\n        action.subtype === UPDATE_STUDENT\n      ) {\n        return { ...state, errors: null, inProgress: true }\n      } else if (action.subtype === COURSES_PAGE_LOADED) {\n        return { ...state, errors: null, pageLoaded: true }\n      } else if (action.subtype === IMPORT_STUDENTS) {\n        return { ...state, errors: null, importCount: null, inProgress: true }\n      }\n      break\n    case COURSE_DIALOG_UNLOADED:\n    case STUDENT_DIALOG_UNLOADED:\n      return { ...state, errors: null }\n    case COURSES_PAGE_LOADED:\n    case STUDENT_SEARCH_LOADED:\n      return { ...state, courses: action.payload.courses, pageLoaded: false }\n    case COURSES_PAGE_UNLOADED:\n    case STUDENT_SEARCH_UNLOADED:\n      return defaultState\n    case DELETE_COURSE:\n      return {\n        ...state,\n        courses: action.error\n          ? state.courses\n          : state.courses.filter(\n              (course) => course.slug !== action.payload.course.slug\n            ),\n      }\n    case DELETE_STUDENT:\n      // Changing a deep-nested array requires deep-copying\n      // to avoid altering the previous state\n      courses = []\n      state.courses.forEach((course) => {\n        const courseCopy = { ...course }\n        if (course._id.toString() === action.payload.course._id.toString()) {\n          courseCopy.students = course.students.filter(\n            (student) => student.username !== action.payload.user.username\n          )\n        }\n        courses.push(courseCopy)\n      })\n      return {\n        ...state,\n        courses: action.error ? state.courses : courses,\n      }\n    case IMPORT_STUDENTS:\n      // Students are not sorted when returned from server (@todo: fix this?)\n      !action.error &&\n        action.payload.course.students.sort((a, b) => sortByLastName(a, b))\n      return {\n        ...state,\n        courses: action.error\n          ? state.courses\n          : state.courses.map((course) =>\n              course._id === action.payload.course._id\n                ? action.payload.course\n                : course\n            ),\n        errors: action.error ? action.payload.errors : null,\n        importCount: action.error ? null : action.payload.count,\n        inProgress: false,\n      }\n    case MOVE_STUDENT:\n      // Students are not sorted when returned from server (@todo: fix this?)\n      !action.error &&\n        action.payload[0].course.students.sort((a, b) => sortByLastName(a, b))\n      !action.error &&\n        action.payload[1].course.students.sort((a, b) => sortByLastName(a, b))\n      return {\n        ...state,\n        courses: action.error\n          ? state.courses\n          : state.courses.map((course) => {\n              if (course._id === action.payload[0].course._id) {\n                return action.payload[0].course\n              } else if (course._id === action.payload[1].course._id) {\n                return action.payload[1].course\n              } else {\n                return course\n              }\n            }),\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n      }\n    case RESET_STUDENT_PASSWORD:\n      return { ...state }\n    case UPDATE_COURSE:\n      return {\n        ...state,\n        courses: action.error\n          ? state.courses\n          : state.courses\n              .map((course) =>\n                course._id === action.payload.course._id\n                  ? action.payload.course\n                  : course\n              )\n              .sort((a, b) => sortByPeriod(a, b)),\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n      }\n    case UPDATE_STUDENT:\n      // Changing a deep-nested array requires deep-copying\n      // to avoid altering the previous state\n      courses = []\n      const updatedUser = action.payload.user\n      state.courses.forEach((course) => {\n        const courseCopy = { ...course }\n        if (course._id.toString() === action.courseId.toString()) {\n          courseCopy.students = course.students\n            .map((student) =>\n              student._id.toString() === updatedUser._id.toString()\n                ? updatedUser\n                : student\n            )\n            .sort((a, b) => sortByLastName(a, b))\n        }\n        courses.push(courseCopy)\n      })\n      return {\n        ...state,\n        courses: action.error ? state.courses : courses,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n      }\n    default:\n      return state\n  }\n\n  return state\n}\n","import {\n  ASYNC_START,\n  ECONOMY_DIALOG_LOADED,\n  ECONOMY_DIALOG_UNLOADED,\n} from '../constants/actionTypes'\n\nconst defaultState = {\n  errors: null,\n  inProgress: false,\n  students: [],\n}\n\nexport default (state = defaultState, action) => {\n  switch (action.type) {\n    case ASYNC_START:\n      if (action.subtype === ECONOMY_DIALOG_LOADED) {\n        return {\n          ...state,\n          errors: null,\n          inProgress: true,\n        }\n      }\n      break\n    case ECONOMY_DIALOG_LOADED:\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n        students: action.error ? state.students : action.payload.students,\n      }\n    case ECONOMY_DIALOG_UNLOADED:\n      return { ...defaultState }\n    default:\n      return state\n  }\n\n  return state\n}\n","import {\n  NAV_LOADED,\n  NAV_UNLOADED,\n  NAV_TAB_CHANGE,\n} from '../constants/actionTypes'\n\nexport default (state = {}, action) => {\n  switch (action.type) {\n    case NAV_LOADED:\n    case NAV_TAB_CHANGE:\n      return {\n        ...state,\n        navTabValue: action.value,\n      }\n    case NAV_UNLOADED:\n      return {}\n    default:\n      return state\n  }\n}\n","import {\n  ADD_COURSE,\n  ADD_PRODUCT,\n  ADD_STUDENT,\n  ADD_TEACHER,\n  ADD_TRANSACTION,\n  ADD_TRANSACTIONS,\n  DELETE_COURSE,\n  DELETE_PRODUCT,\n  DELETE_PURCHASE,\n  DELETE_SONG_REQUEST,\n  DELETE_STUDENT,\n  DELETE_TASK,\n  DELETE_TEACHER,\n  DELETE_TRANSACTION,\n  IMPORT_SCORES,\n  IMPORT_STUDENTS,\n  MOVE_STUDENT,\n  RESET_STUDENT_PASSWORD,\n  SETTINGS_SAVED,\n  SNACKBAR_CLOSED,\n  STUDENT_DELETE_PURCHASE,\n  SUBMIT_PURCHASE,\n  SUBMIT_SONG_REQUEST,\n  SUBMIT_SONG_REMOVAL_REQUEST,\n  UPDATE_COURSE,\n  UPDATE_PRODUCT,\n  UPDATE_STUDENT,\n  UPDATE_TASK,\n  UPDATE_TEACHER,\n  UPDATE_TRANSACTION,\n  WHATS_NEW_FLAGS_RESET,\n} from '../constants/actionTypes'\n\nexport default (state = {}, action) => {\n  switch (action.type) {\n    case ADD_COURSE:\n    case ADD_PRODUCT:\n    case ADD_STUDENT:\n    case ADD_TEACHER:\n    case ADD_TRANSACTION:\n    case ADD_TRANSACTIONS:\n    case DELETE_COURSE:\n    case DELETE_PRODUCT:\n    case DELETE_PURCHASE:\n    case DELETE_SONG_REQUEST:\n    case DELETE_STUDENT:\n    case DELETE_TASK:\n    case DELETE_TEACHER:\n    case DELETE_TRANSACTION:\n    case IMPORT_SCORES:\n    case IMPORT_STUDENTS:\n    case MOVE_STUDENT:\n    case RESET_STUDENT_PASSWORD:\n    case SETTINGS_SAVED:\n    case STUDENT_DELETE_PURCHASE:\n    case SUBMIT_PURCHASE:\n    case SUBMIT_SONG_REQUEST:\n    case SUBMIT_SONG_REMOVAL_REQUEST:\n    case UPDATE_COURSE:\n    case UPDATE_PRODUCT:\n    case UPDATE_STUDENT:\n    case UPDATE_TASK:\n    case UPDATE_TEACHER:\n    case UPDATE_TRANSACTION:\n    case WHATS_NEW_FLAGS_RESET:\n      return {\n        ...state,\n        snackbar: action.error\n          ? null //{ message: 'An error occurred', variant: 'error' }\n          : action.snackbar,\n      }\n    case SNACKBAR_CLOSED:\n      return { ...state, snackbar: null }\n    default:\n      return state\n  }\n}\n","import {\n  ACCOUNT_VIEW_LOADED,\n  ACCOUNT_VIEW_UNLOADED,\n  ADD_PRODUCT,\n  ASYNC_START,\n  PRODUCT_DIALOG_UNLOADED,\n  PRODUCTS_PAGE_LOADED,\n  PRODUCTS_PAGE_UNLOADED,\n  DELETE_PRODUCT,\n  UPDATE_PRODUCT,\n} from '../constants/actionTypes'\n\nconst defaultState = {\n  products: [],\n  errors: null,\n  inProgress: false,\n  pageLoaded: false,\n}\n\nconst sortByCost = (a, b) => a.cost - b.cost\n\nexport default (state = defaultState, action) => {\n  switch (action.type) {\n    case ACCOUNT_VIEW_LOADED:\n      return {\n        ...state,\n        products: action.payload[1].products,\n      }\n    case ACCOUNT_VIEW_UNLOADED:\n    case PRODUCTS_PAGE_UNLOADED:\n      return defaultState\n    case ADD_PRODUCT:\n      return {\n        ...state,\n        products: action.error\n          ? state.products\n          : [...state.products, action.payload.product].sort((a, b) =>\n              sortByCost(a, b)\n            ),\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n      }\n    case ASYNC_START:\n      if (action.subtype === ADD_PRODUCT || action.subtype === UPDATE_PRODUCT) {\n        return { ...state, errors: null, inProgress: true }\n      } else if (action.subtype === PRODUCTS_PAGE_LOADED) {\n        return { ...state, errors: null, pageLoaded: true }\n      }\n      break\n    case DELETE_PRODUCT:\n      return {\n        ...state,\n        products: action.error\n          ? state.products\n          : state.products.filter(\n              (product) => product.slug !== action.payload.product.slug\n            ),\n      }\n    case PRODUCT_DIALOG_UNLOADED:\n      return { ...state, errors: null }\n    case PRODUCTS_PAGE_LOADED:\n      return {\n        ...state,\n        products: action.payload.products,\n        pageLoaded: false,\n      }\n    case UPDATE_PRODUCT:\n      return {\n        ...state,\n        products: action.error\n          ? state.products\n          : state.products\n              .map((product) =>\n                product._id === action.payload.product._id\n                  ? action.payload.product\n                  : product\n              )\n              .sort((a, b) => sortByCost(a, b)),\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n      }\n    default:\n      return state\n  }\n\n  return state\n}\n","import {\n  ADD_TO_CART,\n  ASYNC_START,\n  DELETE_CART_PRODUCT,\n  DELETE_PURCHASE,\n  PURCHASES_DIALOG_UNLOADED,\n  STUDENT_DELETE_PURCHASE,\n  STUDENT_PURCHASES_LOADED,\n  STUDENT_PURCHASES_UNLOADED,\n  SUBMIT_PURCHASE,\n  TEACHER_PURCHASES_LOADED,\n  TEACHER_PURCHASES_UNLOADED,\n  UPDATE_CART_PRODUCT_QUANTITY,\n  UPDATE_PURCHASE,\n} from '../constants/actionTypes'\n\nconst defaultState = {\n  cart: { products: [], quantities: {} },\n  courses: [],\n  errors: null,\n  inProgress: false,\n  purchases: [],\n}\n\nexport default (state = defaultState, action) => {\n  let courses = []\n  switch (action.type) {\n    case ADD_TO_CART:\n      const productIndex = state.cart.products.findIndex(\n        (product) => product._id === action.product._id\n      )\n      const isAdded = productIndex > -1\n      const updatedQuantity = isAdded\n        ? state.cart.quantities[action.product._id] + 1\n        : 1\n      return {\n        ...state,\n        cart: {\n          products: isAdded\n            ? state.cart.products\n            : [...state.cart.products, action.product],\n          quantities: {\n            ...state.cart.quantities,\n            [action.product._id]: updatedQuantity,\n          },\n        },\n      }\n    case ASYNC_START:\n      if (\n        action.subtype === STUDENT_PURCHASES_LOADED ||\n        action.subtype === TEACHER_PURCHASES_LOADED ||\n        action.subtype === SUBMIT_PURCHASE\n      ) {\n        return { ...state, errors: null, inProgress: true }\n      }\n      break\n    case DELETE_CART_PRODUCT:\n      const { [action.productId]: value, ...withoutDeleted } =\n        state.cart.quantities\n      return {\n        ...state,\n        cart: {\n          products: state.cart.products.filter(\n            (product) => product._id !== action.productId\n          ),\n          quantities: withoutDeleted,\n        },\n      }\n    case DELETE_PURCHASE:\n      // Changing a deep-nested array requires deep-copying\n      // to avoid altering the previous state\n      state.courses.forEach((course) => {\n        const courseCopy = { ...course }\n        courseCopy.purchases = courseCopy.purchases.filter(\n          (purchase) =>\n            purchase._id.toString() !== action.payload.purchase._id.toString()\n        )\n        courses.push(courseCopy)\n      })\n      return {\n        ...state,\n        courses: action.error ? state.courses : courses,\n      }\n    case PURCHASES_DIALOG_UNLOADED:\n      return { ...state, errors: null }\n    case STUDENT_DELETE_PURCHASE:\n      return {\n        ...state,\n        purchases: action.error\n          ? state.purchases\n          : state.purchases.filter(\n              (purchase) => purchase._id !== action.payload.purchase._id\n            ),\n      }\n    case STUDENT_PURCHASES_LOADED:\n      return {\n        ...state,\n        purchases: action.error ? state.purchases : action.payload.purchases,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n      }\n    case STUDENT_PURCHASES_UNLOADED:\n      return { ...defaultState, cart: state.cart }\n    case SUBMIT_PURCHASE:\n      return {\n        ...state,\n        cart: action.error ? state.cart : defaultState.cart,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n      }\n    case TEACHER_PURCHASES_LOADED:\n      return {\n        ...state,\n        courses: action.error ? state.courses : action.payload.courses,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n      }\n    case TEACHER_PURCHASES_UNLOADED:\n      return { ...defaultState }\n    case UPDATE_CART_PRODUCT_QUANTITY:\n      return {\n        ...state,\n        cart: {\n          ...state.cart,\n          quantities: {\n            ...state.cart.quantities,\n            [action.productId]: action.qty,\n          },\n        },\n      }\n    case UPDATE_PURCHASE:\n      // Changing a deep-nested array requires deep-copying\n      // to avoid altering the previous state\n      !action.error &&\n        state.courses.forEach((course) => {\n          const courseCopy = { ...course }\n          courseCopy.purchases = courseCopy.purchases.map((purchase) =>\n            purchase._id.toString() === action.payload.purchase._id.toString()\n              ? action.payload.purchase\n              : purchase\n          )\n          courses.push(courseCopy)\n        })\n      return {\n        ...state,\n        courses: action.error ? state.courses : courses,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n      }\n    default:\n      return state\n  }\n\n  return state\n}\n","import { unionBy } from 'lodash'\nimport {\n  ACCOUNT_BALANCE_LOADED,\n  ACCOUNT_BALANCE_UNLOADED,\n  ACCOUNT_VIEW_LOADED,\n  ACCOUNT_VIEW_UNLOADED,\n  ACCOUNTS_PAGE_UNLOADED,\n  ADD_TRANSACTION,\n  ADD_TRANSACTIONS,\n  ALERT_CLOSED,\n  ASYNC_START,\n  DELETE_TRANSACTION,\n  STUDENT_CART_LOADED,\n  STUDENT_CART_UNLOADED,\n  IMPORT_SCORES,\n  IMPORT_SCORES_DIALOG_UNLOADED,\n  TRANSACTION_DIALOG_UNLOADED,\n  TRANSACTIONS_DIALOG_UNLOADED,\n  UPDATE_TRANSACTION,\n} from '../constants/actionTypes'\nimport convertScore from '../converter'\n\nconst defaultState = {\n  conversions: null,\n  errors: null,\n  importSummary: null,\n  inProgress: false,\n  total: null,\n  transactions: null,\n}\n\nconst getTotals = (transactions, conversions) => {\n  const sumTransactions = (total, transaction) => total + transaction.amount\n  const sumScores = (total, score) => total + convertScore(score, conversions)\n\n  const bonuses = transactions.bonuses.reduce(sumTransactions, 0)\n  const purchases = transactions.purchases.reduce(sumTransactions, 0)\n  const scores = transactions.scores.reduce(sumScores, 0)\n\n  const balance = bonuses + purchases + scores\n\n  return { balance, bonuses, purchases, scores }\n}\n\nconst addScores = (added, transactions, curUser) => {\n  if (curUser) {\n    const curUserId = curUser._id.toString()\n    const usersAdded = added.filter(\n      (score) => score.student._id.toString() === curUserId\n    )\n\n    if (usersAdded) {\n      transactions.scores = unionBy(usersAdded, [...transactions.scores], '_id')\n    }\n\n    return transactions\n  }\n\n  return null\n}\n\nconst addTransaction = (added, transactions) => {\n  const types = Object.keys(transactions)\n  for (const type of types) {\n    if (type.startsWith(added.type)) {\n      transactions[type] = [added, ...transactions[type]]\n    }\n  }\n  return transactions\n}\n\nconst addBulkTransaction = (added, transactions, curUser) => {\n  if (curUser) {\n    const curUserId = curUser._id.toString()\n    const usersAdded = added.find(\n      (transaction) => transaction.student._id.toString() === curUserId\n    )\n\n    if (usersAdded) return addTransaction(usersAdded, transactions)\n  }\n\n  return null\n}\n\nconst deleteTransaction = (deleted, transactions) => {\n  const types = Object.keys(transactions)\n  for (const type of types) {\n    if (type.startsWith(deleted.type)) {\n      transactions[type] = transactions[type].filter(\n        (transaction) => transaction._id !== deleted._id\n      )\n    }\n  }\n  return transactions\n}\n\nconst updateTransaction = (updated, transactions) => {\n  const types = Object.keys(transactions)\n  for (const type of types) {\n    if (type.startsWith(updated.type)) {\n      transactions[type] = transactions[type].map((transaction) =>\n        transaction._id === updated._id ? updated : transaction\n      )\n    }\n  }\n  return transactions\n}\n\nexport default (state = defaultState, action) => {\n  switch (action.type) {\n    case ACCOUNT_BALANCE_LOADED:\n    case STUDENT_CART_LOADED:\n      return {\n        ...state,\n        total: action.error\n          ? null\n          : getTotals(\n              action.payload.transactions,\n              action.payload.scoreConverter\n            ),\n      }\n    case ACCOUNT_BALANCE_UNLOADED:\n    case STUDENT_CART_UNLOADED:\n      return { ...state, total: null }\n    case ACCOUNT_VIEW_LOADED:\n      return {\n        ...state,\n        conversions: action.error ? null : action.payload[0].scoreConverter,\n        total: action.error\n          ? null\n          : getTotals(\n              action.payload[0].transactions,\n              action.payload[0].scoreConverter\n            ),\n        transactions: action.error ? null : action.payload[0].transactions,\n      }\n    case ACCOUNT_VIEW_UNLOADED:\n      return { ...state, conversions: null, total: null, transactions: null }\n    case ACCOUNTS_PAGE_UNLOADED:\n    case ALERT_CLOSED:\n      return { ...state, importSummary: null }\n    case ADD_TRANSACTION:\n      const addedTransactions = !action.error\n        ? addTransaction(action.payload.transaction, {\n            ...state.transactions,\n          })\n        : {}\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n        transactions: action.error ? state.transactions : addedTransactions,\n        total: action.error\n          ? state.total\n          : getTotals(addedTransactions, state.conversions),\n      }\n    case ADD_TRANSACTIONS:\n      const addedBulkTransactions = !action.error\n        ? addBulkTransaction(\n            action.payload.transactions,\n            { ...state.transactions },\n            action.curStudent\n          )\n        : null\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n        transactions: action.error ? state.transactions : addedBulkTransactions,\n        total:\n          action.error || !state.transactions\n            ? state.total\n            : getTotals(addedBulkTransactions, state.conversions),\n      }\n    case ASYNC_START:\n      if (\n        action.subtype === ADD_TRANSACTION ||\n        action.subtype === ADD_TRANSACTIONS ||\n        action.subtype === DELETE_TRANSACTION ||\n        action.subtype === UPDATE_TRANSACTION\n      ) {\n        return { ...state, errors: null, inProgress: true }\n      } else if (action.subtype === IMPORT_SCORES) {\n        return { ...state, errors: null, importSummary: null, inProgress: true }\n      }\n      break\n    case DELETE_TRANSACTION:\n      const deletedTransactions = !action.error\n        ? deleteTransaction(action.payload.transaction, {\n            ...state.transactions,\n          })\n        : {}\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n        transactions: action.error ? state.transactions : deletedTransactions,\n        total: action.error\n          ? state.total\n          : getTotals(deletedTransactions, state.conversions),\n      }\n    case IMPORT_SCORES:\n      const addedScores = !action.error\n        ? addScores(\n            action.payload.scores,\n            { ...state.transactions },\n            action.curStudent\n          )\n        : null\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        importSummary: action.error ? null : action.payload.results,\n        inProgress: false,\n        transactions: action.error ? state.transactions : addedScores,\n        total:\n          action.error || !state.transactions\n            ? state.total\n            : getTotals(addedScores, state.conversions),\n      }\n    case IMPORT_SCORES_DIALOG_UNLOADED:\n    case TRANSACTION_DIALOG_UNLOADED:\n    case TRANSACTIONS_DIALOG_UNLOADED:\n      return { ...state, errors: null }\n    case UPDATE_TRANSACTION:\n      const updatedTransactions = !action.error\n        ? updateTransaction(action.payload.transaction, {\n            ...state.transactions,\n          })\n        : {}\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n        transactions: action.error ? state.transactions : updatedTransactions,\n        total: action.error\n          ? state.total\n          : getTotals(updatedTransactions, state.conversions),\n      }\n    default:\n      return state\n  }\n\n  return state\n}\n","import {\n  ASYNC_START,\n  SETTINGS_PAGE_UNLOADED,\n  SETTINGS_SAVED,\n  SPOTIFY_LINKER_LOADED,\n  SPOTIFY_LINKER_UNLOADED,\n} from '../constants/actionTypes'\n\nconst defaultState = {\n  errors: null,\n  inProgress: false,\n  spotifyAuthUrl: null,\n}\n\nexport default (state = defaultState, action) => {\n  switch (action.type) {\n    case ASYNC_START:\n      if (action.subtype === SETTINGS_SAVED) {\n        return {\n          ...state,\n          inProgress: true,\n        }\n      }\n      break\n    case SPOTIFY_LINKER_LOADED:\n      return { ...state, spotifyAuthUrl: action.payload.spotifyAuthUrl }\n    case SETTINGS_PAGE_UNLOADED:\n    case SPOTIFY_LINKER_UNLOADED:\n      return defaultState\n    case SETTINGS_SAVED:\n      return {\n        ...state,\n        inProgress: false,\n        errors: action.error ? action.payload.errors : null,\n      }\n    default:\n      return state\n  }\n\n  return state\n}\n","import {\n  ASYNC_START,\n  DELETE_TASK,\n  TASKS_DIALOG_LOADED,\n  TASKS_DIALOG_UNLOADED,\n  UPDATE_TASK,\n} from '../constants/actionTypes'\n\nconst defaultState = {\n  errors: null,\n  inProgress: false,\n  tasks: [],\n}\n\nexport default (state = defaultState, action) => {\n  switch (action.type) {\n    case ASYNC_START:\n      if (action.subtype === TASKS_DIALOG_LOADED) {\n        return { ...state, inProgress: true }\n      }\n      break\n    case DELETE_TASK:\n      return {\n        ...state,\n        tasks: action.error\n          ? state.tasks\n          : state.tasks.filter(\n              (task) => task.slug !== action.payload.task.slug\n            ),\n      }\n    case TASKS_DIALOG_LOADED:\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n        tasks: action.error ? [] : action.payload.tasks,\n      }\n    case TASKS_DIALOG_UNLOADED:\n      return defaultState\n    case UPDATE_TASK:\n      return {\n        ...state,\n        tasks: action.error\n          ? state.tasks\n          : state.tasks.map((task) =>\n              task.slug === action.payload.task.slug\n                ? action.payload.task\n                : task\n            ),\n      }\n    default:\n      return state\n  }\n\n  return state\n}\n","import {\n  ADD_TEACHER,\n  ASYNC_START,\n  DELETE_TEACHER,\n  MANAGE_TEACHERS_PAGE_LOADED,\n  MANAGE_TEACHERS_PAGE_UNLOADED,\n  TEACHER_DIALOG_UNLOADED,\n  UPDATE_TEACHER,\n} from '../constants/actionTypes'\n\nconst defaultState = {\n  errors: null,\n  inProgress: false,\n  teachers: [],\n}\n\nconst sortByLastName = (a, b) => a.lastName.localeCompare(b.lastName)\n\nexport default (state = defaultState, action) => {\n  switch (action.type) {\n    case ADD_TEACHER:\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n        teachers: action.error\n          ? state.teachers\n          : [...state.teachers, action.payload.user].sort((a, b) =>\n              sortByLastName(a, b)\n            ),\n      }\n    case ASYNC_START:\n      if (action.subtype === ADD_TEACHER || action.subtype === UPDATE_TEACHER) {\n        return { ...state, inProgress: true, errors: null }\n      }\n      break\n    case DELETE_TEACHER:\n      return {\n        ...state,\n        teachers: action.error\n          ? state.teachers\n          : state.teachers.filter(\n              (teacher) => teacher.username !== action.payload.user.username\n            ),\n      }\n    case MANAGE_TEACHERS_PAGE_LOADED:\n      return {\n        ...state,\n        teachers: action.payload.users,\n      }\n    case MANAGE_TEACHERS_PAGE_UNLOADED:\n      return defaultState\n    case TEACHER_DIALOG_UNLOADED:\n      return { ...state, errors: null }\n    case UPDATE_TEACHER:\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n        teachers: action.error\n          ? state.teachers\n          : state.teachers\n              .map((user) =>\n                user.username === action.payload.user.username\n                  ? action.payload.user\n                  : user\n              )\n              .sort((a, b) => sortByLastName(a, b)),\n      }\n    default:\n      return state\n  }\n\n  return state\n}\n","import {\n  ASYNC_START,\n  DELETE_SONG_REQUEST,\n  SONG_REQUESTS_DIALOG_UNLOADED,\n  SONGS_PAGE_UNLOADED,\n  STUDENT_SONGS_PAGE_LOADED,\n  SUBMIT_SONG_REQUEST,\n  SUBMIT_SONG_REMOVAL_REQUEST,\n  TEACHER_SONGS_PAGE_LOADED,\n  UPDATE_SONG_REQUEST,\n} from '../constants/actionTypes'\n\nconst defaultState = {\n  course: null,\n  courses: [],\n  courseSongs: [],\n  errors: null,\n  inProgress: false,\n  userSongs: [],\n}\n\nexport default (state = defaultState, action) => {\n  let courses = []\n  switch (action.type) {\n    case ASYNC_START:\n      if (action.subtype === UPDATE_SONG_REQUEST) {\n        return { ...state, inProgress: true, errors: null }\n      }\n      break\n    case DELETE_SONG_REQUEST:\n      // Changing a deep-nested array requires deep-copying\n      // to avoid altering the previous state\n      state.courses.forEach((course) => {\n        const courseCopy = { ...course }\n        courseCopy.songs = courseCopy.songs.filter(\n          (song) => song._id.toString() !== action.payload.song._id.toString()\n        )\n        courses.push(courseCopy)\n      })\n      return {\n        ...state,\n        courses: action.error ? state.courses : courses,\n      }\n    case SONG_REQUESTS_DIALOG_UNLOADED:\n      return { ...state, errors: null }\n    case SONGS_PAGE_UNLOADED:\n      return defaultState\n    case STUDENT_SONGS_PAGE_LOADED:\n      return {\n        ...state,\n        userSongs: action.payload.songsByUser,\n        courseSongs: action.payload.songsByCourse,\n        course: action.payload.course,\n      }\n    case SUBMIT_SONG_REQUEST:\n      return {\n        ...state,\n        userSongs: [action.payload.song, ...state.userSongs],\n        courseSongs: [action.payload.song, ...state.courseSongs],\n      }\n    case SUBMIT_SONG_REMOVAL_REQUEST:\n      return {\n        ...state,\n        userSongs: state.userSongs.map((song) =>\n          action.payload.song._id === song._id ? action.payload.song : song\n        ),\n        courseSongs: state.courseSongs.map((song) =>\n          action.payload.song._id === song._id ? action.payload.song : song\n        ),\n      }\n    case TEACHER_SONGS_PAGE_LOADED:\n      return { ...state, courses: action.payload.courses }\n    case UPDATE_SONG_REQUEST:\n      // Changing a deep-nested array requires deep-copying\n      // to avoid altering the previous state\n      !action.error &&\n        state.courses.forEach((course) => {\n          const courseCopy = { ...course }\n          courseCopy.songs = courseCopy.songs.map((song) =>\n            song._id.toString() === action.payload.song._id.toString()\n              ? action.payload.song\n              : song\n          )\n          courses.push(courseCopy)\n        })\n      return {\n        ...state,\n        courses: action.error ? state.courses : courses,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n      }\n    default:\n      return state\n  }\n\n  return state\n}\n","import agent from './agent'\nimport {\n  ASYNC_START,\n  ASYNC_END,\n  LOGIN,\n  LOGOUT,\n  REGISTER,\n} from './constants/actionTypes'\n\nconst promiseMiddleware = (store) => (next) => (action) => {\n  if (isPromise(action.payload)) {\n    store.dispatch({ type: ASYNC_START, subtype: action.type })\n\n    const currentView = store.getState().viewChangeCounter\n    const skipTracking = action.skipTracking\n\n    action.payload.then(\n      (res) => {\n        const currentState = store.getState()\n        if (!skipTracking && currentState.viewChangeCounter !== currentView) {\n          return\n        }\n        action.payload = res\n        store.dispatch({ type: ASYNC_END, promise: action.payload })\n        store.dispatch(action)\n      },\n      (error) => {\n        const currentState = store.getState()\n        if (!skipTracking && currentState.viewChangeCounter !== currentView) {\n          return\n        }\n        // console.log('ERROR', error)\n        action.error = true\n        action.payload = error.response.body\n        if (!action.skipTracking) {\n          store.dispatch({ type: ASYNC_END, promise: action.payload })\n        }\n        store.dispatch(action)\n      }\n    )\n\n    return\n  }\n\n  next(action)\n}\n\nconst localStorageMiddleware = (store) => (next) => (action) => {\n  if (action.type === REGISTER || action.type === LOGIN) {\n    if (!action.error) {\n      window.localStorage.setItem('jwt', action.payload.user.token)\n      agent.setToken(action.payload.user.token)\n    }\n  } else if (action.type === LOGOUT) {\n    window.localStorage.setItem('jwt', '')\n    agent.setToken(null)\n  }\n\n  next(action)\n}\n\nfunction isPromise(v) {\n  return v && typeof v.then === 'function'\n}\n\nexport { promiseMiddleware, localStorageMiddleware }\n","import { applyMiddleware, createStore } from 'redux'\nimport { composeWithDevTools } from 'redux-devtools-extension/developmentOnly'\nimport { createBrowserHistory } from 'history'\nimport { createLogger } from 'redux-logger'\nimport { routerMiddleware } from 'connected-react-router'\n\nimport createRootReducer from './reducer'\nimport { promiseMiddleware, localStorageMiddleware } from './middleware'\n\nexport const history = createBrowserHistory()\n\n// Build the middleware for intercepting and dispatching navigation actions\nconst myRouterMiddleware = routerMiddleware(history)\n\nconst getMiddleware = () => {\n  if (process.env.NODE_ENV === 'production') {\n    return applyMiddleware(\n      myRouterMiddleware,\n      promiseMiddleware,\n      localStorageMiddleware\n    )\n  } else {\n    // Enable additional logging in non-production environments\n    return applyMiddleware(\n      myRouterMiddleware,\n      promiseMiddleware,\n      localStorageMiddleware,\n      createLogger()\n    )\n  }\n}\n\nexport const store = createStore(\n  createRootReducer(history),\n  composeWithDevTools(getMiddleware())\n)\n","import { combineReducers } from 'redux'\nimport { connectRouter } from 'connected-react-router'\n\nimport auth from './reducers/auth'\nimport common from './reducers/common'\nimport courses from './reducers/courses'\nimport economy from './reducers/economy'\nimport nav from './reducers/nav'\nimport notifier from './reducers/notifier'\nimport products from './reducers/products'\nimport purchases from './reducers/purchases'\nimport scores from './reducers/scores'\nimport settings from './reducers/settings'\nimport tasks from './reducers/tasks'\nimport teachers from './reducers/teachers'\nimport songs from './reducers/songs'\n\nexport default (history) =>\n  combineReducers({\n    auth,\n    common,\n    courses,\n    economy,\n    nav,\n    notifier,\n    products,\n    purchases,\n    scores,\n    settings,\n    tasks,\n    teachers,\n    songs,\n    router: connectRouter(history),\n  })\n","import React, { Suspense, useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { Route, Switch } from 'react-router-dom'\nimport { push } from 'connected-react-router'\nimport { CssBaseline, ThemeProvider } from '@material-ui/core'\n\nimport ChemCashTheme from './Theme'\nimport Home from './Home'\nimport Loading from './Loading'\nimport Login from './Login'\nimport Notifier from './Notifier'\nimport WhatsNewDialog from './WhatsNewDialog'\nimport agent from '../agent'\nimport { store } from '../store'\n\nimport { APP_LOAD, REDIRECT } from '../constants/actionTypes'\n\nconst mapStateToProps = (state) => {\n  return {\n    appLoaded: state.common.appLoaded,\n    redirectTo: state.common.redirectTo,\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => ({\n  onLoad: (payload, token) =>\n    dispatch({ type: APP_LOAD, payload, token, skipTracking: true }),\n  onRedirect: () => dispatch({ type: REDIRECT }),\n})\n\nconst App = (props) => {\n  const { appLoaded, redirectTo } = props\n\n  useEffect(() => {\n    if (redirectTo) {\n      store.dispatch(push(redirectTo))\n      props.onRedirect()\n    }\n  }, [redirectTo])\n\n  useEffect(() => {\n    const token = window.localStorage.getItem('jwt')\n    if (token) {\n      agent.setToken(token)\n    }\n\n    props.onLoad(token ? agent.Auth.current() : null, token)\n  }, [])\n\n  if (appLoaded) {\n    return (\n      <ThemeProvider theme={ChemCashTheme}>\n        <CssBaseline />\n        <Notifier>\n          <Suspense fallback={<p>Loading...</p>}>\n            <Switch>\n              <Route exact path='/login' component={Login} />\n              <Route exact path='/about' component={Login} />\n              <Route path='/' component={Home} />\n            </Switch>\n          </Suspense>\n        </Notifier>\n        <WhatsNewDialog />\n      </ThemeProvider>\n    )\n  }\n\n  return (\n    <ThemeProvider theme={ChemCashTheme}>\n      <CssBaseline />\n      <Loading />\n    </ThemeProvider>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App)\n","import { ConnectedRouter } from 'connected-react-router'\nimport { Provider } from 'react-redux'\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Route, Switch } from 'react-router-dom'\n\nimport App from './components/App'\nimport { store, history } from './store'\n\nReactDOM.render(\n  <Provider store={store}>\n    <ConnectedRouter history={history}>\n      <Switch>\n        <Route path='/' component={App} />\n      </Switch>\n    </ConnectedRouter>\n  </Provider>,\n\n  document.getElementById('root')\n)\n"],"sourceRoot":""}