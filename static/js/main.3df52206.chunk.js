(this["webpackJsonpchem-cash"]=this["webpackJsonpchem-cash"]||[]).push([[4],{1:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return s})),n.d(t,"g",(function(){return i})),n.d(t,"h",(function(){return l})),n.d(t,"i",(function(){return p})),n.d(t,"j",(function(){return m})),n.d(t,"k",(function(){return d})),n.d(t,"m",(function(){return h})),n.d(t,"l",(function(){return f})),n.d(t,"n",(function(){return b}));var r="APP_LOAD",a="ASYNC_START",c="ASYNC_END",o="HOME_PAGE_LOADED",u="HOME_PAGE_UNLOADED",s="LOGIN",i="LOGIN_PAGE_UNLOADED",l="LOGOUT",p="REDIRECT",m="REGISTER",d="REGISTER_PAGE_UNLOADED",h="SETTINGS_SAVED",f="SETTINGS_PAGE_UNLOADED",b="UPDATE_FIELD_AUTH"},14:function(e,t,n){"use strict";(function(e){var r=n(33),a=n.n(r),c=n(34),o=n.n(c),u=a()(o.a,e.Promise),s="https://chem-cash.herokuapp.com/api",i=function(e){return e.body},l=null,p=function(e){l&&e.set("authorization","Token ".concat(l))},m=function(e){return u.get("".concat(s).concat(e)).use(p).then(i)},d=function(e,t){return u.post("".concat(s).concat(e),t).use(p).then(i)},h=function(e,t){return u.put("".concat(s).concat(e),t).use(p).then(i)},f={current:function(){return m("/user")},login:function(e,t){return d("/users/login",{user:{email:e,password:t}})},register:function(e,t,n){return d("/users",{user:{username:e,email:t,password:n}})},save:function(e){return h("/user",{user:e})}};t.a={Auth:f,setToken:function(e){l=e}}}).call(this,n(21))},36:function(e,t,n){e.exports=n(53)},53:function(e,t,n){"use strict";n.r(t);var r=n(15),a=n(12),c=n(0),o=n.n(c),u=n(23),s=n.n(u),i=n(4),l=n(17),p=n(18),m=n(20),d=n(19),h=n(6),f=n(14),b=n(11),E=n(1),v=o.a.memo((function(e){return e.currentUser?null:o.a.createElement("ul",{className:"nav navbar-nav pull-xs-right"},o.a.createElement("li",{className:"nav-item"},o.a.createElement(b.a,{to:"/",className:"nav-link"},"Home")),o.a.createElement("li",{className:"nav-item"},o.a.createElement(b.a,{to:"/login",className:"nav-link"},"Sign in")),o.a.createElement("li",{className:"nav-item"},o.a.createElement(b.a,{to:"/register",className:"nav-link"},"Sign up")))})),O=o.a.memo((function(e){return e.currentUser?o.a.createElement("ul",{className:"nav navbar-nav pull-xs-right"},o.a.createElement("li",{className:"nav-item"},o.a.createElement(b.a,{to:"/",className:"nav-link"},"Home")),o.a.createElement("li",{className:"nav-item"},o.a.createElement(b.a,{to:"/",className:"nav-link",onClick:e.handleLogout},"Logout")),o.a.createElement("li",{className:"nav-item"},o.a.createElement(b.a,{to:"/settings",className:"nav-link"},o.a.createElement("i",{className:"ion-gear-a"}),"\xa0",e.currentUser.username))):null})),g=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(l.a)(this,n),t.call(this,e)}return Object(p.a)(n,[{key:"render",value:function(){return o.a.createElement("nav",{className:"navbar navbar-light"},o.a.createElement("div",{className:"container"},o.a.createElement(b.a,{to:"/",className:"navbar-brand"},this.props.appName.toLowerCase()),o.a.createElement(v,{currentUser:this.props.currentUser}),o.a.createElement(O,{currentUser:this.props.currentUser,handleLogout:this.props.onClickLogout})))}}]),n}(o.a.PureComponent),j=Object(a.c)((function(){return{}}),(function(e){return{onClickLogout:function(){return e({type:E.h})}}}))(g),y=n(13),k=n(35),N=n(8),T=(n(52),n(31)),U=n(24),w=n(3),L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E.f:case E.j:return Object(w.a)(Object(w.a)({},e),{},{inProgress:!1,errors:t.error?t.payload.errors:null});case E.g:case E.k:return{};case E.c:if(t.subtype===E.f||t.subtype===E.j)return Object(w.a)(Object(w.a)({},e),{},{inProgress:!0});break;case E.n:return Object(w.a)(Object(w.a)({},e),{},Object(U.a)({},t.key,t.value));default:return e}return e},C={appName:"Chem Cash",token:null,viewChangeCounter:0},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E.a:return Object(w.a)(Object(w.a)({},e),{},{token:t.token||null,appLoaded:!0,currentUser:t.payload?t.payload.user:null});case E.i:return Object(w.a)(Object(w.a)({},e),{},{redirectTo:null});case E.h:return Object(w.a)(Object(w.a)({},e),{},{redirectTo:"/",token:null,currentUser:null});case E.m:return Object(w.a)(Object(w.a)({},e),{},{redirectTo:t.error?null:"/",currentUser:t.error?null:t.payload.user});case E.f:case E.j:return Object(w.a)(Object(w.a)({},e),{},{redirectTo:t.error?null:"/",token:t.error?null:t.payload.user.token,currentUser:t.error?null:t.payload.user});case E.e:case E.l:case E.g:case E.k:return Object(w.a)(Object(w.a)({},e),{},{viewChangeCounter:e.viewChangeCounter+1});default:return e}},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E.d:return Object(w.a)({},e);case E.e:return{};default:return e}},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E.m:return Object(w.a)(Object(w.a)({},e),{},{inProgress:!1,errors:t.error?t.payload.errors:null});case E.l:return{};case E.c:return Object(w.a)(Object(w.a)({},e),{},{inProgress:!0});default:return e}},_=function(e){return function(t){return function(n){if((c=n.payload)&&"function"===typeof c.then){e.dispatch({type:E.c,subtype:n.type});var r=e.getState().viewChangeCounter,a=n.skipTracking;n.payload.then((function(t){var c=e.getState();(a||c.viewChangeCounter===r)&&(console.log("RESULT",t),n.payload=t,e.dispatch({type:E.b,promise:n.payload}),e.dispatch(n))}),(function(t){var c=e.getState();(a||c.viewChangeCounter===r)&&(console.log("ERROR",t),n.error=!0,n.payload=t.response.body,n.skipTracking||e.dispatch({type:E.b,promise:n.payload}),e.dispatch(n))}))}else{var c;t(n)}}}},P=function(e){return function(e){return function(t){t.type===E.j||t.type===E.f?t.error||(window.localStorage.setItem("jwt",t.payload.user.token),f.a.setToken(t.payload.user.token)):t.type===E.h&&(window.localStorage.setItem("jwt",""),f.a.setToken(null)),e(t)}}};var R,G=Object(N.a)(),I=Object(T.a)(G),z=Object(y.createStore)((R=G,Object(y.combineReducers)({auth:L,common:S,home:A,settings:D,router:Object(r.b)(R)})),Object(k.composeWithDevTools)(Object(y.applyMiddleware)(I,_,P))),H=Object(c.lazy)((function(){return n.e(0).then(n.bind(null,55))})),x=Object(c.lazy)((function(){return n.e(1).then(n.bind(null,56))})),M=Object(c.lazy)((function(){return n.e(2).then(n.bind(null,57))})),J=Object(c.lazy)((function(){return n.e(3).then(n.bind(null,58))})),Y=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"componentDidUpdate",value:function(e){this.props.redirectTo&&this.props.redirectTo!==e.redirectTo&&(z.dispatch(Object(h.d)(this.props.redirectTo)),this.props.onRedirect())}},{key:"componentDidMount",value:function(){var e=window.localStorage.getItem("jwt");e&&f.a.setToken(e),this.props.onLoad(e?f.a.Auth.current():null,e)}},{key:"render",value:function(){return this.props.appLoaded?o.a.createElement("div",null,o.a.createElement(j,{appName:this.props.appName,currentUser:this.props.currentUser}),o.a.createElement(c.Suspense,{fallback:o.a.createElement("p",null,"Loading...")},o.a.createElement(i.c,null,o.a.createElement(i.a,{exact:!0,path:"/",component:H}),o.a.createElement(i.a,{path:"/login",component:x}),o.a.createElement(i.a,{path:"/register",component:M}),o.a.createElement(i.a,{path:"/settings",component:J})))):o.a.createElement("div",null,o.a.createElement(j,{appName:this.props.appName,currentUser:this.props.currentUser}))}}]),n}(o.a.PureComponent),B=Object(a.c)((function(e){return{appLoaded:e.common.appLoaded,appName:e.common.appName,currentUser:e.common.currentUser,redirectTo:e.common.redirectTo}}),(function(e){return{onLoad:function(t,n){return e({type:E.a,payload:t,token:n,skipTracking:!0})},onRedirect:function(){return e({type:E.i})}}}))(Y);s.a.render(o.a.createElement(a.a,{store:z},o.a.createElement(r.a,{history:G},o.a.createElement(i.c,null,o.a.createElement(i.a,{path:"/",component:B})))),document.getElementById("root"))}},[[36,5,6]],[1,2,3]]);
//# sourceMappingURL=main.3df52206.chunk.js.map