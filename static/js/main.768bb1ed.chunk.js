(this["webpackJsonpchem-cash"]=this["webpackJsonpchem-cash"]||[]).push([[0],{322:function(e,t,a){e.exports=a.p+"static/media/chemistry-background.11d1d297.jpg"},521:function(e,t,a){e.exports=a.p+"static/media/chem-cash-logo.2b9148cb.png"},522:function(e,t,a){e.exports=a.p+"static/media/chem-cash-prime-logo.7fb758e0.png"},529:function(e,t,a){e.exports=a.p+"static/media/songs-background.cfcd4ce6.jpg"},536:function(e,t,a){e.exports=a.p+"static/media/prime-darkmode.0ce7dead.png"},537:function(e,t,a){e.exports=a.p+"static/media/prime-sameday.94aba20d.png"},538:function(e,t,a){e.exports=a.p+"static/media/prime-songremoval.fa731870.png"},539:function(e,t,a){e.exports=a.p+"static/media/prime-songs.ba7cf87f.png"},540:function(e,t,a){e.exports=a.p+"static/media/prime-purchases.6c3bc375.png"},543:function(e,t,a){e.exports=a.p+"static/media/doc-may-profile.f927335d.jpg"},557:function(e,t,a){e.exports=a(775)},652:function(e,t){},654:function(e,t){},775:function(e,t,a){"use strict";a.r(t);var n=a(177),r=a(8),o=a(0),c=a.n(o),l=a(30),s=a.n(l),i=a(46),u=a(66),m=a(825),d=a(831),p=a(2),E=a(176),f=a(448),b=a(449),g={breakpoints:{values:{md:768,lg:1024}},palette:{primary:f.a,secondary:b.a},overrides:{MuiDialogActions:{root:{padding:"16px 24px"}},MuiTableCell:{root:{"& > div":{justifyContent:"flex-end"}}}}},h=Object(E.a)(Object(p.a)(Object(p.a)({},g),{},{palette:Object(p.a)(Object(p.a)({},g.palette),{},{type:"dark"})})),v=Object(E.a)(Object(p.a)(Object(p.a)({},g),{},{palette:Object(p.a)(Object(p.a)({},g.palette),{},{type:"light"})})),y=a(808),O=a(802),S=a(804),j=a(805),A=a(806),D=a(381),P="ASYNC_START",C="LOGIN",T=Object(r.c)((function(){return{}}),(function(e){return{onLogout:function(){return e({type:"LOGOUT"})}}}))((function(e){var t=e.onLogout;return c.a.createElement(D.a,{color:"inherit",onClick:t},"Logout")})),N=function(e){var t=e.user;return c.a.createElement(O.a,{open:t.dropped},c.a.createElement(S.a,null,"Account Suspended"),c.a.createElement(j.a,null,"Your account has been suspended. Please speak with your teacher if you have any questions regarding your account suspension."),c.a.createElement(A.a,null,c.a.createElement(T,null)))},w=a(382),_=a(807),k=a(450),x=a(68),R=a(203),U=a(521),L=a.n(U),I=a(522),q=a.n(I),M=function(e){var t=e.prime,a=Object(R.a)(e,["prime"]);return c.a.createElement("img",Object.assign({alt:"Chem Cash ".concat(t&&"Prime ","Logo"),src:t?q.a:L.a},a))},B=Object(w.a)((function(e){return{logo:{height:"65px",marginBottom:e.spacing(2),marginTop:e.spacing(2)},title:{color:"white",flexGrow:1}}})),F=Object(r.c)((function(e){return{currentUser:e.common.currentUser,navTabValue:e.nav.navTabValue,prime:e.common.settings.prime}}),(function(){return{}}))((function(e){var t=e.currentUser,a=e.navTabValue,n=e.prime,r=B(),o=a;return t?c.a.createElement(_.a,{position:"static"},c.a.createElement(y.a,null,c.a.createElement(k.a,null,c.a.createElement(M,{className:r.logo,prime:n.enabled&&t.hasPrime}),c.a.createElement(x.a,{variant:"h5",align:"center",className:r.title},o&&o.charAt(0).toUpperCase()+o.slice(1)),c.a.createElement(T,null)))):null})),G=a(809),W=a(810),H=a(811),Y=a(812),z=a(813),V=a(814),Q=a(815),K=a(816),J=a(817),$=Object(w.a)({nav:{position:"fixed",bottom:0,width:"100%",zIndex:"1000"}}),X=Object(r.c)((function(e){return{currentUser:e.common.currentUser,navTabValue:e.nav.navTabValue,path:e.router.location.pathname,settings:e.common.settings}}),(function(e){return{onLoad:function(t,a){return e({type:"NAV_LOADED",value:t,redirectTo:a})},onTabChange:function(t,a){return e({type:"NAV_TAB_CHANGE",value:t,redirectTo:a})},onUnload:function(){return e({type:"NAV_UNLOADED"})}}}))((function(e){var t=$(),a=e.currentUser.role,n={beta:e.settings.enableBetaFeatures,passes:e.settings.hallpass.enabled,products:e.settings.productsEnabled,songs:e.settings.songRequestEnabled,store:e.settings.storeEnabled},r=function(t){e.onTabChange(t,"/".concat(a,"/").concat(t))};return Object(o.useEffect)((function(){var t=e.path.split("/")[2],r=null!==t&&void 0!==t?t:"student"===a?"account":"admin"===a?"teachers":"accounts",o="/".concat(a,"/").concat(r);return n.store&&"products"===r?e.onLoad("store",o):e.onLoad(r,o),function(){e.onUnload()}}),[]),"student"===a?c.a.createElement(G.a,{className:t.nav,onChange:function(e,t){return r(t)},showLabels:!0,value:e.navTabValue},c.a.createElement(W.a,{label:"Account",icon:c.a.createElement(H.a,null),value:"account"}),n.passes&&c.a.createElement(W.a,{label:"Passes",icon:c.a.createElement(Y.a,null),value:"passes"}),n.songs&&c.a.createElement(W.a,{label:"Songs",icon:c.a.createElement(z.a,null),value:"songs"}),(n.products||n.store)&&c.a.createElement(W.a,{label:n.store?"Store":"Products",icon:c.a.createElement(V.a,null),value:"store"}),c.a.createElement(W.a,{label:"Settings",icon:c.a.createElement(Q.a,null),value:"settings"})):"admin"===a?c.a.createElement(G.a,{className:t.nav,onChange:function(e,t){return r(t)},showLabels:!0,value:e.navTabValue},c.a.createElement(W.a,{label:"Teachers",icon:c.a.createElement(K.a,null),value:"teachers"}),c.a.createElement(W.a,{label:"Settings",icon:c.a.createElement(Q.a,null),value:"settings"})):c.a.createElement(G.a,{className:t.nav,onChange:function(e,t){return r(t)},showLabels:!0,value:e.navTabValue},c.a.createElement(W.a,{label:"Accounts",icon:c.a.createElement(H.a,null),value:"accounts"}),n.songs&&c.a.createElement(W.a,{label:"Songs",icon:c.a.createElement(z.a,null),value:"songs"}),(n.products||n.store)&&c.a.createElement(W.a,{label:n.store?"Store":"Products",icon:c.a.createElement(V.a,null),value:n.store?"store":"products"}),c.a.createElement(W.a,{label:"Courses",icon:c.a.createElement(J.a,null),value:"courses"}),c.a.createElement(W.a,{label:"Settings",icon:c.a.createElement(Q.a,null),value:"settings"}))})),Z=Object(w.a)((function(e){return{wrapper:{marginTop:e.spacing(4),marginBottom:e.spacing(11)}}})),ee=function(e){var t=Z();return c.a.createElement("div",{className:t.wrapper},e.children)},te=function(e){return c.a.createElement(ee,null,c.a.createElement(y.a,null,c.a.createElement(x.a,{variant:"h2"},"Error 404: Page Not Found")))},ae=Object(r.c)((function(e){return{currentUser:e.common.currentUser}}),(function(){return{}}))((function(e){return e.currentUser?c.a.createElement(i.b,{exact:!0,path:e.path,component:e.component}):c.a.createElement(i.a,{to:"/"})})),ne=a(29),re=a.n(ne),oe=a(41),ce=a(11),le=a(19),se=a(15),ie=a(819),ue=a(168),me=a(818),de=a(302),pe=a(303),Ee=a(453),fe=a(820),be=a(821),ge=a(7),he=function(e){var t=e.controlledBy,a=e.label,n=e.name,r=e.prime,l=Object(ce.f)(),s=l.values,i=l.setFieldValue,u=Object(ce.e)({name:n,type:"checkbox"}),m=Object(ge.a)(u,1)[0];return Object(o.useEffect)((function(){!0===s[t]&&i(n,!0)}),[s[t],i,n,r]),c.a.createElement(ce.a,Object.assign({component:le.b,disabled:void 0!==r?r&&s[t]:s[t],label:a},m))},ve=a(879),ye=Object(w.a)((function(e){return{alert:{width:"100%","&:not(:last-of-type)":{marginBottom:e.spacing(1)}},alertList:{marginBottom:e.spacing(2)}}})),Oe=function(e){var t=e.errors,a=ye();return t?c.a.createElement("div",{className:a.alertList},Object.keys(t).map((function(e){var n=e.replace(/([a-z0-9])([A-Z])/g,"$1 $2").toLowerCase();return c.a.createElement(ve.a,{className:a.alert,severity:"error",key:e},n," ",t[e])}))):null},Se=Object(w.a)((function(e){return{headerLeft:{alignItems:"center",display:"flex"},headerRight:{alignItems:"center",display:"flex",justifyContent:"flex-end"},pageHeader:{marginBottom:e.spacing(4),"& button:not(:last-of-type)":{marginRight:e.spacing(2)}}}})),je=function(e){var t=e.children,a=e.title,n=Se();return c.a.createElement(me.a,{container:!0,spacing:2,className:n.pageHeader},c.a.createElement(me.a,{item:!0,xs:12,md:6,className:n.headerLeft},c.a.createElement(x.a,{variant:"h4"},a)),c.a.createElement(me.a,{item:!0,xs:12,md:6,className:n.headerRight},t))},Ae=a(451),De=a(27),Pe=a(28),Ce=Object(w.a)((function(e){return{root:{color:e.palette.primary.main,margin:"0 ".concat(e.spacing(1),"px")}}})),Te=Object(r.c)((function(e){return{primeEnabled:e.common.settings.prime.enabled}}),(function(){return{}}))((function(e){var t=e.permanent,a=e.primeEnabled,n=e.size,r=e.title,o=Ce();return c.a.createElement(c.a.Fragment,null,(a||t)&&c.a.createElement(Ae.a,{title:r||"Chem Cash Prime","aria-label":r||"Chem Cash Prime",arrow:!0},c.a.createElement("span",null,c.a.createElement(De.a,{className:o.root,icon:Pe.b,size:n||"lg"}))))})),Ne=a(9),we=Object(w.a)((function(e){return{icon:{marginRight:e.spacing(1)},info:{backgroundColor:e.palette.background.default,borderLeft:"4px solid ".concat(e.palette.info.main),fontStyle:"italic",padding:e.spacing(1)},lock:{alignItems:"center",color:e.palette.secondary.main,display:"inline-flex",fontStyle:"italic",marginLeft:e.spacing(1)},paper:{padding:e.spacing(2),marginBottom:e.spacing(4)}}})),_e=Object(r.c)((function(e){return Object(p.a)(Object(p.a)({},e.settings),{},{currentUser:e.common.currentUser,settings:e.common.settings})}),(function(e){return{onSubmitForm:function(t){return e({type:"SETTINGS_SAVED",payload:Promise.all([Ne.a.Auth.save(t),Ne.a.Settings.update(t)]),snackbar:{message:"Settings saved",variant:"success"}})},onUnload:function(){return e({type:"SETTINGS_PAGE_UNLOADED"})},onWhatsNewClick:function(){return e({type:"WHATS_NEW_DIALOG_LOADED",payload:Ne.a.Auth.save({viewedChanges:!1})})}}}))((function(e){var t,a,n,r,l,s,i,u,m,d,E,f,b,g,h,v,y,O,S,j,A=e.currentUser,P=e.errors,C=e.inProgress,T=e.onSubmitForm,N=e.onUnload,w=e.onWhatsNewClick,_=e.settings,k=we();Object(o.useEffect)((function(){return function(){N()}}),[]);var R=function(e){var t=e.status,a=e.value;return"".concat(a," ").concat(t?"enabled":"disabled")};return c.a.createElement(ce.c,{enableReinitialize:!0,initialValues:{allowPurchasesWithInsufficientFunds:(null===_||void 0===_?void 0:_.allowPurchasesWithInsufficientFunds)||!1,darkMode:A.darkMode||!1,defaultStudentPassword:(null===_||void 0===_?void 0:_.defaultStudentPassword)||"",enableBetaFeatures:(null===_||void 0===_?void 0:_.enableBetaFeatures)||!1,firstName:A.firstName,hallpassAllowPurchaseWithInsufficientFunds:(null===_||void 0===_||null===(t=_.hallpass)||void 0===t?void 0:t.allowPurchaseWithInsufficientFunds)||!1,hallpassAllowStudentCreation:(null===_||void 0===_||null===(a=_.hallpass)||void 0===a?void 0:a.allowStudentCreation)||!1,hallpassDefaultDuration:(null===_||void 0===_||null===(n=_.hallpass)||void 0===n?void 0:n.defaultDuration)||5,hallpassEnabled:(null===_||void 0===_||null===(r=_.hallpass)||void 0===r?void 0:r.enabled)||!1,hallpassLimit:(null===_||void 0===_||null===(l=_.hallpass)||void 0===l?void 0:l.limit)||0,hallpassPurchaseAmount:(null===_||void 0===_||null===(s=_.hallpass)||void 0===s?void 0:s.purchaseAmount)||0,lastName:A.lastName,password:"",primeDarkModeEnabled:(null===_||void 0===_||null===(i=_.prime)||void 0===i?void 0:i.darkModeEnabled)||!1,primeEnabled:(null===_||void 0===_||null===(u=_.prime)||void 0===u?void 0:u.enabled)||!1,primeHallpassDiscount:(null===_||void 0===_||null===(m=_.prime)||void 0===m?void 0:m.hallpassDiscount)||0,primePurchaseAmount:(null===_||void 0===_||null===(d=_.prime)||void 0===d?void 0:d.purchaseAmount)||0,primeSameDayDeliveryEnabled:(null===_||void 0===_||null===(E=_.prime)||void 0===E?void 0:E.sameDayDeliveryEnabled)||!1,primeSongRemovalEnabled:(null===_||void 0===_||null===(f=_.prime)||void 0===f?void 0:f.songRemovalEnabled)||!1,primeSongRequestPurchaseDiscount:(null===_||void 0===_||null===(b=_.prime)||void 0===b?void 0:b.songRequestPurchaseDiscount)||0,primeStorePurchaseDiscount:(null===_||void 0===_||null===(g=_.prime)||void 0===g?void 0:g.storePurchaseDiscount)||0,productsEnabled:(null===_||void 0===_?void 0:_.productsEnabled)||!1,roomNumber:(null===_||void 0===_?void 0:_.roomNumber)||0,schoolDistrict:_.schoolDistrict||"ccsd",score100:(null===_||void 0===_||null===(h=_.scoreConverter)||void 0===h?void 0:h[100])||1200,score90:(null===_||void 0===_||null===(v=_.scoreConverter)||void 0===v?void 0:v[90])||1e3,score80:(null===_||void 0===_||null===(y=_.scoreConverter)||void 0===y?void 0:y[80])||800,score70:(null===_||void 0===_||null===(O=_.scoreConverter)||void 0===O?void 0:O[70])||600,score60:(null===_||void 0===_||null===(S=_.scoreConverter)||void 0===S?void 0:S[60])||0,score50:(null===_||void 0===_||null===(j=_.scoreConverter)||void 0===j?void 0:j[50])||0,songRemovalPurchaseAmount:(null===_||void 0===_?void 0:_.songRemovalPurchaseAmount)||0,songRemovalRequestEnabled:(null===_||void 0===_?void 0:_.songRemovalRequestEnabled)||!1,songRemovalRefundAmount:(null===_||void 0===_?void 0:_.songRemovalRefundAmount)||0,songRequestEnabled:(null===_||void 0===_?void 0:_.songRequestEnabled)||!1,songRequestPurchaseAmount:(null===_||void 0===_?void 0:_.songRequestPurchaseAmount)||0,storeEnabled:(null===_||void 0===_?void 0:_.storeEnabled)||!1,taxRate:(null===_||void 0===_?void 0:_.taxRate)||0,title:(null===A||void 0===A?void 0:A.title)||""},validationSchema:se.c({allowPurchasesWithInsufficientFunds:se.a(),darkMode:se.a(),defaultStudentPassword:se.d(),enableBetaFeatures:se.a(),firstName:se.d(),hallpassAllowPurchaseWithInsufficientFunds:se.a(),hallpassAllowStudentCreation:se.a(),hallpassDefaultDuration:se.b().typeError("Numbers only"),hallpassEnabled:se.a(),hallpassLimit:se.b().typeError("Numbers only"),hallpassPurchaseAmount:se.b().typeError("Numbers only"),lastName:se.d(),password:se.d(),primeDarkModeEnabled:se.a(),primeEnabled:se.a(),primeHallpassDiscount:se.b().typeError("Numbers only"),primePurchaseAmount:se.b().typeError("Numbers only"),primeSameDayDeliveryEnabled:se.a(),primeSongRemovalEnabled:se.a(),primeSongRequestPurchaseDiscount:se.b().typeError("Numbers only"),primeStorePurchaseDiscount:se.b().typeError("Numbers only"),productsEnabled:se.a(),roomNumber:se.b(),schoolDistrict:se.d(),score100:se.b().typeError("Numbers only"),score90:se.b().typeError("Numbers only"),score80:se.b().typeError("Numbers only"),score70:se.b().typeError("Numbers only"),score60:se.b().typeError("Numbers only"),score50:se.b().typeError("Numbers only"),songRemovalPurchaseAmount:se.b().typeError("Numbers only"),songRemovalRequestEnabled:se.a(),songRemovalRefundAmount:se.b().typeError("Numbers only"),songRequestEnabled:se.a(),songRequestPurchaseAmount:se.b().typeError("Numbers only"),storeEnabled:se.a(),taxRate:se.b().typeError("Numbers only"),title:se.d()}),onSubmit:function(){var e=Object(oe.a)(re.a.mark((function e(t,a){var n;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=Object(p.a)({},t)).password||delete n.password,"student"!==A.role&&(n.hallpass={allowPurchaseWithInsufficientFunds:t.hallpassAllowPurchaseWithInsufficientFunds,allowStudentCreation:t.hallpassAllowStudentCreation,defaultDuration:t.hallpassDefaultDuration,enabled:t.hallpassEnabled,limit:t.hallpassLimit,purchaseAmount:t.hallpassPurchaseAmount},n.prime={darkModeEnabled:t.primeDarkModeEnabled,enabled:t.primeEnabled,hallpassDiscount:t.primeHallpassDiscount,purchaseAmount:t.primePurchaseAmount,sameDayDeliveryEnabled:t.primeSameDayDeliveryEnabled,songRemovalEnabled:t.primeSongRemovalEnabled,songRequestPurchaseDiscount:t.primeSongRequestPurchaseDiscount,storePurchaseDiscount:t.primeStorePurchaseDiscount},n.scoreConverter={100:t.score100,90:t.score90,80:t.score80,70:t.score70,60:t.score60,50:t.score50,40:0,30:0,20:0,10:0,0:0}),T(n),a.resetForm({values:Object(p.a)(Object(p.a)({},n),{},{password:""})});case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},(function(e){return c.a.createElement(ce.b,null,c.a.createElement(je,{title:"Manage Account"},c.a.createElement(D.a,{onClick:w,size:"small"},"See What's New"),c.a.createElement(ie.a,{color:"primary",disabled:C,type:"sumbit",variant:"extended"},c.a.createElement(fe.a,{className:k.icon}),C?"Saving...":"Save settings")),c.a.createElement(Oe,{errors:P}),"student"!==A.role&&c.a.createElement(ue.a,{className:k.paper},c.a.createElement(me.a,{container:!0,spacing:2,style:{alignItems:"center"}},c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(x.a,{variant:"h5",gutterBottom:!0},"Account Details")),c.a.createElement(me.a,{item:!0,xs:12,md:6},c.a.createElement(ce.a,{component:le.c,label:"First Name",name:"firstName",type:"text",variant:"outlined",fullWidth:!0})),c.a.createElement(me.a,{item:!0,xs:12,md:6},c.a.createElement(ce.a,{component:le.c,label:"Last Name",name:"lastName",type:"text",variant:"outlined",fullWidth:!0})),"teacher"===A.role&&c.a.createElement(c.a.Fragment,null,c.a.createElement(me.a,{item:!0,xs:12,md:4},c.a.createElement(de.a,{fullWidth:!0},c.a.createElement(pe.a,null,"Title"),c.a.createElement(ce.a,{component:le.a,label:"Title",name:"title"},c.a.createElement(Ee.a,{value:"Dr."},"Dr."),c.a.createElement(Ee.a,{value:"Miss."},"Miss."),c.a.createElement(Ee.a,{value:"Mr."},"Mr."),c.a.createElement(Ee.a,{value:"Mrs."},"Mrs."),c.a.createElement(Ee.a,{value:"Ms."},"Ms.")))),c.a.createElement(me.a,{item:!0,xs:12,md:4},c.a.createElement(de.a,{fullWidth:!0},c.a.createElement(pe.a,null,"School District"),c.a.createElement(ce.a,{component:le.a,label:"School District",name:"schoolDistrict"},c.a.createElement(Ee.a,{value:"ccsd"},"CCSD"),c.a.createElement(Ee.a,{value:"evergreen"},"Evergreen")))),c.a.createElement(me.a,{item:!0,xs:12,md:4},c.a.createElement("label",null,c.a.createElement(ce.a,{component:le.b,name:"enableBetaFeatures",type:"checkbox"}),c.a.createElement(R,{status:e.values.enableBetaFeatures,value:"Beta features"})))))),c.a.createElement(ue.a,{className:k.paper},c.a.createElement(me.a,{container:!0,spacing:2},c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(x.a,{variant:"h5",gutterBottom:!0},"Account Security")),c.a.createElement(me.a,{item:!0,xs:12,md:6},c.a.createElement(ce.a,{component:le.c,label:"New Password",name:"password",type:"password",variant:"outlined",fullWidth:!0})))),"student"===A.role&&c.a.createElement(ue.a,{className:k.paper},c.a.createElement(me.a,{container:!0,spacing:2},c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(x.a,{variant:"h5",gutterBottom:!0},"Appearance"),c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement("label",{style:{alignItems:"center",display:"flex"}},c.a.createElement(ce.a,{component:le.b,disabled:_.prime.enabled&&_.prime.darkModeEnabled&&!A.hasPrime,name:"darkMode",type:"checkbox"}),c.a.createElement(R,{status:e.values.darkMode,value:"Dark mode"}),_.prime.enabled&&_.prime.darkModeEnabled&&!A.hasPrime&&c.a.createElement("span",{className:k.lock},c.a.createElement(be.a,null)," (available with Chem Cash Prime)")))))),"student"!==A.role&&c.a.createElement(ue.a,{className:k.paper},c.a.createElement(me.a,{container:!0,spacing:2},c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(x.a,{variant:"h5",gutterBottom:!0},"Appearance"),c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement("label",null,c.a.createElement(ce.a,{component:le.b,name:"darkMode",type:"checkbox"}),c.a.createElement(R,{status:e.values.darkMode,value:"Dark mode"})))))),"teacher"===A.role&&c.a.createElement(ue.a,{className:k.paper},c.a.createElement(me.a,{container:!0,spacing:2},c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(x.a,{variant:"h5",gutterBottom:!0},"Hallpasses")),c.a.createElement(me.a,{item:!0,xs:12,md:4},c.a.createElement("label",null,c.a.createElement(ce.a,{component:le.b,name:"hallpassEnabled",type:"checkbox"}),c.a.createElement(R,{status:e.values.hallpassEnabled,value:"Hallpasses"}))),e.values.hallpassEnabled&&c.a.createElement(c.a.Fragment,null,c.a.createElement(me.a,{item:!0,xs:12,md:3},c.a.createElement(ce.a,{component:le.c,label:"Hallpass Purchase Amount",name:"hallpassPurchaseAmount",type:"number",variant:"outlined",fullWidth:!0})),c.a.createElement(me.a,{item:!0,xs:12,md:3},c.a.createElement(ce.a,{component:le.c,label:"Default Hallpass Duration (min)",name:"hallpassDefaultDuration",type:"number",variant:"outlined",fullWidth:!0})),c.a.createElement(me.a,{item:!0,xs:12,md:2},c.a.createElement(ce.a,{component:le.c,label:"Hallpass Limit",name:"hallpassLimit",type:"number",variant:"outlined",fullWidth:!0})),c.a.createElement(me.a,{item:!0,xs:12,md:4},c.a.createElement("label",null,c.a.createElement(ce.a,{component:le.b,name:"hallpassAllowStudentCreation",type:"checkbox"}),c.a.createElement(R,{status:e.values.hallpassAllowStudentCreation,value:"Student-generated hallpasses"}))),c.a.createElement(me.a,{item:!0,xs:12,md:6},c.a.createElement("label",null,c.a.createElement(ce.a,{component:le.b,name:"hallpassAllowPurchaseWithInsufficientFunds",type:"checkbox"}),c.a.createElement(R,{status:e.values.hallpassAllowPurchaseWithInsufficientFunds,value:"Purchase with insufficient funds"}))),c.a.createElement(me.a,{item:!0,xs:12,md:2},c.a.createElement(ce.a,{component:le.c,label:"Classroom Number",name:"roomNumber",type:"number",variant:"outlined",fullWidth:!0}))))),"teacher"===A.role&&c.a.createElement(ue.a,{className:k.paper},c.a.createElement(me.a,{container:!0,spacing:2},c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(x.a,{variant:"h5",gutterBottom:!0},"Prime ",c.a.createElement(Te,{permanent:!0,title:"Chem Cash Prime allows students to pay a one-time fee for access to special features and discounts...just another way for students to spend their points!"}))),c.a.createElement(me.a,{item:!0,xs:12,md:6},c.a.createElement("label",null,c.a.createElement(ce.a,{component:le.b,name:"primeEnabled",type:"checkbox"}),c.a.createElement(R,{status:e.values.primeEnabled,value:"Prime"}))),e.values.primeEnabled&&c.a.createElement(c.a.Fragment,null,c.a.createElement(me.a,{item:!0,xs:12,md:6},c.a.createElement(ce.a,{component:le.c,label:"Prime Purchase Amount",name:"primePurchaseAmount",type:"number",variant:"outlined",fullWidth:!0})),c.a.createElement(me.a,{item:!0,xs:12,md:4},c.a.createElement("label",null,c.a.createElement(ce.a,{component:le.b,name:"primeDarkModeEnabled",type:"checkbox"}),c.a.createElement(R,{status:e.values.primeDarkModeEnabled,value:"Dark Mode for Prime only"}))),c.a.createElement(me.a,{item:!0,xs:12,md:4},c.a.createElement("label",null,c.a.createElement(ce.a,{component:le.b,name:"primeSameDayDeliveryEnabled",type:"checkbox"}),c.a.createElement(R,{status:e.values.primeSameDayDeliveryEnabled,value:"Same-day delivery"}))),c.a.createElement(me.a,{item:!0,xs:12,md:4},c.a.createElement("label",null,c.a.createElement(ce.a,{component:le.b,name:"primeSongRemovalEnabled",type:"checkbox"}),c.a.createElement(R,{status:e.values.primeSongRemovalEnabled,value:"Song removal for Prime only"}))),c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(x.a,{className:k.info,display:"block",variant:"body2",gutterBottom:!0},"Values entered below will be treated as percentages. To disable any of these just set the value to zero.")),c.a.createElement(me.a,{item:!0,xs:12,md:4},c.a.createElement(ce.a,{component:le.c,label:"Hallpass Discount",name:"primeHallpassDiscount",type:"number",variant:"outlined",fullWidth:!0})),c.a.createElement(me.a,{item:!0,xs:12,md:4},c.a.createElement(ce.a,{component:le.c,label:"Song Request Discount",name:"primeSongRequestPurchaseDiscount",type:"number",variant:"outlined",fullWidth:!0})),c.a.createElement(me.a,{item:!0,xs:12,md:4},c.a.createElement(ce.a,{component:le.c,label:"Store Discount",name:"primeStorePurchaseDiscount",type:"number",variant:"outlined",fullWidth:!0}))))),"teacher"===A.role&&c.a.createElement(ue.a,{className:k.paper},c.a.createElement(me.a,{container:!0,spacing:2},c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(x.a,{variant:"h5",gutterBottom:!0},"Products and Online Purchases")),c.a.createElement(me.a,{item:!0,xs:12,md:e.values.storeEnabled?6:12},c.a.createElement("label",null,c.a.createElement(ce.a,{component:le.b,name:"storeEnabled",type:"checkbox"}),c.a.createElement(R,{status:e.values.storeEnabled,value:"Online purchases"}))),e.values.storeEnabled&&c.a.createElement(me.a,{item:!0,xs:12,md:3},c.a.createElement(ce.a,{component:le.c,label:"Tax Rate",name:"taxRate",type:"number",variant:"outlined",fullWidth:!0})),c.a.createElement(me.a,{item:!0,xs:12,md:6},c.a.createElement("label",null,c.a.createElement(he,{controlledBy:"storeEnabled",name:"productsEnabled"}),c.a.createElement(R,{status:e.values.productsEnabled,value:"Products page"}),e.values.storeEnabled&&c.a.createElement("em",null," (required for online purchases)"))),e.values.storeEnabled&&c.a.createElement(me.a,{item:!0,xs:12,md:6},c.a.createElement("label",null,c.a.createElement(ce.a,{component:le.b,name:"allowPurchasesWithInsufficientFunds",type:"checkbox"}),c.a.createElement(R,{status:e.values.allowPurchasesWithInsufficientFunds,value:"Purchases with insufficient funds"}))))),"teacher"===A.role&&c.a.createElement(ue.a,{className:k.paper},c.a.createElement(me.a,{container:!0,spacing:2},c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(x.a,{variant:"h5",gutterBottom:!0},"Score Conversions")),c.a.createElement(me.a,{item:!0,xs:12,md:2},c.a.createElement(ce.a,{component:le.c,label:"100% and up",name:"score100",type:"number",variant:"outlined",fullWidth:!0})),c.a.createElement(me.a,{item:!0,xs:12,md:2},c.a.createElement(ce.a,{component:le.c,label:"90% and up",name:"score90",type:"number",variant:"outlined",fullWidth:!0})),c.a.createElement(me.a,{item:!0,xs:12,md:2},c.a.createElement(ce.a,{component:le.c,label:"80% and up",name:"score80",type:"number",variant:"outlined",fullWidth:!0})),c.a.createElement(me.a,{item:!0,xs:12,md:2},c.a.createElement(ce.a,{component:le.c,label:"70% and up",name:"score70",type:"number",variant:"outlined",fullWidth:!0})),c.a.createElement(me.a,{item:!0,xs:12,md:2},c.a.createElement(ce.a,{component:le.c,label:"60% and up",name:"score60",type:"number",variant:"outlined",fullWidth:!0})),c.a.createElement(me.a,{item:!0,xs:12,md:2},c.a.createElement(ce.a,{component:le.c,label:"50% and up",name:"score50",type:"number",variant:"outlined",fullWidth:!0})))),"teacher"===A.role&&c.a.createElement(ue.a,{className:k.paper},c.a.createElement(me.a,{container:!0,spacing:2},c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(x.a,{variant:"h5",gutterBottom:!0},"Song Requests")),c.a.createElement(me.a,{item:!0,xs:12,md:4},c.a.createElement("label",null,c.a.createElement(ce.a,{component:le.b,name:"songRequestEnabled",type:"checkbox"}),c.a.createElement(R,{status:e.values.songRequestEnabled,value:"Song requests"}))),e.values.songRequestEnabled&&c.a.createElement(me.a,{item:!0,xs:12,md:4},c.a.createElement(ce.a,{component:le.c,label:"Song Request Purchase Amount",name:"songRequestPurchaseAmount",type:"number",variant:"outlined",fullWidth:!0})),c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(x.a,{variant:"h6",gutterBottom:!0},"Song Removal Requests")),c.a.createElement(me.a,{item:!0,xs:12,md:4},c.a.createElement("label",null,c.a.createElement(he,{controlledBy:"primeSongRemovalEnabled",name:"songRemovalRequestEnabled",prime:e.values.primeEnabled}),c.a.createElement(R,{status:e.values.songRemovalRequestEnabled,value:"Song removal requests"}),e.values.primeEnabled&&e.values.primeSongRemovalEnabled&&c.a.createElement("em",null," (required for Prime)"))),e.values.songRemovalRequestEnabled&&c.a.createElement(c.a.Fragment,null,c.a.createElement(me.a,{item:!0,xs:12,md:4},c.a.createElement(ce.a,{component:le.c,label:"Song Removal Purchase Amount",name:"songRemovalPurchaseAmount",type:"number",variant:"outlined",fullWidth:!0})),c.a.createElement(me.a,{item:!0,xs:12,md:4},c.a.createElement(ce.a,{component:le.c,label:"Song Removal Refund Amount",name:"songRemovalRefundAmount",type:"number",variant:"outlined",fullWidth:!0}))))),"teacher"===A.role&&c.a.createElement(ue.a,{className:k.paper},c.a.createElement(me.a,{container:!0,spacing:2},c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(x.a,{variant:"h5",gutterBottom:!0},"Student Accounts")),c.a.createElement(me.a,{item:!0,xs:12,md:6},c.a.createElement(ce.a,{component:le.c,label:"Default Student Password",name:"defaultStudentPassword",type:"text",variant:"outlined",fullWidth:!0})))))}))})),ke=a(22),xe=a(24),Re=a(42),Ue=a.n(Re),Le=a(37),Ie=a.n(Le),qe=a(846),Me=a(853),Be=a(306),Fe=Object(w.a)((function(e){return{actionButton:{color:e.palette.text.disabled}}})),Ge=function(e){var t=e.action,a=e.children,n=e.className,r=e.disabled,o=e.onClick,l=e.size,s=Fe();return c.a.createElement(Ae.a,{arrow:!0,enterTouchDelay:0,title:t},c.a.createElement("span",null,c.a.createElement(Be.a,{"aria-label":t,className:"".concat(s.actionButton," ").concat(n||""),disabled:r,onClick:function(e){e.stopPropagation(),o()},onFocus:function(e){return e.stopPropagation()},size:l},a)))},We=a(33),He=a(794),Ye=a(848),ze=a(319),Ve=function(e){var t=e.prefix,a=e.suffix,n=e.value;return c.a.createElement(ze.a,{displayType:"text",prefix:t||"",suffix:a||" pts",thousandSeparator:!0,value:Math.round(n)})},Qe=Object(w.a)((function(e){return{insufficient:{backgroundColor:e.palette.error.light},sufficient:{backgroundColor:e.palette.success.light},root:{borderRadius:e.spacing(1),color:e.palette.common.white,padding:"".concat(e.spacing(1),"px ").concat(e.spacing(2),"px"),textAlign:"center"}}})),Ke=Object(r.c)((function(e){return Object(p.a)({},e.scores.balance)}),(function(e){return{onLoad:function(t){return e({type:"ACCOUNT_BALANCE_LOADED",payload:Ne.a.Scores.getStudentScores(t)})},onUnload:function(){return e({type:"ACCOUNT_BALANCE_UNLOADED"})}}}))((function(e){var t=e.balance,a=e.cost,n=e.count,r=e.onLoad,l=e.onUnload,s=e.username,i=Qe();return Object(o.useEffect)((function(){return r(s),function(){l()}}),[]),Object(o.useEffect)((function(){r(s)}),[n,s]),c.a.createElement("div",{className:"".concat(i.root," ").concat(t>=a?i.sufficient:i.insufficient)},c.a.createElement(x.a,{variant:"h5"},c.a.createElement(Ve,{value:t})),c.a.createElement(x.a,{variant:"subtitle2"},c.a.createElement("em",null,"Account Balance")))})),Je=a(383),$e=Object(w.a)((function(e){return{root:{backgroundColor:"dark"===e.palette.type?e.palette.background.default:e.palette.grey[100],borderRadius:e.spacing(1),marginTop:e.spacing(2),padding:e.spacing(2)}}})),Xe=function(e){var t=e.label,a=e.name,n=e.onChange,r=e.value,l=Object(o.useState)(r),s=Object(ge.a)(l,2),i=s[0],u=s[1],m=$e();return Object(o.useEffect)((function(){u(r)}),[r]),c.a.createElement("div",{className:m.root},c.a.createElement(Je.a,{fullWidth:!0,label:t,name:a,onChange:function(e){var t=e.target.value;n(t),u(t)},value:i}))},Ze=a(843),et=a(470),tt=a(465),at=a(461),nt=a(457),rt=a(460),ot=a(327),ct=a(844),lt=a(845),st=a(847),it=a(881),ut=a(199),mt=a.n(ut),dt=a(200),pt=a.n(dt),Et=Object(r.c)((function(e){return Object(p.a)({},e.products)}),(function(e){return{onLoad:function(){return e({type:"PRODUCT_SELECTOR_LOADED",payload:Ne.a.Products.getAll()})},onUnload:function(){return e({type:"PRODUCT_SELECTOR_UNLOADED"})}}}))((function(e){var t=e.allowAny,a=e.onChange,n=e.onLoad,r=e.onUnload,l=e.products;Object(o.useEffect)((function(){return n(),function(){r()}}),[]);var s=l.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{status:e.quantity>0?"In Stock":"Out of Stock"})})).sort((function(e,t){return-t.status.localeCompare(e.status)}));return c.a.createElement(it.a,{autoHighlight:!0,freeSolo:null===t||void 0===t||t,getOptionLabel:function(e){return e.name},getOptionSelected:function(e,t){return e._id===t._id},groupBy:function(e){return e.status},noOptionsText:"No products have been added",onInputChange:function(e,t){a(t)},onChange:function(e,t){a(t)},options:s,renderInput:function(e){return c.a.createElement(Je.a,Object.assign({},e,{label:"Description",placeholder:"Type or select a product",required:!0}))},renderOption:function(e,t){var a=t.inputValue,n=pt()(e.name,a),r=mt()(e.name,n);return c.a.createElement("div",null,r.map((function(e,t){return c.a.createElement("span",{key:t,style:{fontWeight:e.highlight?700:400}},e.text)})))}})})),ft=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(e&&t){var r=e.map((function(e){return{desc:e.name,imgUrl:e.photoUrl,max:e.maxPurchaseQuantity,onHand:e.quantity,price:t[e._id]*e.cost,qty:t[e._id],unit:e.cost,_id:e._id}})),o=r.map((function(e){return e.price})).reduce((function(e,t){return e+t}),0),c=n/100*o,l=n>0?a/100*(o-c):a/100*o,s=n>0?o-c+l:o+l,i={subtotal:o,prime:c,taxes:l,total:s};return{items:r,invoice:i}}return{}},bt=function(e){if(e.includes("drive.google.com")){var t=e.match(/file\/d\/(.*)\/view*/);if(null!==t)return"https://drive.google.com/uc?export=view&id=".concat(t[1])}return e},gt=function(e,t){var a=e.task.totalPoints,n=e.task.multiplier,r=0===a?1:a,o=Math.round(e.value/r*100);return t[10*Math.floor((o>100?100:o)/10)]*n},ht=Object(w.a)((function(e){return{emptyCart:{textAlign:"center"},icon:{marginRight:e.spacing(1)},tableCellImg:{alignItems:"center",display:"flex","& img":{height:"50px",marginRight:e.spacing(2)}}}})),vt=Object(r.c)((function(e){return{currentUser:e.common.currentUser,prime:e.common.settings.prime,taxRate:e.common.settings.taxRate}}),{})((function(e){var t=e.actions,a=e.currentUser,n=e.hasPrime,r=e.prime,l=e.products,s=e.quantities,i=e.taxRate,u=ht(),m=r.enabled&&r.storePurchaseDiscount>0&&(n||a.hasPrime),d=ft(l,s,i,m?r.storePurchaseDiscount:0),p=d.items,E=d.invoice,f=Object(o.useState)(!1),b=Object(ge.a)(f,2),g=b[0],h=b[1],v=Object(o.useState)({}),y=Object(ge.a)(v,2),O=y[0],S=y[1],j=function(){h(!g),S({})},A=function(e){return t.update(e.target.name,e.target.value)};return Object(o.useEffect)((function(){t&&t.hasOwnProperty("setInvoice")&&t.setInvoice(E)}),[l,s,i]),c.a.createElement(Ze.a,null,c.a.createElement(et.a,null,c.a.createElement(tt.a,null,c.a.createElement(at.a,null,c.a.createElement(nt.a,{align:"center",colSpan:3},"Purchase Details"),c.a.createElement(nt.a,{align:"right"},"Cost")),c.a.createElement(at.a,null,c.a.createElement(nt.a,null,"Items"),c.a.createElement(nt.a,{align:"right"},"Quantity"),c.a.createElement(nt.a,{align:"right"},"Item Cost"),c.a.createElement(nt.a,{align:"right"},"Total Cost"))),c.a.createElement(rt.a,null,p.length>0?p.map((function(e){return c.a.createElement(at.a,{key:e.desc},c.a.createElement(nt.a,{className:u.tableCellImg},c.a.createElement("img",{height:"50px",src:bt(e.imgUrl)}),e.desc),c.a.createElement(nt.a,{align:"right"},t?c.a.createElement(c.a.Fragment,null,c.a.createElement(Ge,{action:"Remove from cart",onClick:function(){return a=e._id,t.delete(a);var a}},c.a.createElement(ct.a,null)),c.a.createElement(ot.a,{name:e._id,onChange:A,value:e.qty},function(e){for(var t=0===e?100:e,a=[],n=1;n<=t;n++)a.push(c.a.createElement(Ee.a,{value:n,key:n},n));return a}(e.onHand<e.max&&e.onHand>0||0===e.max?e.onHand:e.max))):e.qty),c.a.createElement(nt.a,{align:"right"},c.a.createElement(Ve,{value:e.unit})),c.a.createElement(nt.a,{align:"right"},c.a.createElement(Ve,{value:e.price})))})):c.a.createElement(at.a,null,c.a.createElement(nt.a,{colSpan:4,className:u.emptyCart},"Your cart is empty")),g&&c.a.createElement(at.a,null,c.a.createElement(nt.a,{colSpan:3},c.a.createElement(Et,{allowAny:!1,onChange:function(e){return S(e||{})}})),c.a.createElement(nt.a,{align:"right"},c.a.createElement(Ge,{action:"Add to cart",disabled:!O.hasOwnProperty("name"),onClick:function(){t.add(O),j()}},c.a.createElement(lt.a,null)),c.a.createElement(Ge,{action:"Cancel",onClick:j},c.a.createElement(qe.a,null)))),c.a.createElement(at.a,null,c.a.createElement(nt.a,{rowSpan:m?4:3},t&&t.hasOwnProperty("add")&&c.a.createElement(D.a,{color:"primary",disabled:g,onClick:j,size:"small",variant:"outlined"},c.a.createElement(st.a,{className:u.icon}),"Add item")),c.a.createElement(nt.a,{colSpan:2},"Subtotal"),c.a.createElement(nt.a,{align:"right"},c.a.createElement(Ve,{value:E.subtotal}))),m&&c.a.createElement(at.a,null,c.a.createElement(nt.a,null,"Prime Discount",c.a.createElement(Te,null)),c.a.createElement(nt.a,{align:"right"},"".concat(r.storePurchaseDiscount,"%")),c.a.createElement(nt.a,{align:"right"},c.a.createElement(Ve,{prefix:"-",value:E.prime}))),c.a.createElement(at.a,null,c.a.createElement(nt.a,null,"Taxes & Fees"),c.a.createElement(nt.a,{align:"right"},"".concat(i,"%")),c.a.createElement(nt.a,{align:"right"},c.a.createElement(Ve,{prefix:"+",value:E.taxes}))),c.a.createElement(at.a,null,c.a.createElement(nt.a,{colSpan:2},"Total"),c.a.createElement(nt.a,{align:"right"},c.a.createElement(Ve,{value:E.total}))))))})),yt=Object(r.c)((function(e){return Object(p.a)({},e.purchases)}),(function(e){return{onAddItem:function(t){return e({type:"ADD_TO_CART",product:t})},onDeleteItem:function(t){return e({type:"DELETE_CART_PRODUCT",productId:t})},onExit:function(){return e({type:"ADD_PURCHASE_DIALOG_UNLOADED"})},onSubmit:function(t){return e({type:"ADD_PURCHASE",payload:Ne.a.Purchases.add(t),snackbar:{message:"Purchase added",variant:"success"}})},onUpdateItem:function(t,a){return e({type:"UPDATE_CART_PRODUCT_QUANTITY",productId:t,qty:a})}}}))((function(e){var t=e.cart,a=e.errors,n=e.inProgress,r=e.onAddItem,l=e.onDeleteItem,s=e.onExit,i=e.onSubmit,u=e.onUpdateItem,m=e.student,d=Object(o.useState)(!1),p=Object(ge.a)(d,2),E=p[0],f=p[1],b=Object(o.useState)({}),g=Object(ge.a)(b,2),h=g[0],v=g[1],y=Object(o.useState)(""),P=Object(ge.a)(y,2),C=P[0],T=P[1],N=Object(We.a)(),w=Object(He.a)(N.breakpoints.down("md")),_=function(){f(!1),v({}),T("")};return Object(o.useEffect)((function(){n||a||f(!1)}),[n]),c.a.createElement(c.a.Fragment,null,c.a.createElement(Ge,{action:"Add purchase",onClick:function(){return f(!0)}},c.a.createElement(Ye.a,null)),c.a.createElement(O.a,{fullScreen:w,fullWidth:!0,maxWidth:"md",onClick:function(e){return e.stopPropagation()},onClose:_,onExit:s,onFocus:function(e){return e.stopPropagation()},open:E},c.a.createElement(S.a,null,"Add Purchase"),c.a.createElement(j.a,null,c.a.createElement(Oe,{errors:a}),c.a.createElement(me.a,{container:!0,spacing:2},c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(vt,{actions:{add:r,delete:l,setInvoice:function(e){return v(e)},update:u},hasPrime:m.hasPrime,products:t.products,quantities:t.quantities}),c.a.createElement(Xe,{label:"Notes (optional)",name:"purchaseNote",onChange:T})))),c.a.createElement(A.a,null,c.a.createElement("div",{style:{marginRight:"auto"}},c.a.createElement(Ke,{cost:h.total,username:m.username})),c.a.createElement(D.a,{disabled:n||0===t.products.length,color:"primary",onClick:function(){i({note:C,products:t.products,quantities:t.quantities,status:"approved",student:m}),_()},type:"submit",variant:"contained"},n?"Adding...":"Add"),c.a.createElement(D.a,{disabled:n,onClick:_,variant:"contained"},"Cancel"))))})),Ot=a(518),St=Object(w.a)((function(e){return{root:{fontStyle:"italic",marginLeft:e.spacing(1)}}})),jt=function(e){var t=St();return c.a.createElement(Ot.a,Object.assign({className:t.root,color:"secondary",label:"dropped",size:"small",variant:"outlined"},e))},At=a(849),Dt=Object(w.a)((function(e){return{alert:{"&:not(:last-of-type)":{marginBottom:e.spacing(2)}}}})),Pt=Object(r.c)((function(e){return Object(p.a)({},e.notifications)}),(function(e){return{onLoad:function(){return e({type:"NOTIFICATION_DIALOG_LOADED",payload:Ne.a.Notifications.getAll()})},onUnload:function(){return e({type:"NOTIFICATION_DIALOG_UNLOADED",payload:Ne.a.Notifications.clearAll()})}}}))((function(e){var t=e.errors,a=e.notifications,n=e.onLoad,r=e.onUnload,l=Object(o.useState)(!1),s=Object(ge.a)(l,2),i=s[0],u=s[1],m=Dt(),d=Object(We.a)(),p=Object(He.a)(d.breakpoints.down("md")),E=function(){u(!1),r()};return Object(o.useEffect)((function(){n()}),[]),Object(o.useEffect)((function(){a.length>0&&u(!0)}),[a]),c.a.createElement(O.a,{fullScreen:p,fullWidth:!0,maxWidth:"md",open:i,onClose:E,onClick:function(e){return e.stopPropagation()},onFocus:function(e){return e.stopPropagation()}},c.a.createElement(S.a,null,"Notification Center"),c.a.createElement(j.a,null,c.a.createElement(Oe,{errors:t}),a.length>0?a.map((function(e,t){return c.a.createElement(ve.a,{className:m.alert,key:t,severity:e.type},c.a.createElement(At.a,null,e.title),e.content)})):c.a.createElement(ve.a,{severity:"info"},c.a.createElement(At.a,null,"All caught up!"),"You have no notifications at this time")),c.a.createElement(A.a,null,c.a.createElement(D.a,{onClick:E,variant:"contained"},"Close")))})),Ct=a(832),Tt=a(850),Nt=Object(r.c)((function(e){return{defaultStudentPassword:e.common.settings.defaultStudentPassword}}),(function(e){return{onSubmit:function(t){return e({type:"RESET_STUDENT_PASSWORD",payload:Ne.a.Students.update(t),snackbar:{message:"Password reset",variant:"success"}})}}}))((function(e){var t=e.btnSize,a=e.defaultStudentPassword,n=e.onSubmit,r=e.student,l=Object(o.useState)(!1),s=Object(ge.a)(l,2),i=s[0],u=s[1],m=function(){u(!1)};return c.a.createElement(c.a.Fragment,null,c.a.createElement(Ge,{action:"Reset password",onClick:function(){u(!0)},size:null!==t&&void 0!==t?t:"small"},c.a.createElement(Tt.a,{fontSize:"inherit"})),c.a.createElement(O.a,{open:i,onClose:m,onClick:function(e){return e.stopPropagation()},onFocus:function(e){return e.stopPropagation()}},c.a.createElement(S.a,null,"Reset Password"),c.a.createElement(j.a,null,c.a.createElement(Ct.a,null,"Do you want to reset"," ",c.a.createElement("b",null,r.firstName," ",r.lastName),"'s password to ",c.a.createElement("strong",null,a),"?")),c.a.createElement(A.a,null,c.a.createElement(D.a,{onClick:function(){var e=Object(p.a)(Object(p.a)({},r),{},{password:a});n(e),u(!1)},color:"primary",variant:"contained",autoFocus:!0},"Reset"),c.a.createElement(D.a,{onClick:m,variant:"contained"},"Cancel"))))})),wt=a(320),_t=function(e){var t=e.allowAny,a=e.defaultValue,n=e.disabled,r=e.label,o=e.onChange,l=e.options;return c.a.createElement(it.a,{autoHighlight:!0,defaultValue:a||null,disabled:n||!1,freeSolo:null!==t&&void 0!==t&&t,onInputChange:function(e,t){o(t)},onChange:function(e,t){o(t)},options:l,renderInput:function(e){return c.a.createElement(Je.a,Object.assign({},e,{label:r}))}})},kt=["classroom","counselor","gym","health office","library","office","restroom","social worker"],xt=Object(w.a)((function(e){return{icon:{marginRight:e.spacing(1)}}})),Rt=function(e){var t=e.activePassExists,a=e.lastPass,n=e.role;return c.a.createElement(c.a.Fragment,null,t&&c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(ve.a,{severity:"error"},c.a.createElement(At.a,null,"Active Hallpass"),"student"===n?"An active hallpass already exists for another student. Please try again in ".concat(null===a||void 0===a?void 0:a.duration," minutes. If this is an emergency, please see your teacher."):"An active hallpass already exists for ".concat(null===a||void 0===a?void 0:a.student.firstName," ").concat(null===a||void 0===a?void 0:a.student.lastName," to go to the ").concat(null===a||void 0===a?void 0:a.destination," and was created at ").concat(Ie()(null===a||void 0===a?void 0:a.createdAt).format("LT")," with a duration of ").concat(null===a||void 0===a?void 0:a.duration," minutes"))))},Ut=function(e){var t=e.accountBalance,a=e.canAfford,n=e.role;return c.a.createElement(c.a.Fragment,null,!a&&c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(ve.a,{severity:"error"},c.a.createElement(At.a,null,"Insufficient Funds"),"student"===n?"You do not have enough points to purchase a hallpass. If this is an emergency, please see your teacher.":"This student has ".concat(t," pts which is less than the cost of a hallpass"))))},Lt=function(e){var t=e.passes,a=e.passLimitExceeded,n=e.role;return c.a.createElement(c.a.Fragment,null,a&&c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(ve.a,{severity:"error"},c.a.createElement(At.a,null,"Hallpass Limit Reached"),"student"===n?"You have reached your pass limit. If this is an emergency, please see your teacher.":"This student has ".concat(t.length," passes and has exceeded their pass limit"))))},It=function(e){var t=e.allow,a=e.role;return c.a.createElement(c.a.Fragment,null,!t&&"student"===a&&c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(ve.a,{severity:"info"},"Please see your teacher for a hallpass")))},qt=function(e){var t=e.onClose,a=e.pass,n=e.roomNumber,r=e.status,o=e.teacher,l=function(e){var t=e.title,a=e.value;return c.a.createElement(c.a.Fragment,null,c.a.createElement(me.a,{item:!0,xs:3},c.a.createElement(x.a,null,c.a.createElement("b",null,t,":"))),c.a.createElement(me.a,{item:!0,xs:9},c.a.createElement(x.a,null,a)))};return c.a.createElement(c.a.Fragment,null,c.a.createElement(S.a,null,"Hallpass"),c.a.createElement(j.a,null,c.a.createElement(me.a,{container:!0,spacing:2},"expired"===r?c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(ve.a,{severity:"error"},c.a.createElement(At.a,null,"Hallpass Expired"),"Your hallpass for today is expired. If you need a new hallpass, please see your teacher.")):c.a.createElement(c.a.Fragment,null,c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(ve.a,{severity:"info"},"This hallpass is good for ",a.duration," minutes and expires at"," ",Ie()(a.createdAt).add(a.duration,"minutes").format("LT"))),c.a.createElement(me.a,{container:!0,spacing:1,item:!0,xs:12},c.a.createElement(l,{title:"Student",value:"".concat(a.student.firstName," ").concat(a.student.lastName)}),c.a.createElement(l,{title:"From",value:n}),c.a.createElement(l,{title:"To",value:Object(wt.a)(a.destination)}),c.a.createElement(l,{title:"Date",value:Ie()(a.createdAt).format("ll")}),c.a.createElement(l,{title:"Time",value:Ie()(a.createdAt).format("LT")}),c.a.createElement(l,{title:"Teacher",value:"".concat(o.title," ").concat(o.lastName)}))))),c.a.createElement(A.a,null,c.a.createElement(D.a,{onClick:t,variant:"contained"},"Close")))},Mt=function(e){var t=e.accountBalance,a=e.activePassExists,n=e.cost,r=e.errors,o=e.hallpass,l=e.inProgress,s=e.lastPass,i=e.onClose,u=e.onSubmit,m=e.pageLoaded,d=e.passes,p=e.passLimitExceeded,E=e.role,f=!o.allowPurchaseWithInsufficientFunds&&t>=n||o.allowPurchaseWithInsufficientFunds,b="student"===E&&!a&&o.allowStudentCreation&&!p&&f||"teacher"===E;return c.a.createElement(ce.c,{initialValues:{createdBy:E,destination:"restroom",doCharge:!0,duration:o.defaultDuration},validationSchema:se.c({createdBy:se.d().required("Required"),destination:se.d().required("Required"),doCharge:se.a(),duration:se.b().typeError("Numbers only").required("Required")}),onSubmit:function(){var e=Object(oe.a)(re.a.mark((function e(t){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},(function(e){return c.a.createElement(ce.b,null,c.a.createElement(S.a,null,"student"===E?"Purchase Hallpass":"Create Hallpass"),c.a.createElement(j.a,null,c.a.createElement(Oe,{errors:r}),c.a.createElement(me.a,{container:!0,spacing:2},c.a.createElement(Rt,{activePassExists:a,lastPass:s,role:E}),c.a.createElement(Ut,{accountBalance:t,canAfford:f,role:E}),c.a.createElement(Lt,{passes:d,passLimitExceeded:p,role:E}),c.a.createElement(It,{allow:o.allowStudentCreation,role:E}),b&&"student"===E&&c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(x.a,{variant:"body1",gutterBottom:!0},"This will charge your account ",c.a.createElement("b",null,n," pts")),c.a.createElement(x.a,{variant:"body2",gutterBottom:!0},c.a.createElement("em",null,"If you need a pass to a different destination or for a longer duration, please see your teacher"))),b&&c.a.createElement(me.a,{item:!0,xs:12,md:6},c.a.createElement(_t,{allowAny:!0,defaultValue:"restroom",disabled:l||"student"===E,label:"Destination",onChange:function(t){e.setFieldValue("destination",t)},options:kt})),b&&c.a.createElement(me.a,{item:!0,xs:12,md:6},c.a.createElement(ce.a,{color:"primary",component:le.c,disabled:l||"student"===E,label:"Duration (minutes)",name:"duration",type:"text",fullWidth:!0})),"teacher"===E&&c.a.createElement(me.a,{item:!0,xs:12,md:6},c.a.createElement("label",null,c.a.createElement(ce.a,{component:le.b,name:"doCharge",type:"checkbox"}),c.a.createElement("b",null,"Cost: "),e.values.doCharge?"".concat(n," pts"):"Free")))),c.a.createElement(A.a,null,b&&c.a.createElement(D.a,{disabled:l||!m,color:"primary",type:"submit",variant:"contained"},l?"Creating...":"Create"),c.a.createElement(D.a,{disabled:l,onClick:i,variant:"contained"},b?"Cancel":"Close")))}))},Bt=Object(r.c)((function(e){var t;return Object(p.a)(Object(p.a)(Object(p.a)({},e.passes),e.common.settings),{},{accountBalance:null===(t=e.scores.total)||void 0===t?void 0:t.balance,role:e.common.currentUser.role,teacher:e.common.settings.user})}),(function(e){return{getLastPass:function(){return e({type:"GET_LAST_PASS",payload:Ne.a.Passes.getLastPass()})},onAdd:function(t){return e({type:"ADD_PASS",payload:Ne.a.Passes.add(t),snackbar:{message:"Pass created",variant:"success"}})},onLoadStudent:function(){return e({type:"LOAD_STUDENT_PASSES",payload:Ne.a.Passes.getAll()})},onLoadTeacher:function(t){return e({type:"LOAD_TEACHER_PASS_DIALOG",payload:Ne.a.Passes.getStudentPasses(t)})}}}))((function(e){var t=e.accountBalance,a=e.buttonType,n=e.errors,r=e.hallpass,l=e.getLastPass,s=e.inProgress,i=e.lastPass,u=e.onAdd,m=e.onLoadStudent,d=e.onLoadTeacher,p=e.pageLoaded,E=e.passes,f=e.prime,b=e.role,g=e.roomNumber,h=e.student,v=e.teacher,y=Object(o.useState)(!1),S=Object(ge.a)(y,2),j=S[0],A=S[1],D=Object(o.useState)(null),P=Object(ge.a)(D,2),C=P[0],T=P[1],N=Object(o.useState)(!1),w=Object(ge.a)(N,2),_=w[0],k=w[1],x=Object(o.useState)(!1),R=Object(ge.a)(x,2),U=R[0],L=R[1],I=Object(We.a)(),q=Object(He.a)(I.breakpoints.down("md")),M=xt(),B=function(){A(!0)},F=function(){A(!1)},G=function(){return f.enabled&&h.hasPrime?(1-f.hallpassDiscount/100)*r.purchaseAmount:r.purchaseAmount},W=function(e){if(e.length>0){var t=e[0],a=Ie()(),n=Ie()(t.createdAt),r=n.isSame(a,"day"),o=Ie.a.duration(a.diff(n)).as("minutes");return r?o>t.duration?"expired":"active":null}return null};return Object(o.useEffect)((function(){"teacher"!==b||s||n||A(!1)}),[s]),Object(o.useEffect)((function(){j&&"student"===b&&m(),j&&"teacher"===b&&d(h._id),j&&l()}),[j]),Object(o.useEffect)((function(){"student"===b&&T(W(E)),L(function(e){return 0!==r.limit&&e.length>=r.limit}(E))}),[E]),Object(o.useEffect)((function(){var e=i?W([i]):null;k("active"===e)}),[i]),c.a.createElement(c.a.Fragment,null,r.enabled&&"icon"===a&&c.a.createElement(Ge,{action:"teacher"===b?"Create hallpass":"Purchase hallpass",onClick:B},c.a.createElement(Y.a,null)),r.enabled&&"fab"===a&&c.a.createElement(ie.a,{color:"primary",onClick:B,variant:"extended"},c.a.createElement(st.a,{className:M.icon}),"Buy a pass"),c.a.createElement(O.a,{fullScreen:q,fullWidth:!0,maxWidth:"md",onClick:function(e){return e.stopPropagation()},onFocus:function(e){return e.stopPropagation()},open:j},C&&E.length>0?c.a.createElement(qt,{onClose:F,pass:E[0],roomNumber:g,status:C,teacher:v}):c.a.createElement(Mt,{accountBalance:t,activePassExists:_,cost:G(),errors:n,hallpass:r,inProgress:s,lastPass:i,onClose:F,onSubmit:function(e){u({cost:e.doCharge||"student"===b?G():0,createdBy:e.createdBy,destination:e.destination,duration:e.duration,student:h})},pageLoaded:p,passes:E,passLimitExceeded:U,role:b})))})),Ft=a(851),Gt=a(852),Wt=function(e){var t=e.allowAny,a=e.bonuses,n=e.onChange;return c.a.createElement(it.a,{autoHighlight:!0,freeSolo:null===t||void 0===t||t,getOptionLabel:function(e){return e.description},getOptionSelected:function(e,t){return e._id===t._id},noOptionsText:"No bonuses have been added",onInputChange:function(e,t){n(t)},onChange:function(e,t){n(t)},options:a,renderInput:function(e){return c.a.createElement(Je.a,Object.assign({},e,{label:"Description",placeholder:"Type or select a bonus",required:!0}))},renderOption:function(e,t){var a=t.inputValue,n=pt()(e.description,a),r=mt()(e.description,n);return c.a.createElement("div",null,r.map((function(e,t){return c.a.createElement("span",{key:t,style:{fontWeight:e.highlight?700:400}},e.text)})))}})},Ht=Object(r.c)((function(e){return Object(p.a)(Object(p.a)({},e.scores),{},{bonuses:e.bonuses.bonuses,products:e.products.products,taxRate:e.common.settings.taxRate})}),(function(e){return{onAdd:function(t){return e({type:"ADD_TRANSACTION",payload:Ne.a.Transactions.add(t),snackbar:{message:"".concat(t.typeTitle," added"),variant:"success"}})},onExit:function(){return e({type:"TRANSACTION_DIALOG_UNLOADED"})}}}))((function(e){var t=e.bonuses,a=e.errors,n=e.inProgress,r=e.onAdd,l=e.onExit,s=e.student,i=e.taxRate,u=e.type,m=Object(o.useState)(!1),d=Object(ge.a)(m,2),E=d[0],f=d[1],b=Object(We.a)(),g=Object(He.a)(b.breakpoints.down("md")),h=function(){f(!1)},v=function(e){r(Object(p.a)(Object(p.a)({},e),{},{student:s,type:u.toLowerCase(),typeTitle:u}))};return Object(o.useEffect)((function(){n||a||f(!1)}),[n]),c.a.createElement(c.a.Fragment,null,c.a.createElement(Ge,{action:"Add ".concat("Purchase"===u?"quick":""," ").concat(u.toLowerCase()),onClick:function(){f(!0)}},"Bonus"===u&&c.a.createElement(Ft.a,null),"Purchase"===u&&c.a.createElement(Gt.a,null)),c.a.createElement(O.a,{fullScreen:g,fullWidth:!0,maxWidth:"md",onClick:function(e){return e.stopPropagation()},onClose:h,onExit:l,onFocus:function(e){return e.stopPropagation()},open:E},c.a.createElement(ce.c,{initialValues:{amount:"",description:"",productId:""},validationSchema:se.c({amount:se.b().typeError("Numbers only").required("Required"),description:se.d().required("Required"),productId:se.d()}),onSubmit:function(){var e=Object(oe.a)(re.a.mark((function e(t){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},(function(e){return c.a.createElement(ce.b,null,c.a.createElement(S.a,null,"Add ","Purchase"===u&&"Quick"," ",u),c.a.createElement(j.a,null,c.a.createElement(Oe,{errors:a}),c.a.createElement(me.a,{container:!0,spacing:2},c.a.createElement(me.a,{item:!0,xs:12,md:6},"Bonus"===u?c.a.createElement(Wt,{bonuses:t,onChange:function(t){"string"===typeof t?e.setFieldValue("description",t):t&&"object"===typeof t?(e.setFieldValue("amount",t.amount),e.setFieldValue("description",t.description)):(e.setFieldValue("amount",""),e.setFieldValue("description",""))}}):c.a.createElement(Et,{onChange:function(t){var a;"string"===typeof t?e.setFieldValue("description",t):t&&"object"===typeof t?(e.setFieldValue("amount",(a=t.cost,Math.round(a*(i/100+1)))),e.setFieldValue("description",t.name),e.setFieldValue("productId",t._id)):(e.setFieldValue("amount",""),e.setFieldValue("description",""))}})),c.a.createElement(me.a,{item:!0,xs:12,md:6},c.a.createElement(ce.a,{color:"primary",component:le.c,disabled:n,label:"Amount",name:"amount",type:"text",fullWidth:!0})))),c.a.createElement(A.a,null,c.a.createElement(D.a,{disabled:n,color:"primary",type:"submit",variant:"contained"},n?"Adding...":"Add"),c.a.createElement(D.a,{disabled:n,onClick:h,variant:"contained"},"Cancel")))}))))})),Yt=Object(w.a)((function(e){return{actions:Object(xe.a)({alignItems:"flex-start",display:"flex"},e.breakpoints.up("md"),{justifyContent:"flex-end"}),balance:{textAlign:"center","& > h6":{borderTop:"1px solid #ccc",fontStyle:"italic",textTransform:"lowercase"}},edit:{backgroundColor:e.palette.primary.main},paper:{padding:e.spacing(2)},subtotal:{position:"relative",textAlign:"center","& > p":{position:"relative",bottom:-e.spacing(1)},"& > h6":{fontSize:e.typography.pxToRem(12),fontStyle:"italic",textTransform:"lowercase"}},unit:{fontSize:e.typography.pxToRem(12)}}})),zt=function(e){var t=e.doEdit,a=e.onEditClick,n=e.storeEnabled,r=e.student,o=e.total,l=e.userRole,s=Yt();return c.a.createElement(ue.a,{className:s.paper},c.a.createElement(me.a,{container:!0,spacing:2},c.a.createElement(me.a,{item:!0,xs:12,md:4},c.a.createElement(x.a,{gutterBottom:!0,variant:"h5"},r.firstName," ",r.lastName," ",r.hasPrime&&c.a.createElement(Te,null),r.dropped&&c.a.createElement(jt,null)),r.course&&c.a.createElement(x.a,{gutterBottom:!0,color:"textSecondary",variant:"subtitle1"},r.course," \xb7 Period ",r.period),c.a.createElement(x.a,{color:"textSecondary",variant:"subtitle2"},r.username)),c.a.createElement(me.a,{item:!0,xs:12,md:4,container:!0},c.a.createElement(me.a,{item:!0,xs:12,className:s.balance},c.a.createElement(x.a,{color:(null===o||void 0===o?void 0:o.balance)>=0?"primary":"secondary",variant:"h4"},c.a.createElement(Ve,{suffix:" ",value:null===o||void 0===o?void 0:o.balance}),c.a.createElement("span",{className:s.unit},"pts")),c.a.createElement(x.a,{color:"textSecondary",variant:"subtitle2"},"Balance")),c.a.createElement(me.a,{item:!0,xs:4,className:s.subtotal},c.a.createElement(x.a,{color:"primary",variant:"body1"},c.a.createElement(Ve,{suffix:" ",value:null===o||void 0===o?void 0:o.bonuses}),c.a.createElement("span",{className:s.unit},"pts")),c.a.createElement(x.a,{color:"primary",variant:"subtitle2"},"Bonuses")),c.a.createElement(me.a,{item:!0,xs:4,className:s.subtotal},c.a.createElement(x.a,{color:"secondary",variant:"body1"},c.a.createElement(Ve,{suffix:" ",value:null===o||void 0===o?void 0:o.purchases}),c.a.createElement("span",{className:s.unit},"pts")),c.a.createElement(x.a,{color:"secondary",variant:"subtitle2"},"Purchases")),c.a.createElement(me.a,{item:!0,xs:4,className:s.subtotal},c.a.createElement(x.a,{color:"primary",variant:"body1"},c.a.createElement(Ve,{suffix:" ",value:null===o||void 0===o?void 0:o.scores}),c.a.createElement("span",{className:s.unit},"pts")),c.a.createElement(x.a,{color:"primary",variant:"subtitle2"},"Assessments"))),c.a.createElement(me.a,{item:!0,xs:12,md:4,className:s.actions},c.a.createElement(Bt,{buttonType:"icon",student:r}),"teacher"===l?c.a.createElement(c.a.Fragment,null,c.a.createElement(Ht,{student:r,type:"Bonus"}),c.a.createElement(Ht,{student:r,type:"Purchase"}),n&&c.a.createElement(yt,{student:r}),c.a.createElement(Ge,{action:t?"Finish editing":"Edit transactions",className:t&&s.edit,onClick:a},t?c.a.createElement(qe.a,null):c.a.createElement(Me.a,null)),c.a.createElement(Nt,{btnSize:"medium",student:r})):c.a.createElement(Pt,null))))},Vt=function(e){var t=e.conversions,a=e.doEdit,n=e.onDelete,r=e.onUpdate,l=e.transactions,s=Object(o.useState)([]),i=Object(ge.a)(s,2),u=i[0],m=i[1],d=function(e){return{amount:e.amount,createdAt:Ie()(e.createdAt),createdAtString:e.createdAt,description:e.description,type:e.type,_id:e._id}},E=function(e){var n=e.bonuses,r=e.purchases,o=e.scores,c=[].concat(Object(ke.a)(n.map((function(e){return d(e)}))),Object(ke.a)(r.map((function(e){return d(e)}))));return a?c:[].concat(Object(ke.a)(c),Object(ke.a)(o.map((function(e){return function(e){return{amount:gt(e,t),createdAt:Ie()(e.createdAt),createdAtString:e.createdAt,description:e.task.title,type:"assessment"}}(e)}))))},f=Object(o.useState)([{title:"Date",field:"createdAt",editable:"never",defaultSort:"desc",render:function(e,t){return"row"===t?e.createdAt.format("ddd, MMM D, YYYY"):e.format("ddd, MMM D, YYYY")}},{title:"Description",field:"description"},{title:"Amount",field:"amount",render:function(e){return c.a.createElement(Ve,{value:e.amount})}},{title:"Type",field:"type",editable:"never"}]),b=Object(ge.a)(f,1)[0];return Object(o.useEffect)((function(){l&&m(E(l))}),[a,l]),c.a.createElement(Ue.a,{columns:b,data:u,localization:{body:{emptyDataSourceMessage:a?"No editable transactions available":"No transactions have posted",editRow:{deleteText:"Delete this transaction?",saveTooltip:"Confirm"}}},options:{actionsColumnIndex:-1,paging:!1,toolbar:!1},editable:a?{onRowUpdate:function(e,t){return new Promise((function(a,n){var o=Object(ke.a)(u);o[t.tableData.id]=Object(p.a)(Object(p.a)({},e),{},{createdAt:Ie()(e.createdAtString)}),m(Object(ke.a)(o)),r(e),a()}))},onRowDelete:function(e){return new Promise((function(t,a){var r=Object(ke.a)(u),o=e.tableData.id;r.splice(o,1),m(Object(ke.a)(r)),n(e),t()}))}}:{}})},Qt=Object(r.c)((function(e){return{conversions:e.scores.conversions,storeEnabled:e.common.settings.storeEnabled,total:e.scores.total,transactions:e.scores.transactions,userRole:e.common.currentUser.role}}),(function(e){return{onDelete:function(t){return e({type:"DELETE_TRANSACTION",payload:Ne.a.Transactions.delete(t),snackbar:{message:"Transaction deleted",variant:"success"}})},onLoad:function(t){return e({type:"ACCOUNT_VIEW_LOADED",payload:Ne.a.Scores.getStudentScores(t)})},onUnload:function(){return e({type:"ACCOUNT_VIEW_UNLOADED"})},onUpdate:function(t){return e({type:"UPDATE_TRANSACTION",payload:Ne.a.Transactions.update(t),snackbar:{message:"Transaction updated",variant:"success"}})}}}))((function(e){var t=e.conversions,a=e.onDelete,n=e.onLoad,r=e.onUnload,l=e.onUpdate,s=e.storeEnabled,i=e.student,u=e.total,m=e.transactions,d=e.userRole,p=Object(o.useState)(!1),E=Object(ge.a)(p,2),f=E[0],b=E[1];return Object(o.useEffect)((function(){return function(){r()}}),[]),Object(o.useEffect)((function(){n(i.username)}),[i]),c.a.createElement(c.a.Fragment,null,m&&c.a.createElement(me.a,{container:!0,spacing:2},c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(zt,{doEdit:f,onEditClick:function(){b(!f)},storeEnabled:s,student:i,total:u,userRole:d})),c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(Vt,{conversions:t,doEdit:f,onDelete:a,onUpdate:l,transactions:m}))))})),Kt=Object(r.c)((function(e){return{currentUser:e.common.currentUser}}),(function(){return{}}))((function(e){var t=e.currentUser;return c.a.createElement(Qt,{student:t})})),Jt=a(6),$t=a(469),Xt=a(828),Zt=a(830),ea=a(829),ta=function(e){var t=e.passes,a=Object(o.useState)([]),n=Object(ge.a)(a,2),r=n[0],l=n[1],s=t.map((function(e){return{createdAt:Ie()(e.createdAt),createdBy:e.createdBy,destination:e.destination,duration:e.duration}})),i=Object(o.useState)([{title:"Date",field:"createdAt",render:function(e){return e.createdAt.format("ddd, MMM D, YYYY")}},{title:"Time",field:"createdAt",render:function(e){return e.createdAt.format("h:mm A")}},{title:"Duration (min)",field:"duration"},{title:"Destination",field:"destination"},{title:"Created by",field:"createdBy"}]),u=Object(ge.a)(i,1)[0];return Object(o.useEffect)((function(){l(s)}),[t]),c.a.createElement(Ue.a,{columns:u,data:r,localization:{body:{emptyDataSourceMessage:"No passes have been created"}},options:{paging:!1,toolbar:!1}})},aa=Object(Jt.a)((function(e){return{root:{height:10,borderRadius:5},bar:{borderRadius:5}}}))($t.a),na=Object(r.c)((function(e){return{passes:e.passes.passes,settings:e.common.settings.hallpass,student:e.common.currentUser}}),(function(e){return{getPasses:function(){return e({type:"LOAD_STUDENT_PASSES",payload:Ne.a.Passes.getAll()})},onLoad:function(t){return e({type:"STUDENT_PASSES_LOADED",payload:Ne.a.Scores.getStudentScores(t)})},onUnload:function(){return e({type:"STUDENT_PASSES_UNLOADED"})}}}))((function(e){var t=e.getPasses,a=e.onLoad,n=e.onUnload,r=e.passes,l=e.settings,s=e.student,i=function(e){return"pass".concat(1===e?"":"es")},u={count:r.length,max:l.limit,remain:r.length>l.limit?0:l.limit-r.length},m=u.max>0?"Used ".concat(u.count," ").concat(i(u.count)," of ").concat(u.max," (").concat(u.remain," ").concat(i(u.remain)," remaining)"):"Used ".concat(u.count," ").concat(i(u.count)," of unlimited"),d=u.count>u.max?100:100*u.count/u.max;return Object(o.useEffect)((function(){return a(s.username),t(),function(){n()}}),[s]),c.a.createElement(c.a.Fragment,null,c.a.createElement(je,{title:"Passes for ".concat(s.firstName)},c.a.createElement(Bt,{buttonType:"fab",student:s})),c.a.createElement(me.a,{container:!0,spacing:2},c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(Xt.a,null,c.a.createElement(Zt.a,{title:m}),u.max>0&&c.a.createElement(ea.a,null,c.a.createElement(aa,{value:d,variant:"determinate"})))),c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(ta,{passes:r}))))})),ra=a(384),oa=a(324),ca=a(854),la=a(529),sa=a.n(la),ia=Object(w.a)((function(e){return{button:{marginBottom:e.spacing(2),marginRight:e.spacing(2)},dialog:{backgroundImage:"url(".concat(sa.a,")"),backgroundPosition:"center bottom",backgroundSize:"cover",color:"white",padding:e.spacing(4)},icon:{marginRight:e.spacing(1)},input:{backgroundColor:"rgba(0,65,91,0.8)",borderRadius:e.spacing(1),height:78,"& input":{color:e.palette.secondary.main}},inputLabel:{color:"white"}}})),ua=Object(r.c)((function(e){return{currentUser:e.common.currentUser,settings:e.common.settings}}),(function(e){return{onSubmit:function(t){return e({type:"SUBMIT_SONG_REQUEST",payload:Ne.a.Songs.request(t),snackbar:{message:"Song requested",variant:"success"}})}}}))((function(e){var t=e.currentUser,a=e.onSubmit,n=e.settings,r=Object(o.useState)(!1),l=Object(ge.a)(r,2),s=l[0],i=l[1],u=Object(We.a)(),m=Object(He.a)(u.breakpoints.down("md")),d=ia(),p=function(){i(!1)},E=function(e){a(e),i(!1)};return c.a.createElement(c.a.Fragment,null,c.a.createElement(ie.a,{color:"primary",onClick:function(){i(!0)},variant:"extended"},c.a.createElement(st.a,{className:d.icon}),"Buy a song"),c.a.createElement(O.a,{classes:{paper:d.dialog},fullScreen:m,open:s,onClose:p},c.a.createElement(x.a,{variant:"h3",align:"center",color:"secondary",gutterBottom:!0},"Purchase a Song"),c.a.createElement(x.a,{variant:"body1",gutterBottom:!0},"Please provide the song and artist title for your request. If approved, ",n.prime.enabled&&t.hasPrime?(1-n.prime.songRequestPurchaseDiscount/100)*n.songRequestPurchaseAmount:n.songRequestPurchaseAmount," points will be charged to your account."),c.a.createElement(ce.c,{initialValues:{artist:"",title:""},validationSchema:se.c({artist:se.d().required("Required"),title:se.d().required("Required")}),onSubmit:function(){var e=Object(oe.a)(re.a.mark((function e(t){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},c.a.createElement(ce.b,null,c.a.createElement(me.a,{container:!0,spacing:4},c.a.createElement(me.a,{item:!0,xs:12,md:6},c.a.createElement(ce.a,{autoFocus:!0,className:d.input,color:"primary",component:le.c,InputLabelProps:{classes:{root:d.inputLabel}},label:"Song Title",name:"title",type:"text",variant:"filled",fullWidth:!0})),c.a.createElement(me.a,{item:!0,xs:12,md:6},c.a.createElement(ce.a,{className:d.input,color:"primary",component:le.c,InputLabelProps:{classes:{root:d.inputLabel}},label:"Artist",name:"artist",type:"text",variant:"filled",fullWidth:!0})),c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(D.a,{className:d.button,color:"primary",type:"submit",variant:"contained"},"Buy"),c.a.createElement(D.a,{className:d.button,onClick:p,variant:"contained"},"Cancel")))))))})),ma=Object(w.a)((function(e){return{icon:{marginLeft:e.spacing(1)},paper:{paddingLeft:e.spacing(2),marginBottom:e.spacing(4)},status:{alignItems:"center",display:"flex"}}})),da=Object(r.c)((function(e){return Object(p.a)(Object(p.a)({},e.songs),{},{currentUser:e.common.currentUser,settings:e.common.settings})}),(function(e){return{onDelete:function(t){return e({type:"SUBMIT_SONG_REMOVAL_REQUEST",payload:Ne.a.Songs.update(t),snackbar:{message:"Song removal request submitted",variant:"success"}})},onLoad:function(){return e({type:"STUDENT_SONGS_PAGE_LOADED",payload:Ne.a.Songs.forStudent()})},onUnload:function(){return e({type:"SONGS_PAGE_UNLOADED"})}}}))((function(e){var t=e.course,a=e.courseSongs,n=e.currentUser,r=e.onDelete,l=e.onLoad,s=e.onUnload,i=e.settings,u=e.userSongs,m=Object(o.useState)(!0),d=Object(ge.a)(m,2),p=d[0],E=d[1],f=Object(o.useState)([]),b=Object(ge.a)(f,2),g=b[0],h=b[1],v=Object(o.useState)([]),y=Object(ge.a)(v,2),O=y[0],S=y[1],j=ma(),A=i.songRemovalRequestEnabled&&(!i.prime.enabled||!i.prime.songRemovalEnabled)||i.prime.enabled&&i.prime.songRemovalEnabled&&n.hasPrime;return Object(o.useEffect)((function(){return l(),function(){return s()}}),[]),Object(o.useEffect)((function(){S([{title:"Request Date",field:"createdAt",editable:"never",render:function(e,t){return"row"===t?e.createdAt.format("ddd, MMM D, YYYY"):e.format("ddd, MMM D, YYYY")}},{title:"Song Title",field:"title"},{title:"Song Artist",field:"artist"}].concat(Object(ke.a)(p?[]:[{title:"Purchased by",field:"purchasedBy",editable:"never"}]),[{title:"Status",field:"status",lookup:{approved:"approved",pendingApproval:"pending approval",pendingRemoval:"pending removal",rejected:"rejected",removed:"removed"},render:function(e,t){return"row"===t?c.a.createElement("span",{style:{alignItems:"center",display:"flex"}},e.statusDescription?c.a.createElement(c.a.Fragment,null,e.status,c.a.createElement(Ae.a,{arrow:!0,color:"primary",enterTouchDelay:0,title:e.statusDescription},c.a.createElement(ca.a,{style:{marginLeft:"8px"}}))):e.status):c.a.createElement("span",null,e)}}])),h((p?u:a).map((function(e){return{createdAt:Ie()(e.createdAt),title:e.title,artist:e.artist,purchasedBy:"".concat(e.student.firstName," ").concat(e.student.lastName),status:e.status,statusDescription:e.statusDescription,_id:e._id}})))}),[a,p,u]),c.a.createElement(c.a.Fragment,null,c.a.createElement(je,{title:"Songs for "+(p?n.firstName:"Period "+t.period)},c.a.createElement(ua,null)),c.a.createElement(ue.a,{className:j.paper},c.a.createElement(me.a,{container:!0,spacing:2,className:j.grid},c.a.createElement(me.a,{item:!0,xs:12,className:j.grid},c.a.createElement(ra.a,{control:c.a.createElement(oa.a,{checked:p,onChange:function(e){E(e.target.checked)},name:"mySongsOnly"}),label:"show only my songs"})))),c.a.createElement(Ue.a,{title:"Class Playlist",columns:O,data:g,localization:{body:{deleteTooltip:A?"Delete song":"Delete song (Requires Prime Membership)",emptyDataSourceMessage:"No songs have been added to this class playlist",editRow:{deleteText:"Delete this song for ".concat(i.songRemovalPurchaseAmount," points?"),saveTooltip:"Delete song"}}},options:{actionsColumnIndex:-1,paging:!1,toolbar:!1},editable:{isDeletable:function(e){return"approved"===e.status&&A},isDeleteHidden:function(){return!i.songRemovalRequestEnabled},onRowDelete:function(e){return new Promise((function(t){r({id:e._id,status:"pending removal",statusDescription:""}),t()}))}}}))})),pa=a(792),Ea=Object(w.a)((function(e){return{alert:{marginBottom:e.spacing(2)}}})),fa=Object(r.c)((function(){return{}}),(function(e){return{onClose:function(){return e({type:"ALERT_CLOSED"})}}}))((function(e){var t=e.children,a=e.disableClose,n=e.onClose,r=e.severity,l=e.variant,s=Ea(),i=Object(o.useState)(!0),u=Object(ge.a)(i,2),m=u[0],d=u[1];return c.a.createElement("div",{className:s.alert},c.a.createElement(pa.a,{in:m},c.a.createElement(ve.a,{action:!a&&c.a.createElement(Be.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){d(!1),n()}},c.a.createElement(qe.a,{fontSize:"inherit"})),severity:r||"info",variant:l||"outlined"},t)))})),ba=a(855),ga=a(856),ha=a(857),va=a(858),ya=a(859),Oa=a(860),Sa=a(861),ja=function(e){var t=e.accounts,a=Object(o.useState)([]),n=Object(ge.a)(a,2),r=n[0],l=n[1],s=t.map((function(e){return{accountTotal:e.totals.account,assessmentTotal:e.totals.assessments,bonusTotal:e.totals.bonuses,course:e.course,firstName:e.firstName,hasPrime:e.hasPrime,id:e.id,lastName:e.lastName,period:e.period,purchaseTotal:e.totals.purchases,songTotal:e.totals.songs,passTotal:e.totals.passes}})),i=Object(o.useState)([{title:"First Name",field:"firstName"},{title:"Last Name",field:"lastName"},{title:"Prime",field:"hasPrime",render:function(e,t){return"row"===t?e.hasPrime?c.a.createElement(Te,null):"":e?c.a.createElement(Te,null):"No Prime"}},{title:"Period",field:"period",render:function(e,t){return"row"===t?c.a.createElement(Ot.a,{label:e.period,color:"secondary"}):c.a.createElement(Ot.a,{label:e,color:"secondary"})}},{title:"Account Total",field:"accountTotal",render:function(e,t){return"row"===t?c.a.createElement(Ve,{suffix:" ",value:e.accountTotal}):c.a.createElement(Ve,{value:e})}},{title:"Hallpass Total",field:"passTotal"},{title:"Song Total",field:"songTotal"},{title:"Assessment Total",field:"assessmentTotal",render:function(e,t){return"row"===t?c.a.createElement(Ve,{suffix:" ",value:e.assessmentTotal}):c.a.createElement(Ve,{value:e})}},{title:"Bonus Total",field:"bonusTotal",render:function(e,t){return"row"===t?c.a.createElement(Ve,{suffix:" ",value:e.bonusTotal}):c.a.createElement(Ve,{value:e})}},{title:"Purchase Total",field:"purchaseTotal",render:function(e,t){return"row"===t?c.a.createElement(Ve,{suffix:" ",value:e.purchaseTotal}):c.a.createElement(Ve,{value:e})}}]),u=Object(ge.a)(i,1)[0];return Object(o.useEffect)((function(){l(s)}),[t]),c.a.createElement(Ue.a,{columns:u,data:r,options:{grouping:!0,paging:!1,toolbar:!1},style:{boxShadow:"none"},title:"Account Summary"})},Aa=a(455),Da=Object(w.a)((function(e){return{message:{fontStyle:"italic"},root:{alignItems:"center",display:"flex",justifyContent:"center",minWidth:e.spacing(40)},spinner:{marginRight:e.spacing(2)}}})),Pa=function(e){var t=e.message,a=Da();return c.a.createElement("div",{className:a.root},c.a.createElement(Aa.a,{className:a.spinner}),c.a.createElement(x.a,{className:a.message},t||"Working..."))},Ca=a(882),Ta=Object(w.a)((function(e){return{statAvatar:{backgroundColor:e.palette.primary.main,height:e.spacing(6),marginBottom:e.spacing(2),width:e.spacing(6)},statCard:{alignItems:"center",display:"flex",flexFlow:"column nowrap",justifyContent:"center"}}})),Na=function(e){var t=e.children,a=e.icon,n=e.lg,r=e.md,o=e.percent,l=e.precision,s=e.round,i=e.title,u=e.value,m=e.xs,d=Ta();return c.a.createElement(me.a,{item:!0,xs:m||12,md:r||6,lg:n||4},c.a.createElement(Xt.a,{variant:"outlined"},c.a.createElement(ea.a,{className:d.statCard},c.a.createElement(Ca.a,{className:d.statAvatar},a),c.a.createElement(x.a,{variant:"h5"},i),c.a.createElement(x.a,{color:"secondary",variant:"h6"},c.a.createElement(ze.a,{displayType:"text",thousandSeparator:!0,value:s?function(e,t){var a=Math.pow(10,t||0);return Math.round(e*a)/a}(u,l):u}),o&&"%"),c.a.createElement(x.a,{color:"secondary",variant:"h6"},t))))},wa=a(793),_a=c.a.forwardRef((function(e,t){return c.a.createElement(wa.a,Object.assign({direction:"up",ref:t},e))})),ka=Object(w.a)((function(e){return{title:{color:e.palette.common.white,margin:"0 auto"}}})),xa=function(e){var t,a,n=e.data;return c.a.createElement(me.a,{container:!0,spacing:3},c.a.createElement(Na,{icon:c.a.createElement(ba.a,{fontSize:"large"}),title:"Top Student",round:!0},null===(t=n[0])||void 0===t?void 0:t.firstName," ",null===(a=n[0])||void 0===a?void 0:a.lastName),c.a.createElement(Na,{icon:c.a.createElement(ga.a,{fontSize:"large"}),title:"Total Students",value:n.length,round:!0}),c.a.createElement(Na,{icon:c.a.createElement(ha.a,{fontSize:"large"}),title:"Total Points",value:n.reduce((function(e,t){return e+(t.totals.account||0)}),0),round:!0}),c.a.createElement(Na,{icon:c.a.createElement(va.a,{fontSize:"large"}),title:"Total Assessment Points",value:n.reduce((function(e,t){return e+(t.totals.assessments||0)}),0),round:!0}),c.a.createElement(Na,{icon:c.a.createElement(ya.a,{fontSize:"large"}),title:"Total Bonus Points",value:n.reduce((function(e,t){return e+(t.totals.bonuses||0)}),0),round:!0}),c.a.createElement(Na,{icon:c.a.createElement(Oa.a,{fontSize:"large"}),title:"Total Purchase Points",value:n.reduce((function(e,t){return e+(t.totals.purchases||0)}),0),round:!0}),c.a.createElement(Na,{icon:c.a.createElement(Y.a,{fontSize:"large"}),title:"Total Hallpasses",value:n.reduce((function(e,t){return e+t.totals.passes}),0),round:!0}),c.a.createElement(Na,{icon:c.a.createElement(De.a,{icon:Pe.b,size:"lg"}),title:"Total Prime Memberships",value:n.reduce((function(e,t){return e+t.hasPrime}),0),round:!0}),c.a.createElement(Na,{icon:c.a.createElement(Sa.a,{fontSize:"large"}),title:"Total Song Requests",value:n.reduce((function(e,t){return e+t.totals.songs}),0),round:!0}),c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(ue.a,{elevation:3,style:{padding:"16px",overflow:"scroll"}},c.a.createElement(x.a,{gutterBottom:!0,variant:"h6"},"Account Summary"),c.a.createElement(ja,{accounts:n}))))},Ra=Object(r.c)((function(e){return Object(p.a)({},e.economy)}),(function(e){return{onLoad:function(){return e({type:"ECONOMY_DIALOG_LOADED",payload:Ne.a.Scores.getAll()})},onUnload:function(){return e({type:"ECONOMY_DIALOG_UNLOADED"})}}}))((function(e){var t=e.errors,a=e.inProgress,n=e.onLoad,r=e.onUnload,l=e.students,s=Object(o.useState)([]),i=Object(ge.a)(s,2),u=i[0],m=i[1],d=Object(o.useState)(!1),p=Object(ge.a)(d,2),E=p[0],f=p[1],b=ka(),g=function(){f(!1),r()};return Object(o.useEffect)((function(){m(l.sort((function(e,t){return t.totals.account-e.totals.account})))}),[l]),c.a.createElement(c.a.Fragment,null,c.a.createElement(D.a,{onClick:function(){f(!0),n()},size:"small"},"View Economy"),c.a.createElement(O.a,{fullScreen:!0,open:E,onClick:function(e){return e.stopPropagation()},onClose:g,onFocus:function(e){return e.stopPropagation()},TransitionComponent:_a},c.a.createElement(_.a,{position:"relative"},c.a.createElement(k.a,null,c.a.createElement(Be.a,{edge:"start",onClick:g},c.a.createElement(qe.a,null)),c.a.createElement(x.a,{variant:"h5",className:b.title},"Accounts"))),c.a.createElement(ee,null,c.a.createElement(y.a,null,c.a.createElement(je,{title:"Economy View"}),c.a.createElement(Oe,{errors:t}),a?c.a.createElement(Pa,{message:"Computing..."}):u.length>0?c.a.createElement(xa,{data:u}):c.a.createElement(ve.a,{severity:"info"},c.a.createElement(At.a,null,"No data available"),"You must create at least one course, add students to that course, and add bonuses, purchases, or scores before any data will be visible here")))))})),Ua=Object(w.a)((function(e){return{search:{padding:e.spacing(2)}}})),La=Object(r.c)((function(e){return{courses:e.courses.courses}}),(function(e){return{onLoad:function(){return e({type:"STUDENT_SEARCH_LOADED",payload:Ne.a.Courses.getAll()})},onUnload:function(){return e({type:"STUDENT_SEARCH_UNLOADED"})}}}))((function(e){var t=e.courses,a=e.onChange,n=e.onLoad,r=e.onUnload,l=Object(o.useState)([]),s=Object(ge.a)(l,2),i=s[0],u=s[1],m=Ua();return Object(o.useEffect)((function(){return n(),function(){r()}}),[]),Object(o.useEffect)((function(){var e=t.map((function(e){return e.students.map((function(t){return Object(p.a)(Object(p.a)({},t),{},{course:e.name,period:e.period,name:"".concat(t.firstName," ").concat(t.lastName)})}))})).flat();u(e)}),[t]),c.a.createElement(ue.a,{className:m.search},c.a.createElement(it.a,{autoHighlight:!0,getOptionLabel:function(e){return e.name},groupBy:function(e){return"Period ".concat(e.period," | ").concat(e.course)},noOptionsText:"No students have been added",onChange:function(e,t){return a(t)},options:i,renderInput:function(e){return c.a.createElement(Je.a,Object.assign({},e,{label:"Student",placeholder:"Type or select a name"}))},renderOption:function(e,t){var a=t.inputValue,n=pt()(e.name,a),r=mt()(e.name,n);return c.a.createElement("div",null,r.map((function(e,t){return c.a.createElement("span",{key:t,style:{fontWeight:e.highlight?700:400}},e.text)})))}}))})),Ia=a(282),qa=a(841),Ma=a(464),Ba=a(833),Fa=a(865),Ga=a(866),Wa=Object(w.a)((function(e){return{courses:{"& div":{backgroundColor:e.palette.background.default,boxShadow:e.shadows[4],cursor:"pointer",marginBottom:e.spacing(1),padding:"".concat(e.spacing(3),"px ").concat(e.spacing(4),"px"),transition:"all 0.15s ease-in-out","&:focus, &:hover":{backgroundColor:e.palette.primary.light,boxShadow:e.shadows[1]}}}}})),Ha=Object(r.c)((function(e){return{courses:e.courses.courses}}),(function(){return{}}))((function(e){var t=e.courses,a=e.onSelect,n=Wa();return c.a.createElement("div",null,c.a.createElement(x.a,{gutterBottom:!0,variant:"h6"},"Select a course"),t.length>0?c.a.createElement("div",{className:n.courses},t.map((function(e){return c.a.createElement("div",{key:e.slug,onClick:function(){a(e)},tabIndex:"0"},c.a.createElement(x.a,{variant:"body1"},c.a.createElement("b",null,e.name)," \xb7 Period ",e.period))}))):c.a.createElement(ve.a,{severity:"info"},"You must create a course before continuing"))})),Ya=function(e){var t=e.course,a=e.onSelect,n=e.primeEnabled,r=Object(o.useState)([]),l=Object(ge.a)(r,2),s=l[0],i=l[1],u=Object(o.useState)("last"),m=Object(ge.a)(u,2),d=m[0],p=m[1],E=function(){return"last"===d?"first":"last"},f=t.students.filter((function(e){return!e.dropped})).map((function(e){return{username:e.username,firstName:e.firstName,lastName:e.lastName,hasPrime:e.hasPrime,fullName:"last"===d?"".concat(e.lastName,", ").concat(e.firstName):"".concat(e.firstName," ").concat(e.lastName),role:e.role,_id:e._id}})).sort((function(e,t){return e["".concat(d,"Name")].localeCompare(t["".concat(d,"Name")])})),b=Object(o.useState)([{title:"Students",field:"fullName"}]),g=Object(ge.a)(b,2),h=g[0],v=g[1];return Object(o.useEffect)((function(){n&&v([].concat(Object(ke.a)(h),[{title:"Prime",field:"hasPrime",render:function(e){return e.hasPrime?c.a.createElement(Te,null):""}}]))}),[n]),Object(o.useEffect)((function(){i(f)}),[t,d]),c.a.createElement(Ue.a,{columns:h,data:s,localization:{body:{emptyDataSourceMessage:"No students found for this course"},toolbar:{nRowsSelected:"{0} student(s) selected"}},onSelectionChange:function(e){return a(e)},options:{paging:!1,selection:!0,toolbar:!0},title:"".concat(t.name," | Period ").concat(t.period),actions:[{icon:"sort",tooltip:"Sort by ".concat(E()," name"),isFreeAction:!0,onClick:function(){return p(E())}}]})},za=Object(w.a)((function(e){return{dialog:{"& > .MuiDialog-container > .MuiPaper-root":Object(xe.a)({},e.breakpoints.up("lg"),{width:e.spacing(80)})}}})),Va=Object(r.c)((function(e){return Object(p.a)(Object(p.a)({},e.scores),{},{bonuses:e.bonuses.bonuses,primeEnabled:e.common.settings.prime.enabled,taxRate:e.common.settings.taxRate})}),(function(e){return{onAdd:function(t,a){return e({type:"ADD_TRANSACTIONS",payload:Ne.a.Transactions.addMany(t),curStudent:a,snackbar:{message:"".concat(t.typeTitle," added"),variant:"success"}})},onExit:function(){return e({type:"TRANSACTIONS_DIALOG_UNLOADED"})}}}))((function(e){var t=e.bonuses,a=e.curStudent,n=e.errors,r=e.inProgress,l=e.isClosed,s=e.isOpen,i=e.onAdd,u=e.onExit,m=e.primeEnabled,d=e.taxRate,E=e.type,f=Object(o.useState)(!1),b=Object(ge.a)(f,2),g=b[0],h=b[1],v=Object(o.useState)(null),y=Object(ge.a)(v,2),P=y[0],C=y[1],T=Object(o.useState)([]),N=Object(ge.a)(T,2),w=N[0],_=N[1],k=Object(We.a)(),x=Object(He.a)(k.breakpoints.down("md")),R=za(),U=function(){h(!1),C(null),l()},L=function(e){i(Object(p.a)(Object(p.a)({},e),{},{students:w.map((function(e){return e._id})),type:"Bonuses"===E?"bonus":"purchase",typeTitle:E}),a)},I=function(e){C(e)},q=function(e){_(e)};return Object(o.useEffect)((function(){r||n||U()}),[r]),Object(o.useEffect)((function(){h(s)}),[s]),c.a.createElement(O.a,{className:R.dialog,fullScreen:x,onClick:function(e){return e.stopPropagation()},onClose:U,onExit:u,onFocus:function(e){return e.stopPropagation()},open:g},c.a.createElement(ce.c,{initialValues:{amount:"",description:"",productId:""},validationSchema:se.c({amount:se.b().typeError("Numbers only").required("Required"),description:se.d().required("Required"),productId:se.d()}),onSubmit:function(){var e=Object(oe.a)(re.a.mark((function e(t){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:L(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},(function(e){return c.a.createElement(ce.b,null,c.a.createElement(S.a,null,"Add ",E),c.a.createElement(j.a,null,c.a.createElement(Oe,{errors:n}),!P&&c.a.createElement(Ha,{onSelect:I}),P&&c.a.createElement(me.a,{container:!0,spacing:2},c.a.createElement(me.a,{item:!0,xs:12,md:6},"Bonuses"===E?c.a.createElement(Wt,{bonuses:t,onChange:function(t){"string"===typeof t?e.setFieldValue("description",t):t&&"object"===typeof t?(e.setFieldValue("amount",t.amount),e.setFieldValue("description",t.description)):(e.setFieldValue("amount",""),e.setFieldValue("description",""))}}):c.a.createElement(Et,{onChange:function(t){var a;"string"===typeof t?e.setFieldValue("description",t):t&&"object"===typeof t?(e.setFieldValue("amount",(a=t.cost,Math.round(a*(d/100+1)))),e.setFieldValue("description",t.name),e.setFieldValue("productId",t._id)):(e.setFieldValue("amount",""),e.setFieldValue("description",""))}})),c.a.createElement(me.a,{item:!0,xs:12,md:6},c.a.createElement(ce.a,{color:"primary",component:le.c,disabled:r,label:"Amount",name:"amount",type:"text",fullWidth:!0})),c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(Ya,{course:P,onSelect:q,primeEnabled:m})))),c.a.createElement(A.a,null,c.a.createElement(D.a,{disabled:r||0===w.length,color:"primary",type:"submit",variant:"contained"},r?"Adding...":"Add"),c.a.createElement(D.a,{disabled:r,onClick:U,variant:"contained"},"Cancel")))})))})),Qa=a(786),Ka=a(548),Ja=a(531),$a=a.n(Ja),Xa=Object(w.a)((function(e){return{filedrop:{alignItems:"center",backgroundColor:e.palette.grey[300],borderRadius:e.spacing(1),color:e.palette.grey[600],display:"flex",flexDirection:"column",outline:"none",padding:"20px",transition:"all 0.25s ease-in-out"},filedropActive:{backgroundColor:e.palette.primary.light,color:e.palette.primary.contrastText},filedropReject:{backgroundColor:e.palette.secondary.light,color:e.palette.secondary.contrastText}}}));var Za=function(e){var t=e.onFiledrop,a=Xa(),n=Object(o.useCallback)((function(e){e.forEach((function(e){var a=new FileReader;a.onabort=function(){return console.log("file reading was aborted")},a.onerror=function(){return console.log("file reading has failed")},a.onload=function(){var e=$a()(a.result,{columns:!0,relax_column_count:!0,skip_empty_lines:!0});t(e)},a.readAsBinaryString(e)}))}),[]),r=Object(Ka.a)({accept:"text/csv, text/plain",multiple:!1,onDropAccepted:n}),l=r.getRootProps,s=r.getInputProps,i=r.isDragActive,u=r.isDragReject;return c.a.createElement("div",l({className:"".concat(a.filedrop," ").concat(i?a.filedropActive:""," ").concat(u?a.filedropReject:"")}),c.a.createElement("input",s()),!i&&c.a.createElement(x.a,null,"Drop a .csv file here or click to select a .csv file"),i&&!u&&c.a.createElement(x.a,null,"Drop .csv file here"),u&&c.a.createElement(x.a,null,"File type not accepted"))},en=a(88),tn=a(334),an={ccsd:{scores:function(e){var t=e.file.map((function(e,t){return t>1&&e["Assignment Name"].split("#").pop()})).filter((function(e){return!1!==e})),a={course:e.course,tasks:[]};for(var n in e.tasks){if(e.tasks[n]){var r,o={title:n,totalPoints:e.file[1][n],scores:{}},c=Object(en.a)(t);try{var l=function(){var t=r.value,a=e.file.find((function(e){return e["Assignment Name"].endsWith(t)}));a&&(o.scores[t]=a[n])};for(c.s();!(r=c.n()).done;)l()}catch(s){c.e(s)}finally{c.f()}a.tasks.push(o)}}return a},students:function(e,t){var a=Object.keys(e[0]);return e.map((function(e,n){if(n<2)return null;var r=e[a[0]];return{firstName:Object(tn.parseFullName)(r).first,lastName:Object(tn.parseFullName)(r).last,username:r.split("#")[1],password:t,role:"student"}})).filter((function(e){return null!==e}))}},evergreen:{scores:function(e){alert("[Parser Unavailable] Please email a copy of your gradebook export file to Dr. May so he can setup a parser in the app")},students:function(e,t){var a=Object.keys(e[0]);return e.map((function(e,n){if(n<4)return null;var r=Object(tn.parseFullName)(e[a[0]]),o=e[a[1]];return{firstName:r.first,lastName:r.last,username:"u".concat(o.replace(/^0+/,"")),password:t,role:"student"}})).filter((function(e){return null!==e}))}}},nn=an,rn=Object(w.a)((function(e){return{dialog:{"& > .MuiDialog-container > .MuiPaper-root":Object(xe.a)({},e.breakpoints.up("lg"),{width:e.spacing(100)})}}})),on=function(e){var t=e.onDataChange,a=e.onShowImport,n=Object(o.useState)(null),r=Object(ge.a)(n,2),l=r[0],s=r[1],i=Object(o.useState)(null),u=Object(ge.a)(i,2),m=u[0],d=u[1],E=Object(o.useState)(null),f=Object(ge.a)(E,2),b=f[0],g=f[1],h=function(e){g(Object(p.a)(Object(p.a)({},b),{},Object(xe.a)({},e.target.name,e.target.checked)))};return Object(o.useEffect)((function(){var e=!!b&&Object.values(b).some((function(e){return!0===e}));a(e)}),[b]),Object(o.useEffect)((function(){t({file:l,course:m,tasks:b})}),[l,m,b]),c.a.createElement(c.a.Fragment,null,!l&&!m&&!b&&c.a.createElement(Ha,{onSelect:function(e){d(e)}}),!l&&m&&!b&&c.a.createElement("div",null,c.a.createElement(x.a,{gutterBottom:!0},"Scores must be imported from a .csv file exported from Infinite Campus"),c.a.createElement(Za,{onFiledrop:function(e){var t={};Object.keys(e[0]).slice(1).forEach((function(e){t[e]=!1})),s(e),g(t)}})),l&&m&&b&&c.a.createElement(de.a,{component:"fieldset"},c.a.createElement(x.a,{gutterBottom:!0,variant:"body1"},"Select the assignments to import"),c.a.createElement(Qa.a,null,Object.keys(b).map((function(e){return c.a.createElement(ra.a,{control:c.a.createElement(oa.a,{checked:b[e],onChange:h,name:e}),key:e,label:e})})))))},cn=Object(r.c)((function(e){return Object(p.a)(Object(p.a)({},e.common.settings),e.scores)}),(function(e){return{onImport:function(t,a){return e({type:"IMPORT_SCORES",payload:Ne.a.Scores.import(t),curStudent:a,snackbar:{message:"Scores imported",variant:"success"}})},onExit:function(){return e({type:"IMPORT_SCORES_DIALOG_UNLOADED"})}}}))((function(e){var t=e.curStudent,a=e.errors,n=e.inProgress,r=e.isClosed,l=e.isOpen,s=e.onExit,i=e.onImport,u=e.schoolDistrict,m=Object(o.useState)(!1),d=Object(ge.a)(m,2),p=d[0],E=d[1],f=Object(o.useState)(!1),b=Object(ge.a)(f,2),g=b[0],h=b[1],v=Object(o.useState)(null),y=Object(ge.a)(v,2),P=y[0],C=y[1],T=Object(We.a)(),N=Object(He.a)(T.breakpoints.down("md")),w=rn(),_=function(){E(!1),r()};return Object(o.useEffect)((function(){n||a||_()}),[n]),Object(o.useEffect)((function(){E(l)}),[l]),c.a.createElement(O.a,{className:w.dialog,fullScreen:N,onClick:function(e){return e.stopPropagation()},onClose:_,onExit:s,onFocus:function(e){return e.stopPropagation()},open:p},c.a.createElement(S.a,null,"Import Scores"),"ccsd"===u?c.a.createElement(j.a,null,c.a.createElement(Oe,{errors:a}),n?c.a.createElement(Pa,{message:"Importing..."}):c.a.createElement(on,{onDataChange:function(e){C(e)},onShowImport:function(e){h(e)}})):c.a.createElement(j.a,null,c.a.createElement(x.a,null,"Please email a copy of your gradebook export file to Dr. May so he can setup a parser in the app")),c.a.createElement(A.a,null,c.a.createElement(D.a,{color:"primary",disabled:!g||n,onClick:function(){var e=nn[u].scores(P);i(e,t)},variant:"contained"},n?"Importing...":"Import"),c.a.createElement(D.a,{disabled:n,onClick:_,variant:"contained"},"Cancel")))})),ln=Object(r.c)((function(e){return Object(p.a)({},e.bonuses)}),(function(e){return{onAdd:function(t){return e({payload:Ne.a.Bonuses.add(t),snackbar:{message:"Bonus added",variant:"success"},type:"ADD_BONUS"})},onDelete:function(t){return e({payload:Ne.a.Bonuses.delete(t),snackbar:{message:"Bonus deleted",variant:"success"},type:"DELETE_BONUS"})},onUpdate:function(t){return e({payload:Ne.a.Bonuses.update(t),snackbar:{message:"Bonus updated",variant:"success"},type:"UPDATE_BONUS"})}}}))((function(e){var t=e.bonuses,a=e.onAdd,n=e.onDelete,r=e.onUpdate,l=Object(o.useState)([]),s=Object(ge.a)(l,2),i=s[0],u=s[1],m=Object(o.useState)([{title:"Description",field:"description"},{title:"Amount",field:"amount"}]),d=Object(ge.a)(m,1)[0];return Object(o.useEffect)((function(){u(t)}),[t]),c.a.createElement(Ue.a,{title:"Bonuses",columns:d,data:i,localization:{body:{emptyDataSourceMessage:"No bonuses have been added",editRow:{deleteText:"Delete this bonus?"}}},options:{actionsColumnIndex:-1,addRowPosition:"first",paging:!1},editable:{onRowAdd:function(e){return new Promise((function(t){a(e),t()}))},onRowUpdate:function(e){return new Promise((function(t){r(e),t()}))},onRowDelete:function(e){return new Promise((function(t){n(e),t()}))}}})})),sn=Object(w.a)((function(e){return{dialog:{"& > .MuiDialog-container > .MuiPaper-root":Object(xe.a)({},e.breakpoints.up("lg"),{width:e.spacing(100)})}}})),un=Object(r.c)((function(e){return Object(p.a)({},e.bonuses)}),(function(e){return{onLoad:function(){return e({type:"LOAD_BONUSES",payload:Ne.a.Bonuses.getAll()})},onUnload:function(){return e({type:"UNLOAD_BONUSES"})}}}))((function(e){var t=e.errors,a=e.isOpen,n=e.onClose,r=e.onLoad,l=e.onUnload,s=Object(o.useState)(!1),i=Object(ge.a)(s,2),u=i[0],m=i[1],d=Object(We.a)(),p=Object(He.a)(d.breakpoints.down("md")),E=sn(),f=function(){m(!1),n()};return Object(o.useEffect)((function(){return r(),function(){l()}}),[]),Object(o.useEffect)((function(){m(a)}),[a]),c.a.createElement(O.a,{className:E.dialog,fullScreen:p,onClick:function(e){return e.stopPropagation()},onClose:f,onFocus:function(e){return e.stopPropagation()},open:u},c.a.createElement(S.a,null,"Manage Bonuses"),c.a.createElement(j.a,null,c.a.createElement(Oe,{errors:t}),c.a.createElement(ln,null)),c.a.createElement(A.a,null,c.a.createElement(D.a,{onClick:f,variant:"contained"},"Close")))})),mn=a(883),dn=a(835),pn=a(834),En=a(862),fn=a(863),bn=a(864),gn=Object(w.a)((function(e){return{active:{backgroundColor:e.palette.primary.main,marginRight:e.spacing(2)},expired:{backgroundColor:e.palette.secondary.main,marginRight:e.spacing(2)},summary:{display:"flex",alignItems:"center"}}})),hn=function(e){var t=e.courses,a=e.expanded,n=e.icon,r=e.onChange,l=e.onDelete,s=e.onUpdate,i=e.status,u=gn(),m=Object(o.useState)([]),d=Object(ge.a)(m,2),E=d[0],f=d[1],b=t.map((function(e){return e.passes.map((function(t){return{createdAt:Ie()(t.createdAt),createdAtString:t.createdAt,createdBy:t.createdBy,destination:t.destination,duration:t.duration,hasPrime:t.student.hasPrime,period:e.period,status:Ie.a.duration(Ie()().diff(Ie()(t.createdAt))).as("minutes")>t.duration?"expired":"active",student:"".concat(t.student.firstName," ").concat(t.student.lastName," ").concat(t.student.dropped?"(dropped)":""),_id:t._id}}))})).flat(),g=Object(o.useState)([{title:"Date",field:"createdAt",editable:"never",render:function(e,t){return"row"===t?e.createdAt.format("ddd, MMM D, YYYY"):e.format("ddd, MMM D, YYYY")}},{title:"Time",field:"createdAt",editable:"never",render:function(e,t){return"row"===t?e.createdAt.format("h:mm A"):e.format("h:mm A")}},{title:"Student",field:"student",editable:"never"},{title:"Prime",field:"hasPrime",editable:"never",render:function(e,t){return"row"===t?e.hasPrime?c.a.createElement(Te,null):"":e?c.a.createElement(Te,null):"No Prime"}},{title:"Period",field:"period",editable:"never",render:function(e,t){return"row"===t?c.a.createElement(Ot.a,{label:e.period,color:"secondary"}):c.a.createElement(Ot.a,{label:e,color:"secondary"})}},{title:"Destination",field:"destination"},{title:"Duration (min)",field:"duration"},{title:"Created by",field:"createdBy"}]),h=Object(ge.a)(g,1)[0];return Object(o.useEffect)((function(){f(b)}),[t]),c.a.createElement(mn.a,{expanded:a===i,onChange:r(i)},c.a.createElement(dn.a,{expandIcon:c.a.createElement(En.a,null)},c.a.createElement("div",{className:u.summary},c.a.createElement(Ca.a,{className:u[i]},n),c.a.createElement(x.a,{variant:"h5"},Object(wt.a)(i)," Hallpasses"))),c.a.createElement(pn.a,null,c.a.createElement(Ue.a,{columns:h,data:E.filter((function(e){return e.status===i})),editable:{onRowDelete:function(e){return new Promise((function(t,a){var n=Object(ke.a)(E),r=e.tableData.id;n.splice(r,1),f(Object(ke.a)(n)),l(e._id),t()}))},onRowUpdate:function(e,t){return new Promise((function(a,n){var r=Object(ke.a)(E);r[t.tableData.id]=Object(p.a)(Object(p.a)({},e),{},{createdAt:Ie()(e.createdAtString)}),f(Object(ke.a)(r)),s(e),a()}))}},localization:{body:{emptyDataSourceMessage:"active"===i?"No active passes at this time":"No hallpasses have been created",editRow:{deleteText:"Delete ".concat(i," hallpass?")}}},options:{actionsColumnIndex:-1,grouping:"active"!==i,paging:!1,showTitle:!1,toolbar:"active"!==i},style:{boxShadow:"none",width:"100%"}})))},vn=Object(r.c)((function(e){return{}}),(function(e){return{onDelete:function(t){return e({type:"DELETE_PASS",payload:Ne.a.Passes.delete(t),snackbar:{message:"Hallpass deleted",variant:"success"}})},onUpdate:function(t){return e({type:"UPDATE_PASS",payload:Ne.a.Passes.update(t),snackbar:{message:"Hallpass updated",variant:"success"}})}}}))((function(e){var t=e.courses,a=e.onDelete,n=e.onUpdate,r=Object(o.useState)("active"),l=Object(ge.a)(r,2),s=l[0],i=l[1],u=function(e){return function(t,a){i(!!a&&e)}};return c.a.createElement(c.a.Fragment,null,c.a.createElement(hn,{courses:t,expanded:s,icon:c.a.createElement(fn.a,null),onChange:u,onDelete:a,onUpdate:n,status:"active"}),c.a.createElement(hn,{courses:t,expanded:s,icon:c.a.createElement(bn.a,null),onChange:u,onDelete:a,onUpdate:n,status:"expired"}))})),yn=Object(w.a)((function(e){return{title:{color:e.palette.common.white,margin:"0 auto"}}})),On=Object(r.c)((function(e){return Object(p.a)({},e.passes)}),(function(e){return{onLoad:function(){return e({type:"LOAD_TEACHER_PASSES",payload:Ne.a.Passes.getAll()})},onUnload:function(){return e({type:"UNLOAD_MANAGE_PASSES"})}}}))((function(e){var t=e.courses,a=e.errors,n=e.inProgress,r=e.isOpen,l=e.onClose,s=e.onLoad,i=e.onUnload,u=Object(o.useState)(!1),m=Object(ge.a)(u,2),d=m[0],p=m[1],E=yn(),f=function(){p(!1),i(),l()};return Object(o.useEffect)((function(){r&&(p(!0),s())}),[r]),c.a.createElement(O.a,{fullScreen:!0,open:d,onClick:function(e){return e.stopPropagation()},onClose:f,onFocus:function(e){return e.stopPropagation()},TransitionComponent:_a},c.a.createElement(_.a,{position:"relative"},c.a.createElement(k.a,null,c.a.createElement(Be.a,{edge:"start",onClick:f},c.a.createElement(qe.a,null)),c.a.createElement(x.a,{variant:"h5",className:E.title},"Accounts"))),c.a.createElement(ee,null,c.a.createElement(y.a,null,c.a.createElement(je,{title:"Manage Hallpasses"}),c.a.createElement(Oe,{errors:a}),n?c.a.createElement(Pa,{message:"Loading..."}):c.a.createElement(vn,{courses:t}))))})),Sn=Object(w.a)((function(e){return{icon:{marginRight:e.spacing(1)}}})),jn=function(e){var t=e.curStudent,a=e.settings,n=Object(o.useState)(null),r=Object(ge.a)(n,2),l=r[0],s=r[1],i=Object(o.useState)(null),u=Object(ge.a)(i,2),m=u[0],d=u[1],p=Sn(),E=function(e){d(e.currentTarget.dataset.type),s(null)},f=function(){d(null)};return c.a.createElement(c.a.Fragment,null,c.a.createElement(ie.a,{color:"primary",onClick:function(e){s(e.currentTarget)},variant:"extended"},c.a.createElement(ya.a,{className:p.icon}),"Update Accounts"),c.a.createElement(Ia.a,{anchorEl:l,open:Boolean(l),onClose:function(){s(null)}},c.a.createElement(Ee.a,{"data-type":"scores",onClick:E},c.a.createElement(qa.a,null,c.a.createElement(Fa.a,null)),c.a.createElement(Ma.a,null,"Import scores")),c.a.createElement(Ee.a,{"data-type":"bonuses",onClick:E},c.a.createElement(qa.a,null,c.a.createElement(Ft.a,null)),c.a.createElement(Ma.a,null,"Add Bonuses")),c.a.createElement(Ee.a,{"data-type":"purchases",onClick:E},c.a.createElement(qa.a,null,c.a.createElement(Oa.a,null)),c.a.createElement(Ma.a,null,"Add Purchases")),c.a.createElement(Ba.a,null),c.a.createElement(Ee.a,{"data-type":"manageBonuses",onClick:E},c.a.createElement(qa.a,null,c.a.createElement(Ga.a,null)),c.a.createElement(Ma.a,null,"Manage Bonuses")),a.hallpass.enabled&&c.a.createElement(Ee.a,{"data-type":"managePasses",onClick:E},c.a.createElement(qa.a,null,c.a.createElement(Y.a,null)),c.a.createElement(Ma.a,null,"Manage Hallpasses"))),c.a.createElement(cn,{curStudent:t,isClosed:f,isOpen:"scores"===m}),c.a.createElement(Va,{curStudent:t,isClosed:f,isOpen:"bonuses"===m,type:"Bonuses"}),c.a.createElement(Va,{curStudent:t,isClosed:f,isOpen:"purchases"===m,type:"Purchases"}),c.a.createElement(un,{isOpen:"manageBonuses"===m,onClose:f}),c.a.createElement(On,{isOpen:"managePasses"===m,onClose:f}))},An=Object(r.c)((function(e){return{importSummary:e.scores.importSummary,settings:e.common.settings}}),(function(e){return{onUnload:function(){return e({type:"ACCOUNTS_PAGE_UNLOADED"})}}}))((function(e){var t=e.importSummary,a=e.onUnload,n=e.settings,r=Object(o.useState)(null),l=Object(ge.a)(r,2),s=l[0],i=l[1],u=function(e,t){return"".concat(e," ").concat(t).concat(1!==e?"s":"")};return Object(o.useEffect)((function(){return function(){a()}}),[]),c.a.createElement(c.a.Fragment,null,c.a.createElement(je,{title:"Manage Accounts"},c.a.createElement(Ra,null),c.a.createElement(jn,{curStudent:s,settings:n})),t&&c.a.createElement(fa,null,"Created ",u(t.tasksCreated,"assignment"),", imported"," ",u(t.scoresImported,"score"),", and updated"," ",u(t.scoresUpdated,"score")),c.a.createElement(me.a,{container:!0,spacing:4},c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(La,{onChange:function(e){i(e)}})),c.a.createElement(me.a,{item:!0,xs:12},s&&c.a.createElement(Qt,{student:s}))))})),Dn=Object(w.a)((function(e){return{icon:{marginRight:e.spacing(1)}}})),Pn=Object(r.c)((function(e){return Object(p.a)({},e.courses)}),(function(e){return{onAdd:function(t){return e({type:"ADD_COURSE",payload:Ne.a.Courses.add(t),snackbar:{message:"Course added",variant:"success"}})},onExit:function(){return e({type:"COURSE_DIALOG_UNLOADED"})},onUpdate:function(t){return e({type:"UPDATE_COURSE",payload:Ne.a.Courses.update(t),snackbar:{message:"Course updated",variant:"success"}})}}}))((function(e){var t=e.course,a=e.errors,n=e.inProgress,r=e.onAdd,l=e.onExit,s=e.onUpdate,i=Object(o.useState)(!1),u=Object(ge.a)(i,2),m=u[0],d=u[1],E=Object(We.a)(),f=Object(He.a)(E.breakpoints.down("md")),b=Dn(),g=function(){d(!0)},h=function(){d(!1)},v=function(e){r(Object(p.a)({},e))},y=function(e){s(Object(p.a)(Object(p.a)({},t),e))};return Object(o.useEffect)((function(){n||a||d(!1)}),[n]),c.a.createElement(c.a.Fragment,null,t?c.a.createElement(Ge,{action:"Edit course",onClick:g},c.a.createElement(Me.a,null)):c.a.createElement(ie.a,{color:"primary",onClick:g,variant:"extended"},c.a.createElement(st.a,{className:b.icon}),"Create course"),c.a.createElement(O.a,{fullScreen:f,onClick:function(e){return e.stopPropagation()},onClose:h,onExit:l,onFocus:function(e){return e.stopPropagation()},open:m},c.a.createElement(ce.c,{initialValues:{name:(null===t||void 0===t?void 0:t.name)||"",period:(null===t||void 0===t?void 0:t.period)||""},validationSchema:se.c({name:se.d().required("Required"),period:se.b().typeError("Numbers only").required("Required")}),onSubmit:function(){var e=Object(oe.a)(re.a.mark((function e(a){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t?y(a):v(a);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},c.a.createElement(ce.b,null,c.a.createElement(S.a,null,t?"Edit Course":"Create Course"),c.a.createElement(j.a,null,c.a.createElement(Oe,{errors:a}),c.a.createElement(me.a,{container:!0,spacing:2},c.a.createElement(me.a,{item:!0,xs:12,md:6},c.a.createElement(ce.a,{autoFocus:!t,color:"primary",component:le.c,disabled:n,label:"Course Name",name:"name",type:"text",fullWidth:!0})),c.a.createElement(me.a,{item:!0,xs:12,md:6},c.a.createElement(ce.a,{color:"primary",component:le.c,disabled:n,label:"Period",name:"period",type:"text",fullWidth:!0})))),c.a.createElement(A.a,null,c.a.createElement(D.a,{disabled:n,color:"primary",type:"submit",variant:"contained"},t?n?"Updating...":"Update":n?"Adding...":"Add"),c.a.createElement(D.a,{disabled:n,onClick:h,variant:"contained"},"Cancel"))))))})),Cn=Object(r.c)((function(){return{}}),(function(e){return{onDelete:function(t){return e({type:"DELETE_STUDENT",payload:Ne.a.Students.delete(t),snackbar:{message:"Student deleted",variant:"success"}})}}}))((function(e){e.course;var t=e.onDelete,a=e.student,n=Object(o.useState)(!1),r=Object(ge.a)(n,2),l=r[0],s=r[1],i=function(){s(!1)};return c.a.createElement(c.a.Fragment,null,c.a.createElement(Ge,{action:"Delete student",onClick:function(){s(!0)},size:"small"},c.a.createElement(ct.a,{fontSize:"inherit"})),c.a.createElement(O.a,{open:l,onClose:i,onClick:function(e){return e.stopPropagation()},onFocus:function(e){return e.stopPropagation()}},c.a.createElement(S.a,null,"Delete Student"),c.a.createElement(j.a,null,c.a.createElement(Ct.a,{component:"div"},"Are you sure you want to delete"," ",c.a.createElement("b",null,a.firstName," ",a.lastName),"? This action will permanently delete:",c.a.createElement("ul",null,c.a.createElement("li",null,"the student's account, and"),c.a.createElement("li",null,"all song requests"),c.a.createElement("li",null,"all transactions"),c.a.createElement("li",null,"all hallpasses"),c.a.createElement("li",null,"all purchases"),c.a.createElement("li",null,"all scores")),"associated with this student. This action ",c.a.createElement("b",null,"cannot be undone"),".")),c.a.createElement(A.a,null,c.a.createElement(D.a,{onClick:function(){s(!1),t(a)},color:"secondary",variant:"contained",autoFocus:!0},"Delete"),c.a.createElement(D.a,{onClick:i,variant:"contained"},"Cancel"))))})),Tn=a(867),Nn=Object(r.c)((function(e){return Object(p.a)(Object(p.a)({},e.common.settings),e.courses)}),(function(e){return{onAdd:function(t,a){return e({type:"ADD_STUDENT",payload:Ne.a.Students.add(t,a),courseId:a,snackbar:{message:"Student added",variant:"success"}})},onExit:function(){return e({type:"STUDENT_DIALOG_UNLOADED"})},onUpdate:function(t,a){return e({type:"UPDATE_STUDENT",payload:Ne.a.Students.update(t),courseId:a,snackbar:{message:"Student updated",variant:"success"}})}}}))((function(e){var t=e.course,a=e.defaultStudentPassword,n=e.errors,r=e.inProgress,l=e.onAdd,s=e.onExit,i=e.onUpdate,u=e.prime,m=e.student,d=Object(o.useState)(!1),E=Object(ge.a)(d,2),f=E[0],b=E[1],g=Object(We.a)(),h=Object(He.a)(g.breakpoints.down("md")),v=function(){b(!0)},y=function(){b(!1)},P=function(e){var a=Object(p.a)({},e),n=t._id;a.role="student",l(a,n)},C=function(e){var a=Object(p.a)(Object(p.a)({},m),e),n=t._id;i(a,n)};return Object(o.useEffect)((function(){r||n||b(!1)}),[r]),c.a.createElement(c.a.Fragment,null,m?c.a.createElement(Ge,{action:"Edit student",onClick:v,size:"small"},c.a.createElement(Me.a,{fontSize:"inherit"})):c.a.createElement(Ge,{action:"Add student",onClick:v},c.a.createElement(Tn.a,null)),c.a.createElement(O.a,{fullScreen:h,maxWidth:"md",onClick:function(e){return e.stopPropagation()},onClose:y,onExit:s,onFocus:function(e){return e.stopPropagation()},open:f},c.a.createElement(ce.c,{initialValues:{firstName:(null===m||void 0===m?void 0:m.firstName)||"",lastName:(null===m||void 0===m?void 0:m.lastName)||"",username:(null===m||void 0===m?void 0:m.username)||"",password:m?"":a,dropped:(null===m||void 0===m?void 0:m.dropped)||!1,hasPrime:(null===m||void 0===m?void 0:m.hasPrime)||!1},validationSchema:se.c({firstName:se.d().required("Required"),lastName:se.d().required("Required"),username:se.b().typeError("Numbers only").required("Required"),password:se.d().required(m?"":"Required"),dropped:se.a(),hasPrime:se.a()}),onSubmit:function(){var e=Object(oe.a)(re.a.mark((function e(t){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m?C(t):P(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},(function(e){return c.a.createElement(ce.b,null,c.a.createElement(S.a,null,m?"Edit Student":"Add Student"),c.a.createElement(j.a,null,c.a.createElement(Oe,{errors:n}),c.a.createElement(me.a,{container:!0,spacing:2},c.a.createElement(me.a,{item:!0,xs:12,md:6},c.a.createElement(ce.a,{autoFocus:!m,color:"primary",component:le.c,disabled:r,label:"First Name",name:"firstName",type:"text",fullWidth:!0})),c.a.createElement(me.a,{item:!0,xs:12,md:6},c.a.createElement(ce.a,{color:"primary",component:le.c,disabled:r,label:"Last Name",name:"lastName",type:"text",fullWidth:!0})),c.a.createElement(me.a,{item:!0,xs:12,md:6},c.a.createElement(ce.a,{color:"primary",component:le.c,disabled:!!m||r,label:"Student Number",name:"username",type:"text",fullWidth:!0})),c.a.createElement(me.a,{item:!0,xs:12,md:6},c.a.createElement(ce.a,{color:"primary",component:le.c,disabled:r,label:"Password",name:"password",type:"text",fullWidth:!0})),m&&c.a.createElement(me.a,{item:!0,xs:12,md:6},c.a.createElement("label",null,c.a.createElement(ce.a,{component:le.b,name:"dropped",type:"checkbox"}),"Student is"," ",e.values.dropped?"dropped":"active")),m&&u.enabled&&c.a.createElement(me.a,{item:!0,xs:12,md:6},c.a.createElement("label",null,c.a.createElement(ce.a,{component:le.b,name:"hasPrime",type:"checkbox"}),"Prime is"," ",e.values.hasPrime?"enabled":"disabled")))),c.a.createElement(A.a,null,c.a.createElement(D.a,{color:"primary",disabled:r,type:"submit",variant:"contained"},m?r?"Updating...":"Update":r?"Adding...":"Add"),c.a.createElement(D.a,{disabled:r,onClick:y,variant:"contained"},"Cancel")))}))))})),wn=a(868),_n=Object(r.c)((function(e){return Object(p.a)({},e.courses)}),(function(e){return{onSubmit:function(t,a){return e({type:"MOVE_STUDENT",payload:Promise.all([Ne.a.Courses.unenroll(t),Ne.a.Courses.enroll(a)]),snackbar:{message:"Student moved",variant:"success"}})}}}))((function(e){var t=e.course,a=e.courses,n=e.errors,r=e.inProgress,l=e.onSubmit,s=e.student,i=Object(o.useState)(!1),u=Object(ge.a)(i,2),m=u[0],d=u[1],p=function(){d(!1)},E=function(e){if(t.slug!==e.course){var a={usernames:[s.username],slug:t.slug},n={usernames:[s.username],slug:e.course};l(a,n)}};return Object(o.useEffect)((function(){r||n||d(!1)}),[r]),c.a.createElement(c.a.Fragment,null,c.a.createElement(Ge,{action:"Move student",onClick:function(){d(!0)},size:"small"},c.a.createElement(wn.a,{fontSize:"inherit"})),c.a.createElement(O.a,{open:m,onClose:p,onClick:function(e){return e.stopPropagation()},onFocus:function(e){return e.stopPropagation()}},c.a.createElement(ce.c,{initialValues:{course:t.slug||""},validationSchema:se.c({course:se.d().required("Required")}),onSubmit:function(){var e=Object(oe.a)(re.a.mark((function e(t){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},(function(e){return c.a.createElement(ce.b,null,c.a.createElement(S.a,null,"Move Student"),c.a.createElement(j.a,null,c.a.createElement(Oe,{errors:n}),c.a.createElement(me.a,{container:!0,spacing:2},c.a.createElement(me.a,{item:!0,ds:12},"Move"," ",c.a.createElement("b",null,s.firstName," ",s.lastName)," ","to..."),c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(ce.a,{color:"primary",component:le.c,disabled:r,id:"course",label:"Course",name:"course",type:"select",select:!0,fullWidth:!0},a.map((function(e){return c.a.createElement(Ee.a,{key:e.slug,value:e.slug},"Period ".concat(e.period," | ").concat(e.name))})))))),c.a.createElement(A.a,null,c.a.createElement(D.a,{color:"primary",disabled:r||e.values.course===t.slug,type:"submit",variant:"contained"},r?"Moving...":"Move"),c.a.createElement(D.a,{onClick:p,variant:"contained"},"Cancel")))}))))})),kn=Object(w.a)((function(e){return{row:{alignItems:"center",display:"flex",height:e.spacing(6),justifyContent:"space-between",padding:e.spacing(1),"&:hover":{backgroundColor:e.palette.action.hover}},rowHeader:{alignItems:"center",display:"flex"},studentUsername:{marginRight:e.spacing(2),minWidth:e.spacing(12)}}})),xn=function(e){var t=e.course,a=e.student,n=kn();return c.a.createElement("div",{className:n.row},c.a.createElement("div",{className:n.rowHeader},c.a.createElement(Ot.a,{color:"primary",label:a.username,className:n.studentUsername}),c.a.createElement(x.a,null,a.lastName,", ",a.firstName),a.hasPrime&&c.a.createElement(Te,null),a.dropped&&c.a.createElement(jt,null)),c.a.createElement("div",null,c.a.createElement(Nt,{student:a}),c.a.createElement(_n,{course:t,student:a}),c.a.createElement(Nn,{course:t,student:a}),c.a.createElement(Cn,{course:t,student:a})))},Rn=function(e){var t=e.course;return c.a.createElement(c.a.Fragment,null,c.a.createElement(x.a,{variant:"h6"},"Students")," ",t.students&&t.students.length>0?t.students.map((function(e){return c.a.createElement(xn,{key:e._id,course:t,student:e})})):c.a.createElement("div",null,c.a.createElement(x.a,null,"No students have been added to this course")))},Un=Object(r.c)((function(){return{}}),(function(e){return{onDelete:function(t){return e({type:"DELETE_COURSE",payload:Ne.a.Courses.delete(t),snackbar:{message:"Course deleted",variant:"success"}})}}}))((function(e){var t=e.course,a=e.onDelete,n=Object(o.useState)(!1),r=Object(ge.a)(n,2),l=r[0],s=r[1],i=function(){s(!1)};return c.a.createElement(c.a.Fragment,null,c.a.createElement(Ge,{action:"Delete course",onClick:function(){s(!0)}},c.a.createElement(ct.a,null)),c.a.createElement(O.a,{open:l,onClose:i,onClick:function(e){return e.stopPropagation()},onFocus:function(e){return e.stopPropagation()}},c.a.createElement(S.a,null,"Delete Course"),c.a.createElement(j.a,null,c.a.createElement(Ct.a,{component:"div"},"Are you sure you want to delete"," ",c.a.createElement("b",null,t.name," Period ",t.period),"? This action will permanently delete:",c.a.createElement("ul",null,c.a.createElement("li",null,"all student accounts"),c.a.createElement("li",null,"all song requests"),c.a.createElement("li",null,"all notifications"),c.a.createElement("li",null,"all transactions"),c.a.createElement("li",null,"all hallpasses"),c.a.createElement("li",null,"all purchases"),c.a.createElement("li",null,"all scores")),"associated with this course. This action ",c.a.createElement("b",null,"cannot be undone"),".")),c.a.createElement(A.a,null,c.a.createElement(D.a,{onClick:function(){s(!1),a(t.slug)},color:"secondary",variant:"contained",autoFocus:!0},"Delete"),c.a.createElement(D.a,{onClick:i,variant:"contained"},"Cancel"))))})),Ln=Object(w.a)((function(e){return{avatar:{backgroundColor:e.palette.secondary.main,margin:"0 auto",marginBottom:e.spacing(2)},button:{marginLeft:e.spacing(2)},card:{height:"100%"},controls:{alignItems:"center",display:"flex"},title:{color:e.palette.common.white,margin:"0 auto"}}})),In=function(e){var t=e.course,a=Object(o.useState)(!1),n=Object(ge.a)(a,2),r=n[0],l=n[1],s=Object(o.useState)(10),i=Object(ge.a)(s,2),u=i[0],m=i[1],d=Object(o.useState)([]),p=Object(ge.a)(d,2),E=p[0],f=p[1],b=Ln(),g=function(){l(!1)},h=function(e){var t=function(e){for(var t=Object(ke.a)(e),a=[];0!==t.length;){var n=Math.floor(Math.random()*t.length);a.push(t[n]),t.splice(n,1)}return a}(e),a=Object(ke.a)(new Array(u)).map((function(){return[]}));return t.forEach((function(e,t){a[t%u].push(e)})),a};return c.a.createElement(c.a.Fragment,null,c.a.createElement(Ge,{action:"Random group generator",onClick:function(){l(!0)}},c.a.createElement(ga.a,null)),c.a.createElement(O.a,{fullScreen:!0,open:r,onClick:function(e){return e.stopPropagation()},onClose:g,onFocus:function(e){return e.stopPropagation()},TransitionComponent:_a},c.a.createElement(_.a,{position:"relative"},c.a.createElement(k.a,null,c.a.createElement(Be.a,{edge:"start",onClick:g},c.a.createElement(qe.a,null)),c.a.createElement(x.a,{variant:"h5",className:b.title},"Random Group Generator"))),c.a.createElement(ee,null,c.a.createElement(y.a,null,c.a.createElement(je,{title:"Period ".concat(t.period," | ").concat(t.name)}),c.a.createElement(me.a,{container:!0,spacing:6},c.a.createElement(me.a,{item:!0,xs:12,className:b.controls},c.a.createElement(Je.a,{id:"groups",label:"Number of Groups",onChange:function(e){f([]);var t=Number(e.target.value);m(t<2?2:t>20?20:t)},type:"number",value:u,variant:"outlined"}),c.a.createElement(D.a,{className:b.button,color:"primary",onClick:function(){var e=t.students.filter((function(e){return!e.dropped}));f(h(e))},variant:"contained"},"Create Groups")),c.a.createElement(me.a,{container:!0,spacing:2,item:!0,xs:12},E.map((function(e,t){return c.a.createElement(me.a,{item:!0,xs:u>2?4:6},c.a.createElement(Xt.a,{className:b.card,variant:"outlined"},c.a.createElement(ea.a,null,c.a.createElement(Ca.a,{className:b.avatar,color:"secondary"},t+1),e.map((function(e){return c.a.createElement(x.a,{align:"center",variant:"h5"},e.firstName," ",e.lastName.charAt(0))})))))}))))))))},qn=Object(r.c)((function(e){return Object(p.a)(Object(p.a)({},e.common.settings),e.courses)}),(function(e){return{onDrop:function(t,a){return e({type:"IMPORT_STUDENTS",payload:Ne.a.Students.import(t,a),snackbar:{message:"Students imported",variant:"success"}})},onExit:function(){return e({type:"STUDENT_DIALOG_UNLOADED"})}}}))((function(e){var t=e.course,a=e.defaultStudentPassword,n=e.errors,r=e.inProgress,l=e.onDrop,s=e.onExit,i=e.schoolDistrict,u=Object(o.useState)(!1),m=Object(ge.a)(u,2),d=m[0],p=m[1],E=Object(We.a)(),f=Object(He.a)(E.breakpoints.down("md")),b=function(){p(!1)};return Object(o.useEffect)((function(){r||n||p(!1)}),[r]),c.a.createElement(c.a.Fragment,null,c.a.createElement(Ge,{action:"Import students",onClick:function(){p(!0)}},c.a.createElement(Fa.a,null)),c.a.createElement(O.a,{fullScreen:f,onClick:function(e){return e.stopPropagation()},onClose:b,onExit:s,onFocus:function(e){return e.stopPropagation()},open:d},c.a.createElement(S.a,null,"Import Students"),c.a.createElement(j.a,null,r?c.a.createElement(Pa,{message:"Importing..."}):c.a.createElement(c.a.Fragment,null,c.a.createElement(x.a,{gutterBottom:!0},"Students can be imported from a .csv file exported from Infinite Campus"),c.a.createElement(Za,{onFiledrop:function(e){try{var n=nn[i].students(e,a);l(n,t._id)}catch(r){alert("[ERROR] Invalid file type or improperly formatted file")}}}))),c.a.createElement(A.a,null,c.a.createElement(D.a,{disabled:r,onClick:b,variant:"contained"},"Cancel"))))})),Mn=a(869),Bn=a(884),Fn=a(547),Gn=a(546),Wn=function(e){var t=e.course,a=e.scores,n=e.task,r=Object(o.useState)(1),l=Object(ge.a)(r,2),s=l[0],i=l[1],u=Object(o.useState)("#4caf50"),m=Object(ge.a)(u,2),d=m[0],p=m[1],E=[["Student","Score"]].concat(Object(ke.a)(a.map((function(e){return["".concat(e.student.firstName," ").concat(e.student.lastName),e.value]})))),f={title:"Period ".concat(t.period," | ").concat(n.title," | ").concat(Math.round(100*(a.reduce((function(e,t){return e+t.value}),0)/a.length/n.totalPoints||1)),"% avg."),hAxis:{title:"Score"},vAxis:{title:"Number of Students",minorGridlines:{count:0}},legend:{position:"none"},colors:[d],histogram:{bucketSize:s,minValue:0,maxValue:n.totalPoints}};return c.a.createElement(me.a,{container:!0,spacing:2},c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(Fn.a,{chartType:"Histogram",width:"100%",height:"400px",data:E,options:f})),c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(mn.a,null,c.a.createElement(dn.a,{expandIcon:c.a.createElement(En.a,null)},c.a.createElement(x.a,{variant:"h6"},"Histogram Settings")),c.a.createElement(pn.a,null,c.a.createElement(me.a,{container:!0,spacing:2},c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(x.a,{gutterBottom:!0},"Bucket Size"),c.a.createElement(Bn.a,{defaultValue:1,step:1,marks:!0,min:1,max:n.totalPoints,onChange:function(e,t){i(t)},valueLabelDisplay:"auto"})),c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(x.a,{gutterBottom:!0},"Bar Color"),c.a.createElement(Gn.a,{color:d,onChange:function(e){p(e.hex)}})))))))},Hn=a(534),Yn=function(e){var t=e.scores,a=e.task,n=function(){return t.reduce((function(e,t){return e+t.value}),0)/t.length},r=function(){return{pass:t.filter((function(e){return e.value>=.6*a.totalPoints})).length,fail:t.filter((function(e){return e.value<.6*a.totalPoints})).length}},o=function(e,t){return 100*(e/t||1)},l={average:{score:n(),percent:o(n(),a.totalPoints)},grades:{A:t.filter((function(e){return e.value>=.9*a.totalPoints})).length,B:t.filter((function(e){return e.value<.9*a.totalPoints&&e.value>=.8*a.totalPoints})).length,C:t.filter((function(e){return e.value<.8*a.totalPoints&&e.value>=.7*a.totalPoints})).length,D:t.filter((function(e){return e.value<.7*a.totalPoints&&e.value>=.6*a.totalPoints})).length,F:t.filter((function(e){return e.value<.6*a.totalPoints})).length},passFail:{fail:{count:r().fail,percent:Math.round(o(r().fail,t.length))},pass:{count:r().pass,percent:Math.round(o(r().pass,t.length))}}},s=function(e){var a=e.grade;return c.a.createElement(Na,{icon:c.a.createElement(De.a,{icon:Hn.a,size:"lg"}),lg:3,title:a},Math.round(o(l.grades[a],t.length)),"% (",l.grades[a],")")};return c.a.createElement(me.a,{container:!0,spacing:3},c.a.createElement(Na,{icon:c.a.createElement(De.a,{icon:Pe.c,size:"lg"}),lg:6,precision:1,round:!0,title:"Average Score",value:l.average.score}),c.a.createElement(Na,{icon:c.a.createElement(De.a,{icon:Pe.g,size:"lg"}),lg:6,precision:1,round:!0,title:"Average Percent",value:l.average.percent,percent:!0}),c.a.createElement(Na,{icon:c.a.createElement(De.a,{icon:Pe.k,size:"lg"}),lg:6,title:"Pass Rate"},l.passFail.pass.percent,"% (",l.passFail.pass.count,")"),c.a.createElement(Na,{icon:c.a.createElement(De.a,{icon:Pe.j,size:"lg"}),lg:6,title:"Fail Rate"},l.passFail.fail.percent,"% (",l.passFail.fail.count,")"),c.a.createElement(s,{grade:"A"}),c.a.createElement(s,{grade:"B"}),c.a.createElement(s,{grade:"C"}),c.a.createElement(s,{grade:"D"}))},zn=function(e){var t=e.scores,a=e.task,n=Object(o.useState)([]),r=Object(ge.a)(n,2),l=r[0],s=r[1],i=t.map((function(e){return{firstName:e.student.firstName,lastName:e.student.lastName,score:"".concat(e.value," / ").concat(a.totalPoints),percent:"".concat(Math.round(100*(e.value/a.totalPoints||1)),"%")}})),u=Object(o.useState)([{title:"Last Name",field:"lastName"},{title:"First Name",field:"firstName"},{title:"Score",field:"score"},{title:"Percent",field:"percent"}]),m=Object(ge.a)(u,1)[0];return Object(o.useEffect)((function(){s(i)}),[t]),c.a.createElement(Ue.a,{columns:m,data:l,localization:{body:{emptyDataSourceMessage:"No scores found for this assignment"}},options:{grouping:!0,paging:!1},title:"Student Scores"})},Vn=Object(w.a)((function(e){return{icon:{color:e.palette.text.primary},title:{color:e.palette.common.white,margin:"0 auto"}}})),Qn=Object(r.c)((function(e){return Object(p.a)({},e.tasks)}),(function(e){return{onLoad:function(t){return e({type:"LOAD_TASK_SCORES",payload:Ne.a.Scores.getTaskScores(t)})},onUnload:function(){return e({type:"UNLOAD_TASK_SCORES"})}}}))((function(e){var t=e.course,a=e.errors,n=e.inProgress,r=e.onLoad,l=e.onUnload,s=e.scores,i=e.task,u=Object(o.useState)(!1),m=Object(ge.a)(u,2),d=m[0],p=m[1],E=Vn(),f=function(){p(!1),l()};return c.a.createElement(c.a.Fragment,null,c.a.createElement(Ge,{action:"View data",className:E.icon,onClick:function(){r(i.id),p(!0)}},c.a.createElement(Mn.a,null)),c.a.createElement(O.a,{fullScreen:!0,open:d,onClick:function(e){return e.stopPropagation()},onClose:f,onFocus:function(e){return e.stopPropagation()},TransitionComponent:_a},c.a.createElement(_.a,{position:"relative"},c.a.createElement(k.a,null,c.a.createElement(Be.a,{edge:"start",onClick:f},c.a.createElement(qe.a,null)),c.a.createElement(x.a,{variant:"h5",className:E.title},"Assignment Data Viewer"))),c.a.createElement(ee,null,c.a.createElement(y.a,null,c.a.createElement(je,{title:i.title},c.a.createElement(x.a,{variant:"h5"},"Period ",t.period," | ",t.name)),c.a.createElement(Oe,{errors:a}),n?c.a.createElement(Pa,{message:"Loading..."}):c.a.createElement(me.a,{container:!0,spacing:4},c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(Yn,{scores:s,task:i})),c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(Wn,{course:t,scores:s,task:i})),c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(zn,{scores:s,task:i})))))))})),Kn=Object(r.c)((function(e){return{tasks:e.tasks.tasks}}),(function(e){return{onDelete:function(t){return e({type:"DELETE_TASK",payload:Ne.a.Tasks.delete(t),snackbar:{message:"Assignment deleted",variant:"success"}})},onLoad:function(t){return e({type:"TASKS_DIALOG_LOADED",payload:Ne.a.Tasks.getAll(t)})},onUpdate:function(t){return e({type:"UPDATE_TASK",payload:Ne.a.Tasks.update(t),snackbar:{message:"Assignment updated",variant:"success"}})}}}))((function(e){var t=e.course,a=e.onDelete,n=e.onLoad,r=e.onUpdate,l=e.tasks,s=Object(o.useState)([]),i=Object(ge.a)(s,2),u=i[0],m=i[1],d=l.map((function(e){return{createdAt:Ie()(e.createdAt),createdAtString:e.createdAt,id:e._id,multiplier:e.multiplier,slug:e.slug,title:e.title,totalPoints:e.totalPoints}})),E=Object(o.useState)([{title:"Date",field:"createdAt",editable:"never",render:function(e,t){return"row"===t?e.createdAt.format("ddd, MMM D, YYYY"):e.format("ddd, MMM D, YYYY")}},{title:"Title",field:"title",editable:"never"},{title:"Total Points",field:"totalPoints"},{title:"Multiplier",field:"multiplier"}]),f=Object(ge.a)(E,1)[0];return Object(o.useEffect)((function(){n(t._id)}),[]),Object(o.useEffect)((function(){m(d)}),[l]),c.a.createElement(Ue.a,{actions:[{component:"TaskDataDialog",icon:"assessment",position:"row",tooltip:"View data"}],columns:f,components:{Action:function(e){return"TaskDataDialog"===e.action.component?c.a.createElement(Qn,{course:t,task:e.data}):c.a.createElement(Re.MTableAction,e)}},data:u,localization:{body:{emptyDataSourceMessage:"No assignments found for this course",editRow:{deleteText:"Delete assignment? This will delete all scores for this assignment.",saveTooltip:"Confirm"}}},options:{actionsColumnIndex:-1,paging:!1,showTitle:!1},editable:{onRowUpdate:function(e,t){return new Promise((function(a,n){var o=Object(ke.a)(u);o[t.tableData.id]=Object(p.a)(Object(p.a)({},e),{},{createdAt:Ie()(e.createdAtString)}),m(Object(ke.a)(o)),r(e),a()}))},onRowDelete:function(e){return new Promise((function(t,n){var r=Object(ke.a)(u),o=e.tableData.id;r.splice(o,1),m(Object(ke.a)(r)),a(e),t()}))}}})})),Jn=Object(w.a)((function(e){return{dialog:{"& > .MuiDialog-container > .MuiPaper-root":Object(xe.a)({},e.breakpoints.up("lg"),{minHeight:e.spacing(54),width:e.spacing(100)})}}})),$n=Object(r.c)((function(e){return Object(p.a)({},e.tasks)}),(function(e){return{onExit:function(){return e({type:"TASKS_DIALOG_UNLOADED"})}}}))((function(e){var t=e.course,a=e.errors,n=e.inProgress,r=e.onExit,l=Object(o.useState)(!1),s=Object(ge.a)(l,2),i=s[0],u=s[1],m=Object(We.a)(),d=Object(He.a)(m.breakpoints.down("md")),p=Jn(),E=function(){u(!1)};return c.a.createElement(c.a.Fragment,null,c.a.createElement(Ge,{action:"Manage assignments",onClick:function(){u(!0)}},c.a.createElement(va.a,null)),c.a.createElement(O.a,{className:p.dialog,fullScreen:d,onClick:function(e){return e.stopPropagation()},onClose:E,onExit:r,onFocus:function(e){return e.stopPropagation()},open:i},c.a.createElement(S.a,null,"Manage Assignments"),c.a.createElement(j.a,null,c.a.createElement(Oe,{errors:a}),c.a.createElement(Kn,{course:t})),c.a.createElement(A.a,null,c.a.createElement(D.a,{disabled:n,onClick:E,variant:"contained"},"Close"))))})),Xn=Object(w.a)((function(e){return{courseDetails:{display:"block"},courseHeader:{alignItems:"center",display:"flex",justifyContent:"space-between",width:"100%"},coursePeriod:{backgroundColor:e.palette.secondary.main,marginRight:e.spacing(2)},courseTitle:{flexGrow:"1"}}})),Zn=function(e){var t=e.courses,a=Object(o.useState)(!1),n=Object(ge.a)(a,2),r=n[0],l=n[1],s=Xn();return c.a.createElement(c.a.Fragment,null,(null===t||void 0===t?void 0:t.length)>0?t.map((function(e){return c.a.createElement(mn.a,{expanded:r===e._id,key:e._id,onChange:(t=e._id,function(e,a){l(!!a&&t)})},c.a.createElement(dn.a,{expandIcon:c.a.createElement(En.a,null)},c.a.createElement("div",{className:s.courseHeader},c.a.createElement(Ca.a,{className:s.coursePeriod},e.period),c.a.createElement(x.a,{className:s.courseTitle,variant:"h5"},e.name),c.a.createElement($n,{course:e}),c.a.createElement(In,{course:e}),c.a.createElement(Nn,{course:e}),c.a.createElement(qn,{course:e}),c.a.createElement(Pn,{course:e}),c.a.createElement(Un,{course:e}))),c.a.createElement(pn.a,{className:s.courseDetails},c.a.createElement(Rn,{course:e})));var t})):c.a.createElement(x.a,null,"You have no courses"))},er=Object(r.c)((function(e){return Object(p.a)({},e.courses)}),(function(e){return{onLoad:function(){return e({type:"COURSES_PAGE_LOADED",payload:Ne.a.Courses.getAll()})},onUnload:function(){return e({type:"COURSES_PAGE_UNLOADED"})}}}))((function(e){var t=e.courses,a=e.importCount,n=e.importFailed,r=e.onLoad,l=e.onUnload,s=e.pageLoaded;return Object(o.useEffect)((function(){return r(),function(){l()}}),[]),c.a.createElement(c.a.Fragment,null,c.a.createElement(je,{title:"Manage Courses"},c.a.createElement(Pn,null)),null!==a&&c.a.createElement(fa,null,a," students imported",c.a.createElement("br",null),n>0&&"".concat(n," students not imported (already have accounts)")),s?c.a.createElement(Pa,{message:"Loading..."}):c.a.createElement(Zn,{courses:t}))})),tr=a(827),ar=a(385),nr=a(880),rr=a(870),or=a(871),cr=a(872),lr=a(826),sr=Object(w.a)((function(e){return{badge:{left:"-6%",top:"-30%"}}})),ir=function(e){var t=e.children,a=e.value,n=sr();return c.a.createElement(lr.a,{anchorOrigin:{horizontal:"left",vertical:"top"},badgeContent:a,classes:{badge:n.badge},color:"secondary",overlap:"circle"},t)},ur=Object(w.a)((function(e){return{dialog:{"& > .MuiDialog-container > .MuiPaper-root":Object(xe.a)({},e.breakpoints.up("lg"),{minHeight:e.spacing(54),width:e.spacing(100)})},icon:{marginRight:e.spacing(1)},panel:{minWidth:e.spacing(40),maxWidth:e.spacing(60)},removalAlert:{backgroundColor:e.palette.error.light,border:"2px solid ".concat(e.palette.error.dark),borderRadius:e.spacing(2),color:e.palette.common.white,fontSize:e.typography.h6.fontSize,padding:e.spacing(1),textAlign:"center",textTransform:"uppercase"},selected:{backgroundColor:e.palette.primary.main},songInfo:{marginBottom:e.spacing(4)},statusButton:{"&:hover":{backgroundColor:e.palette.primary.light}},statusDescription:{backgroundColor:"dark"===e.palette.type?e.palette.background.default:e.palette.grey[100],borderRadius:e.spacing(1),marginTop:e.spacing(2),padding:e.spacing(2)},studentInfo:Object(xe.a)({alignItems:"center",display:"flex",justifyContent:"space-between",marginTop:e.spacing(4)},e.breakpoints.up("md"),{borderTopColor:e.palette.primary.main,borderTopStyle:"dotted",borderTopWidth:"4px",paddingTop:e.spacing(2)}),studentName:{alignItems:"center",display:"flex","& > div":{marginRight:e.spacing(1)}}}})),mr=Object(r.c)((function(e){return Object(p.a)(Object(p.a)({},e.songs),{},{prime:e.common.settings.prime,songRemovalPurchaseAmount:e.common.settings.songRemovalPurchaseAmount,songRemovalRefundAmount:e.common.settings.songRemovalRefundAmount,songRemovalRequestEnabled:e.common.settings.songRemovalRequestEnabled,songRequestPurchaseAmount:e.common.settings.songRequestPurchaseAmount})}),(function(e){return{onExit:function(){return e({type:"SONG_REQUESTS_DIALOG_UNLOADED"})},onSubmit:function(t){return e({type:"UPDATE_SONG_REQUEST",payload:Ne.a.Songs.update(t)})}}}))((function(e){var t=e.courses,a=e.errors,n=e.inProgress,r=e.isLoaded,l=e.onExit,s=e.onSubmit,i=e.prime,u=e.songRemovalPurchaseAmount,m=e.songRemovalRefundAmount,d=e.songRemovalRequestEnabled,p=e.songRequestPurchaseAmount,E=Object(o.useState)(0),f=Object(ge.a)(E,2),b=f[0],g=f[1],h=Object(o.useState)(!1),v=Object(ge.a)(h,2),y=v[0],P=v[1],C=Object(o.useState)(null),T=Object(ge.a)(C,2),N=T[0],w=T[1],_=Object(o.useState)(null),k=Object(ge.a)(_,2),R=k[0],U=k[1],L=Object(o.useState)(null),I=Object(ge.a)(L,2),q=I[0],M=I[1],B=Object(o.useState)([]),F=Object(ge.a)(B,2),G=F[0],W=F[1],H=Object(o.useState)(0),Y=Object(ge.a)(H,2),z=Y[0],V=Y[1],Q=Object(We.a)(),K=Object(He.a)(Q.breakpoints.down("md")),J=ur(),$=function(){var e=0;if(t.length>0){var a,n=Object(en.a)(t);try{for(n.s();!(a=n.n()).done;){e+=a.value.songs.filter((function(e){return e.status.startsWith("pending")})).length}}catch(r){n.e(r)}finally{n.f()}}return e},X=function(){if(w(null),t.length>0){var e,a=Object(en.a)(t);try{for(a.s();!(e=a.n()).done;){var n=e.value;if(n.songs.length>0){var r=n.songs.find((function(e){return e.status.startsWith("pending")&&!G.includes(e._id)}));if(r){r.period=n.period,w(r),g(b+1);break}}}}catch(o){a.e(o)}finally{a.f()}}},Z=function(){g(0),P(!1),U(null),M(null),W([]),V($())},ee=function(e){U(e)},te=function(e){M(e.target.value)},ae=function(){var e=Object(oe.a)(re.a.mark((function e(){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s({amount:i.enabled&&N.student.hasPrime?(1-i.songRequestPurchaseDiscount/100)*p:p,id:N._id,status:R,statusDescription:q}),U(null),M(null);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Object(oe.a)(re.a.mark((function e(){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s({id:N._id,purchaseAmount:u,refundAmount:(t=N.student.hasPrime,d&&(!i.enabled||!i.songRemovalEnabled)||i.enabled&&i.songRemovalEnabled&&t?m:0),status:"removed",statusDescription:"".concat(N.removedBy.firstName," ").concat(N.removedBy.lastName," paid to remove this song")});case 1:case"end":return e.stop()}var t}),e)})));return function(){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){V($())}),[r]),Object(o.useEffect)((function(){X()}),[t]),Object(o.useEffect)((function(){X()}),[G]);var ce,le,se=function(){return c.a.createElement(ve.a,{severity:"error"},"This student's account is currently suspended")},ue=function(){return c.a.createElement(c.a.Fragment,null,i.enabled&&c.a.createElement(ve.a,{severity:"success"},"Prime member"))};return c.a.createElement(c.a.Fragment,null,c.a.createElement(ie.a,{color:"primary",onClick:function(){P(!0),V($())},variant:"extended"},c.a.createElement(ir,{value:z},c.a.createElement(rr.a,{className:J.icon}),"Process requests")),c.a.createElement(O.a,{className:J.dialog,fullScreen:K,onClick:function(e){return e.stopPropagation()},onClose:Z,onExit:l,onFocus:function(e){return e.stopPropagation()},open:y},c.a.createElement(S.a,null,"Process Song Requests"),c.a.createElement(j.a,null,c.a.createElement(Oe,{errors:a}),N?"pending removal"!==N.status?c.a.createElement(me.a,{container:!0,spacing:2},c.a.createElement(me.a,{item:!0,xs:12},N.student.dropped&&c.a.createElement(se,null)),c.a.createElement(me.a,{item:!0,xs:12},N.student.hasPrime&&c.a.createElement(ue,null)),c.a.createElement(me.a,{item:!0,xs:12,md:6},c.a.createElement("div",{className:J.panel},c.a.createElement("div",{className:J.songInfo},c.a.createElement(x.a,{variant:"h6"},N.title),c.a.createElement(x.a,{color:"textSecondary",variant:"body1",gutterBottom:!0},"Song"),c.a.createElement(x.a,{variant:"h6"},N.artist),c.a.createElement(x.a,{color:"textSecondary",variant:"body1"},"Artist")),c.a.createElement(tr.a,null,c.a.createElement(D.a,{href:(ce=N.artist,le=N.title,"http://www.google.com/search?q=".concat(encodeURIComponent("lyrics: ".concat(le," by ").concat(ce)))),target:"_blank"},"Search Lyrics"),c.a.createElement(D.a,{href:function(e,t){return"https://open.spotify.com/search/".concat(encodeURIComponent("".concat(t," ").concat(e)))}(N.artist,N.title),target:"_blank"},"Search Spotify")),c.a.createElement("div",{className:J.studentInfo},c.a.createElement("div",{className:J.studentName},c.a.createElement(Ot.a,{color:"secondary",label:N.period}),c.a.createElement(x.a,null,N.student.firstName," ",N.student.lastName),N.student.hasPrime&&c.a.createElement(Te,{size:"2xl"})),c.a.createElement(Ke,{cost:p,count:b,username:N.student.username})))),c.a.createElement(me.a,{item:!0,xs:12,md:6},c.a.createElement("div",{className:J.panel},c.a.createElement(x.a,{variant:"h6"},"Status"),c.a.createElement(tr.a,{fullWidth:!0,size:"large"},c.a.createElement(Ae.a,{arrow:!0,enterTouchDelay:0,title:"Approve"},c.a.createElement(D.a,{className:"".concat(J.statusButton," ").concat("approved"===R&&J.selected),onClick:function(){return ee("approved")}},c.a.createElement(or.a,null))),c.a.createElement(Ae.a,{arrow:!0,enterTouchDelay:0,title:"Reject"},c.a.createElement(D.a,{className:"".concat(J.statusButton," ").concat("rejected"===R&&J.selected),onClick:function(){return ee("rejected")}},c.a.createElement(cr.a,null)))),"approved"===R&&c.a.createElement("div",{className:J.statusDescription},c.a.createElement(x.a,{gutterBottom:!0},c.a.createElement("strong",null,"Condition for Approval")," (optional)"),c.a.createElement(de.a,{component:"fieldset"},c.a.createElement(ar.a,{name:"statusDescription",value:q,onChange:te},c.a.createElement(ra.a,{value:"Clean version",control:c.a.createElement(nr.a,null),label:"Clean version"}),c.a.createElement(ra.a,{value:"Instrumental version",control:c.a.createElement(nr.a,null),label:"Instrumental version"}),c.a.createElement(ra.a,{value:"Picked my best guess",control:c.a.createElement(nr.a,null),label:"Picked my best guess"})))),"rejected"===R&&c.a.createElement("div",{className:J.statusDescription},c.a.createElement(x.a,{gutterBottom:!0},c.a.createElement("strong",null,"Reason for Rejection")," (optional)"),c.a.createElement(de.a,{component:"fieldset"},c.a.createElement(ar.a,{name:"statusDescription",value:q,onChange:te},c.a.createElement(ra.a,{value:"Inappropriate content (language, drugs, sex, and/or violence)",control:c.a.createElement(nr.a,null),label:"Inappropriate content (language, drugs, sex, and/or violence)"}),c.a.createElement(ra.a,{value:"Not available on Spotify",control:c.a.createElement(nr.a,null),label:"Not available on Spotify"}),c.a.createElement(ra.a,{value:"other",control:c.a.createElement(nr.a,null),label:"Other"}))))))):c.a.createElement(me.a,{container:!0,spacing:2},c.a.createElement(me.a,{item:!0,xs:12},N.removedBy.dropped&&c.a.createElement(se,null)),c.a.createElement(me.a,{item:!0,xs:12},N.removedBy.hasPrime&&c.a.createElement(ue,null)),c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement("div",{className:J.panel},c.a.createElement("div",{className:J.songInfo},c.a.createElement(x.a,{variant:"h6"},N.title),c.a.createElement(x.a,{color:"textSecondary",variant:"body1",gutterBottom:!0},"Song"),c.a.createElement(x.a,{variant:"h6"},N.artist),c.a.createElement(x.a,{color:"textSecondary",variant:"body1"},"Artist")),c.a.createElement("div",{className:J.removalAlert},"Removal Requested by"," ","".concat(N.removedBy.firstName," ").concat(N.removedBy.lastName),N.removedBy.hasPrime&&c.a.createElement(Te,null)),c.a.createElement("div",{className:J.studentInfo},c.a.createElement("div",{className:J.studentName},c.a.createElement(Ot.a,{color:"secondary",label:N.period}),c.a.createElement(x.a,null,N.student.firstName," ",N.student.lastName),N.student.hasPrime&&c.a.createElement(Te,{size:"2xl"})),c.a.createElement(Ke,{cost:u,count:b,username:N.removedBy.username}))))):c.a.createElement(ve.a,{severity:"info"},c.a.createElement(At.a,null,"All caught up!"),"There are no songs to process at this time")),c.a.createElement(A.a,null,N&&c.a.createElement(x.a,{style:{marginRight:"auto"},variant:"subtitle2"},"Song ".concat(b," of ").concat(z)),N&&("pending removal"!==N.status?c.a.createElement(D.a,{color:"primary",disabled:n||!R,onClick:ae,variant:"contained"},n?"Saving...":"Save & Continue"):c.a.createElement(D.a,{color:"secondary",disabled:n,onClick:ne,variant:"contained"},n?"Removing...":"Remove & Continue")),N&&c.a.createElement(D.a,{disabled:n,onClick:function(){W([].concat(Object(ke.a)(G),[N._id]))},variant:"contained"},"Skip"),c.a.createElement(D.a,{disabled:n,onClick:Z,variant:"contained"},N?"Cancel":"Close"))))})),dr=Object(r.c)((function(e){return Object(p.a)({},e.songs)}),(function(e){return{onDelete:function(t){return e({type:"DELETE_SONG_REQUEST",payload:Ne.a.Songs.delete(t),snackbar:{message:"Song request deleted",variant:"success"}})},onLoad:function(){return e({type:"TEACHER_SONGS_PAGE_LOADED",payload:Ne.a.Songs.forTeacher()})},onUnload:function(){return e({type:"SONGS_PAGE_UNLOADED"})}}}))((function(e){var t=e.courses,a=e.onDelete,n=e.onLoad,r=e.onUnload,l=Object(o.useState)([]),s=Object(ge.a)(l,2),i=s[0],u=s[1],m=t.map((function(e){return e.songs.map((function(t){return{artist:t.artist,createdAt:Ie()(t.createdAt),dropped:t.student.dropped,hasPrime:t.student.hasPrime,period:e.period,purchasedBy:"".concat(t.student.firstName," ").concat(t.student.lastName," ").concat(t.student.dropped?"(dropped)":""),status:t.status,statusDescription:t.statusDescription,title:t.title,_id:t._id}}))})).flat(),d=Object(o.useState)([{title:"Request Date",field:"createdAt",editable:"never",render:function(e,t){return"row"===t?e.createdAt.format("ddd, MMM D, YYYY"):e.format("ddd, MMM D, YYYY")}},{title:"Song Title",field:"title"},{title:"Song Artist",field:"artist"},{title:"Purchased by",field:"purchasedBy",editable:"never"},{title:"Prime",field:"hasPrime",render:function(e,t){return"row"===t?e.hasPrime?c.a.createElement(Te,null):"":e?c.a.createElement(Te,null):"No Prime"}},{title:"Period",field:"period",editable:"never",render:function(e,t){return"row"===t?c.a.createElement(Ot.a,{label:e.period,color:"secondary"}):c.a.createElement(Ot.a,{label:e,color:"secondary"})}},{title:"Status",field:"status",lookup:{approved:"approved",pending:"pending","pending approval":"pending approval","pending removal":"pending removal",rejected:"rejected",removed:"removed"},render:function(e,t){return"row"===t?c.a.createElement("span",{style:{alignItems:"center",display:"flex"}},e.statusDescription?c.a.createElement(c.a.Fragment,null,e.status,c.a.createElement(Ae.a,{arrow:!0,color:"primary",enterTouchDelay:0,title:e.statusDescription},c.a.createElement(ca.a,{style:{marginLeft:"8px"}}))):e.status):c.a.createElement("span",null,e)}}]),p=Object(ge.a)(d,1)[0];return Object(o.useEffect)((function(){return n(),function(){return r()}}),[]),Object(o.useEffect)((function(){u(m)}),[t]),c.a.createElement(c.a.Fragment,null,c.a.createElement(je,{title:"Manage Song Requests"},c.a.createElement(mr,null)),c.a.createElement(Ue.a,{title:"Song Requests",columns:p,data:i,localization:{body:{emptyDataSourceMessage:"No song requests have been submitted",editRow:{deleteText:"Delete song request?",saveTooltip:"Delete song"}}},options:{actionsColumnIndex:-1,paging:!1,grouping:!0},editable:{onRowDelete:function(e){return new Promise((function(t,n){var r=Object(ke.a)(i),o=e.tableData.id;r.splice(o,1),u(Object(ke.a)(r)),a(e._id),t()}))}}}))})),pr=Object(r.c)((function(e){return{courses:e.purchases.courses,prime:e.common.settings.prime,taxRate:e.common.settings.taxRate}}),(function(e){return{onDelete:function(t){return e({type:"DELETE_PURCHASE",payload:Ne.a.Purchases.delete(t),snackbar:{message:"Purchase deleted",variant:"success"}})}}}))((function(e){var t=e.courses,a=e.onDelete,n=e.prime,r=e.taxRate,l=Object(o.useState)([]),s=Object(ge.a)(l,2),i=s[0],u=s[1],m=n.storePurchaseDiscount,d=n.enabled&&m>0,p=t.map((function(e){return e.purchases.map((function(t){return{createdAt:Ie()(t.createdAt),hasPrime:t.student.hasPrime,note:t.note,period:e.period,products:t.products,purchasedBy:"".concat(t.student.firstName," ").concat(t.student.lastName," ").concat(t.student.dropped?"(dropped)":""),quantities:t.quantities,status:t.status,totalCost:t.products.reduce((function(e,a){return e+a.cost*t.quantities[a._id]*(r/100+1)*(d&&t.student.hasPrime?1-m/100:1)}),0),totalItems:Object.values(t.quantities).reduce((function(e,t){return e+t}),0),_id:t._id}}))})).flat(),E=Object(o.useState)([{title:"Purchase Date",field:"createdAt",editable:"never",render:function(e,t){return"row"===t?e.createdAt.format("ddd, MMM D, YYYY"):e.format("ddd, MMM D, YYYY")}},{title:"Total Items",field:"totalItems"},{title:"Total Cost",field:"totalCost",render:function(e,t){return"row"===t?c.a.createElement(Ve,{value:e.totalCost}):c.a.createElement(Ve,{value:e})}},{title:"Purchased by",field:"purchasedBy"},{title:"Prime",field:"hasPrime",render:function(e,t){return"row"===t?e.hasPrime?c.a.createElement(Te,null):"":e?c.a.createElement(Te,null):"No Prime"}},{title:"Period",field:"period",editable:"never",render:function(e,t){return"row"===t?c.a.createElement(Ot.a,{label:e.period,color:"secondary"}):c.a.createElement(Ot.a,{label:e,color:"secondary"})}},{title:"Notes",field:"note"},{title:"Status",field:"status"}]),f=Object(ge.a)(E,1)[0];return Object(o.useEffect)((function(){u(p)}),[t]),c.a.createElement(Ue.a,{title:"Purchases",columns:f,data:i,localization:{body:{emptyDataSourceMessage:"No purchases have been made",editRow:{deleteText:"Delete purchase?",saveTooltip:"Delete purchase"}}},options:{actionsColumnIndex:-1,paging:!1,grouping:!0},detailPanel:function(e){return c.a.createElement(vt,{hasPrime:e.hasPrime,products:e.products,quantities:e.quantities})},onRowClick:function(e,t,a){return a()},editable:{onRowDelete:function(e){return new Promise((function(t,n){var r=Object(ke.a)(i),o=e.tableData.id;r.splice(o,1),u(Object(ke.a)(r)),a(e._id),t()}))}}})})),Er=Object(w.a)((function(e){return{dialog:{"& > .MuiDialog-container > .MuiPaper-root":Object(xe.a)({},e.breakpoints.up("lg"),{minHeight:e.spacing(54),width:e.spacing(100)})},icon:{marginRight:e.spacing(1)},panel:{minWidth:e.spacing(40),maxWidth:e.spacing(60)},purchaseNote:{backgroundColor:e.palette.grey[100],borderRadius:e.spacing(1),marginTop:e.spacing(2),padding:e.spacing(2)},removalAlert:{backgroundColor:e.palette.error.light,border:"2px solid ".concat(e.palette.error.dark),borderRadius:e.spacing(2),color:e.palette.common.white,fontSize:e.typography.h6.fontSize,padding:e.spacing(1),textAlign:"center",textTransform:"uppercase"},selected:{backgroundColor:e.palette.primary.main},songInfo:{marginBottom:e.spacing(4)},statusButton:{"&:hover":{backgroundColor:e.palette.primary.light}},studentInfo:Object(xe.a)({alignItems:"center",display:"flex",justifyContent:"space-between",marginTop:e.spacing(4)},e.breakpoints.up("md"),{borderTopColor:e.palette.primary.main,borderTopStyle:"dotted",borderTopWidth:"4px",paddingTop:e.spacing(2)}),studentName:{alignItems:"center",display:"flex","& > div":{marginRight:e.spacing(1)}}}})),fr=Object(r.c)((function(e){return Object(p.a)(Object(p.a)({},e.common.settings),e.purchases)}),(function(e){return{onExit:function(){return e({type:"PURCHASES_DIALOG_UNLOADED"})},onUpdate:function(t){return e({type:"UPDATE_PURCHASE",payload:Ne.a.Purchases.update(t)})}}}))((function(e){var t=e.courses,a=e.errors,n=e.inProgress,r=e.isLoaded,l=e.onExit,s=e.onUpdate,i=e.prime,u=Object(o.useState)(0),m=Object(ge.a)(u,2),d=m[0],E=m[1],f=Object(o.useState)({}),b=Object(ge.a)(f,2),g=b[0],h=b[1],v=Object(o.useState)(!1),y=Object(ge.a)(v,2),P=y[0],C=y[1],T=Object(o.useState)(null),N=Object(ge.a)(T,2),w=N[0],_=N[1],k=Object(o.useState)(""),R=Object(ge.a)(k,2),U=R[0],L=R[1],I=Object(o.useState)([]),q=Object(ge.a)(I,2),M=q[0],B=q[1],F=Object(o.useState)(null),G=Object(ge.a)(F,2),W=G[0],H=G[1],Y=Object(o.useState)(0),z=Object(ge.a)(Y,2),V=z[0],Q=z[1],K=Object(We.a)(),J=Object(He.a)(K.breakpoints.down("md")),$=Er(),X=function(){var e=0;if(t.length>0){var a,n=Object(en.a)(t);try{for(n.s();!(a=n.n()).done;){e+=a.value.purchases.filter((function(e){return e.status.startsWith("pending")})).length}}catch(r){n.e(r)}finally{n.f()}}return e},Z=function(){E(0),C(!1),H(null),L(""),B([]),Q(X())},ee=function(){var e=Object(oe.a)(re.a.mark((function e(){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(Object(p.a)(Object(p.a)({},w),{},{id:w._id,note:U,status:W})),H(null),L("");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(e){H(e)};Object(o.useEffect)((function(){Q(X())}),[r]),Object(o.useEffect)((function(){!function(){var e=null===w||void 0===w?void 0:w._id;if(_(null),t.length>0){var a,n=Object(en.a)(t);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(r.purchases.length>0){var o=r.purchases.find((function(e){return e.status.startsWith("pending")&&!M.includes(e._id)}));if(o){o.period=r.period,_(o),e!==o._id&&E(d+1);break}}}}catch(c){n.e(c)}finally{n.f()}}}()}),[t,M]);var ae=function(){return c.a.createElement(ve.a,{severity:"error"},"This student's account is currently suspended")},ne=function(){return c.a.createElement(c.a.Fragment,null,i.enabled&&c.a.createElement(ve.a,{severity:"success"},"Prime member"))};return c.a.createElement(c.a.Fragment,null,c.a.createElement(ie.a,{color:"primary",onClick:function(){C(!0),Q(X())},variant:"extended"},c.a.createElement(ir,{value:V},c.a.createElement(Oa.a,{className:$.icon}),"Process purchases")),c.a.createElement(O.a,{className:$.dialog,fullScreen:J,onClick:function(e){return e.stopPropagation()},onClose:Z,onExit:l,onFocus:function(e){return e.stopPropagation()},open:P},c.a.createElement(S.a,null,"Process Purchases"),c.a.createElement(j.a,null,c.a.createElement(Oe,{errors:a}),w?c.a.createElement(me.a,{container:!0,spacing:2},c.a.createElement(me.a,{item:!0,xs:12},w.student.dropped&&c.a.createElement(ae,null)),c.a.createElement(me.a,{item:!0,xs:12},w.student.hasPrime&&c.a.createElement(ne,null)),c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(vt,{actions:{add:function(e){return function(e){var t=Object(p.a)(Object(p.a)({},w),{},{products:w.products.findIndex((function(t){return t._id===e._id}))>-1?w.products:[].concat(Object(ke.a)(w.products),[e]),quantities:Object(p.a)(Object(p.a)({},w.quantities),{},Object(xe.a)({},e._id,1)),id:w._id});s(t)}(e)},delete:function(e){return function(e,t){var a=t.products.filter((function(t){return t._id!==e})),n=Object(p.a)({},t.quantities);delete n[e],s(Object(p.a)(Object(p.a)({},t),{},{products:a,quantities:n,id:t._id}))}(e,w)},setInvoice:function(e){return h(e)},update:function(e,t){return function(e,t){var a=Object(p.a)(Object(p.a)({},w.quantities),{},Object(xe.a)({},e,t));s(Object(p.a)(Object(p.a)({},w),{},{quantities:a,id:w._id}))}(e,t)}},hasPrime:w.student.hasPrime,products:w.products,quantities:w.quantities})),c.a.createElement(me.a,{item:!0,xs:12,md:6},c.a.createElement("div",{className:$.panel},c.a.createElement("div",{className:$.studentInfo},c.a.createElement("div",{className:$.studentName},c.a.createElement(Ot.a,{color:"secondary",label:w.period}),c.a.createElement(x.a,null,w.student.firstName," ",w.student.lastName),w.student.hasPrime&&c.a.createElement(Te,{size:"2xl"})),c.a.createElement(Ke,{cost:g.total,count:d,username:w.student.username})))),c.a.createElement(me.a,{item:!0,xs:12,md:6},c.a.createElement("div",{className:$.panel},c.a.createElement(x.a,{variant:"h6"},"Status"),c.a.createElement(tr.a,{fullWidth:!0,size:"large"},c.a.createElement(Ae.a,{arrow:!0,enterTouchDelay:0,title:"Approve"},c.a.createElement(D.a,{className:"".concat($.statusButton," ").concat("approved"===W&&$.selected),onClick:function(){return te("approved")}},c.a.createElement(or.a,null))),c.a.createElement(Ae.a,{arrow:!0,enterTouchDelay:0,title:"Decline"},c.a.createElement(D.a,{className:"".concat($.statusButton," ").concat("declined"===W&&$.selected),onClick:function(){return te("declined")}},c.a.createElement(cr.a,null)))),c.a.createElement(Xe,{label:"Notes (optional)",name:"purchaseNote",onChange:L,value:U})))):c.a.createElement(ve.a,{severity:"info"},c.a.createElement(At.a,null,"All caught up!"),"There are no purchases to process at this time")),c.a.createElement(A.a,null,w&&c.a.createElement(c.a.Fragment,null,c.a.createElement(x.a,{style:{marginRight:"auto"},variant:"subtitle2"},"Purchase ".concat(d," of ").concat(V)),c.a.createElement(D.a,{color:"primary",disabled:n||!W,onClick:ee,variant:"contained"},n?"Saving...":"Save & Continue"),c.a.createElement(D.a,{disabled:n,onClick:function(){B([].concat(Object(ke.a)(M),[w._id])),H(null),L("")},variant:"contained"},"Skip")),c.a.createElement(D.a,{disabled:n,onClick:Z,variant:"contained"},w?"Cancel":"Close"))))})),br=Object(r.c)((function(e){return Object(p.a)(Object(p.a)({},e.common.currentUser),e.purchases)}),(function(e){return{onLoad:function(){return e({type:"TEACHER_PURCHASES_LOADED",payload:Ne.a.Purchases.forTeacher()})},onPageChange:function(t,a){return e({type:"NAV_TAB_CHANGE",value:t,redirectTo:a})},onUnload:function(){return e({type:"TEACHER_PURCHASES_UNLOADED"})}}}))((function(e){var t=e.onLoad,a=e.onPageChange,n=e.onUnload,r=e.role;return Object(o.useEffect)((function(){return t(),function(){n()}}),[]),c.a.createElement(c.a.Fragment,null,c.a.createElement(je,{title:"Manage Purchases"},c.a.createElement(D.a,{onClick:function(){return a("store","/".concat(r,"/products"))},size:"small"},"Manage Products"),c.a.createElement(fr,null)),c.a.createElement(pr,null))})),gr=Object(w.a)((function(e){return{button:{marginRight:e.spacing(2)}}})),hr=Object(r.c)((function(){return{}}),(function(e){return{onReset:function(t){return e({type:"WHATS_NEW_FLAGS_RESET",payload:Ne.a.Teachers.resetFlags(t),snackbar:{message:"".concat(t.charAt(0).toUpperCase()+t.slice(1)," flags reset"),variant:"success"}})}}}))((function(e){var t=e.onReset,a=Object(o.useState)(!1),n=Object(ge.a)(a,2),r=n[0],l=n[1],s=gr(),i=function(){l(!1)},u=function(e){l(!1),t(e)};return c.a.createElement(c.a.Fragment,null,c.a.createElement(D.a,{className:s.button,onClick:function(){l(!0)},size:"small"},"Reset Viewed Changes"),c.a.createElement(O.a,{open:r,onClick:function(e){return e.stopPropagation()},onClose:i,onFocus:function(e){return e.stopPropagation()}},c.a.createElement(S.a,null,"Reset Viewed Changes"),c.a.createElement(j.a,null,c.a.createElement(Ct.a,null,"Reset viewed changes flag for all student or teacher accounts?")),c.a.createElement(A.a,null,c.a.createElement(D.a,{onClick:function(){return u("student")},color:"secondary",variant:"contained",autoFocus:!0},"Reset Students"),c.a.createElement(D.a,{onClick:function(){return u("teacher")},color:"secondary",variant:"contained",autoFocus:!0},"Reset Teachers"),c.a.createElement(D.a,{onClick:i,variant:"contained"},"Cancel"))))})),vr=Object(w.a)((function(e){return{icon:{marginRight:e.spacing(1)}}})),yr=Object(r.c)((function(e){return Object(p.a)({},e.teachers)}),(function(e){return{onAdd:function(t){return e({type:"ADD_TEACHER",payload:Ne.a.Auth.register(t),snackbar:{message:"Teacher added",variant:"success"}})},onExit:function(){return e({type:"TEACHER_DIALOG_UNLOADED"})},onUpdate:function(t){return e({type:"UPDATE_TEACHER",payload:Ne.a.Teachers.update(t),snackbar:{message:"Teacher updated",variant:"success"}})}}}))((function(e){var t=e.errors,a=e.inProgress,n=e.onAdd,r=e.onExit,l=e.onUpdate,s=e.teacher,i=Object(o.useState)(!1),u=Object(ge.a)(i,2),m=u[0],d=u[1],E=Object(We.a)(),f=Object(He.a)(E.breakpoints.down("md")),b=vr(),g=function(){d(!0)},h=function(){d(!1)},v=function(e){n(Object(p.a)(Object(p.a)({},e),{},{role:"teacher"}))},y=function(e){l(Object(p.a)(Object(p.a)({},s),e))};return Object(o.useEffect)((function(){a||t||d(!1)}),[a]),c.a.createElement(c.a.Fragment,null,s?c.a.createElement(Ge,{action:"Update teacher",onClick:g},c.a.createElement(Me.a,null)):c.a.createElement(ie.a,{color:"primary",onClick:g,variant:"extended"},c.a.createElement(st.a,{className:b.icon}),"Add teacher"),c.a.createElement(O.a,{fullScreen:f,open:m,onClose:h,onClick:function(e){return e.stopPropagation()},onExit:r,onFocus:function(e){return e.stopPropagation()}},c.a.createElement(ce.c,{initialValues:{firstName:(null===s||void 0===s?void 0:s.firstName)||"",lastName:(null===s||void 0===s?void 0:s.lastName)||"",username:(null===s||void 0===s?void 0:s.username)||"",password:""},validationSchema:se.c({firstName:se.d().required("Required"),lastName:se.d().required("Required"),username:se.d().required("Required"),password:se.d().required(s?"":"Required")}),onSubmit:function(){var e=Object(oe.a)(re.a.mark((function e(t){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s?y(t):v(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},c.a.createElement(ce.b,null,c.a.createElement(S.a,null,s?"Edit Teacher":"Add Teacher"),c.a.createElement(j.a,null,c.a.createElement(Oe,{errors:t}),c.a.createElement(me.a,{container:!0,spacing:2},c.a.createElement(me.a,{item:!0,xs:12,md:6},c.a.createElement(ce.a,{autoFocus:!s,color:"primary",component:le.c,disabled:a,label:"First Name",name:"firstName",type:"text",fullWidth:!0})),c.a.createElement(me.a,{item:!0,xs:12,md:6},c.a.createElement(ce.a,{color:"primary",component:le.c,disabled:a,label:"Last Name",name:"lastName",type:"text",fullWidth:!0})),c.a.createElement(me.a,{item:!0,xs:12,md:6},c.a.createElement(ce.a,{color:"primary",component:le.c,disabled:!!s||a,label:"Username",name:"username",type:"text",fullWidth:!0})),c.a.createElement(me.a,{item:!0,xs:12,md:6},c.a.createElement(ce.a,{color:"primary",component:le.c,disabled:a,label:"Password",name:"password",type:"text",fullWidth:!0})))),c.a.createElement(A.a,null,c.a.createElement(D.a,{color:"primary",disabled:a,type:"submit",variant:"contained"},s?a?"Updating...":"Update":a?"Adding...":"Add"),c.a.createElement(D.a,{disabled:a,onClick:h,variant:"contained"},"Cancel"))))))})),Or=a(788),Sr=a(840),jr=a(784),Ar=Object(r.c)((function(){return{}}),(function(e){return{onDelete:function(t){return e({type:"DELETE_TEACHER",payload:Ne.a.Teachers.delete(t),snackbar:{message:"Teacher deleted",variant:"success"}})}}}))((function(e){var t=e.onDelete,a=e.teacher,n=Object(o.useState)(!1),r=Object(ge.a)(n,2),l=r[0],s=r[1],i=function(){s(!1)};return c.a.createElement(c.a.Fragment,null,c.a.createElement(Ge,{action:"Delete teacher",onClick:function(){s(!0)}},c.a.createElement(ct.a,null)),c.a.createElement(O.a,{open:l,onClick:function(e){return e.stopPropagation()},onClose:i,onFocus:function(e){return e.stopPropagation()}},c.a.createElement(S.a,null,"Delete Teacher"),c.a.createElement(j.a,null,c.a.createElement(Ct.a,{component:"div"},"Are you sure you want to delete"," ",c.a.createElement("b",null,a.firstName," ",a.lastName),"? This action will permanently delete:",c.a.createElement("ul",null,c.a.createElement("li",null,"all student accounts"),c.a.createElement("li",null,"all song requests"),c.a.createElement("li",null,"all notifications"),c.a.createElement("li",null,"all transactions"),c.a.createElement("li",null,"all hallpasses"),c.a.createElement("li",null,"all purchases"),c.a.createElement("li",null,"all products"),c.a.createElement("li",null,"all bonuses"),c.a.createElement("li",null,"all scores")),"associated with this teacher. This action ",c.a.createElement("b",null,"cannot be undone"),".")),c.a.createElement(A.a,null,c.a.createElement(D.a,{onClick:function(){s(!1),t(a)},color:"secondary",variant:"contained",autoFocus:!0},"Delete"),c.a.createElement(D.a,{onClick:i,variant:"contained"},"Cancel"))))})),Dr=Object(w.a)((function(e){return{teacherDetails:{display:"block"},teacherHeader:{alignItems:"center",display:"flex",justifyContent:"space-between",width:"100%"},teacherUsername:{marginRight:e.spacing(2),minWidth:e.spacing(12)},teacherName:{flexGrow:"1"}}})),Pr=function(e){var t=e.teacher,a=function(e){return e?Object.values(e).flat().length:0},n=function(e,t){return t?Object.values(t).flat().reduce((function(t,a){return t+a[e]}),0):0};return c.a.createElement("div",null,c.a.createElement(x.a,{variant:"h6",gutterBottom:!0},"Teacher Stats"),c.a.createElement(me.a,{container:!0,spacing:2},c.a.createElement(Na,{icon:c.a.createElement(va.a,{fontSize:"large"}),title:"Assignments",value:a(t.tasks),round:!0}),c.a.createElement(Na,{icon:c.a.createElement(De.a,{icon:Pe.a,size:"lg"}),title:"Dark Mode",value:n("darkMode",t.students),round:!0}),c.a.createElement(Na,{icon:c.a.createElement(De.a,{icon:Pe.n,size:"lg"}),title:"Dropped",value:n("dropped",t.students),round:!0}),c.a.createElement(Na,{icon:c.a.createElement(Y.a,{fontSize:"large"}),title:"Hallpasses",value:a(t.passes),round:!0}),c.a.createElement(Na,{icon:c.a.createElement(Oa.a,{fontSize:"large"}),title:"Online Purchases",value:a(t.purchases),round:!0}),c.a.createElement(Na,{icon:c.a.createElement(De.a,{icon:Pe.b,size:"lg"}),title:"Prime Members",value:n("hasPrime",t.students),round:!0}),c.a.createElement(Na,{icon:c.a.createElement(V.a,{fontSize:"large"}),title:"Products",value:t.products?t.products.length:0,round:!0}),c.a.createElement(Na,{icon:c.a.createElement(ya.a,{fontSize:"large"}),title:"Scores",value:a(t.scores),round:!0}),c.a.createElement(Na,{icon:c.a.createElement(rr.a,{fontSize:"large"}),title:"Songs",value:a(t.songs),round:!0}),c.a.createElement(Na,{icon:c.a.createElement(ga.a,{fontSize:"large"}),title:"Students",value:a(t.students),round:!0}),c.a.createElement(Na,{icon:c.a.createElement(H.a,{fontSize:"large"}),title:"Transactions",value:a(t.transactions),round:!0}),c.a.createElement(Na,{icon:c.a.createElement(De.a,{icon:Pe.h,size:"lg"}),title:"Viewed Changes",value:n("viewedChanges",t.students),round:!0})))},Cr=function(e){var t=e.teacher,a=function(e,t){return t.reduce((function(t,a){return t+a[e]}),0)},n=function(e){var t=e.icon,a=e.primary,n=e.secondary;return c.a.createElement(Or.a,{alignItems:"flex-start"},c.a.createElement(Sr.a,null,c.a.createElement(Ca.a,null,t)),c.a.createElement(Ma.a,{primary:a,secondary:n}))};return c.a.createElement("div",null,c.a.createElement(x.a,{variant:"h6",gutterBottom:!0},"Courses"),c.a.createElement(me.a,{container:!0,spacing:2},t.courses&&t.courses.length>0?t.courses.map((function(e,r){return c.a.createElement(me.a,{item:!0,xs:12,md:6,lg:4,key:r},c.a.createElement(Xt.a,{variant:"outlined"},c.a.createElement(ea.a,null,c.a.createElement(x.a,{gutterBottom:!0,variant:"h5"},e.name),c.a.createElement(Ot.a,{color:"secondary",label:"Period ".concat(e.period),size:"small",style:{color:"white",marginRight:"8px"}}),c.a.createElement(Ot.a,{color:"primary",label:"".concat(e.students.length," student").concat(1===e.students.length?"":"s"),size:"small",variant:"outlined"}),c.a.createElement(jr.a,null,c.a.createElement(n,{icon:c.a.createElement(va.a,null),primary:"Assignments",secondary:t.tasks[e._id].length}),c.a.createElement(n,{icon:c.a.createElement(De.a,{icon:Pe.a}),primary:"Dark Mode",secondary:a("darkMode",t.students[e._id])}),c.a.createElement(n,{icon:c.a.createElement(De.a,{icon:Pe.n}),primary:"Dropped",secondary:a("dropped",t.students[e._id])}),c.a.createElement(n,{icon:c.a.createElement(Y.a,null),primary:"Hallpasses",secondary:t.passes[e._id].length}),c.a.createElement(n,{icon:c.a.createElement(Oa.a,null),primary:"Online Purchases",secondary:t.purchases[e._id].length}),c.a.createElement(n,{icon:c.a.createElement(De.a,{icon:Pe.b}),primary:"Prime Members",secondary:a("hasPrime",t.students[e._id])}),c.a.createElement(n,{icon:c.a.createElement(ya.a,null),primary:"Scores",secondary:t.scores[e._id].length}),c.a.createElement(n,{icon:c.a.createElement(rr.a,null),primary:"Song Requests",secondary:t.songs[e._id].length}),c.a.createElement(n,{icon:c.a.createElement(H.a,null),primary:"Transactions",secondary:t.transactions[e._id].length}),c.a.createElement(n,{icon:c.a.createElement(De.a,{icon:Pe.h}),primary:"Viewed Changes",secondary:a("viewedChanges",t.students[e._id])})))))})):c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(x.a,null,"No courses have been created"))))},Tr=function(e){var t=e.settings,a=function(e){var t=e.value,a=typeof t,n=JSON.stringify(t);return"boolean"===a?c.a.createElement(Ot.a,{color:t?"primary":"secondary",label:n,style:{color:"white"}}):"object"===a&&t.hasOwnProperty("_id")?t._id:n};return c.a.createElement("div",null,c.a.createElement(x.a,{variant:"h6",gutterBottom:!0},"Settings"),c.a.createElement(et.a,null,c.a.createElement(tt.a,null,c.a.createElement(at.a,null,c.a.createElement(nt.a,null,"Setting"),c.a.createElement(nt.a,null,"Value"))),c.a.createElement(rt.a,null,Object.keys(t).map((function(e,n){return c.a.createElement(at.a,{key:n},c.a.createElement(nt.a,null,e),c.a.createElement(nt.a,null,c.a.createElement(a,{value:t[e]})))})))))},Nr=function(e){var t=e.teachers,a=Object(o.useState)(!1),n=Object(ge.a)(a,2),r=n[0],l=n[1],s=Dr();return c.a.createElement(c.a.Fragment,null,(null===t||void 0===t?void 0:t.length)>0?t.map((function(e){return c.a.createElement(mn.a,{expanded:r===e.username,key:e.username,onChange:(t=e.username,function(e,a){l(!!a&&t)})},c.a.createElement(dn.a,{expandIcon:c.a.createElement(En.a,null)},c.a.createElement("div",{className:s.teacherHeader},c.a.createElement(Ot.a,{color:"secondary",label:e.username,className:s.teacherUsername}),c.a.createElement(x.a,{className:s.teacherName,variant:"h5"},e.firstName," ",e.lastName),c.a.createElement(yr,{teacher:e}),c.a.createElement(Ar,{teacher:e}))),c.a.createElement(pn.a,{className:s.teacherDetails},c.a.createElement(me.a,{container:!0,spacing:2},c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(Pr,{teacher:e})),c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(Cr,{teacher:e})),c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(Tr,{settings:e.settings})),c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(x.a,null,c.a.createElement("b",null,"Viewed Changes"),":"," ",e.viewedChanges?"yes":"no")))));var t})):c.a.createElement(x.a,null,"No teachers found"))},wr=Object(r.c)((function(e){return Object(p.a)({},e.teachers)}),(function(e){return{onLoad:function(){return e({type:"MANAGE_TEACHERS_PAGE_LOADED",payload:Ne.a.Teachers.getAll()})},onUnload:function(){return e({type:"MANAGE_TEACHERS_PAGE_UNLOADED"})}}}))((function(e){var t=e.onLoad,a=e.onUnload,n=e.pageLoaded,r=e.teachers;return Object(o.useEffect)((function(){return t(),function(){a()}}),[]),c.a.createElement(c.a.Fragment,null,c.a.createElement(je,{title:"Manage Teachers"},c.a.createElement(hr,null),c.a.createElement(yr,null)),n?c.a.createElement(Nr,{teachers:r}):c.a.createElement(Pa,{message:"Loading..."}))})),_r=a(875),kr=a(876),xr=function(e){var t=e.isOpen,a=e.label,n=e.message,r=e.onCancel,o=e.onSubmit,l=e.title;return c.a.createElement(O.a,{open:t},c.a.createElement(S.a,null,l),c.a.createElement(j.a,null,c.a.createElement(Ct.a,null,n)),c.a.createElement(A.a,null,c.a.createElement(D.a,{autoFocus:!0,color:"primary",onClick:o},a),c.a.createElement(D.a,{color:"primary",onClick:r},"Cancel")))},Rr=Object(w.a)((function(e){return{root:{backgroundColor:e.palette.info.main,borderRadius:"100px",color:e.palette.common.white,cursor:"pointer",fontFamily:'"Carter One", serif',fontSize:e.typography.h5.fontSize,padding:"".concat(e.spacing(2),"px ").concat(e.spacing(4),"px"),textAlign:"center",textTransform:"uppercase"}}})),Ur=function(e){var t=Rr();return c.a.createElement("div",Object.assign({className:t.root},e),e.children)},Lr=function(e,t){return"linear-gradient(".concat(t,", ").concat(e.palette.primary.main," 0%, ").concat(e.palette.secondary.main," 100%)")},Ir=Object(w.a)((function(e){var t;return{banner:(t={alignItems:"center",background:e.palette.primary.main},Object(xe.a)(t,"background",Lr(e,"180deg")),Object(xe.a)(t,"color",e.palette.common.white),Object(xe.a)(t,"cursor","pointer"),Object(xe.a)(t,"display","flex"),Object(xe.a)(t,"flexFlow","column nowrap"),Object(xe.a)(t,"height","500px"),Object(xe.a)(t,"justifyContent","space-between"),Object(xe.a)(t,"marginBottom",e.spacing(3)),Object(xe.a)(t,"padding",e.spacing(2)),Object(xe.a)(t,e.breakpoints.up("md"),{background:Lr(e,"90deg"),flexFlow:"row nowrap",height:"180px",padding:"".concat(e.spacing(2),"px ").concat(e.spacing(4),"px")}),t),bannerLogo:Object(xe.a)({height:"45%"},e.breakpoints.up("md"),{height:"100%"}),bannerText:{fontFamily:'"Carter One", serif'}}})),qr=function(e){var t=Ir();return c.a.createElement("div",Object.assign({className:t.banner},e),c.a.createElement(M,{className:t.bannerLogo,prime:!0}),c.a.createElement(x.a,{align:"center",className:t.bannerText,color:"inherit",variant:"h4"},"Get access",c.a.createElement("br",null),"to exclusive",c.a.createElement("br",null),"member benefits!"),c.a.createElement(Ur,null,"Click to learn more"))},Mr=a(535),Br=a.n(Mr),Fr=Object(w.a)((function(e){return{logo:{display:"flex",justifyContent:"center","& > img":Object(xe.a)({width:"75%"},e.breakpoints.up("md"),{width:"100%"})},section:Object(xe.a)({background:"linear-gradient(90deg, ".concat(e.palette.primary.main," 0%, ").concat(e.palette.secondary.main," 100%)"),color:e.palette.common.white,fontFamily:'"Carter One", serif',overflow:"hidden",padding:"".concat(e.spacing(6),"px ").concat(e.spacing(2),"px")},e.breakpoints.up("md"),{padding:e.spacing(8)}),text:{fontFamily:"inherit"}}})),Gr=function(e){var t=e.celebrate,a=e.enabled,n=e.prime,r=Fr();return c.a.createElement(me.a,{container:!0,alignItems:"center",className:r.section,spacing:2},t&&c.a.createElement(Br.a,{numberOfPieces:750,recycle:!1}),c.a.createElement(me.a,{item:!0,xs:12,md:4,className:r.logo},c.a.createElement(M,{className:r.logo,prime:!0})),a.any&&c.a.createElement(me.a,{item:!0,xs:12,md:8},c.a.createElement(x.a,{className:r.text,color:"inherit",variant:"h2",gutterBottom:!0},"Welcome to Prime!"),c.a.createElement(x.a,{variant:"h5"},"You now have instant access to..."),c.a.createElement(x.a,{color:"inherit",variant:"h6"},c.a.createElement("ul",{className:"fa-ul"},a.darkMode&&c.a.createElement("li",null,c.a.createElement(De.a,{icon:Pe.a,listItem:!0}),"both light and dark modes in Settings"),a.discounts.songs&&c.a.createElement("li",null,c.a.createElement(De.a,{icon:Pe.f,listItem:!0}),"a"," ",n.songRequestPurchaseDiscount,"% discount on all song requests"),a.songRemoval&&c.a.createElement("li",null,c.a.createElement(De.a,{icon:Pe.o,listItem:!0}),"ability to remove any songs from the class playlist for a fee"),a.songRemoval&&c.a.createElement("li",null,c.a.createElement(De.a,{icon:Pe.d,listItem:!0}),"earn bonus points when one of your songs is removed"),a.discounts.store&&c.a.createElement("li",null,c.a.createElement(De.a,{icon:Pe.i,listItem:!0}),"a"," ",n.storePurchaseDiscount,"% discount on all online store purchases"),a.sameDay&&c.a.createElement("li",null,c.a.createElement(De.a,{icon:Pe.m,listItem:!0}),"same-day pickup for online purchases rather than at the end of the week"),a.discounts.hallpass&&c.a.createElement("li",null,c.a.createElement(De.a,{icon:Pe.l,listItem:!0}),"a"," ",n.hallpassDiscount,"% discount on all hallpass purchases"),c.a.createElement("li",null,c.a.createElement(De.a,{icon:Pe.e,listItem:!0}),"your membership is good for the whole school year")))))},Wr=a(536),Hr=a.n(Wr),Yr=a(537),zr=a.n(Yr),Vr=a(538),Qr=a.n(Vr),Kr=a(539),Jr=a.n(Kr),$r=a(540),Xr=a.n($r),Zr=function(e,t,a){return"linear-gradient(".concat(e,", ").concat(t," 0%, ").concat(a," 100%)")},eo=Object(w.a)((function(e){var t;return{cost:Object(xe.a)({border:"8px solid ".concat(e.palette.common.white),borderRadius:e.spacing(4),marginBottom:e.spacing(4),padding:e.spacing(3)},e.breakpoints.up("md"),{marginBottom:0}),list:{marginBottom:0,marginTop:-e.spacing(1),"& li":{marginTop:e.spacing(2)}},logo:{display:"flex",justifyContent:"center","& > img":Object(xe.a)({width:"75%"},e.breakpoints.up("md"),{width:"100%"})},padLeft:Object(xe.a)({},e.breakpoints.up("md"),{paddingLeft:"".concat(e.spacing(4),"px !important")}),padRight:Object(xe.a)({},e.breakpoints.up("md"),{paddingRight:"".concat(e.spacing(4),"px !important")}),section:(t={color:e.palette.common.white,fontFamily:'"Carter One", serif',overflow:"hidden",padding:"".concat(e.spacing(6),"px ").concat(e.spacing(2),"px")},Object(xe.a)(t,e.breakpoints.up("md"),{padding:e.spacing(8)}),Object(xe.a)(t,"& h1",Object(xe.a)({fontSize:e.typography.h2.fontSize},e.breakpoints.up("md"),{fontSize:e.typography.h1.fontSize})),Object(xe.a)(t,"& h2",Object(xe.a)({fontSize:e.typography.h3.fontSize},e.breakpoints.up("md"),{fontSize:e.typography.h2.fontSize})),Object(xe.a)(t,"& h4",Object(xe.a)({fontSize:e.typography.h5.fontSize},e.breakpoints.up("md"),{fontSize:e.typography.h4.fontSize})),Object(xe.a)(t,"& svg",Object(xe.a)({display:"block",margin:"0 auto"},e.breakpoints.up("md"),{display:"inline-block"})),t),sectionImage:{width:"100%"},songRemovalAd:Object(xe.a)({},e.breakpoints.up("md"),{position:"absolute",right:"-140px",top:"15px",width:"120%"}),songsAd:Object(xe.a)({},e.breakpoints.up("md"),{left:"-100px",position:"absolute",top:"-10px",width:"120%"}),storeAd:Object(xe.a)({},e.breakpoints.up("md"),{left:"-50px",position:"absolute",top:"-30px",width:"110%"}),text:{fontFamily:'"Carter One", serif'}}})),to=function(e){var t=e.balance,a=e.enabled,n=e.onSubmit,r=e.prime,o=Object(We.a)(),l=Object(He.a)(o.breakpoints.down("md")),s=eo();return c.a.createElement(c.a.Fragment,null,c.a.createElement(me.a,{container:!0,alignItems:"center",className:s.section,spacing:2,style:{background:Zr("90deg",o.palette.primary.main,o.palette.secondary.main)}},c.a.createElement(me.a,{item:!0,className:s.logo,xs:12,md:4},c.a.createElement(M,{prime:!0})),a.any&&c.a.createElement(me.a,{item:!0,xs:12,md:8},c.a.createElement(x.a,{className:s.text,color:"inherit",variant:"h5"},"With a Chem Cash Prime membership you get...",c.a.createElement("ul",{className:"fa-ul ".concat(s.list)},a.darkMode&&c.a.createElement("li",null,c.a.createElement(De.a,{icon:Pe.a,listItem:!0}),"access to dark mode"),a.discounts.songs&&c.a.createElement("li",null,c.a.createElement(De.a,{icon:Pe.f,listItem:!0}),"discounts on songs"),a.songRemoval&&c.a.createElement("li",null,c.a.createElement(De.a,{icon:Pe.o,listItem:!0}),"ability to remove songs"),a.discounts.store&&c.a.createElement("li",null,c.a.createElement(De.a,{icon:Pe.i,listItem:!0}),"discounts on store purchases"),a.sameDay&&c.a.createElement("li",null,c.a.createElement(De.a,{icon:Pe.m,listItem:!0}),"same-day pickup for online purchases"),a.discounts.hallpass&&c.a.createElement("li",null,c.a.createElement(De.a,{icon:Pe.l,listItem:!0}),"discounts on hallpasses"))))),a.darkMode&&c.a.createElement(me.a,{container:!0,className:s.section,spacing:2,style:{backgroundColor:o.palette.common.black}},c.a.createElement(me.a,{item:!0,xs:12,md:8,className:s.padRight},c.a.createElement(x.a,{align:"center",variant:"h1",gutterBottom:!0},c.a.createElement(De.a,{icon:Pe.a})," Dark Mode"),c.a.createElement(x.a,{align:"right",variant:"h2",gutterBottom:!0},"Someone turn on a light, it's dark in here"),c.a.createElement(x.a,{align:"right",variant:"h4"},"As a Prime member ",c.a.createElement("br",null),"you get access to the ",c.a.createElement("br",null),"dark mode toggle ",c.a.createElement("br",null),"on the settings page")),c.a.createElement(me.a,{item:!0,xs:12,md:4},c.a.createElement("img",{className:s.sectionImage,src:Hr.a}))),a.discounts.songs&&c.a.createElement(me.a,{container:!0,className:s.section,spacing:2,style:{background:Zr("180deg",o.palette.primary.dark,o.palette.primary.light)}},c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(x.a,{align:"center",variant:"h1",gutterBottom:!0},c.a.createElement(De.a,{icon:Pe.f})," Song Discounts")),c.a.createElement(me.a,{container:!0,direction:l?"column-reverse":"row",spacing:2,wrap:"nowrap"},c.a.createElement(me.a,{item:!0,xs:12,md:7,style:{position:"relative"}},c.a.createElement("img",{className:"".concat(s.sectionImage," ").concat(s.songsAd),src:Jr.a})),c.a.createElement(me.a,{item:!0,xs:12,md:5,className:s.padLeft},c.a.createElement(x.a,{align:"left",variant:"h2",gutterBottom:!0},"Hear more of the music you love"),c.a.createElement(x.a,{align:"left",variant:"h4"},"With discounts on all song purchases, you can buy more of the music you enjoy")))),a.songRemoval&&c.a.createElement(me.a,{container:!0,className:s.section,spacing:2,style:{background:Zr("180deg",o.palette.error.dark,o.palette.error.light)}},c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(x.a,{align:"center",variant:"h1",gutterBottom:!0},c.a.createElement(De.a,{icon:Pe.o})," Remove Songs")),c.a.createElement(me.a,{item:!0,xs:12,md:5,className:s.padLeft},c.a.createElement(x.a,{align:"right",variant:"h2",gutterBottom:!0},"Hear less music you don't like"),c.a.createElement(x.a,{align:"right",variant:"h4"},"Prime members have the ability to remove any songs and earn bonus points if their songs get removed")),c.a.createElement(me.a,{item:!0,xs:12,md:7,style:{position:"relative"}},c.a.createElement("img",{className:"".concat(s.sectionImage," ").concat(s.songRemovalAd),src:Qr.a}))),a.discounts.store&&c.a.createElement(me.a,{container:!0,className:s.section,spacing:2,style:{background:Zr("180deg",o.palette.secondary.dark,o.palette.secondary.light)}},c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(x.a,{align:"center",variant:"h1",gutterBottom:!0},c.a.createElement(De.a,{icon:Pe.i})," Store Discounts")),c.a.createElement(me.a,{container:!0,direction:l?"column-reverse":"row",spacing:2,wrap:"nowrap"},c.a.createElement(me.a,{item:!0,xs:12,md:7,style:{position:"relative"}},c.a.createElement("img",{className:"".concat(s.sectionImage," ").concat(s.storeAd),src:Xr.a})),c.a.createElement(me.a,{item:!0,xs:12,md:5,className:s.padLeft},c.a.createElement(x.a,{align:"left",variant:"h2",gutterBottom:!0},"Get more,",c.a.createElement("br",null),"spend less"),c.a.createElement(x.a,{align:"left",variant:"h4"},"With discounts on all store purchases, you can buy more of the stuff you want")))),a.sameDay&&c.a.createElement(me.a,{container:!0,className:s.section,spacing:2,style:{background:Zr("180deg",o.palette.info.dark,o.palette.info.light)}},c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(x.a,{align:"center",variant:"h1",gutterBottom:!0},c.a.createElement(De.a,{icon:Pe.m})," Same-Day Pickup")),c.a.createElement(me.a,{item:!0,xs:12,md:7,className:s.padLeft},c.a.createElement(x.a,{align:"right",variant:"h2",gutterBottom:!0},"Get your stuff...",c.a.createElement("br",null),"now"),c.a.createElement(x.a,{align:"right",variant:"h4"},"Only Prime members can pickup their purchases the same day they ordered them, while non-members will have to wait until the end of the week")),c.a.createElement(me.a,{item:!0,xs:12,md:5},c.a.createElement("img",{className:s.sectionImage,src:zr.a}))),c.a.createElement(me.a,{container:!0,className:s.section,spacing:2,style:{background:Zr("90deg",o.palette.secondary.main,o.palette.primary.main)}},c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(x.a,{align:"center",variant:"h1",gutterBottom:!0},c.a.createElement(De.a,{icon:Pe.b})," Join Today")),a.any&&c.a.createElement(me.a,{item:!0,xs:12,md:6},c.a.createElement(x.a,{align:"center",variant:"h5"},"Full Membership Benefits"),c.a.createElement(x.a,{color:"inherit",variant:"h6"},c.a.createElement("ul",{className:"fa-ul"},a.darkMode&&c.a.createElement("li",null,c.a.createElement(De.a,{icon:Pe.a,listItem:!0}),"access to both light and dark modes"),a.discounts.songs&&c.a.createElement("li",null,c.a.createElement(De.a,{icon:Pe.f,listItem:!0}),"a"," ",r.songRequestPurchaseDiscount,"% discount on song requests"),a.songRemoval&&c.a.createElement("li",null,c.a.createElement(De.a,{icon:Pe.o,listItem:!0}),"ability to remove any songs from the class playlist for a fee"),a.songRemoval&&c.a.createElement("li",null,c.a.createElement(De.a,{icon:Pe.d,listItem:!0}),"earn bonus points when one of your songs is removed"),a.discounts.store&&c.a.createElement("li",null,c.a.createElement(De.a,{icon:Pe.i,listItem:!0}),"a"," ",r.storePurchaseDiscount,"% discount on all store purchases"),a.sameDay&&c.a.createElement("li",null,c.a.createElement(De.a,{icon:Pe.m,listItem:!0}),"same-day pickup for online purchases rather than at the end of the week"),a.discounts.hallpass&&c.a.createElement("li",null,c.a.createElement(De.a,{icon:Pe.l,listItem:!0}),"a"," ",r.hallpassDiscount,"% discount on all hallpass purchases"),c.a.createElement("li",null,c.a.createElement(De.a,{icon:Pe.e,listItem:!0}),"one-time fee for the whole school year")))),c.a.createElement(me.a,{container:!0,item:!0,alignItems:"center",xs:12,md:6},c.a.createElement(me.a,{item:!0,xs:12,className:s.cost},c.a.createElement(x.a,{align:"center",variant:"h4"},"Cost"),c.a.createElement(x.a,{align:"center",className:s.text,variant:"h3"},c.a.createElement(Ve,{value:r.purchaseAmount}))),c.a.createElement(me.a,{item:!0,xs:12},t>=r.purchaseAmount?c.a.createElement(Ur,{onClick:n},"Click here to buy Prime"):c.a.createElement(Ur,null,"Insufficient balance")))))},ao=Object(w.a)({paper:{overflow:"hidden"}}),no=Object(r.c)((function(e){return{currentUser:e.common.currentUser,errors:e.purchases.errors,inProgress:e.purchases.inProgress,prime:e.common.settings.prime,scores:e.scores,songRemovalRequestEnabled:e.common.settings.songRemovalRequestEnabled}}),(function(e){return{onExit:function(){return e({type:"PRIME_PURCHASE_DIALOG_UNLOADED"})},onSubmit:function(t){return e({type:"SUBMIT_PRIME_PURCHASE",payload:Ne.a.Transactions.add(t),snackbar:{message:"Now Enrolled in Prime",variant:"success"}})}}}))((function(e){var t,a,n=e.currentUser,r=e.errors,l=e.inProgress,s=e.onExit,i=e.onSubmit,u=e.prime,m=e.scores,d=e.songRemovalRequestEnabled,p=e.trigger,E=Object(o.useState)(!1),f=Object(ge.a)(E,2),b=f[0],g=f[1],h=Object(o.useState)(!1),v=Object(ge.a)(h,2),y=v[0],S=v[1],P=Object(o.useState)(!1),C=Object(ge.a)(P,2),T=C[0],N=C[1],w=Object(We.a)(),_=Object(He.a)(w.breakpoints.down("md")),k=ao(),x=function(){S(!0)},R=function(){S(!1),N(!1)},U=function(){g(!0)},L={any:u.darkModeEnabled||u.songRequestPurchaseDiscount>0||u.storePurchaseDiscount>0||u.sameDayDeliveryEnabled,darkMode:u.darkModeEnabled,discounts:{hallpass:u.hallpassDiscount>0,songs:u.songRequestPurchaseDiscount>0,store:u.storePurchaseDiscount>0},sameDay:u.sameDayDeliveryEnabled,songRemoval:u.songRemovalEnabled&&d},I=u.enabled&&!n.hasPrime,q=u.enabled&&n.hasPrime;return c.a.createElement(c.a.Fragment,null,I&&"banner"===p&&c.a.createElement(qr,{onClick:x}),q&&"button"===p&&c.a.createElement(D.a,{onClick:x,size:"small"},"View Prime Benefits"),c.a.createElement(O.a,{fullWidth:!0,classes:{paper:k.paper},fullScreen:_,maxWidth:"lg",onClick:function(e){return e.stopPropagation()},onClose:R,onExit:s,onFocus:function(e){return e.stopPropagation()},open:y},c.a.createElement(j.a,{style:{overflowX:"hidden",overflowY:!n.hasPrime&&!T||_?"":"hidden",padding:0}},c.a.createElement(Oe,{errors:r}),n.hasPrime||T?c.a.createElement(Gr,{celebrate:"banner"===p,enabled:L,prime:u}):c.a.createElement(to,{balance:null===(t=m.total)||void 0===t?void 0:t.balance,enabled:L,onSubmit:U,prime:u})),c.a.createElement(A.a,null,!n.hasPrime&&!T&&c.a.createElement(D.a,{color:"primary",disabled:l||(null===(a=m.total)||void 0===a?void 0:a.balance)<u.purchaseAmount,onClick:U,type:"submit",variant:"contained"},l?"Purchasing...":"Purchase Prime"),c.a.createElement(D.a,{disabled:l,onClick:R,variant:"contained"},n.hasPrime||T?"Close":"Cancel"))),c.a.createElement(xr,{isOpen:b,label:"Purchase",message:"Your account will be charged ".concat(u.purchaseAmount," pts and you will have instant access to Prime benefits"),onCancel:function(){g(!1)},onSubmit:function(){g(!1),"student"===n.role?i({amount:u.purchaseAmount,description:"Chem Cash Prime Membership",type:"purchase",student:{_id:n._id}}):N(!0)},title:"Purchase a Prime membership?"}))})),ro=Object(w.a)((function(e){return{header:{backgroundColor:e.palette.background.paper,paddingLeft:e.spacing(1),paddingRight:e.spacing(1),position:"absolute",top:"-18px"},img:{maxHeight:"100%",maxWidth:"100%",minWidth:"20px"},window:{alignItems:"center",display:"flex",borderColor:e.palette.secondary.main,borderStyle:"solid",borderWidth:"4px",height:"300px",justifyContent:"center",padding:e.spacing(2),position:"relative"}}})),oo=function(e){var t=e.src,a=ro();return c.a.createElement("div",{className:a.window},c.a.createElement(x.a,{variant:"h6",className:a.header},"Image Preview"),t?c.a.createElement("img",{className:a.img,src:bt(t)}):c.a.createElement(x.a,null,"No photo url provided"))},co=function(e){return c.a.createElement(Je.a,Object.assign({error:Boolean(e.errors),inputProps:{maxLength:e.limit},helperText:e.errors?"".concat(e.errors," | ").concat(e.value.length,"/").concat(e.limit):"".concat(e.value.length,"/").concat(e.limit)},e))},lo=Object(w.a)((function(e){return{addIcon:{marginRight:e.spacing(1)},updateIcon:{color:e.palette.text.primary},updateIconBrightHover:{color:"rgba(255, 255, 255, 0.7)","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.3)",color:"white"}}}})),so=Object(r.c)((function(e){return Object(p.a)(Object(p.a)({},e.products),{},{currentUser:e.common.currentUser})}),(function(e){return{onAdd:function(t){return e({type:"ADD_PRODUCT",payload:Ne.a.Products.add(t),snackbar:{message:"Product added",variant:"success"}})},onExit:function(){return e({type:"PRODUCT_DIALOG_UNLOADED"})},onUpdate:function(t){return e({type:"UPDATE_PRODUCT",payload:Ne.a.Products.update(t),snackbar:{message:"Product updated",variant:"success"}})}}}))((function(e){var t=e.brightHover,a=e.currentUser,n=e.product,r=e.errors,l=e.inProgress,s=e.onAdd,i=e.onExit,u=e.onUpdate,m=60,d=140,E=Object(o.useState)(!1),f=Object(ge.a)(E,2),b=f[0],g=f[1],h=Object(We.a)(),v=Object(He.a)(h.breakpoints.down("md")),y=lo(),P=function(){g(!0)},C=function(){g(!1)},T=function(e){s(Object(p.a)({},e))},N=function(e){u(Object(p.a)(Object(p.a)({},n),e))};return Object(o.useEffect)((function(){l||r||g(!1)}),[l]),c.a.createElement(c.a.Fragment,null,n?"teacher"===a.role&&c.a.createElement(Ge,{action:"Edit product",className:t?y.updateIconBrightHover:y.updateIcon,onClick:P},c.a.createElement(Me.a,null)):c.a.createElement(ie.a,{color:"primary",onClick:P,variant:"extended"},c.a.createElement(st.a,{className:y.addIcon}),"Add product"),c.a.createElement(O.a,{fullScreen:v,maxWidth:"lg",onClick:function(e){return e.stopPropagation()},onClose:C,onExit:i,onFocus:function(e){return e.stopPropagation()},open:b},c.a.createElement(ce.c,{initialValues:{name:(null===n||void 0===n?void 0:n.name)||"",description:(null===n||void 0===n?void 0:n.description)||"",photoUrl:(null===n||void 0===n?void 0:n.photoUrl)||"",cost:(null===n||void 0===n?void 0:n.cost)||0,maxPurchaseQuantity:(null===n||void 0===n?void 0:n.maxPurchaseQuantity)||0,quantity:(null===n||void 0===n?void 0:n.quantity)||0},validationSchema:se.c({name:se.d().max(m,"Cannot be longer than ".concat(m," characters")).required("Required"),description:se.d().max(d,"Cannot be longer than ".concat(d," characters")),photoUrl:se.d().url("Not a valid url").required("Required"),cost:se.b().typeError("Numbers only").required("Required"),maxPurchaseQuantity:se.b().typeError("Numbers only").required("Required"),quantity:se.b().typeError("Numbers only").required("Required")}),onSubmit:function(){var e=Object(oe.a)(re.a.mark((function e(t){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n?N(t):T(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},(function(e){return c.a.createElement(ce.b,null,c.a.createElement(S.a,null,n?"Edit product":"Add product"),c.a.createElement(j.a,null,c.a.createElement(Oe,{errors:r}),c.a.createElement(me.a,{container:!0,spacing:2},c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(ce.a,{as:co,autoFocus:!n,color:"primary",disabled:l,label:"Product Name",name:"name",type:"text",limit:m,errors:e.errors.name,fullWidth:!0})),c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(ce.a,{as:co,color:"primary",disabled:l,label:"Product Description",name:"description",type:"text",limit:d,errors:e.errors.description,fullWidth:!0})),c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(ce.a,{color:"primary",component:le.c,disabled:l,label:"Photo Url",name:"photoUrl",type:"url",fullWidth:!0})),c.a.createElement(me.a,{item:!0,xs:12,md:4},c.a.createElement(ce.a,{color:"primary",component:le.c,disabled:l,label:"Cost",name:"cost",type:"number",fullWidth:!0})),c.a.createElement(me.a,{item:!0,xs:12,md:4},c.a.createElement(ce.a,{color:"primary",component:le.c,disabled:l,label:"Quantity",name:"quantity",type:"number",fullWidth:!0})),c.a.createElement(me.a,{item:!0,xs:12,md:4},c.a.createElement(ce.a,{color:"primary",component:le.c,disabled:l,label:"Max purchase quantity",name:"maxPurchaseQuantity",type:"number",fullWidth:!0})),c.a.createElement(me.a,{item:!0,xs:12,md:6},c.a.createElement(oo,{src:e.values.photoUrl})))),c.a.createElement(A.a,null,c.a.createElement(D.a,{disabled:l,color:"primary",type:"submit",variant:"contained"},n?l?"Updating...":"Update":l?"Adding...":"Add"),c.a.createElement(D.a,{disabled:l,onClick:C,variant:"contained"},"Cancel")))}))))})),io=a(836),uo=a(837),mo=a(838),po=a(873),Eo=Object(w.a)((function(e){return{icon:{color:"rgba(255, 255, 255, 0.7)","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.3)",color:"white"}}}})),fo=Object(r.c)((function(e){return{currentUser:e.common.currentUser}}),(function(e){return{onDelete:function(t){return e({type:"DELETE_PRODUCT",payload:Ne.a.Products.delete(t),snackbar:{message:"Product deleted",variant:"success"}})}}}))((function(e){var t=e.currentUser,a=e.product,n=e.onDelete,r=Eo(),l=Object(o.useState)(!1),s=Object(ge.a)(l,2),i=s[0],u=s[1],m=function(){u(!1)};return c.a.createElement(c.a.Fragment,null,"teacher"===t.role&&c.a.createElement(Ge,{action:"Delete product",onClick:function(){u(!0)},className:r.icon},c.a.createElement(ct.a,null)),c.a.createElement(O.a,{open:i,onClose:m,onClick:function(e){return e.stopPropagation()},onFocus:function(e){return e.stopPropagation()}},c.a.createElement(S.a,null,"Delete Product"),c.a.createElement(j.a,null,c.a.createElement(Ct.a,{component:"div"},"Are you sure you want to delete ",c.a.createElement("b",null,a.name),"? This action"," ",c.a.createElement("b",null,"cannot be undone"),".")),c.a.createElement(A.a,null,c.a.createElement(D.a,{onClick:function(){u(!1),n(a.slug)},color:"secondary",variant:"contained",autoFocus:!0},"Delete"),c.a.createElement(D.a,{onClick:m,variant:"contained"},"Cancel"))))})),bo=Object(w.a)((function(e){return{actionIcon:{display:"flex"},cost:{color:"white"},description:{marginBottom:"-1.5rem",opacity:0,transition:"opacity 0s ease-in-out"},icon:{color:"rgba(255, 255, 255, 0.7)","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.3)",color:"white"}},name:{color:e.palette.secondary.main,fontSize:e.typography.h5.fontSize,marginBottom:e.spacing(.5),whiteSpace:"nowrap"},quantity:{marginLeft:e.spacing(2)},tile:{"&:hover .MuiGridListTileBar-root":{height:"100%","& #description":{marginBottom:0,opacity:1,transition:"margin-bottom 0.35s ease-in-out, opacity 0.5s ease-in-out"}}},tileBar:{alignItems:"flex-end",paddingBottom:e.spacing(1),paddingRight:e.spacing(1),transition:"height 0.35s ease-in-out"},title:{whiteSpace:"normal"}}})),go=function(e){var t=e.onAddToCart,a=e.onInventoryChange,n=e.cart,r=e.products,o=e.storeEnabled,l=e.userRole,s=bo(),i=Object(We.a)(),u=Object(He.a)(i.breakpoints.down("sm")),m=Object(He.a)(i.breakpoints.down("md")),d=u?1:m||"teacher"===l?2:3,E=function(e,t){return a(Object(p.a)(Object(p.a)({},e),{},{quantity:"add"===t?e.quantity+1:e.quantity-1}))};return c.a.createElement("div",null,c.a.createElement(io.a,{cols:d,spacing:8},(null===r||void 0===r?void 0:r.length)>0?r.map((function(e){var a=e.maxPurchaseQuantity<e.quantity&&0!==e.maxPurchaseQuantity?e.maxPurchaseQuantity:e.quantity,r=a>0&&(null===n||void 0===n?void 0:n.quantities[e._id])>=a;return c.a.createElement(uo.a,{key:e.slug,className:s.tile},c.a.createElement("img",{src:bt(e.photoUrl),alt:e.name}),c.a.createElement(mo.a,{classes:{actionIcon:s.actionIcon,title:s.title},className:s.tileBar,title:c.a.createElement("div",null,c.a.createElement("div",{className:s.description,id:"description"},e.description," ",e.maxPurchaseQuantity>0&&c.a.createElement("em",null,"(Limit ",e.maxPurchaseQuantity,")")),c.a.createElement(Ae.a,{arrow:!0,enterTouchDelay:0,placement:"bottom-start",title:e.name},c.a.createElement("div",{className:s.name},e.name))),subtitle:c.a.createElement("div",null,c.a.createElement(Ot.a,{className:s.cost,color:"primary",label:c.a.createElement(Ve,{value:e.cost}),size:"small"}),("teacher"===l||e.quantity<5)&&c.a.createElement(Ot.a,{className:s.quantity,color:"secondary",label:"teacher"===l?"".concat(e.quantity," available"):"only ".concat(e.quantity," left"),size:"small",variant:"outlined"})),actionIcon:"teacher"===l?c.a.createElement(c.a.Fragment,null,c.a.createElement(Ge,{action:"Remove inventory",className:s.icon,onClick:function(){return E(e,"remove")}},c.a.createElement(po.a,null)),c.a.createElement(Ge,{action:"Add inventory",className:s.icon,onClick:function(){return E(e,"add")}},c.a.createElement(st.a,null)),c.a.createElement(so,{product:e,brightHover:!0}),c.a.createElement(fo,{product:e})):o&&c.a.createElement(Ge,{action:r?"Max limit reached":"Add to cart",disabled:r,onClick:function(){return function(e){return t(e)}(e)},className:s.icon},c.a.createElement(lr.a,{badgeContent:n.quantities[e._id],color:"secondary"},c.a.createElement(Ye.a,null)))}))})):c.a.createElement(x.a,null,"teacher"===l?"You have no products":"Your teacher has not added any products")))},ho=a(874),vo=Object(r.c)((function(){return{}}),(function(e){return{onDelete:function(t){return e({type:"DELETE_PRODUCT",payload:Ne.a.Products.delete(t.slug),snackbar:{message:"Product deleted",variant:"success"}})},onUpdate:function(t){return e({type:"UPDATE_PRODUCT",payload:Ne.a.Products.update(t)})}}}))((function(e){var t=e.onDelete,a=e.onUpdate,n=e.products,r=Object(o.useState)([]),l=Object(ge.a)(r,2),s=l[0],i=l[1],u=Object(o.useState)([{title:"Product Name",field:"name"},{title:"Cost",field:"cost",render:function(e){return c.a.createElement(Ve,{value:e.cost})}},{title:"Max Purchase Quantity",field:"maxPurchaseQuantity"},{title:"On-hand Quantity",field:"quantity"}]),m=Object(ge.a)(u,1)[0],d=function(e,t){return a(Object(p.a)(Object(p.a)({},e),{},{quantity:"add"===t?e.quantity+1:e.quantity-1}))};return Object(o.useEffect)((function(){i(n)}),[n]),c.a.createElement(Ue.a,{actions:[{icon:"add",onClick:function(e,t){return d(t,"add")},position:"row",tooltip:"Add inventory"},{icon:"remove",onClick:function(e,t){return d(t,"remove")},position:"row",tooltip:"Remove inventory"},{component:"ProductDialog",icon:"edit",position:"row",tooltip:"Edit product"}],columns:m,components:{Action:function(e){return"ProductDialog"===e.action.component?c.a.createElement(so,{product:e.data}):c.a.createElement(Re.MTableAction,e)}},data:s,editable:{onRowDelete:function(e){return new Promise((function(a,n){var r=Object(ke.a)(s),o=e.tableData.id;r.splice(o,1),i(Object(ke.a)(r)),t(e),a()}))},onRowUpdate:function(e,t){return new Promise((function(n,r){var o=Object(ke.a)(s);o[t.tableData.id]=Object(p.a)({},e),i(Object(ke.a)(o)),a(e),n()}))}},icons:{Edit:function(){return c.a.createElement(ho.a,null)}},localization:{body:{deleteTooltip:"Delete product",editTooltip:"Quick edit product",editRow:{deleteText:"Delete product?",saveTooltip:"Confirm"},emptyDataSourceMessage:"No products to display"}},options:{actionsColumnIndex:-1,paging:!1,showTitle:!1},style:{boxShadow:"none",width:"100%"}})})),yo=a(542),Oo=a.n(yo),So=a(541),jo=a.n(So),Ao=Object(w.a)((function(e){return{title:{color:e.palette.common.white,margin:"0 auto"}}})),Do=function(e){var t=e.onClose,a=e.title,n=Ao();return c.a.createElement(_.a,{position:"relative"},c.a.createElement(k.a,null,c.a.createElement(Be.a,{edge:"start",onClick:t},c.a.createElement(qe.a,null)),c.a.createElement(x.a,{variant:"h5",className:n.title},a)))},Po=Object(w.a)((function(e){return{cartIcon:{marginRight:e.spacing(1)}}})),Co=Object(r.c)((function(e){return Object(p.a)(Object(p.a)(Object(p.a)(Object(p.a)({},e.common.currentUser),e.common.settings),e.purchases),e.scores.total)}),(function(e){return{onDelete:function(t){return e({type:"DELETE_CART_PRODUCT",productId:t})},onLoad:function(t){return e({type:"STUDENT_CART_LOADED",payload:Ne.a.Scores.getStudentScores(t)})},onSubmit:function(t){return e({type:"SUBMIT_PURCHASE",payload:Ne.a.Purchases.add(t),snackbar:{message:"Order submitted",variant:"success"}})},onUnload:function(){return e({type:"STUDENT_CART_UNLOADED"})},onUpdate:function(t,a){return e({type:"UPDATE_CART_PRODUCT_QUANTITY",productId:t,qty:a})}}}))((function(e){var t=e.allowPurchasesWithInsufficientFunds,a=e.balance,n=e.cart,r=e.errors,l=e.hasPrime,s=e.inProgress,i=e.onDelete,u=e.onLoad,m=e.onSubmit,d=e.onUnload,p=e.onUpdate,E=e.prime,f=e.taxRate,b=e.username,g=Object(o.useState)(!1),h=Object(ge.a)(g,2),v=h[0],S=h[1],j=ft(n.products,n.quantities,f,E.enabled&&l?E.storePurchaseDiscount:0).invoice,A=Po(),D=function(){return S(!1)},P=Object.values(n.quantities).reduce((function(e,t){return e+t}),0),C=!t&&j.total>a;return Object(o.useEffect)((function(){return u(b),function(){d()}}),[]),c.a.createElement(c.a.Fragment,null,c.a.createElement(ie.a,{color:"primary",disabled:0===n.products.length,onClick:function(){return S(!0)},variant:"extended"},c.a.createElement(ir,{value:P},c.a.createElement(jo.a,{className:A.cartIcon}),"Checkout")),c.a.createElement(O.a,{fullScreen:!0,open:v,onClick:function(e){return e.stopPropagation()},onClose:D,onFocus:function(e){return e.stopPropagation()},TransitionComponent:_a},c.a.createElement(Do,{onClose:D,title:"Store"}),c.a.createElement(ee,null,c.a.createElement(y.a,null,c.a.createElement(je,{title:"Complete Your Order"},c.a.createElement(ie.a,{color:"primary",disabled:0===n.products.length||C,onClick:function(){m({products:n.products,quantities:n.quantities,status:"pending"}),D()},variant:"extended"},c.a.createElement(Oo.a,{className:A.cartIcon}),"Place Your Order")),c.a.createElement(Oe,{errors:r}),(C||j.total>a)&&c.a.createElement(fa,{disableClose:!0,severity:"warning"},"Insufficient funds! You have ",c.a.createElement(Ve,{value:a})),s?c.a.createElement(Pa,{message:"Loading..."}):c.a.createElement(vt,{actions:{delete:i,update:p},products:n.products,quantities:n.quantities})))))})),To=Object(r.c)((function(e){return{hasPrime:e.common.currentUser.hasPrime,prime:e.common.settings.prime,purchases:e.purchases.purchases,taxRate:e.common.settings.taxRate}}),(function(e){return{onDelete:function(t){return e({type:"STUDENT_DELETE_PURCHASE",payload:Ne.a.Purchases.delete(t),snackbar:{message:"Purchase deleted",variant:"success"}})}}}))((function(e){var t=e.hasPrime,a=e.onDelete,n=e.prime,r=e.purchases,l=e.taxRate,s=Object(o.useState)([]),i=Object(ge.a)(s,2),u=i[0],m=i[1],d=n.storePurchaseDiscount,p=n.enabled&&d>0&&t,E=r.map((function(e){return{createdAt:Ie()(e.createdAt),note:e.note,quantities:e.quantities,products:e.products,status:e.status,totalCost:e.products.reduce((function(t,a){return t+a.cost*e.quantities[a._id]*(l/100+1)*(p?1-d/100:1)}),0),totalItems:Object.values(e.quantities).reduce((function(e,t){return e+t}),0),_id:e._id}})),f=Object(o.useState)([{title:"Purchase Date",field:"createdAt",editable:"never",render:function(e,t){return"row"===t?e.createdAt.format("ddd, MMM D, YYYY"):e.format("ddd, MMM D, YYYY")}},{title:"Total Items",field:"totalItems"},{title:"Total Cost",field:"totalCost",render:function(e){return c.a.createElement(Ve,{value:e.totalCost})}},{title:"Notes",field:"note"},{title:"Status",field:"status"}]),b=Object(ge.a)(f,1)[0];return Object(o.useEffect)((function(){m(E)}),[r]),c.a.createElement(Ue.a,{title:"Orders",columns:b,data:u,localization:{body:{emptyDataSourceMessage:"No purchases have been made",editRow:{deleteText:"Delete purchase? This will cancel your order",saveTooltip:"Delete purchase"}}},options:{actionsColumnIndex:-1,paging:!1,showTitle:!1},detailPanel:function(e){return c.a.createElement(vt,{products:e.products,quantities:e.quantities})},onRowClick:function(e,t,a){return a()},editable:{isDeletable:function(e){return"pending"===e.status},onRowDelete:function(e){return new Promise((function(t,n){var r=Object(ke.a)(u),o=e.tableData.id;r.splice(o,1),m(Object(ke.a)(r)),a(e._id),t()}))}}})})),No=Object(r.c)((function(e){return Object(p.a)({},e.purchases)}),(function(e){return{onLoad:function(){return e({type:"STUDENT_PURCHASES_LOADED",payload:Ne.a.Purchases.forStudent()})},onUnload:function(){return e({type:"STUDENT_PURCHASES_UNLOADED"})}}}))((function(e){var t=e.errors,a=e.inProgress,n=e.onLoad,r=e.onUnload,l=Object(o.useState)(!1),s=Object(ge.a)(l,2),i=s[0],u=s[1],m=function(){u(!1),r()};return c.a.createElement(c.a.Fragment,null,c.a.createElement(D.a,{onClick:function(){u(!0),n()},size:"small"},"Your orders"),c.a.createElement(O.a,{fullScreen:!0,open:i,onClick:function(e){return e.stopPropagation()},onClose:m,onFocus:function(e){return e.stopPropagation()},TransitionComponent:_a},c.a.createElement(Do,{onClose:m,title:"Store"}),c.a.createElement(ee,null,c.a.createElement(y.a,null,c.a.createElement(je,{title:"Your Orders"}),c.a.createElement(Oe,{errors:t}),a?c.a.createElement(Pa,{message:"Loading..."}):c.a.createElement(To,null)))))})),wo=Object(r.c)((function(e){return Object(p.a)(Object(p.a)(Object(p.a)({settings:e.common.settings},e.common.currentUser),e.products),e.purchases)}),(function(e){return{onAddToCart:function(t){return e({type:"ADD_TO_CART",product:t})},onLoad:function(){return e({type:"PRODUCTS_PAGE_LOADED",payload:Ne.a.Products.getAll()})},onPageChange:function(t,a){return e({type:"NAV_TAB_CHANGE",value:t,redirectTo:a})},onUnload:function(){return e({type:"PRODUCTS_PAGE_UNLOADED"})},onUpdateInventory:function(t){return e({type:"UPDATE_PRODUCT",payload:Ne.a.Products.update(t)})}}}))((function(e){var t=e.cart,a=e.onAddToCart,n=e.onLoad,r=e.onPageChange,l=e.onUnload,s=e.onUpdateInventory,i=e.pageLoaded,u=e.products,m=e.role,d=e.settings,p=Object(o.useState)("inStock"),E=Object(ge.a)(p,2),f=E[0],b=E[1],g=Object(o.useState)(!1),h=Object(ge.a)(g,2),v=h[0],y=h[1],O="teacher"===m,S=u.filter((function(e){return e.quantity>0})),j=u.filter((function(e){return e.quantity<=0})),A=function(e){return s(e)},P=function(e){return function(t,a){return b(!!a&&e)}};return Object(o.useEffect)((function(){return n(),function(){l()}}),[]),c.a.createElement(c.a.Fragment,null,c.a.createElement(je,{title:O?"Manage Products":"View Products"},O?c.a.createElement(c.a.Fragment,null,c.a.createElement(Ge,{action:"Switch to ".concat(v?"Table view":"Grid view"),onClick:function(){return y(!v)}},v?c.a.createElement(_r.a,null):c.a.createElement(kr.a,null)),d.storeEnabled&&c.a.createElement(D.a,{onClick:function(){return r("store","/".concat(m,"/store"))},size:"small"},"Manage purchases"),c.a.createElement(so,null)):d.storeEnabled&&c.a.createElement(c.a.Fragment,null,c.a.createElement(no,{trigger:"button"}),c.a.createElement(No,null),c.a.createElement(Co,null))),"student"===m&&c.a.createElement(no,{trigger:"banner"}),i?O?c.a.createElement(me.a,{container:!0,spacing:8},c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(mn.a,{expanded:"inStock"===f,onChange:P("inStock")},c.a.createElement(dn.a,{expandIcon:c.a.createElement(En.a,null)},c.a.createElement(x.a,{variant:"h5",gutterBottom:!0},"In Stock")),c.a.createElement(pn.a,null,v?c.a.createElement(go,{onInventoryChange:A,products:S,userRole:m}):c.a.createElement(vo,{products:S}))),c.a.createElement(mn.a,{expanded:"outOfStock"===f,onChange:P("outOfStock")},c.a.createElement(dn.a,{expandIcon:c.a.createElement(En.a,null)},c.a.createElement(x.a,{variant:"h5",gutterBottom:!0},"Out of Stock")),c.a.createElement(pn.a,null,v?c.a.createElement(go,{onInventoryChange:A,products:j,userRole:m}):c.a.createElement(vo,{products:j})))),d.prime.enabled&&c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(x.a,{variant:"h5",gutterBottom:!0},"Prime ",c.a.createElement(Te,{title:"The banner below is visible to students at the top of this page when Prime is enabled"})),c.a.createElement(no,{trigger:"banner"}))):c.a.createElement(me.a,{container:!0,spacing:8},c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(go,{cart:t,products:S,onAddToCart:function(e){return a(e)},storeEnabled:d.storeEnabled,userRole:m}))):c.a.createElement(Pa,{message:"Loading..."}))})),_o=Object(r.c)((function(e){return{currentUser:e.common.currentUser}}),(function(){return{}}))((function(e){var t=e.currentUser;return t?c.a.createElement(c.a.Fragment,null,c.a.createElement(N,{user:t}),c.a.createElement(F,null),c.a.createElement(ee,null,c.a.createElement(y.a,null,c.a.createElement(i.d,null,c.a.createElement(ae,{path:"/student/account",component:Kt}),c.a.createElement(ae,{path:"/student/passes",component:na}),c.a.createElement(ae,{path:"/student/settings",component:_e}),c.a.createElement(ae,{path:"/student/songs",component:da}),c.a.createElement(ae,{path:"/student/store",component:wo}),c.a.createElement(ae,{path:"/teacher/accounts",component:An}),c.a.createElement(ae,{path:"/teacher/courses",component:er}),c.a.createElement(ae,{path:"/teacher/products",component:wo}),c.a.createElement(ae,{path:"/teacher/settings",component:_e}),c.a.createElement(ae,{path:"/teacher/songs",component:dr}),c.a.createElement(ae,{path:"/teacher/store",component:br}),c.a.createElement(ae,{path:"/admin/settings",component:_e}),c.a.createElement(ae,{path:"/admin/teachers",component:wr}),c.a.createElement(i.b,{component:te}))),c.a.createElement(X,null))):c.a.createElement(i.a,{to:"/login"})})),ko=a(321),xo=a.n(ko),Ro=a(322),Uo=a.n(Ro),Lo=Object(w.a)((function(e){return{background:{alignItems:"center",backgroundImage:"url(".concat(Uo.a,")"),backgroundSize:"cover",display:"flex",height:"100%",justifyContent:"center"},logo:{marginBottom:e.spacing(4),width:160},panel:{alignItems:"center",borderRadius:"1rem",display:"flex",flexFlow:"column nowrap",overflowY:"scroll",padding:"2rem 4rem",position:"relative"},text:{color:e.palette.primary.main,fontStyle:"italic"}}})),Io=function(e){var t=Lo();return c.a.createElement(xo.a,{className:t.background},c.a.createElement(ue.a,{elevation:12,className:t.panel},c.a.createElement(M,{className:t.logo}),c.a.createElement(x.a,{className:t.text,variant:"h4"},"Loading...")))},qo=a(140),Mo=a(877),Bo=a(839),Fo=a(543),Go=a.n(Fo),Wo=Object(w.a)((function(e){return{page:{"& p:not(:last-of-type)":{marginBottom:e.spacing(2)}},profile:{borderRadius:"100%",boxShadow:e.shadows[10],float:"right",marginBottom:e.spacing(2),marginLeft:e.spacing(2),width:"120px"}}})),Ho=function(){var e=Wo();return c.a.createElement(me.a,{className:e.page,container:!0,spacing:2},c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(x.a,{align:"center",gutterBottom:!0,variant:"h5"},"What is Chem Cash?"),c.a.createElement("img",{className:e.profile,src:Go.a}),c.a.createElement(x.a,{variant:"body2"},"Hi! I'm Joseph May, a high school chemistry teacher from Las Vegas. While I love teaching chemistry, I also love programming for the web, so why not combine the two."),c.a.createElement(x.a,{variant:"body2"},"Chem Cash is a points-based rewards system I use in my classroom. The idea for this site came from a colleage who was inspired by one of his own high school science teachers."),c.a.createElement(x.a,{variant:"body2"},"Students earn points in two ways: (1) through payouts based on their assessment scores and (2) with bonus points earned for anything I deam worthy of reward such as winning in-class competitions or going above and beyond to help me or a student."),c.a.createElement(x.a,{variant:"body2"},'These points can be used to "purchase" goods such as school supplies, electronics, and anything I can find for cheap or get for free.'),c.a.createElement(x.a,{variant:"body2"},"However, the hottest-selling item is song requests. During work time in my class I play music for my students. Each class period has its own playlist and students can only add songs to the playlist by spending their Chem Cash points."),c.a.createElement(x.a,{variant:"body2"},"I created this program to help manage all of the logistics behind this system of incentives. While it can support multiple teachers, I am running it on no-cost servers, so it was not intended to be a public program. Although, if you are interested in learning more, please reach out to me"," ",c.a.createElement(Bo.a,{href:"mailto:jwmay87+chemcash@gmail.com"},"here"),".")))},Yo=Object(r.c)((function(e){return Object(p.a)({},e.auth)}),(function(e){return{onSubmit:function(t,a){return e({type:C,payload:Ne.a.Auth.login(t,a)})}}}))((function(e){return c.a.createElement(ce.c,{initialValues:{username:"",password:""},validationSchema:se.c({username:se.d().required("Required"),password:se.d().required("Required")}),onSubmit:function(t){!function(t,a){e.onSubmit(t,a)}(t.username,t.password)}},c.a.createElement(ce.b,null,c.a.createElement(me.a,{container:!0,spacing:4},c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(Oe,{errors:e.errors}),c.a.createElement(ce.a,{component:le.c,disabled:e.inProgress,fullWidth:!0,label:"Username",name:"username",type:"text",variant:"outlined"})),c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(ce.a,{component:le.c,disabled:e.inProgress,fullWidth:!0,label:"Password",name:"password",type:"password",variant:"outlined"})),c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(D.a,{color:"primary",disabled:e.inProgress,size:"large",type:"submit",variant:"contained"},e.inProgress?"Loading...":"Login")))))})),zo=Object(w.a)((function(e){return{aboutLink:{bottom:e.spacing(2),position:"absolute",right:e.spacing(4)},loginLink:{marginBottom:e.spacing(2),"& > a":{textDecoration:"none"}},logo:{display:"block",margin:"0 auto",width:120},page:Object(xe.a)({alignItems:"center",backgroundImage:"url(".concat(Uo.a,")"),backgroundSize:"cover",display:"flex",height:"100%",justifyContent:"center"},e.breakpoints.up("lg"),{backgroundSize:"initial",justifyContent:"flex-end"}),panel:Object(xe.a)({borderRadius:"1rem",maxHeight:"90%",overflowY:"scroll",padding:"4rem 2rem",position:"relative",width:"80%"},e.breakpoints.up("lg"),{borderRadius:"0",height:"100%",maxHeight:"100%",width:"40%"}),progress:{height:10,left:"0",position:"absolute",top:"0",width:"100%"}}})),Vo=function(){var e=zo();return c.a.createElement("span",{className:e.aboutLink},c.a.createElement(Ae.a,{arrow:!0,enterTouchDelay:0,title:"Learn more"},c.a.createElement(qo.a,{to:"/about"},c.a.createElement(ca.a,{color:"secondary",fontSize:"small"}))))},Qo=function(){var e=zo();return c.a.createElement("div",{className:e.loginLink},c.a.createElement(qo.a,{to:"/login"},c.a.createElement(D.a,{color:"secondary",startIcon:c.a.createElement(Mo.a,null)},"Login")))},Ko=Object(r.c)((function(e){return Object(p.a)(Object(p.a)({},e.auth),{},{currentUser:e.common.currentUser,pathname:e.router.location.pathname})}),(function(e){return{onUnload:function(){return e({type:"LOGIN_PAGE_UNLOADED"})}}}))((function(e){var t=e.currentUser,a=e.inProgress,n=e.onUnload,r=e.pathname,l=zo();return Object(o.useEffect)((function(){return function(){return n()}}),[]),t?c.a.createElement(i.a,{to:"/"}):c.a.createElement(xo.a,null,c.a.createElement("div",{className:l.page},c.a.createElement(ue.a,{elevation:12,className:l.panel},a&&c.a.createElement($t.a,{className:l.progress}),c.a.createElement(me.a,{container:!0,spacing:4},c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(M,{className:l.logo})),c.a.createElement(me.a,{item:!0,xs:12},r.includes("about")?c.a.createElement(c.a.Fragment,null,c.a.createElement(Qo,null),c.a.createElement(Ho,null)):c.a.createElement(c.a.Fragment,null,c.a.createElement(Vo,null),c.a.createElement(Yo,null)))))))})),Jo=a(392),$o=function(e){var t=e.snackbar,a=Object(Jo.b)().enqueueSnackbar;return Object(o.useEffect)((function(){t&&a(t.message,{variant:t.variant})}),[t]),e.children},Xo=Object(r.c)((function(e){return{snackbar:e.notifier.snackbar}}),(function(e){return{onSnackbarClose:function(){return e({type:"SNACKBAR_CLOSED"})}}}))((function(e){var t=c.a.createRef(),a=function(e){return function(){t.current.closeSnackbar(e)}};return c.a.createElement(Jo.a,{maxSnack:3,ref:t,action:function(e){return c.a.createElement(D.a,{onClick:a(e)},"Dismiss")},onClose:function(){e.onSnackbarClose()}},c.a.createElement($o,{snackbar:e.snackbar},e.children))})),Zo=function(e){var t=e.date;return c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(x.a,{variant:"body1"},c.a.createElement("em",null,t)))},ec=function(e){var t=e.children,a=e.title;return c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(x.a,{variant:"subtitle2"},a),c.a.createElement(x.a,{variant:"body2"},t))},tc=function(){return c.a.createElement(me.a,{container:!0,spacing:4},c.a.createElement(me.a,{item:!0,xs:12,container:!0,spacing:2},c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(x.a,{variant:"h6"},"Latest Updates")),c.a.createElement(Zo,{date:"September 4, 2023"}),c.a.createElement(ec,{title:"Hallpass Usage"},"You can now view your hallpass usage and see how many passes you have left from the new ",c.a.createElement("em",null,"Passes")," tab found along the bottom navigation. This is only available if your teacher has enabled hallpasses in Chem Cash.")),c.a.createElement(me.a,{item:!0,xs:12,container:!0,spacing:2},c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(x.a,{variant:"h6"},"Previous Updates")),c.a.createElement(Zo,{date:"August 1, 2023"}),c.a.createElement(ec,{title:"Chem Cash Prime"},"If enabled by your teacher, Chem Cash Prime may give you access to Chem Cash features and discounts for a one-time membership fee depending on your teacher's settings. To see if your teacher has enabled Chem Cash Prime, go to the ",c.a.createElement("em",null,"Store")," tab and look for the Chem Cash Prime banner at the top of the page."),c.a.createElement(Zo,{date:"October 14, 2022"}),c.a.createElement(ec,{title:"Dark Mode"},"Like things dark? Chem Cash now has a dark mode that you can activate by going to the Settings tab and switching on dark mode under Appearance. Be sure to save your changes in order for the dark mode to activate."),c.a.createElement(Zo,{date:"October 10, 2022"}),c.a.createElement(ec,{title:"Hallpasses"},"If enabled by your teacher, you can now create a digital hallpass for using the restroom. Your teacher can choose to set a point value for hallpasses, which will be deducted from your account. You can only generate one hallpass per day and only if there is not already an active hallpass for another student. You can create a hallpass by clicking the restroom icon on the Account page."),c.a.createElement(ec,{title:"Sorting by Dates"},"Sorting by dates in all tables (transactions, songs, and purchases) now works as expected, sorting by date and not alphabetically."),c.a.createElement(Zo,{date:"August 22, 2022"}),c.a.createElement(ec,{title:"Score and Transaction Notifications"},"You will now receive notifications when new or updated assessment scores post to your account and when new bonuses and quick purchases post to your account."),c.a.createElement(Zo,{date:"August 1, 2022"}),c.a.createElement(ec,{title:"Notification Center"},"You will now see notifications when you first login if there are updates to your song and online purchase requests. You will see if your requests were approved or denied and will see any notes associted with your request."),c.a.createElement(ec,{title:"Online Purchases"},"If your teacher has enabled the feature, you can now make purchases online! You can add items to your cart on the Store page, manage your cart, submit your order, and view your previous orders."),c.a.createElement(ec,{title:"Product Quantities"},"You can now see when there are fewer than five items of any given product with a new badge shown on the Products or Store page."),c.a.createElement(Zo,{date:"Dec 30, 2021"}),c.a.createElement(ec,{title:"Delete Songs"},"You can now request songs to be removed from your class playlist by going to the 'Songs' tab and clicking the trash can icon next to the song you want removed. This feature is only available if your teacher has activated it."),c.a.createElement(ec,{title:"What's New Notifications"},"This notification is a new feature! When new Chem Cash udpates are released this notification will appear once on the first time you access the website after the update is released.")))},ac=function(){return c.a.createElement(me.a,{container:!0,spacing:4},c.a.createElement(me.a,{item:!0,xs:12,container:!0,spacing:2},c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(x.a,{variant:"h6"},"Latest Updates")),c.a.createElement(Zo,{date:"October 28, 2023"}),c.a.createElement(ec,{title:"Assignment Data Viewer"},"You can now view statistical data for individual assignments including average, pass/fail rates, grade breakdowns, a histogram of student scores, and a list of student scores. Just go to the ",c.a.createElement("em",null,"Courses")," ","page, then click the ",c.a.createElement("em",null,"Manage assignments")," button for a course. From the dialog that opens, click on the ",c.a.createElement("em",null,"View data")," button for any assignment.")),c.a.createElement(me.a,{item:!0,xs:12,container:!0,spacing:2},c.a.createElement(me.a,{item:!0,xs:12},c.a.createElement(x.a,{variant:"h6"},"Previous Updates")),c.a.createElement(Zo,{date:"October 8, 2023"}),c.a.createElement(ec,{title:"Random Group Generator"},"You can now create 2 to 20 random groups of students in a given course using the Random Group Generator found on the Courses page."),c.a.createElement(Zo,{date:"September 4, 2023"}),c.a.createElement(ec,{title:"Student Pass Usage"},"Students can view their hallpass usage and see how many passes they have left from a new ",c.a.createElement("em",null,"Passes")," tab found along the bottom naviagation bar for student accounts only."),c.a.createElement(Zo,{date:"August 1, 2023"}),c.a.createElement(ec,{title:"Chem Cash Prime"},"When enabled, Chem Cash Prime allows you to charge students a one-time membership fee for access to various features and discounts of your choice including access to dark mode, the ability to remove songs, same-day delivery, and discounts on songs, purchases, and hallpasses. Go to the ",c.a.createElement("em",null,"Settings")," page to enable Prime as this is a great way for students to spend their points. To see the Prime banner and purchase experience that students will have, go to the bottom of the"," ",c.a.createElement("em",null,"Products")," page when Prime is enabled."),c.a.createElement(ec,{title:"Suspend Student Accounts"},"A new toggle on the 'Edit Student' dialog allows students to be dropped which suspends their account. Students will not be able to create hallpasses, make song requests, or submit online purchases while thier account is dropped/suspended. Dropped/suspended students will not appear in the bulk bonus or bulk purchase table and they will not affect the data in the economy view."),c.a.createElement(ec,{title:"New Hallpass Limitations"},"While students can only generate one hallpass per day, you can now limit the total number of hallpasses a student can generate. You can also now prevent students from purchasing a hallpass if they do not have enough points. You can enable these new limitations in the Hallpasses section of the ",c.a.createElement("em",null,"Settings")," page. Once students reach this limit, they will not be able to generate their own hallpasses (if this feature is enabled) but you will still be able to generate a pass for them if needed, which is also true for students with insufficient points for a hallpass."),c.a.createElement(ec,{title:"Table View for Managing Products"},"A new table view is the default for managing products. The table quickly shows you each product's name, cost, max purchase quantity, and on-hand quantity each of which you can sort by. You can still quickly update inventory, edit products, and delete products from this new table view. You can also search for products. Of course, the original grid view, similar to what students see, is still available via a toggle switch at the top of the Manage Products page."),c.a.createElement(ec,{title:"Product Inventory Updates When Purchases are Submitted"},"Product inventory in the Store is updated once a purchase is submitted rather than approved. This ensures that when a purchase is submitted for an item that would then be out of stock, no other student can also submit an order for it."),c.a.createElement(ec,{title:"New Sorting When Processing Online Orders and Song Requests"},"When processing online purchases and song requests, you will see that they are now sorted oldest to newest rather than the other way around. This makes it more first-come-first served."),c.a.createElement(ec,{title:"Hallpasses Out of Beta"},"Hallpasses are now ready for primetime and are out of beta!"),c.a.createElement(Zo,{date:"October 14, 2022"}),c.a.createElement(ec,{title:"Dark Mode"},"Chem Cash now has a dark mode that you or students can activate by going to the Settings tab and switching on dark mode under Appearance. Be sure to save your changes in order for the dark mode to activate."),c.a.createElement(Zo,{date:"October 10, 2022"}),c.a.createElement(ec,{title:"Hallpasses (beta)"},"If you have beta features enabled, you can now enalbe hallpasses. This allows teachers and students to create digital hallpasses for students to leave the classroom. You can choose to set a point value for hallpasses, which will automatically be deducted from student's accounts. Students can only generate one hallpass per day and only if there is not already an active hallpass for another student. You can create a hallpass for a student anytime by clicking the restroom icon on the Account page when you have a student account open. To view, edit, and delete active and expired hallpasses, go to the Accounts page and click the Update Accounts button. Then select Manage Hallpasses."),c.a.createElement(ec,{title:"Sorting by Dates"},"Sorting by dates in all tables (transactions, songs, and purchases) now works as expected, sorting by date and not alphabetically."),c.a.createElement(Zo,{date:"August 28, 2022"}),c.a.createElement(ec,{title:"Create and Manage Pre-set Bonuses"},"You can now create and manage pre-set bonuses for quickly adding bonus points to a student's account. In the 'Update Accounts' menu on the 'Accounts' page, you can now select 'Manage Bonuses' to create, edit, and delete pre-set bonuses that can be added to student's accounts. When adding a bonus to a single student or to many students in a class period, you will now see a dropdown menu of any pre-set bonuses you have created that will auto-populate the amount field as well. Of course, free-form bonuses can still be added."),c.a.createElement(ec,{title:"Bonus and Product Selectors Available for Bulk Purchases"},"When adding a bulk bonus or bulk quick purchase to multiple students in a class period, a dropdown of bonuses or products is now available. Selecting a bonus or product from this dropdown will auto-populate the amount field with the amount of the bonus or the cost of the item including tax."),c.a.createElement(ec,{title:"Support for Evergreen School District"},"Bock can now import students from the Evergreen School District into the app when creating courses :) Support for importing scores is coming soon!"),c.a.createElement(Zo,{date:"August 22, 2022"}),c.a.createElement(ec,{title:"Score and Transaction Notifications for Students"},"Students will now receive notifications when new or updated assessment scores post to their account and when new bonuses and quick purchases post to their account."),c.a.createElement(Zo,{date:"August 1, 2022"}),c.a.createElement(ec,{title:"Online Purchases"},"Students can now submit online orders for products! New settings in the"," ",c.a.createElement("em",null,"Products and Online Purchases")," section allow you to control whether students can submit online purchases or not, whether students can submit online purchases if they do not have sufficient points, and a tax rate to be applied to all online purchases of products (does not apply to song requests or removal requests; can be set to zero if you do not want to charge a tax). You can also add purchases to a student's account from the ",c.a.createElement("em",null,"Accounts")," tab."),c.a.createElement(ec,{title:"Processing Purchases"},"If you have enabled online purchases, a new ",c.a.createElement("em",null,"Process Purchases")," ","dialog is available to approve or reject online purchases submitted by students in a manner similar to the song request processing feature. When processing purchases, you will have the option to update the order quantity of each item, add items to the order, remove items from the order, add a note to the order, and approve or reject the order. Upon approval of the order, the on-hand quantity of each product will be automaticaly adjusted."),c.a.createElement(ec,{title:"Notification Center for Student Accounts"},"Students will now see notifications when they first login if there are any updates to their song and online store purchase requests. Approval or rejection notes will also be included with the notification."),c.a.createElement(ec,{title:"Inventory Control Buttons and Quantity Display for Products"},"On the ",c.a.createElement("em",null,"Products")," page, two new inventory control buttons are now available to quickly increase or decrease the amount of on-hand product. The quantity of each product is also now visible directly on each product image. Students will only see the on-hand quantity when there are fewer then five items remaining in stock."),c.a.createElement(ec,{title:"Max Purchase Quantity for Products"},"A new field is now available for products that sets the maximum purchase quantity limit for each product. When combined with the online store, this will limit the quantity of items a student can add to their cart for each product."),c.a.createElement(ec,{title:"Add Quick Purchases with Automatic Inventory Mangement"},"Quick purchases allow you to add a deduction to a student's account for the purchase of a single product from the store or you can enter a custom description. When products from the store are purchased, the inventory is automatically reduced by one."),c.a.createElement(ec,{title:"Points Multiplier for Assignments"},"Assignments can now be weighted with a multiplier to increase or decrease their point value. By default, all assignments are imported with a multiplier of 1. To change the multiplier for an assignment in a course go to ",c.a.createElement("em",null,"Courses")," and click the ",c.a.createElement("em",null,"Manage Assignments")," ","button for that course. Then click the Edit button for the assignment whose multiplier you want to change. The multiplier applies to the points and not to the score."),c.a.createElement(ec,{title:"Google Drive Hosted Images Now Easier to Use"},"You can now directly use the link generated by the ",c.a.createElement("em",null,"Get link")," ","feature on Google Drive to add custom product images to your store. Images hosted on Google Drive must have their share permissions set to"," ",c.a.createElement("em",null,"Anyone with the link")," to properly display for all users."),c.a.createElement(ec,{title:"Song Requests Badge"},"A badge now appears on the ",c.a.createElement("em",null,"Process Songs")," button to indicate the number of song requests that are pending approval. A similar badge also appears on the ",c.a.createElement("em",null,"Process Purchases")," button."),c.a.createElement(ec,{title:"Improved Settings"},"The settings page has been improved to make clear which features are enabled and disabled. A new school district setting has been added because ",c.a.createElement("em",null,"somebody")," had to go and leave CCSD :) so this will ensure that there are no username conflicts with student accounts."),c.a.createElement(Zo,{date:"Jan 31, 2022"}),c.a.createElement(ec,{title:"In Stock and Out of Stock Products"},'Products with a quantity of zero will no longer be visible to students. Teachers will see these products in an "Out of Stock" section on the Products page. Once the product\'s quantity is greater than zero, the product will appear in the "In Stock" section for teachers and will be visible to students.'),c.a.createElement(Zo,{date:"Jan 23, 2022"}),c.a.createElement(ec,{title:"Student Account Balances Visible When Processing Song Requests"},"Student account balances are now visible in the song request processing dialog so you can quickly identify with a red/green color indicator if a student has enough points to buy a song request or a song removal request."),c.a.createElement(ec,{title:"Song Totals Visible When Processing Song Requests"},"The total number of song requests to process is now visible in the song request processing dialog along with a running count of requests remaining to process."),c.a.createElement(Zo,{date:"Jan 17, 2022"}),c.a.createElement(ec,{title:"Economy View"},"You can now view a summary of details about the account balances for students in your courses including the total number of points available in your economy and an interactive table containing the account balances of all students in all of your courses."),c.a.createElement(ec,{title:"Beta Features Flag"},"A new flag that enables beta features when they are available can now be found in the Account Details section of the Settings page."),c.a.createElement(Zo,{date:"Dec 30, 2021"}),c.a.createElement(ec,{title:"Delete Songs"},"Students can now request songs to be removed from thier class playlist by going to the 'Songs' tab and clicking the trash can icon, once you have activated the feature in the Settings."),c.a.createElement(ec,{title:"Delete Songs Settings"},"New settings have been added to control student ability to request songs for deletion as well as settings for the amount of points charged for a song removal and the amount of points refunded to the person whose song was removed."),c.a.createElement(ec,{title:"Search for Products"},"You can now search for products in a dropdown menu when entering purchases on the accounts page and the cost of the product will automatically populate in the amount field."),c.a.createElement(ec,{title:"What's New Notifications"},"This notification is a new feature! When new Chem Cash udpates are released this notification will appear once on the first time you access the website after the update is released.")))},nc=Object(r.c)((function(e){return Object(p.a)({},e.common)}),(function(e){return{onExit:function(){return e({type:"WHATS_NEW_DIALOG_UNLOADED",payload:Ne.a.Auth.save({viewedChanges:!0})})}}}))((function(e){var t=e.currentUser,a=e.onExit,n=Object(o.useState)(!1),r=Object(ge.a)(n,2),l=r[0],s=r[1],i=Object(We.a)(),u=Object(He.a)(i.breakpoints.down("md")),m=function(){s(!1)};return Object(o.useEffect)((function(){t&&s(!t.viewedChanges)}),[t]),c.a.createElement(O.a,{fullScreen:u,fullWidth:!0,maxWidth:"md",open:l,onClose:m,onClick:function(e){return e.stopPropagation()},onExit:a,onFocus:function(e){return e.stopPropagation()}},c.a.createElement(S.a,null,"What's New in Chem Cash!"),c.a.createElement(j.a,null,"student"===(null===t||void 0===t?void 0:t.role)?tc():ac()),c.a.createElement(A.a,null,c.a.createElement(D.a,{onClick:m,variant:"contained"},"Close")))})),rc=a(87),oc=a(544),cc=a(89),lc=(a(774),a(513)),sc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:if(t.subtype===C||"REGISTER"===t.subtype)return Object(p.a)(Object(p.a)({},e),{},{inProgress:!0});break;case C:case"REGISTER":return Object(p.a)(Object(p.a)({},e),{},{inProgress:!1,errors:t.error?t.payload.errors:null});case"LOGIN_PAGE_UNLOADED":case"REGISTER_PAGE_UNLOADED":return{};default:return e}return e},ic={bonuses:[],errors:null},uc=function(e,t){return e.description.localeCompare(t.description)},mc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ic,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_BONUS":return Object(p.a)(Object(p.a)({},e),{},{bonuses:t.error?e.bonuses:[].concat(Object(ke.a)(e.bonuses),[t.payload.bonus]).sort((function(e,t){return uc(e,t)})),errors:t.error?t.payload.errors:null});case"DELETE_BONUS":return Object(p.a)(Object(p.a)({},e),{},{bonuses:t.error?e.bonuses:e.bonuses.filter((function(e){return e._id!==t.payload.bonus._id})),errors:t.error?t.payload.errors:null});case"LOAD_BONUSES":return Object(p.a)(Object(p.a)({},e),{},{bonuses:t.error?e.bonuses:t.payload.bonuses,errors:t.error?t.payload.errors:null});case"UNLOAD_BONUSES":return ic;case"UPDATE_BONUS":return Object(p.a)(Object(p.a)({},e),{},{bonuses:t.error?e.bonuses:e.bonuses.map((function(e){return e._id===t.payload.bonus._id?t.payload.bonus:e})).sort((function(e,t){return uc(e,t)})),errors:t.error?t.payload.errors:null});default:return e}},dc={appName:"Chem Cash",token:null,viewChangeCounter:0},pc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dc,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP_LOAD":return Object(p.a)(Object(p.a)({},e),{},{token:t.token||null,appLoaded:!0,currentUser:t.payload?t.payload.user:null,settings:t.payload?t.payload.settings:null});case"LOGOUT":return Object(p.a)(Object(p.a)({},e),{},{redirectTo:"/login",token:null,currentUser:null});case C:case"REGISTER":return Object(p.a)(Object(p.a)({},e),{},{redirectTo:t.error?null:"/",token:t.error?null:t.payload.user.token,currentUser:t.error?null:t.payload.user,settings:t.error?null:t.payload.settings});case"LOGIN_PAGE_UNLOADED":case"REGISTER_PAGE_UNLOADED":case"SETTINGS_PAGE_UNLOADED":return Object(p.a)(Object(p.a)({},e),{},{viewChangeCounter:e.viewChangeCounter+1});case"NAV_LOADED":case"NAV_TAB_CHANGE":return Object(p.a)(Object(p.a)({},e),{},{redirectTo:t.redirectTo});case"REDIRECT":return Object(p.a)(Object(p.a)({},e),{},{redirectTo:null});case"SETTINGS_SAVED":return Object(p.a)(Object(p.a)({},e),{},{currentUser:t.error?e.currentUser:t.payload[0].user,settings:t.error||"student"===e.currentUser.role?e.settings:t.payload[1].settings});case"SPOTIFY_REMOVE_AUTH":return Object(p.a)(Object(p.a)({},e),{},{settings:t.error?e.settings:Object(p.a)(Object(p.a)({},e.settings),{},{spotifyTokens:void 0})});case"SUBMIT_PRIME_PURCHASE":return Object(p.a)(Object(p.a)({},e),{},{currentUser:t.error?e.currentUser:Object(p.a)(Object(p.a)({},e.currentUser),{},{hasPrime:!0})});case"WHATS_NEW_DIALOG_LOADED":case"WHATS_NEW_DIALOG_UNLOADED":return Object(p.a)(Object(p.a)({},e),{},{currentUser:t.payload?t.payload.user:null});default:return e}},Ec={courses:[],errors:null,importCount:null,importFailed:null,inProgress:!1,pageLoaded:!1},fc=function(e,t){return e.lastName.localeCompare(t.lastName)},bc=function(e,t){return e.period-t.period},gc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ec,t=arguments.length>1?arguments[1]:void 0,a=[];switch(t.type){case"ADD_COURSE":return Object(p.a)(Object(p.a)({},e),{},{courses:t.error?e.courses:[].concat(Object(ke.a)(e.courses),[t.payload.course]).sort((function(e,t){return bc(e,t)})),errors:t.error?t.payload.errors:null,inProgress:!1});case"ADD_STUDENT":return a=[],e.courses.forEach((function(e){var n=Object(p.a)({},e);e._id.toString()===t.courseId&&(n.students=[].concat(Object(ke.a)(e.students),[t.payload.user]).sort((function(e,t){return fc(e,t)}))),a.push(n)})),Object(p.a)(Object(p.a)({},e),{},{courses:t.error?e.courses:a,errors:t.error?t.payload.errors:null,inProgress:!1});case"ALERT_CLOSED":return Object(p.a)(Object(p.a)({},e),{},{importCount:null,importFailed:null});case P:if("ADD_STUDENT"===t.subtype||"ADD_COURSE"===t.subtype||"MOVE_STUDENT"===t.subtype||"UPDATE_COURSE"===t.subtype||"UPDATE_STUDENT"===t.subtype)return Object(p.a)(Object(p.a)({},e),{},{errors:null,inProgress:!0});if("COURSES_PAGE_LOADED"===t.subtype)return Object(p.a)(Object(p.a)({},e),{},{errors:null,pageLoaded:!0});if("IMPORT_STUDENTS"===t.subtype)return Object(p.a)(Object(p.a)({},e),{},{errors:null,importCount:null,importFailed:null,inProgress:!0});break;case"COURSE_DIALOG_UNLOADED":case"STUDENT_DIALOG_UNLOADED":return Object(p.a)(Object(p.a)({},e),{},{errors:null});case"COURSES_PAGE_LOADED":case"STUDENT_SEARCH_LOADED":return Object(p.a)(Object(p.a)({},e),{},{courses:t.payload.courses,pageLoaded:!1});case"COURSES_PAGE_UNLOADED":case"STUDENT_SEARCH_UNLOADED":return Ec;case"DELETE_COURSE":return Object(p.a)(Object(p.a)({},e),{},{courses:t.error?e.courses:e.courses.filter((function(e){return e.slug!==t.payload.course.slug}))});case"DELETE_STUDENT":return a=[],e.courses.forEach((function(e){var n=Object(p.a)({},e);e._id.toString()===t.payload.course._id.toString()&&(n.students=e.students.filter((function(e){return e.username!==t.payload.user.username}))),a.push(n)})),Object(p.a)(Object(p.a)({},e),{},{courses:t.error?e.courses:a});case"IMPORT_STUDENTS":return!t.error&&t.payload.course.students.sort((function(e,t){return fc(e,t)})),Object(p.a)(Object(p.a)({},e),{},{courses:t.error?e.courses:e.courses.map((function(e){return e._id===t.payload.course._id?t.payload.course:e})),errors:t.error?t.payload.errors:null,importCount:t.error?null:t.payload.count,importFailed:t.error?null:t.payload.failed,inProgress:!1});case"MOVE_STUDENT":return!t.error&&t.payload[0].course.students.sort((function(e,t){return fc(e,t)})),!t.error&&t.payload[1].course.students.sort((function(e,t){return fc(e,t)})),Object(p.a)(Object(p.a)({},e),{},{courses:t.error?e.courses:e.courses.map((function(e){return e._id===t.payload[0].course._id?t.payload[0].course:e._id===t.payload[1].course._id?t.payload[1].course:e})),errors:t.error?t.payload.errors:null,inProgress:!1});case"RESET_STUDENT_PASSWORD":return Object(p.a)({},e);case"UPDATE_COURSE":return Object(p.a)(Object(p.a)({},e),{},{courses:t.error?e.courses:e.courses.map((function(e){return e._id===t.payload.course._id?t.payload.course:e})).sort((function(e,t){return bc(e,t)})),errors:t.error?t.payload.errors:null,inProgress:!1});case"UPDATE_STUDENT":a=[];var n=t.payload.user;return e.courses.forEach((function(e){var r=Object(p.a)({},e);e._id.toString()===t.courseId.toString()&&(r.students=e.students.map((function(e){return e._id.toString()===n._id.toString()?n:e})).sort((function(e,t){return fc(e,t)}))),a.push(r)})),Object(p.a)(Object(p.a)({},e),{},{courses:t.error?e.courses:a,errors:t.error?t.payload.errors:null,inProgress:!1});default:return e}return e},hc={errors:null,inProgress:!1,students:[]},vc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hc,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:if("ECONOMY_DIALOG_LOADED"===t.subtype)return Object(p.a)(Object(p.a)({},e),{},{errors:null,inProgress:!0});break;case"ECONOMY_DIALOG_LOADED":return Object(p.a)(Object(p.a)({},e),{},{errors:t.error?t.payload.errors:null,inProgress:!1,students:t.error?e.students:t.payload.students});case"ECONOMY_DIALOG_UNLOADED":return Object(p.a)({},hc);default:return e}return e},yc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NAV_LOADED":case"NAV_TAB_CHANGE":return Object(p.a)(Object(p.a)({},e),{},{navTabValue:t.value});case"NAV_UNLOADED":return{};default:return e}},Oc={errors:null,notifications:[]},Sc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oc,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NOTIFICATION_DIALOG_LOADED":return Object(p.a)(Object(p.a)({},e),{},{errors:t.error?t.payload.errors:null,notifications:t.error?e.notifications:t.payload.notifications});case"NOTIFICATION_DIALOG_UNLOADED":return Oc;default:return e}},jc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_BONUS":case"ADD_COURSE":case"ADD_PASS":case"ADD_PRODUCT":case"ADD_STUDENT":case"ADD_TEACHER":case"ADD_TRANSACTION":case"ADD_TRANSACTIONS":case"DELETE_BONUS":case"DELETE_COURSE":case"DELETE_PASS":case"DELETE_PRODUCT":case"DELETE_PURCHASE":case"DELETE_SONG_REQUEST":case"DELETE_STUDENT":case"DELETE_TASK":case"DELETE_TEACHER":case"DELETE_TRANSACTION":case"IMPORT_SCORES":case"IMPORT_STUDENTS":case"MOVE_STUDENT":case"RESET_STUDENT_PASSWORD":case"SETTINGS_SAVED":case"STUDENT_DELETE_PURCHASE":case"SUBMIT_PURCHASE":case"SUBMIT_PRIME_PURCHASE":case"SUBMIT_SONG_REQUEST":case"SUBMIT_SONG_REMOVAL_REQUEST":case"UPDATE_BONUS":case"UPDATE_COURSE":case"UPDATE_PASS":case"UPDATE_PRODUCT":case"UPDATE_STUDENT":case"UPDATE_TASK":case"UPDATE_TEACHER":case"UPDATE_TRANSACTION":case"WHATS_NEW_FLAGS_RESET":return Object(p.a)(Object(p.a)({},e),{},{snackbar:t.error?null:t.snackbar});case"SNACKBAR_CLOSED":return Object(p.a)(Object(p.a)({},e),{},{snackbar:null});default:return e}},Ac={courses:[],errors:null,inProgress:!1,lastPass:null,pageLoaded:!1,passes:[]},Dc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ac,t=arguments.length>1?arguments[1]:void 0,a=[];switch(t.type){case"ADD_PASS":return Object(p.a)(Object(p.a)({},e),{},{errors:t.error?t.payload.errors:null,inProgress:!1,passes:t.error?e.passes:[t.payload.pass].concat(Object(ke.a)(e.passes))});case P:if("ADD_PASS"===t.subtype||"LOAD_STUDENT_PASSES"===t.subtype||"LOAD_TEACHER_PASSES"===t.subtype)return Object(p.a)(Object(p.a)({},e),{},{errors:null,inProgress:!0});break;case"DELETE_PASS":return e.courses.forEach((function(e){var n=Object(p.a)({},e);n.passes=n.passes.filter((function(e){return e._id.toString()!==t.payload.pass._id.toString()})),a.push(n)})),Object(p.a)(Object(p.a)({},e),{},{courses:t.error?e.courses:a});case"GET_LAST_PASS":return Object(p.a)(Object(p.a)({},e),{},{errors:t.error?t.payload.errors:null,lastPass:t.error?e.lastPass:t.payload.pass});case"LOAD_STUDENT_PASSES":return Object(p.a)(Object(p.a)({},e),{},{errors:t.error?t.payload.errors:null,inProgress:!1,pageLoaded:!0,passes:t.error?e.passes:t.payload.passes});case"LOAD_TEACHER_PASSES":return Object(p.a)(Object(p.a)({},e),{},{courses:t.error?e.courses:t.payload.courses,errors:t.error?t.payload.errors:null,inProgress:!1,pageLoaded:!0});case"LOAD_TEACHER_PASS_DIALOG":return Object(p.a)(Object(p.a)({},e),{},{passes:t.error?e.passes:t.payload.passes,pageLoaded:!0});case"UNLOAD_MANAGE_PASSES":return Ac;case"UPDATE_PASS":return!t.error&&e.courses.forEach((function(e){var n=Object(p.a)({},e);n.passes=n.passes.map((function(e){return e._id.toString()===t.payload.pass._id.toString()?t.payload.pass:e})),a.push(n)})),Object(p.a)(Object(p.a)({},e),{},{courses:t.error?e.courses:a});default:return e}return e},Pc={products:[],errors:null,inProgress:!1,pageLoaded:!1},Cc=function(e,t){return e.cost-t.cost},Tc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pc,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_PRODUCT":return Object(p.a)(Object(p.a)({},e),{},{products:t.error?e.products:[].concat(Object(ke.a)(e.products),[t.payload.product]).sort((function(e,t){return Cc(e,t)})),errors:t.error?t.payload.errors:null,inProgress:!1});case P:if("ADD_PRODUCT"===t.subtype||"UPDATE_PRODUCT"===t.subtype)return Object(p.a)(Object(p.a)({},e),{},{errors:null,inProgress:!0});if("PRODUCT_SELECTOR_LOADED"===t.subtype||"PRODUCTS_PAGE_LOADED"===t.subtype)return Object(p.a)(Object(p.a)({},e),{},{errors:null,inProgress:!0,pageLoaded:!1});break;case"DELETE_PRODUCT":return Object(p.a)(Object(p.a)({},e),{},{products:t.error?e.products:e.products.filter((function(e){return e.slug!==t.payload.product.slug}))});case"PRODUCT_DIALOG_UNLOADED":return Object(p.a)(Object(p.a)({},e),{},{errors:null});case"PRODUCT_SELECTOR_LOADED":case"PRODUCTS_PAGE_LOADED":return Object(p.a)(Object(p.a)({},e),{},{errors:t.error?t.payload.errors:null,inProgress:!1,pageLoaded:!0,products:t.error?e.products:t.payload.products});case"PRODUCT_SELECTOR_UNLOADED":case"PRODUCTS_PAGE_UNLOADED":return Pc;case"UPDATE_PRODUCT":return Object(p.a)(Object(p.a)({},e),{},{errors:t.error?t.payload.errors:null,inProgress:!1,products:t.error?e.products:e.products.map((function(e){return e._id===t.payload.product._id?t.payload.product:e})).sort((function(e,t){return Cc(e,t)}))});default:return e}return e},Nc=a(549),wc={cart:{products:[],quantities:{}},courses:[],errors:null,inProgress:!1,isLoaded:!1,purchases:[]},_c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wc,t=arguments.length>1?arguments[1]:void 0,a=[];switch(t.type){case"ADD_PURCHASE":case"SUBMIT_PURCHASE":case"SUBMIT_PRIME_PURCHASE":return Object(p.a)(Object(p.a)({},e),{},{cart:t.error?e.cart:wc.cart,errors:t.error?t.payload.errors:null,inProgress:!1});case"ADD_PURCHASE_DIALOG_UNLOADED":case"PRIME_PURCHASE_DIALOG_UNLOADED":return wc;case"ADD_TO_CART":var n=e.cart.products.findIndex((function(e){return e._id===t.product._id})),r=n>-1,o=r?e.cart.quantities[t.product._id]+1:1,c=t.product.maxPurchaseQuantity,l=t.product.quantity,s=0!==c?Math.min(c,l):l;return Object(p.a)(Object(p.a)({},e),{},{cart:{products:r?e.cart.products:[].concat(Object(ke.a)(e.cart.products),[t.product]),quantities:Object(p.a)(Object(p.a)({},e.cart.quantities),{},Object(xe.a)({},t.product._id,o<=s?o:s))}});case P:if("STUDENT_PURCHASES_LOADED"===t.subtype||"TEACHER_PURCHASES_LOADED"===t.subtype||"SUBMIT_PURCHASE"===t.subtype||"SUBMIT_PRIME_PURCHASE"===t.subtype)return Object(p.a)(Object(p.a)({},e),{},{errors:null,inProgress:!0});break;case"DELETE_CART_PRODUCT":var i=e.cart.quantities,u=t.productId,m=(i[u],Object(R.a)(i,[u].map(Nc.a)));return Object(p.a)(Object(p.a)({},e),{},{cart:{products:e.cart.products.filter((function(e){return e._id!==t.productId})),quantities:m}});case"DELETE_PURCHASE":return e.courses.forEach((function(e){var n=Object(p.a)({},e);n.purchases=n.purchases.filter((function(e){return e._id.toString()!==t.payload.purchase._id.toString()})),a.push(n)})),Object(p.a)(Object(p.a)({},e),{},{courses:t.error?e.courses:a});case"PURCHASES_DIALOG_UNLOADED":return Object(p.a)(Object(p.a)({},e),{},{errors:null});case"STUDENT_DELETE_PURCHASE":return Object(p.a)(Object(p.a)({},e),{},{purchases:t.error?e.purchases:e.purchases.filter((function(e){return e._id!==t.payload.purchase._id}))});case"STUDENT_PURCHASES_LOADED":return Object(p.a)(Object(p.a)({},e),{},{purchases:t.error?e.purchases:t.payload.purchases,errors:t.error?t.payload.errors:null,inProgress:!1});case"STUDENT_PURCHASES_UNLOADED":return Object(p.a)(Object(p.a)({},wc),{},{cart:e.cart});case"TEACHER_PURCHASES_LOADED":return Object(p.a)(Object(p.a)({},e),{},{courses:t.error?e.courses:t.payload.courses,errors:t.error?t.payload.errors:null,inProgress:!1,isLoaded:!0});case"TEACHER_PURCHASES_UNLOADED":return Object(p.a)({},wc);case"UPDATE_CART_PRODUCT_QUANTITY":return Object(p.a)(Object(p.a)({},e),{},{cart:Object(p.a)(Object(p.a)({},e.cart),{},{quantities:Object(p.a)(Object(p.a)({},e.cart.quantities),{},Object(xe.a)({},t.productId,t.qty))})});case"UPDATE_PURCHASE":return!t.error&&e.courses.forEach((function(e){var n=Object(p.a)({},e);n.purchases=n.purchases.map((function(e){return e._id.toString()===t.payload.purchase._id.toString()?t.payload.purchase:e})),a.push(n)})),Object(p.a)(Object(p.a)({},e),{},{courses:t.error?e.courses:a,errors:t.error?t.payload.errors:null,inProgress:!1});default:return e}return e},kc=a(545),xc={balance:null,conversions:null,errors:null,importSummary:null,inProgress:!1,total:null,transactions:null},Rc=function(e,t){var a=function(e,t){return e+t.amount},n=e.bonuses.reduce(a,0),r=e.purchases.reduce(a,0),o=e.scores.reduce((function(e,a){return e+gt(a,t)}),0);return{balance:n+r+o,bonuses:n,purchases:r,scores:o}},Uc=function(e,t,a){if(a){var n=a._id.toString(),r=e.filter((function(e){return e.student._id.toString()===n}));return r&&(t.scores=Object(kc.unionBy)(r,Object(ke.a)(t.scores),"_id")),t}return null},Lc=function(e,t){for(var a=0,n=Object.keys(t);a<n.length;a++){var r=n[a];r.startsWith(e.type)&&(t[r]=[e].concat(Object(ke.a)(t[r])))}return t},Ic=function(e,t,a){if(a){var n=a._id.toString(),r=e.find((function(e){return e.student._id.toString()===n}));if(r)return Lc(r,t)}return null},qc=function(e,t){for(var a=0,n=Object.keys(t);a<n.length;a++){var r=n[a];r.startsWith(e.type)&&(t[r]=t[r].filter((function(t){return t._id!==e._id})))}return t},Mc=function(e,t){for(var a=0,n=Object.keys(t);a<n.length;a++){var r=n[a];r.startsWith(e.type)&&(t[r]=t[r].map((function(t){return t._id===e._id?e:t})))}return t},Bc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xc,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ACCOUNT_BALANCE_LOADED":return Object(p.a)(Object(p.a)({},e),{},{balance:t.error?null:Rc(t.payload.transactions,t.payload.scoreConverter)});case"ACCOUNT_BALANCE_UNLOADED":return Object(p.a)(Object(p.a)({},e),{},{balance:null});case"STUDENT_CART_LOADED":return Object(p.a)(Object(p.a)({},e),{},{total:t.error?null:Rc(t.payload.transactions,t.payload.scoreConverter)});case"STUDENT_CART_UNLOADED":return Object(p.a)(Object(p.a)({},e),{},{total:null});case"ACCOUNT_VIEW_LOADED":case"STUDENT_PASSES_LOADED":return Object(p.a)(Object(p.a)({},e),{},{conversions:t.error?null:t.payload.scoreConverter,total:t.error?null:Rc(t.payload.transactions,t.payload.scoreConverter),transactions:t.error?null:t.payload.transactions});case"ACCOUNT_VIEW_UNLOADED":return Object(p.a)(Object(p.a)({},e),{},{conversions:null,total:null,transactions:null});case"ACCOUNTS_PAGE_UNLOADED":case"ALERT_CLOSED":return Object(p.a)(Object(p.a)({},e),{},{importSummary:null});case"ADD_PASS":case"ADD_TRANSACTION":var a=t.error?{}:Lc(t.payload.transaction,Object(p.a)({},e.transactions));return Object(p.a)(Object(p.a)({},e),{},{errors:t.error?t.payload.errors:null,inProgress:!1,transactions:t.error?e.transactions:a,total:t.error?e.total:Rc(a,e.conversions)});case"ADD_PURCHASE":var n=t.error?{}:Lc(t.payload.purchase.purchaseTransaction,Object(p.a)({},e.transactions));return Object(p.a)(Object(p.a)({},e),{},{errors:t.error?t.payload.errors:null,inProgress:!1,transactions:t.error?e.transactions:n,total:t.error?e.total:Rc(n,e.conversions)});case"ADD_TRANSACTIONS":var r=t.error?null:Ic(t.payload.transactions,Object(p.a)({},e.transactions),t.curStudent);return Object(p.a)(Object(p.a)({},e),{},{errors:t.error?t.payload.errors:null,inProgress:!1,transactions:t.error||!e.transactions?e.transactions:r,total:t.error||!e.transactions?e.total:Rc(r,e.conversions)});case P:if("ADD_TRANSACTION"===t.subtype||"ADD_TRANSACTIONS"===t.subtype||"DELETE_TRANSACTION"===t.subtype||"UPDATE_TRANSACTION"===t.subtype)return Object(p.a)(Object(p.a)({},e),{},{errors:null,inProgress:!0});if("IMPORT_SCORES"===t.subtype)return Object(p.a)(Object(p.a)({},e),{},{errors:null,importSummary:null,inProgress:!0});break;case"DELETE_PASS":case"DELETE_TRANSACTION":var o=t.error?{}:qc(t.payload.transaction,Object(p.a)({},e.transactions));return Object(p.a)(Object(p.a)({},e),{},{errors:t.error?t.payload.errors:null,inProgress:!1,transactions:t.error||!e.transactions?e.transactions:o,total:t.error||!e.transactions?e.total:Rc(o,e.conversions)});case"IMPORT_SCORES":var c=t.error?null:Uc(t.payload.scores,Object(p.a)({},e.transactions),t.curStudent);return Object(p.a)(Object(p.a)({},e),{},{errors:t.error?t.payload.errors:null,importSummary:t.error?null:t.payload.results,inProgress:!1,transactions:t.error?e.transactions:c,total:t.error||!e.transactions?e.total:Rc(c,e.conversions)});case"IMPORT_SCORES_DIALOG_UNLOADED":case"TRANSACTION_DIALOG_UNLOADED":case"TRANSACTIONS_DIALOG_UNLOADED":return Object(p.a)(Object(p.a)({},e),{},{errors:null});case"UPDATE_PASS":case"UPDATE_TRANSACTION":var l=t.error?{}:Mc(t.payload.transaction,Object(p.a)({},e.transactions));return Object(p.a)(Object(p.a)({},e),{},{errors:t.error?t.payload.errors:null,inProgress:!1,transactions:t.error||!e.transactions?e.transactions:l,total:t.error||!e.transactions?e.total:Rc(l,e.conversions)});default:return e}return e},Fc={errors:null,inProgress:!1,spotifyAuthUrl:null},Gc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fc,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:if("SETTINGS_SAVED"===t.subtype)return Object(p.a)(Object(p.a)({},e),{},{inProgress:!0});break;case"SPOTIFY_LINKER_LOADED":return Object(p.a)(Object(p.a)({},e),{},{spotifyAuthUrl:t.payload.spotifyAuthUrl});case"SETTINGS_PAGE_UNLOADED":case"SPOTIFY_LINKER_UNLOADED":return Fc;case"SETTINGS_SAVED":return Object(p.a)(Object(p.a)({},e),{},{inProgress:!1,errors:t.error?t.payload.errors:null});default:return e}return e},Wc={errors:null,inProgress:!1,scores:[],tasks:[]},Hc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wc,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:if("TASKS_DIALOG_LOADED"===t.subtype||"LOAD_TASK_SCORES"===t.subtype)return Object(p.a)(Object(p.a)({},e),{},{inProgress:!0});break;case"DELETE_TASK":return Object(p.a)(Object(p.a)({},e),{},{tasks:t.error?e.tasks:e.tasks.filter((function(e){return e.slug!==t.payload.task.slug}))});case"LOAD_TASK_SCORES":return Object(p.a)(Object(p.a)({},e),{},{errors:t.error?t.payload.errors:null,inProgress:!1,scores:t.error?[]:t.payload.scores});case"TASKS_DIALOG_LOADED":return Object(p.a)(Object(p.a)({},e),{},{errors:t.error?t.payload.errors:null,inProgress:!1,tasks:t.error?[]:t.payload.tasks});case"TASKS_DIALOG_UNLOADED":return Wc;case"UNLOAD_TASK_SCORES":return Object(p.a)(Object(p.a)({},e),{},{scores:[]});case"UPDATE_TASK":return Object(p.a)(Object(p.a)({},e),{},{tasks:t.error?e.tasks:e.tasks.map((function(e){return e.slug===t.payload.task.slug?t.payload.task:e}))});default:return e}return e},Yc={errors:null,inProgress:!1,pageLoaded:!1,teachers:[]},zc=function(e,t){return e.lastName.localeCompare(t.lastName)},Vc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yc,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TEACHER":return Object(p.a)(Object(p.a)({},e),{},{errors:t.error?t.payload.errors:null,inProgress:!1,teachers:t.error?e.teachers:[].concat(Object(ke.a)(e.teachers),[Object(p.a)(Object(p.a)({},t.payload.user),{},{settings:t.payload.settings})]).sort((function(e,t){return zc(e,t)}))});case P:if("ADD_TEACHER"===t.subtype||"UPDATE_TEACHER"===t.subtype)return Object(p.a)(Object(p.a)({},e),{},{inProgress:!0,errors:null});if("MANAGE_TEACHERS_PAGE_LOADED"===t.subtype)return Object(p.a)(Object(p.a)({},e),{},{errors:null,inProgress:!0,pageLoaded:!1});break;case"DELETE_TEACHER":return Object(p.a)(Object(p.a)({},e),{},{teachers:t.error?e.teachers:e.teachers.filter((function(e){return e.username!==t.payload.user.username}))});case"MANAGE_TEACHERS_PAGE_LOADED":return Object(p.a)(Object(p.a)({},e),{},{errors:t.error?t.payload.errors:null,inProgress:!1,pageLoaded:!0,teachers:t.payload.users});case"MANAGE_TEACHERS_PAGE_UNLOADED":return Yc;case"TEACHER_DIALOG_UNLOADED":return Object(p.a)(Object(p.a)({},e),{},{errors:null});case"UPDATE_TEACHER":return Object(p.a)(Object(p.a)({},e),{},{errors:t.error?t.payload.errors:null,inProgress:!1,teachers:t.error?e.teachers:e.teachers.map((function(e){return e.username===t.payload.user.username?Object(p.a)(Object(p.a)({},e),t.payload.user):e})).sort((function(e,t){return zc(e,t)}))});default:return e}return e},Qc={course:null,courses:[],courseSongs:[],errors:null,inProgress:!1,isLoaded:!1,userSongs:[]},Kc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qc,t=arguments.length>1?arguments[1]:void 0,a=[];switch(t.type){case P:if("UPDATE_SONG_REQUEST"===t.subtype)return Object(p.a)(Object(p.a)({},e),{},{inProgress:!0,errors:null});break;case"DELETE_SONG_REQUEST":return e.courses.forEach((function(e){var n=Object(p.a)({},e);n.songs=n.songs.filter((function(e){return e._id.toString()!==t.payload.song._id.toString()})),a.push(n)})),Object(p.a)(Object(p.a)({},e),{},{courses:t.error?e.courses:a});case"SONG_REQUESTS_DIALOG_UNLOADED":return Object(p.a)(Object(p.a)({},e),{},{errors:null});case"SONGS_PAGE_UNLOADED":return Qc;case"STUDENT_SONGS_PAGE_LOADED":return Object(p.a)(Object(p.a)({},e),{},{userSongs:t.payload.songsByUser,courseSongs:t.payload.songsByCourse,course:t.payload.course});case"SUBMIT_SONG_REQUEST":return Object(p.a)(Object(p.a)({},e),{},{userSongs:[t.payload.song].concat(Object(ke.a)(e.userSongs)),courseSongs:[t.payload.song].concat(Object(ke.a)(e.courseSongs))});case"SUBMIT_SONG_REMOVAL_REQUEST":return Object(p.a)(Object(p.a)({},e),{},{userSongs:e.userSongs.map((function(e){return t.payload.song._id===e._id?t.payload.song:e})),courseSongs:e.courseSongs.map((function(e){return t.payload.song._id===e._id?t.payload.song:e}))});case"TEACHER_SONGS_PAGE_LOADED":return Object(p.a)(Object(p.a)({},e),{},{courses:t.payload.courses,isLoaded:!0});case"UPDATE_SONG_REQUEST":return!t.error&&e.courses.forEach((function(e){var n=Object(p.a)({},e);n.songs=n.songs.map((function(e){return e._id.toString()===t.payload.song._id.toString()?t.payload.song:e})),a.push(n)})),Object(p.a)(Object(p.a)({},e),{},{courses:t.error?e.courses:a,errors:t.error?t.payload.errors:null,inProgress:!1});default:return e}return e},Jc=function(e){return function(t){return function(a){if((o=a.payload)&&"function"===typeof o.then){e.dispatch({type:P,subtype:a.type});var n=e.getState().viewChangeCounter,r=a.skipTracking;a.payload.then((function(t){var o=e.getState();(r||o.viewChangeCounter===n)&&(a.payload=t,e.dispatch({type:"ASYNC_END",promise:a.payload}),e.dispatch(a))}),(function(t){var o=e.getState();(r||o.viewChangeCounter===n)&&(a.error=!0,a.payload=t.response.body,a.skipTracking||e.dispatch({type:"ASYNC_END",promise:a.payload}),e.dispatch(a))}))}else{var o;t(a)}}}},$c=function(e){return function(e){return function(t){"REGISTER"===t.type||t.type===C?t.error||(window.localStorage.setItem("jwt",t.payload.user.token),Ne.a.setToken(t.payload.user.token)):"LOGOUT"===t.type&&(window.localStorage.setItem("jwt",""),Ne.a.setToken(null)),e(t)}}};var Xc,Zc=Object(cc.a)(),el=Object(lc.a)(Zc),tl=Object(rc.createStore)((Xc=Zc,Object(rc.combineReducers)({auth:sc,bonuses:mc,common:pc,courses:gc,economy:vc,nav:yc,notifications:Sc,notifier:jc,passes:Dc,products:Tc,purchases:_c,scores:Bc,settings:Gc,tasks:Hc,teachers:Vc,songs:Kc,router:Object(n.b)(Xc)})),Object(oc.composeWithDevTools)(Object(rc.applyMiddleware)(el,Jc,$c))),al=Object(r.c)((function(e){var t,a;return{appLoaded:e.common.appLoaded,redirectTo:e.common.redirectTo,darkMode:null===(t=e.common)||void 0===t||null===(a=t.currentUser)||void 0===a?void 0:a.darkMode}}),(function(e){return{onLoad:function(t,a){return e({type:"APP_LOAD",payload:t,token:a,skipTracking:!0})},onRedirect:function(){return e({type:"REDIRECT"})}}}))((function(e){var t=e.appLoaded,a=e.redirectTo,n=e.darkMode;return Object(o.useEffect)((function(){a&&(tl.dispatch(Object(u.d)(a)),e.onRedirect())}),[a]),Object(o.useEffect)((function(){var t=window.localStorage.getItem("jwt");t&&Ne.a.setToken(t),e.onLoad(t?Ne.a.Auth.current():null,t)}),[]),t?c.a.createElement(m.a,{theme:n?h:v},c.a.createElement(d.a,null),c.a.createElement(Xo,null,c.a.createElement(o.Suspense,{fallback:c.a.createElement("p",null,"Loading...")},c.a.createElement(i.d,null,c.a.createElement(i.b,{exact:!0,path:"/login",component:Ko}),c.a.createElement(i.b,{exact:!0,path:"/about",component:Ko}),c.a.createElement(i.b,{path:"/",component:_o})))),c.a.createElement(nc,null)):c.a.createElement(m.a,{theme:n?h:v},c.a.createElement(d.a,null),c.a.createElement(Io,null))}));s.a.render(c.a.createElement(r.a,{store:tl},c.a.createElement(n.a,{history:Zc},c.a.createElement(i.d,null,c.a.createElement(i.b,{path:"/",component:al})))),document.getElementById("root"))},9:function(e,t,a){"use strict";(function(e){var n=a(527),r=a.n(n),o=a(528),c=a.n(o),l=r()(c.a,e.Promise),s="https://chem-cash.herokuapp.com/api",i=encodeURIComponent,u=function(e){return e.body},m=null,d=function(e){m&&e.set("authorization","Token ".concat(m))},p=function(e,t){return l.del("".concat(s).concat(e),t).use(d).then(u)},E=function(e){return l.get("".concat(s).concat(e)).use(d).then(u)},f=function(e,t){return l.post("".concat(s).concat(e),t).use(d).then(u)},b=function(e,t){return l.put("".concat(s).concat(e),t).use(d).then(u)},g={current:function(){return E("/user")},login:function(e,t){return f("/users/login",{user:{username:e,password:t}})},register:function(e){return f("/users",{user:e})},save:function(e){return b("/user",{user:e})}},h={add:function(e){return f("/bonuses",{bonus:e})},delete:function(e){return p("/bonuses/".concat(e._id))},getAll:function(){return E("/bonuses")},update:function(e){return b("/bonuses/".concat(e._id),{bonus:e})}},v={add:function(e){return f("/courses",{course:e})},delete:function(e){return p("/courses/".concat(e))},enroll:function(e){return f("/courses/".concat(e.slug,"/enroll"),{course:e})},getAll:function(){return E("/courses")},unenroll:function(e){return p("/courses/".concat(e.slug,"/enroll"),{course:e})},update:function(e){return b("/courses/".concat(e.slug),{course:e})}},y={clearAll:function(){return p("/notifications")},getAll:function(){return E("/notifications")}},O={add:function(e){return f("/passes",{pass:e})},delete:function(e){return p("/passes/".concat(e))},getAll:function(){return E("/passes")},getLastPass:function(){return E("/passes/last")},getStudentPasses:function(e){return E("/passes/student/".concat(e))},update:function(e){return b("/passes/".concat(e._id),{pass:e})}},S={add:function(e){return f("/products",{product:e})},delete:function(e){return p("/products/".concat(e))},getAll:function(){return E("/products")},update:function(e){return b("/products/".concat(e.slug),{product:e})}},j={add:function(e){return f("/purchases",{purchase:e})},delete:function(e){return p("/purchases/".concat(e))},forStudent:function(){return E("/purchases/student")},forTeacher:function(){return E("/purchases/teacher")},update:function(e){return b("/purchases/".concat(e.id),{purchase:e})}},A={getAll:function(){return E("/scores/all")},getStudentScores:function(e){return E("/scores?username=".concat(e))},getTaskScores:function(e){return E("/scores/task?taskId=".concat(e))},import:function(e){return f("/scores/import",{data:e})}},D={update:function(e){return b("/user/settings",{settings:e})}},P={delete:function(e){return p("/songs/".concat(e))},forStudent:function(){return E("/songs/student")},forTeacher:function(){return E("/songs/teacher")},request:function(e){return f("/songs",{song:e})},update:function(e){return b("/songs/".concat(e.id),{song:e})}},C={getAuthUrl:function(){return E("/spotify/auth")},removeAuth:function(){return p("/spotify/auth")}},T={add:function(e,t){return f("/users?courseId=".concat(i(t)),{user:e})},delete:function(e){return p("/users/student/".concat(e.username))},import:function(e,t){return f("/users/import?courseId=".concat(i(t)),{users:e})},update:function(e){return b("/users/".concat(e.username),{user:e})}},N={getAll:function(e){return E("/tasks?courseId=".concat(e))},delete:function(e){return p("/tasks/".concat(e.slug))},update:function(e){return b("/tasks/".concat(e.slug),{task:e})}},w={getAll:function(){return E("/users?role=teacher")},delete:function(e){return p("/users/teacher/".concat(e.username))},resetFlags:function(e){return b("/users/reset?role=".concat(e))},update:function(e){return b("/users/".concat(e.username),{user:e})}},_={add:function(e){return f("/transactions",{transaction:e})},addMany:function(e){return f("/transactions/bulk",{transactions:e})},delete:function(e){return p("/transactions/".concat(e._id))},update:function(e){return b("/transactions/".concat(e._id),{transaction:e})}};t.a={Auth:g,Bonuses:h,Courses:v,Notifications:y,Passes:O,Products:S,Purchases:j,Scores:A,Settings:D,Songs:P,Spotify:C,Students:T,Tasks:N,Teachers:w,Transactions:_,setToken:function(e){m=e}}}).call(this,a(79))}},[[557,1,2]]]);
//# sourceMappingURL=main.768bb1ed.chunk.js.map