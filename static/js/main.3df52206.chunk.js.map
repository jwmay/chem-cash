{"version":3,"sources":["constants/actionTypes.js","agent.js","components/Header.js","reducers/auth.js","reducers/common.js","reducers/home.js","reducers/settings.js","middleware.js","store.js","reducer.js","components/App.js","index.js"],"names":["APP_LOAD","ASYNC_START","ASYNC_END","HOME_PAGE_LOADED","HOME_PAGE_UNLOADED","LOGIN","LOGIN_PAGE_UNLOADED","LOGOUT","REDIRECT","REGISTER","REGISTER_PAGE_UNLOADED","SETTINGS_SAVED","SETTINGS_PAGE_UNLOADED","UPDATE_FIELD_AUTH","superagent","superagentPromise","_superagent","global","Promise","API_ROOT","responseBody","res","body","token","tokenPlugin","req","set","requests","url","get","use","then","post","put","Auth","current","login","email","password","user","register","username","save","setToken","_token","LoggedOutView","React","memo","props","currentUser","className","to","LoggedInView","onClick","handleLogout","Header","this","appName","toLowerCase","onClickLogout","PureComponent","connect","dispatch","type","state","action","inProgress","errors","error","payload","subtype","key","value","defaultState","viewChangeCounter","appLoaded","redirectTo","promiseMiddleware","store","next","v","currentView","getState","skipTracking","currentState","console","log","promise","response","localStorageMiddleware","window","localStorage","setItem","agent","history","createBrowserHistory","myRouterMiddleware","routerMiddleware","createStore","combineReducers","auth","common","home","settings","router","connectRouter","composeWithDevTools","applyMiddleware","Home","lazy","Login","Register","Settings","App","prevProps","push","onRedirect","getItem","onLoad","fallback","exact","path","component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.3df52206.chunk.js","sourcesContent":["export const APP_LOAD = 'APP_LOAD'\nexport const ASYNC_START = 'ASYNC_START'\nexport const ASYNC_END = 'ASYNC_END'\nexport const HOME_PAGE_LOADED = 'HOME_PAGE_LOADED'\nexport const HOME_PAGE_UNLOADED = 'HOME_PAGE_UNLOADED'\nexport const LOGIN = 'LOGIN'\nexport const LOGIN_PAGE_UNLOADED = 'LOGIN_PAGE_UNLOADED'\nexport const LOGOUT = 'LOGOUT'\nexport const REDIRECT = 'REDIRECT'\nexport const REGISTER = 'REGISTER'\nexport const REGISTER_PAGE_UNLOADED = 'REGISTER_PAGE_UNLOADED'\nexport const SETTINGS_SAVED = 'SETTINGS_SAVED'\nexport const SETTINGS_PAGE_UNLOADED = 'SETTINGS_PAGE_UNLOADED'\nexport const UPDATE_FIELD_AUTH = 'UPDATE_FIELD_AUTH'\n","import superagentPromise from 'superagent-promise'\nimport _superagent from 'superagent'\n\nconst superagent = superagentPromise(_superagent, global.Promise)\n\n// const API_ROOT = 'http://localhost:4000/api'\nconst API_ROOT = 'https://chem-cash.herokuapp.com/api'\n\nconst responseBody = (res) => res.body\n\nlet token = null\nlet tokenPlugin = (req) => {\n  if (token) {\n    req.set('authorization', `Token ${token}`)\n  }\n}\n\nconst requests = {\n  del: (url) =>\n    superagent.del(`${API_ROOT}${url}`).use(tokenPlugin).then(responseBody),\n  get: (url) =>\n    superagent.get(`${API_ROOT}${url}`).use(tokenPlugin).then(responseBody),\n  post: (url, body) =>\n    superagent\n      .post(`${API_ROOT}${url}`, body)\n      .use(tokenPlugin)\n      .then(responseBody),\n  put: (url, body) =>\n    superagent\n      .put(`${API_ROOT}${url}`, body)\n      .use(tokenPlugin)\n      .then(responseBody),\n}\n\nconst Auth = {\n  current: () => requests.get('/user'),\n  login: (email, password) =>\n    requests.post('/users/login', { user: { email, password } }),\n  register: (username, email, password) =>\n    requests.post('/users', { user: { username, email, password } }),\n  save: (user) => requests.put('/user', { user }),\n}\n\nexport default {\n  Auth,\n  setToken: (_token) => {\n    token = _token\n  },\n}\n","import { connect } from 'react-redux'\nimport { Link } from 'react-router-dom'\nimport React from 'react'\n\nimport { LOGOUT } from '../constants/actionTypes'\n\nconst LoggedOutView = React.memo((props) => {\n  if (!props.currentUser) {\n    return (\n      <ul className='nav navbar-nav pull-xs-right'>\n        <li className='nav-item'>\n          <Link to='/' className='nav-link'>\n            Home\n          </Link>\n        </li>\n\n        <li className='nav-item'>\n          <Link to='/login' className='nav-link'>\n            Sign in\n          </Link>\n        </li>\n\n        <li className='nav-item'>\n          <Link to='/register' className='nav-link'>\n            Sign up\n          </Link>\n        </li>\n      </ul>\n    )\n  }\n  return null\n})\n\nconst LoggedInView = React.memo((props) => {\n  if (props.currentUser) {\n    return (\n      <ul className='nav navbar-nav pull-xs-right'>\n        <li className='nav-item'>\n          <Link to='/' className='nav-link'>\n            Home\n          </Link>\n        </li>\n\n        <li className='nav-item'>\n          <Link to='/' className='nav-link' onClick={props.handleLogout}>\n            Logout\n          </Link>\n        </li>\n\n        <li className='nav-item'>\n          <Link to='/settings' className='nav-link'>\n            <i className='ion-gear-a'></i>&nbsp;{props.currentUser.username}\n          </Link>\n        </li>\n      </ul>\n    )\n  }\n\n  return null\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onClickLogout: () => dispatch({ type: LOGOUT }),\n})\n\nclass Header extends React.PureComponent {\n  constructor(props) {\n    super(props)\n  }\n\n  render() {\n    return (\n      <nav className='navbar navbar-light'>\n        <div className='container'>\n          <Link to='/' className='navbar-brand'>\n            {this.props.appName.toLowerCase()}\n          </Link>\n\n          <LoggedOutView currentUser={this.props.currentUser} />\n\n          <LoggedInView\n            currentUser={this.props.currentUser}\n            handleLogout={this.props.onClickLogout}\n          />\n        </div>\n      </nav>\n    )\n  }\n}\n\nexport default connect(() => ({}), mapDispatchToProps)(Header)\n","import {\n  ASYNC_START,\n  LOGIN,\n  LOGIN_PAGE_UNLOADED,\n  REGISTER,\n  REGISTER_PAGE_UNLOADED,\n  UPDATE_FIELD_AUTH,\n} from '../constants/actionTypes'\n\nexport default (state = {}, action) => {\n  switch (action.type) {\n    case LOGIN:\n    case REGISTER:\n      return {\n        ...state,\n        inProgress: false,\n        errors: action.error ? action.payload.errors : null,\n      }\n    case LOGIN_PAGE_UNLOADED:\n    case REGISTER_PAGE_UNLOADED:\n      return {}\n    case ASYNC_START:\n      if (action.subtype === LOGIN || action.subtype === REGISTER) {\n        return { ...state, inProgress: true }\n      }\n      break\n    case UPDATE_FIELD_AUTH:\n      return { ...state, [action.key]: action.value }\n    default:\n      return state\n  }\n\n  return state\n}\n","import {\n  APP_LOAD,\n  HOME_PAGE_UNLOADED,\n  LOGIN,\n  LOGIN_PAGE_UNLOADED,\n  LOGOUT,\n  REDIRECT,\n  REGISTER,\n  REGISTER_PAGE_UNLOADED,\n  SETTINGS_SAVED,\n  SETTINGS_PAGE_UNLOADED,\n} from '../constants/actionTypes'\n\nconst defaultState = {\n  appName: 'Chem Cash',\n  token: null,\n  viewChangeCounter: 0,\n}\n\nexport default (state = defaultState, action) => {\n  switch (action.type) {\n    case APP_LOAD:\n      return {\n        ...state,\n        token: action.token || null,\n        appLoaded: true,\n        currentUser: action.payload ? action.payload.user : null,\n      }\n    case REDIRECT:\n      return { ...state, redirectTo: null }\n    case LOGOUT:\n      return { ...state, redirectTo: '/', token: null, currentUser: null }\n    case SETTINGS_SAVED:\n      return {\n        ...state,\n        redirectTo: action.error ? null : '/',\n        currentUser: action.error ? null : action.payload.user,\n      }\n    case LOGIN:\n    case REGISTER:\n      return {\n        ...state,\n        redirectTo: action.error ? null : '/',\n        token: action.error ? null : action.payload.user.token,\n        currentUser: action.error ? null : action.payload.user,\n      }\n    case HOME_PAGE_UNLOADED:\n    case SETTINGS_PAGE_UNLOADED:\n    case LOGIN_PAGE_UNLOADED:\n    case REGISTER_PAGE_UNLOADED:\n      return { ...state, viewChangeCounter: state.viewChangeCounter + 1 }\n    default:\n      return state\n  }\n}\n","import { HOME_PAGE_LOADED, HOME_PAGE_UNLOADED } from '../constants/actionTypes'\n\nexport default (state = {}, action) => {\n  switch (action.type) {\n    case HOME_PAGE_LOADED:\n      return { ...state }\n    case HOME_PAGE_UNLOADED:\n      return {}\n    default:\n      return state\n  }\n}\n","import {\n  ASYNC_START,\n  SETTINGS_PAGE_UNLOADED,\n  SETTINGS_SAVED,\n} from '../constants/actionTypes'\n\nexport default (state = {}, action) => {\n  switch (action.type) {\n    case SETTINGS_SAVED:\n      return {\n        ...state,\n        inProgress: false,\n        errors: action.error ? action.payload.errors : null,\n      }\n    case SETTINGS_PAGE_UNLOADED:\n      return {}\n    case ASYNC_START:\n      return {\n        ...state,\n        inProgress: true,\n      }\n    default:\n      return state\n  }\n}\n","import agent from './agent'\nimport {\n  ASYNC_START,\n  ASYNC_END,\n  LOGIN,\n  LOGOUT,\n  REGISTER,\n} from './constants/actionTypes'\n\nconst promiseMiddleware = (store) => (next) => (action) => {\n  if (isPromise(action.payload)) {\n    store.dispatch({ type: ASYNC_START, subtype: action.type })\n\n    const currentView = store.getState().viewChangeCounter\n    const skipTracking = action.skipTracking\n\n    action.payload.then(\n      (res) => {\n        const currentState = store.getState()\n        if (!skipTracking && currentState.viewChangeCounter !== currentView) {\n          return\n        }\n        console.log('RESULT', res)\n        action.payload = res\n        store.dispatch({ type: ASYNC_END, promise: action.payload })\n        store.dispatch(action)\n      },\n      (error) => {\n        const currentState = store.getState()\n        if (!skipTracking && currentState.viewChangeCounter !== currentView) {\n          return\n        }\n        console.log('ERROR', error)\n        action.error = true\n        action.payload = error.response.body\n        if (!action.skipTracking) {\n          store.dispatch({ type: ASYNC_END, promise: action.payload })\n        }\n        store.dispatch(action)\n      }\n    )\n\n    return\n  }\n\n  next(action)\n}\n\nconst localStorageMiddleware = (store) => (next) => (action) => {\n  if (action.type === REGISTER || action.type === LOGIN) {\n    if (!action.error) {\n      window.localStorage.setItem('jwt', action.payload.user.token)\n      agent.setToken(action.payload.user.token)\n    }\n  } else if (action.type === LOGOUT) {\n    window.localStorage.setItem('jwt', '')\n    agent.setToken(null)\n  }\n\n  next(action)\n}\n\nfunction isPromise(v) {\n  return v && typeof v.then === 'function'\n}\n\nexport { promiseMiddleware, localStorageMiddleware }\n","import { applyMiddleware, createStore } from 'redux'\nimport { composeWithDevTools } from 'redux-devtools-extension/developmentOnly'\nimport { createBrowserHistory } from 'history'\nimport { createLogger } from 'redux-logger'\nimport { routerMiddleware } from 'connected-react-router'\n\nimport createRootReducer from './reducer'\nimport { promiseMiddleware, localStorageMiddleware } from './middleware'\n\nexport const history = createBrowserHistory()\n\n// Build the middleware for intercepting and dispatching navigation actions\nconst myRouterMiddleware = routerMiddleware(history)\n\nconst getMiddleware = () => {\n  if (process.env.NODE_ENV === 'production') {\n    return applyMiddleware(\n      myRouterMiddleware,\n      promiseMiddleware,\n      localStorageMiddleware\n    )\n  } else {\n    // Enable additional logging in non-production environments\n    return applyMiddleware(\n      myRouterMiddleware,\n      promiseMiddleware,\n      localStorageMiddleware,\n      createLogger()\n    )\n  }\n}\n\nexport const store = createStore(\n  createRootReducer(history),\n  composeWithDevTools(getMiddleware())\n)\n","import { combineReducers } from 'redux'\nimport { connectRouter } from 'connected-react-router'\n\nimport auth from './reducers/auth'\nimport common from './reducers/common'\nimport home from './reducers/home'\nimport settings from './reducers/settings'\n\nexport default (history) =>\n  combineReducers({\n    auth,\n    common,\n    home,\n    settings,\n    router: connectRouter(history),\n  })\n","import { connect } from 'react-redux'\nimport { push } from 'connected-react-router'\nimport React, { lazy, Suspense } from 'react'\nimport { Route, Switch } from 'react-router-dom'\n\nimport agent from '../agent'\nimport Header from './Header'\nimport { store } from '../store'\n\nimport { APP_LOAD, REDIRECT } from '../constants/actionTypes'\n\nconst Home = lazy(() =>\n  import(\n    '../components/Home' /* webpackChunkName: \"Home\", webpackPreload: true  */\n  )\n)\nconst Login = lazy(() =>\n  import(\n    '../components/Login' /* webpackChunkName: \"Login\", webpackPrefetch: true  */\n  )\n)\nconst Register = lazy(() =>\n  import(\n    '../components/Register' /* webpackChunkName: \"Register\", webpackPrefetch: true  */\n  )\n)\nconst Settings = lazy(() =>\n  import(\n    '../components/Settings' /* webpackChunkName: \"Settings\", webpackPrefetch: true  */\n  )\n)\n\nconst mapStateToProps = (state) => {\n  return {\n    appLoaded: state.common.appLoaded,\n    appName: state.common.appName,\n    currentUser: state.common.currentUser,\n    redirectTo: state.common.redirectTo,\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => ({\n  onLoad: (payload, token) =>\n    dispatch({ type: APP_LOAD, payload, token, skipTracking: true }),\n  onRedirect: () => dispatch({ type: REDIRECT }),\n})\n\nclass App extends React.PureComponent {\n  componentDidUpdate(prevProps) {\n    if (\n      this.props.redirectTo &&\n      this.props.redirectTo !== prevProps.redirectTo\n    ) {\n      store.dispatch(push(this.props.redirectTo))\n      this.props.onRedirect()\n    }\n  }\n\n  componentDidMount() {\n    const token = window.localStorage.getItem('jwt')\n    if (token) {\n      agent.setToken(token)\n    }\n\n    this.props.onLoad(token ? agent.Auth.current() : null, token)\n  }\n\n  render() {\n    if (this.props.appLoaded) {\n      return (\n        <div>\n          <Header\n            appName={this.props.appName}\n            currentUser={this.props.currentUser}\n          />\n          <Suspense fallback={<p>Loading...</p>}>\n            <Switch>\n              <Route exact path='/' component={Home} />\n              <Route path='/login' component={Login} />\n              <Route path='/register' component={Register} />\n              <Route path='/settings' component={Settings} />\n            </Switch>\n          </Suspense>\n        </div>\n      )\n    }\n    return (\n      <div>\n        <Header\n          appName={this.props.appName}\n          currentUser={this.props.currentUser}\n        />\n      </div>\n    )\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App)\n","import { ConnectedRouter } from 'connected-react-router'\nimport { Provider } from 'react-redux'\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Route, Switch } from 'react-router-dom'\n\nimport App from './components/App'\nimport { store, history } from './store'\n\nReactDOM.render(\n  <Provider store={store}>\n    <ConnectedRouter history={history}>\n      <Switch>\n        <Route path='/' component={App} />\n      </Switch>\n    </ConnectedRouter>\n  </Provider>,\n\n  document.getElementById('root')\n)\n"],"sourceRoot":""}