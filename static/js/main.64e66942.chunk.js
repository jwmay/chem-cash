(this["webpackJsonpchem-cash"]=this["webpackJsonpchem-cash"]||[]).push([[0],{19:function(e,t,a){"use strict";(function(e){var n=a(432),r=a.n(n),c=a(433),o=a.n(c),l=r()(o.a,e.Promise),s="https://chem-cash.herokuapp.com/api",u=encodeURIComponent,i=function(e){return e.body},m=null,d=function(e){m&&e.set("authorization","Token ".concat(m))},p=function(e){return l.del("".concat(s).concat(e)).use(d).then(i)},E=function(e){return l.get("".concat(s).concat(e)).use(d).then(i)},f=function(e,t){return l.post("".concat(s).concat(e),t).use(d).then(i)},b=function(e,t){return l.put("".concat(s).concat(e),t).use(d).then(i)},g={current:function(){return E("/user")},login:function(e,t){return f("/users/login",{user:{username:e,password:t}})},register:function(e){return f("/users",{user:e})},save:function(e){return b("/user",{user:e})}},O={add:function(e){return f("/courses",{course:e})},delete:function(e){return p("/courses/".concat(e))},getAll:function(){return E("/courses")},update:function(e){return b("/courses/".concat(e.slug),{course:e})}},h={update:function(e){return b("/user/settings",{settings:e})}},v={delete:function(e){return p("/songs/".concat(e))},forStudent:function(){return E("/songs/student")},forTeacher:function(){return E("/songs/teacher")},request:function(e){return f("/songs",{song:e})}},S={add:function(e,t){return f("/users?courseId=".concat(u(t)),{user:e})},delete:function(e){return p("/users/student/".concat(e))},import:function(e,t){return f("/users/import?courseId=".concat(u(t)),{users:e})},update:function(e){return b("/users/".concat(e.username),{user:e})}},y={getAll:function(){return E("/users?role=teacher")},delete:function(e){return p("/users/teacher/".concat(e))},update:function(e){return b("/users/".concat(e.username),{user:e})}};t.a={Auth:g,Courses:O,Settings:h,Songs:v,Students:S,Teachers:y,setToken:function(e){m=e}}}).call(this,a(76))},264:function(e,t,a){e.exports=a.p+"static/media/songs-background.cfcd4ce6.jpg"},271:function(e,t,a){e.exports=a.p+"static/media/chemistry-background.58b9362d.jpg"},427:function(e,t,a){e.exports=a.p+"static/media/chem-cash-logo.30174016.png"},447:function(e,t,a){e.exports=a(558)},491:function(e,t){},493:function(e,t){},558:function(e,t,a){"use strict";a.r(t);var n=a(151),r=a(14),c=a(0),o=a.n(c),l=a(18),s=a.n(l),u=a(248),i=a(55),m=a(617),d=a(618),p=a(152),E=a.n(p),f=a(150),b=a(425),g=a.n(b),O=a(426),h=a.n(O),v=Object(f.a)({breakpoints:{values:{md:768,lg:1024}},palette:{primary:g.a,secondary:h.a},overrides:{MuiDialogActions:{root:{padding:"16px 24px"}}}}),S=a(585),y=a(313),j=a(584),A=a(380),D=a(105),N=a(381),T=a(427),C=a.n(T),_=function(e){return o.a.createElement("img",Object.assign({alt:"Chem Cash Logo",src:C.a},e))},k="LOGIN",U=Object(y.a)((function(e){return{title:{color:"white",flexGrow:1},logo:{height:65,marginTop:e.spacing(2),marginRight:e.spacing(3),marginBottom:e.spacing(2)}}})),w=Object(r.c)((function(e){return{navTabValue:e.nav.navTabValue}}),(function(e){return{onClickLogout:function(){return e({type:"LOGOUT"})}}}))((function(e){var t=U(),a=e.navTabValue;return e.currentUser?o.a.createElement(j.a,{position:"static"},o.a.createElement(S.a,null,o.a.createElement(A.a,null,o.a.createElement(_,{className:t.logo}),o.a.createElement(D.a,{variant:"h5",align:"center",className:t.title},a&&a.charAt(0).toUpperCase()+a.slice(1)),o.a.createElement(N.a,{color:"inherit",onClick:e.onClickLogout},"Logout")))):null})),R=a(586),P=a(587),L=a(588),x=a(589),I=a(590),G=a(591),q=a(592),F=a(593),B=Object(y.a)({nav:{position:"fixed",bottom:0,width:"100%"}}),H=Object(r.c)((function(e){return{path:e.router.location.pathname,currentUser:e.common.currentUser,navTabValue:e.nav.navTabValue}}),(function(e){return{onTabChange:function(t,a){return e({type:"NAV_TAB_CHANGE",value:t,redirectTo:a})},onLoad:function(t,a){return e({type:"NAV_LOADED",value:t,redirectTo:a})},onUnload:function(){return e({type:"NAV_UNLOADED"})}}}))((function(e){var t=B(),a=e.currentUser.role,n=function(t){e.onTabChange(t,"/".concat(a,"/").concat(t))};return Object(c.useEffect)((function(){var t=e.path.split("/")[2],n=null!==t&&void 0!==t?t:"student"===a?"account":"courses",r="/".concat(a,"/").concat(n);return e.onLoad(n,r),function(){e.onUnload()}}),[]),"student"===a?o.a.createElement(R.a,{className:t.nav,onChange:function(e,t){n(t)},showLabels:!0,value:e.navTabValue},o.a.createElement(P.a,{label:"Account",icon:o.a.createElement(L.a,null),value:"account"}),o.a.createElement(P.a,{label:"Songs",icon:o.a.createElement(x.a,null),value:"songs"}),o.a.createElement(P.a,{label:"Settings",icon:o.a.createElement(I.a,null),value:"settings"})):o.a.createElement(R.a,{className:t.nav,onChange:function(e,t){n(t)},showLabels:!0,value:e.navTabValue},o.a.createElement(P.a,{label:"Accounts",icon:o.a.createElement(G.a,null),value:"accounts"}),o.a.createElement(P.a,{label:"Courses",icon:o.a.createElement(q.a,null),value:"courses"}),o.a.createElement(P.a,{label:"Songs",icon:o.a.createElement(x.a,null),value:"songs"}),"admin"===a&&o.a.createElement(P.a,{label:"Teachers",icon:o.a.createElement(F.a,null),value:"teachers"}),o.a.createElement(P.a,{label:"Settings",icon:o.a.createElement(I.a,null),value:"settings"}))})),W=Object(y.a)((function(e){return{wrapper:{marginTop:e.spacing(4),marginBottom:e.spacing(11)}}})),V=function(e){var t=W();return o.a.createElement("div",{className:t.wrapper},e.children)},z=function(e){return o.a.createElement(V,null,o.a.createElement(S.a,null,o.a.createElement(D.a,{variant:"h2"},"Error 404: Page Not Found")))},M=Object(r.c)((function(e){return{currentUser:e.common.currentUser}}),(function(){return{}}))((function(e){return e.currentUser?o.a.createElement(u.b,{exact:!0,path:e.path,component:e.component}):o.a.createElement(u.a,{to:"/"})})),Y=a(41),Q=a.n(Y),J=a(74),K=a(6),$=a(17),Z=a(30),X=a(22),ee=a(595),te=a(174),ae=a(597),ne=a(596),re=a(620),ce=Object(y.a)((function(e){return{alert:{width:"100%","&:not(:last-of-type)":{marginBottom:e.spacing(1)}},alertList:{marginBottom:e.spacing(2)}}})),oe=function(e){var t=e.errors,a=ce();return t?o.a.createElement("div",{className:a.alertList},Object.keys(t).map((function(e){var n=e.replace(/([a-z0-9])([A-Z])/g,"$1 $2").toLowerCase();return o.a.createElement(re.a,{className:a.alert,severity:"error",key:e},n," ",t[e])}))):null},le=Object(y.a)((function(e){return{pageHeader:{alignItems:"center",display:"flex",justifyContent:"space-between",marginBottom:e.spacing(4)}}})),se=function(e){var t=le();return o.a.createElement("div",{className:t.pageHeader},o.a.createElement(D.a,{variant:"h4"},e.title),e.children)},ue=a(19),ie=Object(y.a)((function(e){return{icon:{marginRight:e.spacing(1)},paper:{padding:e.spacing(2),marginBottom:e.spacing(4)}}})),me=Object(r.c)((function(e){return Object(K.a)(Object(K.a)({},e.settings),{},{currentUser:e.common.currentUser,settings:e.common.settings})}),(function(e){return{onUnload:function(){return e({type:"SETTINGS_PAGE_UNLOADED"})},onSubmitForm:function(t){return e({type:"SETTINGS_SAVED",payload:Promise.all([ue.a.Auth.save(t),ue.a.Settings.update(t)]),snackbar:{message:"Settings saved",variant:"success"}})}}}))((function(e){var t=e.currentUser,a=e.settings,n=ie();return Object(c.useEffect)((function(){return function(){e.onUnload()}}),[]),o.a.createElement($.c,{enableReinitialize:!0,initialValues:{defaultStudentPassword:(null===a||void 0===a?void 0:a.defaultStudentPassword)||"",songRequestPurchaseAmount:(null===a||void 0===a?void 0:a.songRequestPurchaseAmount)||0,firstName:t.firstName,lastName:t.lastName,password:""},validationSchema:X.b({defaultStudentPassword:X.c(),songRequestPurchaseAmount:X.a().typeError("Numbers only"),firstName:X.c(),lastName:X.c(),password:X.c()}),onSubmit:function(){var t=Object(J.a)(Q.a.mark((function t(a,n){var r;return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(r=Object(K.a)({},a)).password||"student"===e.currentUser.role||delete r.password,e.onSubmitForm(r),n.resetForm({values:Object(K.a)(Object(K.a)({},r),{},{password:""})});case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},o.a.createElement($.b,null,o.a.createElement(se,{title:"Manage Account"},o.a.createElement(ee.a,{color:"primary",disabled:e.inProgress,type:"sumbit",variant:"extended"},o.a.createElement(ne.a,{className:n.icon}),e.inProgress?"Saving...":"Save settings")),o.a.createElement(oe,{errors:e.errors}),"student"!==t.role&&o.a.createElement(te.a,{className:n.paper},o.a.createElement(ae.a,{container:!0,spacing:2},o.a.createElement(ae.a,{item:!0,xs:12},o.a.createElement(D.a,{variant:"h5",gutterBottom:!0},"Song Requests")),o.a.createElement(ae.a,{item:!0,xs:12,md:6},o.a.createElement($.a,{component:Z.a,label:"Song request purchase amount",name:"songRequestPurchaseAmount",type:"text",variant:"outlined",fullWidth:!0})))),"student"!==t.role&&o.a.createElement(te.a,{className:n.paper},o.a.createElement(ae.a,{container:!0,spacing:2},o.a.createElement(ae.a,{item:!0,xs:12},o.a.createElement(D.a,{variant:"h5",gutterBottom:!0},"Student Accounts")),o.a.createElement(ae.a,{item:!0,xs:12,md:6},o.a.createElement($.a,{component:Z.a,label:"Default student password",name:"defaultStudentPassword",type:"text",variant:"outlined",fullWidth:!0})))),"student"!==t.role&&o.a.createElement(te.a,{className:n.paper},o.a.createElement(ae.a,{container:!0,spacing:2},o.a.createElement(ae.a,{item:!0,xs:12},o.a.createElement(D.a,{variant:"h5",gutterBottom:!0},"Account Details")),o.a.createElement(ae.a,{item:!0,xs:12,md:6},o.a.createElement($.a,{component:Z.a,label:"First name",name:"firstName",type:"text",variant:"outlined",fullWidth:!0})),o.a.createElement(ae.a,{item:!0,xs:12,md:6},o.a.createElement($.a,{component:Z.a,label:"Last name",name:"lastName",type:"text",variant:"outlined",fullWidth:!0})))),o.a.createElement(te.a,{className:n.paper},o.a.createElement(ae.a,{container:!0,spacing:2},o.a.createElement(ae.a,{item:!0,xs:12},o.a.createElement(D.a,{variant:"h5",gutterBottom:!0},"Account Security")),o.a.createElement(ae.a,{item:!0,xs:12,md:6},o.a.createElement($.a,{component:Z.a,label:"New password",name:"password",type:"password",variant:"outlined",fullWidth:!0}))))))})),de=function(e){return o.a.createElement("div",null,"Student Account")},pe=a(26),Ee=a(315),fe=a(273),be=a(600),ge=a(383),Oe=a(384),he=a(385),ve=a(386),Se=a(387),ye=a(20),je=a(569),Ae=a(599),De=a(598),Ne=a(264),Te=a.n(Ne),Ce=Object(y.a)((function(e){return{button:{marginBottom:e.spacing(2),marginRight:e.spacing(2)},dialog:{backgroundImage:"url(".concat(Te.a,")"),backgroundPosition:"center bottom",backgroundSize:"cover",color:"white",padding:e.spacing(4)},icon:{marginRight:e.spacing(1)},input:{backgroundColor:"rgba(0,65,91,0.8)",borderRadius:e.spacing(1),height:78,"& input":{color:e.palette.secondary.main}},inputLabel:{color:"white"}}})),_e=Object(r.c)((function(){return{}}),(function(e){return{onSubmit:function(t){return e({type:"SUBMIT_SONG_REQUEST",payload:ue.a.Songs.request(t),snackbar:{message:"Song requested",variant:"success"}})}}}))((function(e){var t=e.onSubmit,a=Object(c.useState)(!1),n=Object(pe.a)(a,2),r=n[0],l=n[1],s=Object(ye.a)(),u=Object(je.a)(s.breakpoints.down("md")),i=Ce(),m=function(){l(!1)},d=function(e){t(e),l(!1)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(ee.a,{color:"primary",onClick:function(){l(!0)},variant:"extended"},o.a.createElement(De.a,{className:i.icon}),"Buy a song"),o.a.createElement(Ae.a,{classes:{paper:i.dialog},fullScreen:u,open:r,onClose:m},o.a.createElement(D.a,{variant:"h3",align:"center",color:"secondary",gutterBottom:!0},"Purchase a Song"),o.a.createElement(D.a,{variant:"body1",gutterBottom:!0},"Please provide the song and artist title for your request. If approved, 500 points will be charged to your account."),o.a.createElement($.c,{initialValues:{artist:"",title:""},validationSchema:X.b({artist:X.c().required("Required"),title:X.c().required("Required")}),onSubmit:function(){var e=Object(J.a)(Q.a.mark((function e(t){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},o.a.createElement($.b,null,o.a.createElement(ae.a,{container:!0,spacing:4},o.a.createElement(ae.a,{item:!0,xs:12,md:6},o.a.createElement($.a,{className:i.input,color:"primary",component:Z.a,InputLabelProps:{classes:{root:i.inputLabel}},label:"Song Title",name:"title",type:"text",variant:"filled",fullWidth:!0})),o.a.createElement(ae.a,{item:!0,xs:12,md:6},o.a.createElement($.a,{className:i.input,color:"primary",component:Z.a,InputLabelProps:{classes:{root:i.inputLabel}},label:"Artist",name:"artist",type:"text",variant:"filled",fullWidth:!0})),o.a.createElement(ae.a,{item:!0,xs:12},o.a.createElement(N.a,{className:i.button,color:"primary",type:"submit",variant:"contained"},"Buy"),o.a.createElement(N.a,{className:i.button,onClick:m,variant:"contained"},"Cancel")))))))})),ke=Object(y.a)((function(e){return{paper:{paddingLeft:e.spacing(2),marginBottom:e.spacing(4)}}})),Ue=Object(r.c)((function(e){return Object(K.a)(Object(K.a)({},e.songs),{},{currentUser:e.common.currentUser})}),(function(e){return{onLoad:function(t){return e({type:"STUDENT_SONGS_PAGE_LOADED",payload:t})},onUnload:function(){return e({type:"SONGS_PAGE_UNLOADED"})}}}))((function(e){var t=e.course,a=e.courseSongs,n=e.currentUser,r=e.onLoad,l=e.onUnload,s=e.userSongs,u=Object(c.useState)(!0),i=Object(pe.a)(u,2),m=i[0],d=i[1],p=ke();return Object(c.useEffect)((function(){return r(ue.a.Songs.forStudent()),function(){return l()}}),[]),o.a.createElement(o.a.Fragment,null,o.a.createElement(se,{title:"Songs for "+(m?n.firstName:"Period "+t.period)},o.a.createElement(_e,null)),o.a.createElement(te.a,{className:p.paper},o.a.createElement(ae.a,{container:!0,spacing:2,className:p.grid},o.a.createElement(ae.a,{item:!0,xs:12,className:p.grid},o.a.createElement(Ee.a,{control:o.a.createElement(fe.a,{checked:m,onChange:function(e){d(e.target.checked)},name:"mySongsOnly"}),label:"show only my songs"})))),o.a.createElement(be.a,{component:te.a},o.a.createElement(ge.a,null,o.a.createElement(Oe.a,null,o.a.createElement(he.a,null,o.a.createElement(ve.a,null,"Request Date"),o.a.createElement(ve.a,null,"Song Title"),o.a.createElement(ve.a,null,"Song Artist"),!m&&o.a.createElement(ve.a,null,"Purchased by"),o.a.createElement(ve.a,null,"Status"))),o.a.createElement(Se.a,null,m?s&&s.map((function(e){return o.a.createElement(he.a,{key:e._id},o.a.createElement(ve.a,null,new Date(e.createdAt).toDateString()),o.a.createElement(ve.a,null,e.title),o.a.createElement(ve.a,null,e.artist),o.a.createElement(ve.a,null,e.status))})):a&&a.map((function(e){return o.a.createElement(he.a,{key:e._id},o.a.createElement(ve.a,null,new Date(e.createdAt).toDateString()),o.a.createElement(ve.a,null,e.title),o.a.createElement(ve.a,null,e.artist),o.a.createElement(ve.a,null,e.student.firstName," ",e.student.lastName),o.a.createElement(ve.a,null,e.status))}))))))})),we=a(571),Re=a(261),Pe=a(601),Le=Object(y.a)((function(e){return{alert:{marginBottom:e.spacing(2)}}})),xe=Object(r.c)((function(){return{}}),(function(e){return{onClose:function(){return e({type:"ALERT_CLOSED"})}}}))((function(e){var t=e.children,a=e.onClose,n=e.severity,r=e.variant,l=Le(),s=Object(c.useState)(!0),u=Object(pe.a)(s,2),i=u[0],m=u[1];return o.a.createElement("div",{className:l.alert},o.a.createElement(we.a,{in:i},o.a.createElement(re.a,{action:o.a.createElement(Re.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){m(!1),a()}},o.a.createElement(Pe.a,{fontSize:"inherit"})),severity:n||"info",variant:r||"outlined"},t)))})),Ie=a(603),Ge=a(604),qe=a(605),Fe=a(602),Be=a(388),He=Object(y.a)((function(e){return{actionButton:{color:e.palette.text.disabled}}})),We=function(e){var t=He();return o.a.createElement(Be.a,{title:e.action,arrow:!0},o.a.createElement(Re.a,{"aria-label":e.action,className:t.actionButton,onClick:function(t){t.stopPropagation(),e.onClick()},onFocus:function(e){return e.stopPropagation()},size:e.size},e.children))},Ve=Object(y.a)((function(e){return{icon:{marginRight:e.spacing(1)}}})),ze=Object(r.c)((function(e){return Object(K.a)({},e.courses)}),(function(e){return{onAdd:function(t){return e({type:"ADD_COURSE",payload:ue.a.Courses.add(t),snackbar:{message:"Course added",variant:"success"}})},onExit:function(){return e({type:"COURSE_DIALOG_UNLOADED"})},onUpdate:function(t){return e({type:"UPDATE_COURSE",payload:ue.a.Courses.update(t),snackbar:{message:"Course updated",variant:"success"}})}}}))((function(e){var t=e.course,a=e.errors,n=e.inProgress,r=e.onAdd,l=e.onExit,s=e.onUpdate,u=Object(c.useState)(!1),i=Object(pe.a)(u,2),m=i[0],d=i[1],p=Object(ye.a)(),E=Object(je.a)(p.breakpoints.down("md")),f=Ve(),b=function(){d(!0)},g=function(){d(!1)},O=function(e){r(Object(K.a)({},e))},h=function(e){s(Object(K.a)(Object(K.a)({},t),e))};return Object(c.useEffect)((function(){n||a||d(!1)}),[n]),o.a.createElement(o.a.Fragment,null,t?o.a.createElement(We,{action:"Edit course",onClick:b},o.a.createElement(Fe.a,null)):o.a.createElement(ee.a,{color:"primary",onClick:b,variant:"extended"},o.a.createElement(De.a,{className:f.icon}),"Create course"),o.a.createElement(Ae.a,{fullScreen:E,onClick:function(e){return e.stopPropagation()},onClose:g,onExit:l,onFocus:function(e){return e.stopPropagation()},open:m},o.a.createElement($.c,{initialValues:{name:(null===t||void 0===t?void 0:t.name)||"",period:(null===t||void 0===t?void 0:t.period)||""},validationSchema:X.b({name:X.c().required("Required"),period:X.a().typeError("Numbers only").required("Required")}),onSubmit:function(){var e=Object(J.a)(Q.a.mark((function e(a){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t?h(a):O(a);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},o.a.createElement($.b,null,o.a.createElement(Ie.a,null,t?"Edit Course":"Create Course"),o.a.createElement(Ge.a,null,o.a.createElement(oe,{errors:a}),o.a.createElement(ae.a,{container:!0,spacing:2},o.a.createElement(ae.a,{item:!0,xs:12,md:6},o.a.createElement($.a,{color:"primary",component:Z.a,disabled:n,label:"Course Name",name:"name",type:"text",fullWidth:!0})),o.a.createElement(ae.a,{item:!0,xs:12,md:6},o.a.createElement($.a,{color:"primary",component:Z.a,disabled:n,label:"Period",name:"period",type:"text",fullWidth:!0})))),o.a.createElement(qe.a,null,o.a.createElement(N.a,{disabled:n,color:"primary",type:"submit",variant:"contained"},t?n?"Updating...":"Update":n?"Adding...":"Add"),o.a.createElement(N.a,{disabled:n,onClick:g,variant:"contained"},"Cancel"))))))})),Me=a(622),Ye=a(611),Qe=a(623),Je=a(613),Ke=a(612),$e=a(421),Ze=a(607),Xe=a(606),et=Object(r.c)((function(){return{}}),(function(e){return{onDelete:function(t,a){return e({type:"DELETE_STUDENT",payload:ue.a.Students.delete(t),username:t,courseId:a,snackbar:{message:"Student deleted",variant:"success"}})}}}))((function(e){var t=e.course,a=e.onDelete,n=e.student,r=Object(c.useState)(!1),l=Object(pe.a)(r,2),s=l[0],u=l[1],i=function(){u(!1)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(We,{action:"Delete student",onClick:function(){u(!0)},size:"small"},o.a.createElement(Xe.a,{fontSize:"inherit"})),o.a.createElement(Ae.a,{open:s,onClose:i,onClick:function(e){return e.stopPropagation()},onFocus:function(e){return e.stopPropagation()}},o.a.createElement(Ie.a,null,"Delete student?"),o.a.createElement(Ge.a,null,o.a.createElement(Ze.a,null,"Are you sure you want to delete this student? This action cannot be undone.")),o.a.createElement(qe.a,null,o.a.createElement(N.a,{onClick:function(){u(!1),a(n.username,t._id)},color:"secondary",variant:"contained",autoFocus:!0},"Delete"),o.a.createElement(N.a,{onClick:i,variant:"contained"},"Cancel"))))})),tt=a(608),at=Object(r.c)((function(e){return Object(K.a)({},e.common.settings)}),(function(e){return{onSubmit:function(t){return e({type:"RESET_STUDENT_PASSWORD",payload:ue.a.Students.update(t),snackbar:{message:"Password reset",variant:"success"}})}}}))((function(e){var t=e.defaultStudentPassword,a=e.onSubmit,n=e.student,r=Object(c.useState)(!1),l=Object(pe.a)(r,2),s=l[0],u=l[1],i=function(){u(!1)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(We,{action:"Reset password",onClick:function(){u(!0)},size:"small"},o.a.createElement(tt.a,{fontSize:"inherit"})),o.a.createElement(Ae.a,{open:s,onClose:i,onClick:function(e){return e.stopPropagation()},onFocus:function(e){return e.stopPropagation()}},o.a.createElement(Ie.a,null,"Reset password?"),o.a.createElement(Ge.a,null,o.a.createElement(Ze.a,null,"Are you sure you want to reset this student's password to"," ",o.a.createElement("strong",null,t),"?")),o.a.createElement(qe.a,null,o.a.createElement(N.a,{onClick:function(){var e=Object(K.a)(Object(K.a)({},n),{},{password:t});a(e),u(!1)},color:"primary",variant:"contained",autoFocus:!0},"Reset"),o.a.createElement(N.a,{onClick:i,variant:"contained"},"Cancel"))))})),nt=a(609),rt=Object(r.c)((function(e){return Object(K.a)(Object(K.a)({},e.common.settings),e.courses)}),(function(e){return{onAdd:function(t,a){return e({type:"ADD_STUDENT",payload:ue.a.Students.add(t,a),courseId:a,snackbar:{message:"Student added",variant:"success"}})},onExit:function(){return e({type:"STUDENT_DIALOG_UNLOADED"})},onUpdate:function(t,a){return e({type:"UPDATE_STUDENT",payload:ue.a.Students.update(t),courseId:a,snackbar:{message:"Student updated",variant:"success"}})}}}))((function(e){var t=e.course,a=e.defaultStudentPassword,n=e.errors,r=e.inProgress,l=e.onAdd,s=e.onExit,u=e.onUpdate,i=e.student,m=Object(c.useState)(!1),d=Object(pe.a)(m,2),p=d[0],E=d[1],f=Object(ye.a)(),b=Object(je.a)(f.breakpoints.down("md")),g=function(){E(!0)},O=function(){E(!1)},h=function(e){var a=Object(K.a)({},e),n=t._id;a.role="student",l(a,n)},v=function(e){var a=Object(K.a)(Object(K.a)({},i),e),n=t._id;u(a,n)};return Object(c.useEffect)((function(){r||n||E(!1)}),[r]),o.a.createElement(o.a.Fragment,null,i?o.a.createElement(We,{action:"Edit student",onClick:g,size:"small"},o.a.createElement(Fe.a,{fontSize:"inherit"})):o.a.createElement(We,{action:"Add student",onClick:g},o.a.createElement(nt.a,null)),o.a.createElement(Ae.a,{fullScreen:b,onClick:function(e){return e.stopPropagation()},onClose:O,onExit:s,onFocus:function(e){return e.stopPropagation()},open:p},o.a.createElement($.c,{initialValues:{firstName:(null===i||void 0===i?void 0:i.firstName)||"",lastName:(null===i||void 0===i?void 0:i.lastName)||"",username:(null===i||void 0===i?void 0:i.username)||"",password:i?"":a},validationSchema:X.b({firstName:X.c().required("Required"),lastName:X.c().required("Required"),username:X.a().typeError("Numbers only").required("Required"),password:X.c().required(i?"":"Required")}),onSubmit:function(){var e=Object(J.a)(Q.a.mark((function e(t){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i?v(t):h(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},o.a.createElement($.b,null,o.a.createElement(Ie.a,null,i?"Edit Student":"Add Student"),o.a.createElement(Ge.a,null,o.a.createElement(oe,{errors:n}),o.a.createElement(ae.a,{container:!0,spacing:2},o.a.createElement(ae.a,{item:!0,xs:12,md:6},o.a.createElement($.a,{color:"primary",component:Z.a,disabled:r,label:"First Name",name:"firstName",type:"text",fullWidth:!0})),o.a.createElement(ae.a,{item:!0,xs:12,md:6},o.a.createElement($.a,{color:"primary",component:Z.a,disabled:r,label:"Last Name",name:"lastName",type:"text",fullWidth:!0})),o.a.createElement(ae.a,{item:!0,xs:12,md:6},o.a.createElement($.a,{color:"primary",component:Z.a,disabled:!!i||r,label:"Student Number",name:"username",type:"text",fullWidth:!0})),o.a.createElement(ae.a,{item:!0,xs:12,md:6},o.a.createElement($.a,{color:"primary",component:Z.a,disabled:r,label:"Password",name:"password",type:"text",fullWidth:!0})))),o.a.createElement(qe.a,null,o.a.createElement(N.a,{color:"primary",disabled:r,type:"submit",variant:"contained"},i?r?"Updating...":"Update":r?"Adding...":"Add"),o.a.createElement(N.a,{disabled:r,onClick:O,variant:"contained"},"Cancel"))))))})),ct=Object(y.a)((function(e){return{row:{alignItems:"center",borderBottom:"solid 2px white",display:"flex",height:e.spacing(5),justifyContent:"space-between",padding:e.spacing(1),"&:hover":{borderBottomColor:e.palette.secondary.main}},rowHeader:{alignItems:"center",display:"flex"},studentUsername:{marginRight:e.spacing(2),minWidth:e.spacing(12)}}})),ot=function(e){var t=e.course,a=e.student,n=ct();return o.a.createElement("div",{className:n.row},o.a.createElement("div",{className:n.rowHeader},o.a.createElement($e.a,{color:"primary",label:a.username,className:n.studentUsername}),o.a.createElement(D.a,null,a.lastName,", ",a.firstName)),o.a.createElement("div",null,o.a.createElement(at,{student:a}),o.a.createElement(rt,{course:t,student:a}),o.a.createElement(et,{course:t,student:a})))},lt=function(e){var t=e.course;return o.a.createElement(o.a.Fragment,null,o.a.createElement(D.a,{variant:"h6"},"Students")," ",t.students&&t.students.length>0?t.students.map((function(e){return o.a.createElement(ot,{key:e._id,course:t,student:e})})):o.a.createElement("div",null,o.a.createElement(D.a,null,"No students have been added to this course")))},st=Object(r.c)((function(){return{}}),(function(e){return{onDelete:function(t){return e({type:"DELETE_COURSE",payload:ue.a.Courses.delete(t),slug:t,snackbar:{message:"Course deleted",variant:"success"}})}}}))((function(e){var t=e.course,a=e.onDelete,n=Object(c.useState)(!1),r=Object(pe.a)(n,2),l=r[0],s=r[1],u=function(){s(!1)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(We,{action:"Delete course",onClick:function(){s(!0)}},o.a.createElement(Xe.a,null)),o.a.createElement(Ae.a,{open:l,onClose:u,onClick:function(e){return e.stopPropagation()},onFocus:function(e){return e.stopPropagation()}},o.a.createElement(Ie.a,null,"Delete Course"),o.a.createElement(Ge.a,null,o.a.createElement(Ze.a,{component:"div"},"Are you sure you want to delete this course? This action will permanently delete:",o.a.createElement("ul",null,o.a.createElement("li",null,"all student accounts"),o.a.createElement("li",null,"all song requests"),o.a.createElement("li",null,"all transactions"),o.a.createElement("li",null,"all scores")),"associated with this course. This action"," ",o.a.createElement("strong",null,"cannot be undone"),".")),o.a.createElement(qe.a,null,o.a.createElement(N.a,{onClick:function(){s(!1),a(t.slug)},color:"secondary",variant:"contained",autoFocus:!0},"Delete"),o.a.createElement(N.a,{onClick:u,variant:"contained"},"Cancel"))))})),ut=a(610),it=a(439),mt=a(436),dt=a.n(mt),pt=Object(y.a)((function(e){return{filedrop:{alignItems:"center",backgroundColor:e.palette.grey[300],borderRadius:e.spacing(1),color:e.palette.grey[600],display:"flex",flexDirection:"column",outline:"none",padding:"20px",transition:"all 0.25s ease-in-out"},filedropActive:{backgroundColor:e.palette.primary.light,color:e.palette.primary.contrastText},filedropReject:{backgroundColor:e.palette.secondary.light,color:e.palette.secondary.contrastText}}}));var Et=function(e){var t=e.onFiledrop,a=pt(),n=Object(c.useCallback)((function(e){e.forEach((function(e){var a=new FileReader;a.onabort=function(){return console.log("file reading was aborted")},a.onerror=function(){return console.log("file reading has failed")},a.onload=function(){var e=dt()(a.result,{columns:!0,skip_empty_lines:!0});t(e)},a.readAsBinaryString(e)}))}),[]),r=Object(it.a)({accept:"text/csv, text/plain",multiple:!1,onDropAccepted:n}),l=r.getRootProps,s=r.getInputProps,u=r.isDragActive,i=r.isDragReject;return o.a.createElement("div",l({className:"".concat(a.filedrop," ").concat(u?a.filedropActive:""," ").concat(i?a.filedropReject:"")}),o.a.createElement("input",s()),!u&&o.a.createElement(D.a,null,"Drop a .csv file here or click to select a .csv file"),u&&!i&&o.a.createElement(D.a,null,"Drop .csv file here"),i&&o.a.createElement(D.a,null,"File type not accepted"))},ft=a(403),bt=Object(y.a)((function(e){return{message:{fontStyle:"italic"},root:{alignItems:"center",display:"flex",justifyContent:"center",minWidth:e.spacing(40)},spinner:{marginRight:e.spacing(2)}}})),gt=function(e){var t=e.message,a=bt();return o.a.createElement("div",{className:a.root},o.a.createElement(ft.a,{className:a.spinner}),o.a.createElement(D.a,{className:a.message},t||"Working..."))},Ot=Object(r.c)((function(e){return Object(K.a)(Object(K.a)({},e.common.settings),e.courses)}),(function(e){return{onDrop:function(t,a){return e({type:"IMPORT_STUDENTS",payload:ue.a.Students.import(t,a),snackbar:{message:"Students imported",variant:"success"}})},onExit:function(){return e({type:"STUDENT_DIALOG_UNLOADED"})}}}))((function(e){var t=e.course,a=e.defaultStudentPassword,n=e.errors,r=e.inProgress,l=e.onDrop,s=e.onExit,u=Object(c.useState)(!1),i=Object(pe.a)(u,2),m=i[0],d=i[1],p=Object(ye.a)(),E=Object(je.a)(p.breakpoints.down("md")),f=function(){d(!1)};return Object(c.useEffect)((function(){r||n||d(!1)}),[r]),o.a.createElement(o.a.Fragment,null,o.a.createElement(We,{action:"Import students",onClick:function(){d(!0)}},o.a.createElement(ut.a,null)),o.a.createElement(Ae.a,{fullScreen:E,onClick:function(e){return e.stopPropagation()},onClose:f,onExit:s,onFocus:function(e){return e.stopPropagation()},open:m},o.a.createElement(Ie.a,null,"Import Students"),o.a.createElement(Ge.a,null,r?o.a.createElement(gt,{message:"Importing..."}):o.a.createElement(o.a.Fragment,null,o.a.createElement(D.a,{gutterBottom:!0},"Students can be imported from a .csv file exported from Infinite Campus"),o.a.createElement(Et,{onFiledrop:function(e){var n=Object.keys(e[0]),r=e.map((function(e,t){if(t<2)return null;var r=e[n[0]];return{firstName:r.split(",")[1].split("#")[0].trim(),lastName:r.split(",")[0],username:r.split("#")[1],password:a,role:"student"}})).filter((function(e){return null!==e}));l(r,t._id)}}))),o.a.createElement(qe.a,null,o.a.createElement(N.a,{disabled:r,onClick:f,variant:"contained"},"Cancel"))))})),ht=Object(y.a)((function(e){return{courseDetails:{display:"block"},courseHeader:{alignItems:"center",display:"flex",justifyContent:"space-between",width:"100%"},coursePeriod:{backgroundColor:e.palette.secondary.main,marginRight:e.spacing(2)},courseTitle:{flexGrow:"1"}}})),vt=function(e){var t=e.courses,a=Object(c.useState)(!1),n=Object(pe.a)(a,2),r=n[0],l=n[1],s=ht();return o.a.createElement(o.a.Fragment,null,(null===t||void 0===t?void 0:t.length)>0?t.map((function(e){return o.a.createElement(Me.a,{expanded:r===e._id,key:e._id,onChange:(t=e._id,function(e,a){l(!!a&&t)})},o.a.createElement(Ye.a,{expandIcon:o.a.createElement(Ke.a,null)},o.a.createElement("div",{className:s.courseHeader},o.a.createElement(Qe.a,{className:s.coursePeriod},e.period),o.a.createElement(D.a,{className:s.courseTitle,variant:"h5"},e.name),o.a.createElement(ze,{course:e}),o.a.createElement(rt,{course:e}),o.a.createElement(Ot,{course:e}),o.a.createElement(st,{course:e}))),o.a.createElement(Je.a,{className:s.courseDetails},o.a.createElement(lt,{course:e})));var t})):o.a.createElement(D.a,null,"You have no courses"))},St=Object(r.c)((function(e){return Object(K.a)({},e.courses)}),(function(e){return{onLoad:function(){return e({type:"COURSES_PAGE_LOADED",payload:ue.a.Courses.getAll()})},onUnload:function(){return e({type:"COURSES_PAGE_UNLOADED"})}}}))((function(e){var t=e.courses,a=e.importCount,n=e.onLoad,r=e.onUnload,l=e.pageLoaded;return Object(c.useEffect)((function(){return n(),function(){r()}}),[]),o.a.createElement(o.a.Fragment,null,o.a.createElement(se,{title:"Manage Courses"},o.a.createElement(ze,null)),null!==a&&o.a.createElement(xe,null,a," students imported"),l?o.a.createElement(gt,{message:"Loading..."}):o.a.createElement(vt,{courses:t}))})),yt=a(94),jt=a(437),At=a.n(jt),Dt=a(619),Nt=Object(y.a)((function(e){return{button:{marginBottom:e.spacing(2),marginRight:e.spacing(2)},dialog:{backgroundImage:"url(".concat(Te.a,")"),backgroundPosition:"center bottom",backgroundSize:"cover",color:"white",padding:e.spacing(4)},icon:{marginRight:e.spacing(1)},input:{backgroundColor:"rgba(0,65,91,0.8)",borderRadius:e.spacing(1),height:78,"& input":{color:e.palette.secondary.main}},inputLabel:{color:"white"}}})),Tt=function(e){var t=Object(c.useState)(!1),a=Object(pe.a)(t,2),n=a[0],r=a[1],l=Object(ye.a)(),s=Object(je.a)(l.breakpoints.down("md")),u=Nt(),i=function(){r(!1)},m=function(){var t=Object(J.a)(Q.a.mark((function t(a){return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(!1),t.next=3,e.onSubmit(a);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return o.a.createElement(o.a.Fragment,null,o.a.createElement(ee.a,{color:"primary",onClick:function(){r(!0)},variant:"extended"},o.a.createElement(Dt.a,{className:u.icon}),"Process requests"),o.a.createElement(Ae.a,{classes:{paper:u.dialog},fullScreen:s,open:n,onClose:i},o.a.createElement(D.a,{variant:"h3",align:"center",color:"secondary",gutterBottom:!0},"Purchase a Song"),o.a.createElement(D.a,{variant:"body1",gutterBottom:!0},"Please provide the song and artist title for your request. If approved, 500 points will be charged to your account."),o.a.createElement($.c,{initialValues:{artist:"",title:""},validationSchema:X.b({artist:X.c().required("Required"),title:X.c().required("Required")}),onSubmit:function(){var e=Object(J.a)(Q.a.mark((function e(t){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},o.a.createElement($.b,null,o.a.createElement(ae.a,{container:!0,spacing:4},o.a.createElement(ae.a,{item:!0,xs:12,md:6},o.a.createElement($.a,{className:u.input,color:"primary",component:Z.a,InputLabelProps:{classes:{root:u.inputLabel}},label:"Song Title",name:"title",type:"text",variant:"filled",fullWidth:!0})),o.a.createElement(ae.a,{item:!0,xs:12,md:6},o.a.createElement($.a,{className:u.input,color:"primary",component:Z.a,InputLabelProps:{classes:{root:u.inputLabel}},label:"Artist",name:"artist",type:"text",variant:"filled",fullWidth:!0})),o.a.createElement(ae.a,{item:!0,xs:12},o.a.createElement(N.a,{className:u.button,color:"primary",type:"submit",variant:"contained"},"Buy"),o.a.createElement(N.a,{className:u.button,onClick:i,variant:"contained"},"Cancel")))))))},Ct=Object(r.c)((function(e){return Object(K.a)({},e.songs)}),(function(e){return{onDelete:function(t){return e({type:"DELETE_SONG_REQUEST",payload:ue.a.Songs.delete(t),songId:t,snackbar:{message:"Song request removed",variant:"success"}})},onLoad:function(){return e({type:"TEACHER_SONGS_PAGE_LOADED",payload:ue.a.Songs.forTeacher()})},onSubmitSong:function(t){return e({type:"SUBMIT_SONG_REQUEST",payload:ue.a.Songs.request(t),snackbar:{message:"Song requested",variant:"success"}})},onUnload:function(){return e({type:"SONGS_PAGE_UNLOADED"})}}}))((function(e){var t=e.courses,a=e.onDelete,n=t.map((function(e){return e.songs.map((function(t){return{createdAt:new Date(t.createdAt).toDateString(),title:t.title,artist:t.artist,purchasedBy:"".concat(t.student.firstName," ").concat(t.student.lastName),period:e.period,status:t.status,_id:t._id}}))})).flat(),r=Object(c.useState)([{title:"Request Date",field:"createdAt",editable:"never"},{title:"Song Title",field:"title"},{title:"Song Artist",field:"artist"},{title:"Purchased by",field:"purchasedBy",editable:"never"},{title:"Period",field:"period",editable:"never",render:function(e){return o.a.createElement($e.a,{label:e.period,color:"secondary"})}},{title:"Status",field:"status",lookup:{approved:"approved",pending:"pending",rejected:"rejected",removed:"removed"}}]),l=Object(pe.a)(r,1)[0],s=Object(c.useState)(n),u=Object(pe.a)(s,2),i=u[0],m=u[1];return Object(c.useEffect)((function(){return e.onLoad(),function(){return e.onUnload()}}),[]),Object(c.useEffect)((function(){m(n)}),[t]),o.a.createElement(o.a.Fragment,null,o.a.createElement(se,{title:"Manage Song Requests"},o.a.createElement(Tt,{onSubmit:function(t){e.onSubmitSong(t)}})),o.a.createElement(At.a,{title:"Song Requests",columns:l,data:i,options:{paging:!1,grouping:!0},editable:{onRowDelete:function(e){return new Promise((function(t,n){var r=Object(yt.a)(i),c=e.tableData.id;r.splice(c,1),m(Object(yt.a)(r)),a(e._id),t()}))}}}))})),_t=Object(y.a)((function(e){return{icon:{marginRight:e.spacing(1)}}})),kt=Object(r.c)((function(e){return Object(K.a)({},e.teachers)}),(function(e){return{onAdd:function(t){return e({type:"ADD_TEACHER",payload:ue.a.Auth.register(t),snackbar:{message:"Teacher added",variant:"success"}})},onExit:function(){return e({type:"TEACHER_DIALOG_UNLOADED"})},onUpdate:function(t){return e({type:"UPDATE_TEACHER",payload:ue.a.Teachers.update(t),snackbar:{message:"Teacher updated",variant:"success"}})}}}))((function(e){var t=e.errors,a=e.inProgress,n=e.onAdd,r=e.onExit,l=e.onUpdate,s=e.teacher,u=Object(c.useState)(!1),i=Object(pe.a)(u,2),m=i[0],d=i[1],p=Object(ye.a)(),E=Object(je.a)(p.breakpoints.down("md")),f=_t(),b=function(){d(!0)},g=function(){d(!1)},O=function(e){n(Object(K.a)(Object(K.a)({},e),{},{role:"teacher"}))},h=function(e){l(Object(K.a)(Object(K.a)({},s),e))};return Object(c.useEffect)((function(){a||t||d(!1)}),[a]),o.a.createElement(o.a.Fragment,null,s?o.a.createElement(We,{action:"Update teacher",onClick:b},o.a.createElement(Fe.a,null)):o.a.createElement(ee.a,{color:"primary",onClick:b,variant:"extended"},o.a.createElement(De.a,{className:f.icon}),"Add teacher"),o.a.createElement(Ae.a,{fullScreen:E,open:m,onClose:g,onClick:function(e){return e.stopPropagation()},onExit:r,onFocus:function(e){return e.stopPropagation()}},o.a.createElement($.c,{initialValues:{firstName:(null===s||void 0===s?void 0:s.firstName)||"",lastName:(null===s||void 0===s?void 0:s.lastName)||"",username:(null===s||void 0===s?void 0:s.username)||"",password:""},validationSchema:X.b({firstName:X.c().required("Required"),lastName:X.c().required("Required"),username:X.c().required("Required"),password:X.c().required(s?"":"Required")}),onSubmit:function(){var e=Object(J.a)(Q.a.mark((function e(t){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s?h(t):O(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},o.a.createElement($.b,null,o.a.createElement(Ie.a,null,s?"Edit Teacher":"Add Teacher"),o.a.createElement(Ge.a,null,o.a.createElement(oe,{errors:t}),o.a.createElement(ae.a,{container:!0,spacing:2},o.a.createElement(ae.a,{item:!0,xs:12,md:6},o.a.createElement($.a,{color:"primary",component:Z.a,disabled:a,label:"First Name",name:"firstName",type:"text",fullWidth:!0})),o.a.createElement(ae.a,{item:!0,xs:12,md:6},o.a.createElement($.a,{color:"primary",component:Z.a,disabled:a,label:"Last Name",name:"lastName",type:"text",fullWidth:!0})),o.a.createElement(ae.a,{item:!0,xs:12,md:6},o.a.createElement($.a,{color:"primary",component:Z.a,disabled:!!s||a,label:"Username",name:"username",type:"text",fullWidth:!0})),o.a.createElement(ae.a,{item:!0,xs:12,md:6},o.a.createElement($.a,{color:"primary",component:Z.a,disabled:a,label:"Password",name:"password",type:"text",fullWidth:!0})))),o.a.createElement(qe.a,null,o.a.createElement(N.a,{color:"primary",disabled:a,type:"submit",variant:"contained"},s?a?"Updating...":"Update":a?"Adding...":"Add"),o.a.createElement(N.a,{disabled:a,onClick:g,variant:"contained"},"Cancel"))))))})),Ut=Object(r.c)((function(){return{}}),(function(e){return{onDelete:function(t){return e({type:"DELETE_TEACHER",payload:ue.a.Teachers.delete(t),username:t,snackbar:{message:"Teacher deleted",variant:"success"}})}}}))((function(e){var t=e.onDelete,a=e.teacher,n=Object(c.useState)(!1),r=Object(pe.a)(n,2),l=r[0],s=r[1],u=function(){s(!1)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(We,{action:"Delete teacher",onClick:function(){s(!0)}},o.a.createElement(Xe.a,null)),o.a.createElement(Ae.a,{open:l,onClick:function(e){return e.stopPropagation()},onClose:u,onFocus:function(e){return e.stopPropagation()}},o.a.createElement(Ie.a,null,"Delete Teacher"),o.a.createElement(Ge.a,null,o.a.createElement(Ze.a,{component:"div"},"Are you sure you want to delete this teacher? This action will permanently delete:",o.a.createElement("ul",null,o.a.createElement("li",null,"all student accounts"),o.a.createElement("li",null,"all song requests"),o.a.createElement("li",null,"all transactions"),o.a.createElement("li",null,"all scores")),"associated with this teacher. This action"," ",o.a.createElement("strong",null,"cannot be undone"),".")),o.a.createElement(qe.a,null,o.a.createElement(N.a,{onClick:function(){s(!1),t(a.username)},color:"secondary",variant:"contained",autoFocus:!0},"Delete"),o.a.createElement(N.a,{onClick:u,variant:"contained"},"Cancel"))))})),wt=Object(y.a)((function(e){return{teacherDetails:{display:"block"},teacherHeader:{alignItems:"center",display:"flex",justifyContent:"space-between",width:"100%"},teacherUsername:{marginRight:e.spacing(2),minWidth:e.spacing(12)},teacherName:{flexGrow:"1"}}})),Rt=function(e){var t=e.teachers,a=Object(c.useState)(!1),n=Object(pe.a)(a,2),r=n[0],l=n[1],s=wt();return o.a.createElement(o.a.Fragment,null,(null===t||void 0===t?void 0:t.length)>0?t.map((function(e){return o.a.createElement(Me.a,{expanded:r===e.username,key:e.username,onChange:(t=e.username,function(e,a){l(!!a&&t)})},o.a.createElement(Ye.a,{expandIcon:o.a.createElement(Ke.a,null)},o.a.createElement("div",{className:s.teacherHeader},o.a.createElement($e.a,{color:"secondary",label:e.username,className:s.teacherUsername}),o.a.createElement(D.a,{className:s.teacherName,variant:"h5"},e.firstName," ",e.lastName),o.a.createElement(kt,{teacher:e}),o.a.createElement(Ut,{teacher:e}))),o.a.createElement(Je.a,{className:s.teacherDetails},o.a.createElement(D.a,{variant:"h6"},"Courses"),e.courses&&e.courses.length>0?e.courses.map((function(e){return o.a.createElement("div",{key:e._id},o.a.createElement(D.a,null,"Period ",e.period," | ",e.name," |"," ",e.students.length," students"))})):o.a.createElement("div",null,o.a.createElement(D.a,null,"No courses have been created"))));var t})):o.a.createElement(D.a,null,"No teachers found"))},Pt=Object(r.c)((function(e){return Object(K.a)({},e.teachers)}),(function(e){return{onLoad:function(){return e({type:"MANAGE_TEACHERS_PAGE_LOADED",payload:ue.a.Teachers.getAll()})},onUnload:function(){return e({type:"MANAGE_TEACHERS_PAGE_UNLOADED"})}}}))((function(e){var t=e.onLoad,a=e.onUnload,n=e.teachers;return Object(c.useEffect)((function(){return t(),function(){a()}}),[]),o.a.createElement(o.a.Fragment,null,o.a.createElement(se,{title:"Manage Teachers"},o.a.createElement(kt,null)),o.a.createElement(Rt,{teachers:n}))})),Lt=Object(r.c)((function(e){return{currentUser:e.common.currentUser}}),(function(){return{}}))((function(e){var t=e.currentUser;return t?o.a.createElement(o.a.Fragment,null,o.a.createElement(w,{currentUser:t}),o.a.createElement(V,null,o.a.createElement(S.a,null,o.a.createElement(u.d,null,o.a.createElement(M,{path:"/student/account",component:de}),o.a.createElement(M,{path:"/student/songs",component:Ue}),o.a.createElement(M,{path:"/student/settings",component:me}),o.a.createElement(M,{path:"/teacher/courses",component:St}),o.a.createElement(M,{path:"/teacher/settings",component:me}),o.a.createElement(M,{path:"/teacher/songs",component:Ct}),o.a.createElement(M,{path:"/admin/courses",component:St}),o.a.createElement(M,{path:"/admin/teachers",component:Pt}),o.a.createElement(M,{path:"/admin/songs",component:Ct}),o.a.createElement(M,{path:"/admin/settings",component:me}),o.a.createElement(u.b,{component:z}))),o.a.createElement(H,null))):o.a.createElement(u.a,{to:"/login"})})),xt=a(271),It=a.n(xt),Gt=Object(y.a)((function(e){return{background:{alignItems:"center",backgroundImage:"url(".concat(It.a,")"),backgroundSize:"cover",display:"flex",height:"100%",justifyContent:"center"},logo:{marginBottom:e.spacing(4),width:160},panel:{alignItems:"center",borderRadius:"1rem",display:"flex",flexFlow:"column nowrap",overflowY:"scroll",padding:"2rem 4rem",position:"relative"},text:{color:e.palette.primary.main,fontStyle:"italic"}}})),qt=function(e){var t=Gt();return o.a.createElement(E.a,{className:t.background},o.a.createElement(te.a,{elevation:12,className:t.panel},o.a.createElement(_,{className:t.logo}),o.a.createElement(D.a,{className:t.text,variant:"h4"},"Loading...")))},Ft=a(194),Bt=a(415),Ht=Object(r.c)((function(e){return Object(K.a)({},e.auth)}),(function(e){return{onSubmit:function(t,a){return e({type:k,payload:ue.a.Auth.login(t,a)})}}}))((function(e){return o.a.createElement($.c,{initialValues:{username:"",password:""},validationSchema:X.b({username:X.c().required("Required"),password:X.c().required("Required")}),onSubmit:function(t){!function(t,a){e.onSubmit(t,a)}(t.username,t.password)}},o.a.createElement($.b,null,o.a.createElement(ae.a,{container:!0,spacing:4},o.a.createElement(ae.a,{item:!0,xs:12},o.a.createElement(oe,{errors:e.errors}),o.a.createElement($.a,{component:Z.a,disabled:e.inProgress,fullWidth:!0,label:"Username",name:"username",type:"text",variant:"outlined"})),o.a.createElement(ae.a,{item:!0,xs:12},o.a.createElement($.a,{component:Z.a,disabled:e.inProgress,fullWidth:!0,label:"Password",name:"password",type:"password",variant:"outlined"})),o.a.createElement(ae.a,{item:!0,xs:12},o.a.createElement(N.a,{color:"primary",disabled:e.inProgress,size:"large",type:"submit",variant:"contained"},e.inProgress?"Loading...":"Login")))))})),Wt=Object(y.a)((function(e){return{logo:{display:"block",margin:"0 auto",width:120},page:Object(Ft.a)({alignItems:"center",backgroundImage:"url(".concat(It.a,")"),backgroundSize:"cover",display:"flex",height:"100%",justifyContent:"center"},e.breakpoints.up("lg"),{backgroundSize:"initial",justifyContent:"flex-end"}),panel:Object(Ft.a)({borderRadius:"1rem",overflowY:"scroll",padding:"4rem 2rem",position:"relative",width:"80%"},e.breakpoints.up("lg"),{borderRadius:"0",height:"100%",width:"40%"}),progress:{height:10,left:"0",position:"absolute",top:"0",width:"100%"}}})),Vt=Object(r.c)((function(e){return Object(K.a)(Object(K.a)({},e.auth),{},{currentUser:e.common.currentUser})}),(function(e){return{onUnload:function(){return e({type:"LOGIN_PAGE_UNLOADED"})}}}))((function(e){var t=Wt();return Object(c.useEffect)((function(){return function(){return e.onUnload()}}),[]),e.currentUser?o.a.createElement(u.a,{to:"/"}):o.a.createElement(E.a,null,o.a.createElement("div",{className:t.page},o.a.createElement(te.a,{elevation:12,className:t.panel},e.inProgress&&o.a.createElement(Bt.a,{className:t.progress}),o.a.createElement(ae.a,{container:!0,spacing:4},o.a.createElement(ae.a,{item:!0,xs:12},o.a.createElement(_,{className:t.logo})),o.a.createElement(ae.a,{item:!0,xs:12},o.a.createElement(Ht,null))))))})),zt=a(323),Mt=function(e){var t=e.snackbar,a=Object(zt.b)().enqueueSnackbar;return Object(c.useEffect)((function(){t&&a(t.message,{variant:t.variant})}),[t]),e.children},Yt=Object(r.c)((function(e){return{snackbar:e.notifier.snackbar}}),(function(e){return{onSnackbarClose:function(){return e({type:"SNACKBAR_CLOSED"})}}}))((function(e){var t=o.a.createRef(),a=function(e){return function(){t.current.closeSnackbar(e)}};return o.a.createElement(zt.a,{maxSnack:3,ref:t,action:function(e){return o.a.createElement(N.a,{onClick:a(e)},"Dismiss")},onClose:function(){e.onSnackbarClose()}},o.a.createElement(Mt,{snackbar:e.snackbar},e.children))})),Qt=a(72),Jt=a(438),Kt=a(107),$t=(a(557),a(417)),Zt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ASYNC_START":if(t.subtype===k||"REGISTER"===t.subtype)return Object(K.a)(Object(K.a)({},e),{},{inProgress:!0});break;case k:case"REGISTER":return Object(K.a)(Object(K.a)({},e),{},{inProgress:!1,errors:t.error?t.payload.errors:null});case"LOGIN_PAGE_UNLOADED":case"REGISTER_PAGE_UNLOADED":return{};default:return e}return e},Xt={appName:"Chem Cash",token:null,viewChangeCounter:0},ea=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP_LOAD":return Object(K.a)(Object(K.a)({},e),{},{token:t.token||null,appLoaded:!0,currentUser:t.payload?t.payload.user:null,settings:t.payload?t.payload.settings:null});case"LOGOUT":return Object(K.a)(Object(K.a)({},e),{},{redirectTo:"/login",token:null,currentUser:null});case k:case"REGISTER":return Object(K.a)(Object(K.a)({},e),{},{redirectTo:t.error?null:"/",token:t.error?null:t.payload.user.token,currentUser:t.error?null:t.payload.user,settings:t.error?null:t.payload.settings});case"LOGIN_PAGE_UNLOADED":case"REGISTER_PAGE_UNLOADED":case"SETTINGS_PAGE_UNLOADED":return Object(K.a)(Object(K.a)({},e),{},{viewChangeCounter:e.viewChangeCounter+1});case"NAV_LOADED":case"NAV_TAB_CHANGE":return Object(K.a)(Object(K.a)({},e),{},{redirectTo:t.redirectTo});case"REDIRECT":return Object(K.a)(Object(K.a)({},e),{},{redirectTo:null});case"SETTINGS_SAVED":return Object(K.a)(Object(K.a)({},e),{},{currentUser:t.error?e.currentUser:t.payload[0].user,settings:t.error?e.settings:t.payload[1].settings});default:return e}},ta={courses:[],errors:null,importCount:null,inProgress:!1,pageLoaded:!1},aa=function(e,t){return e.lastName.localeCompare(t.lastName)},na=function(e,t){return e.period-t.period},ra=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ta,t=arguments.length>1?arguments[1]:void 0,a=[];switch(t.type){case"ADD_COURSE":return Object(K.a)(Object(K.a)({},e),{},{courses:t.error?e.courses:[].concat(Object(yt.a)(e.courses),[t.payload.course]).sort((function(e,t){return na(e,t)})),errors:t.error?t.payload.errors:null,inProgress:!1});case"ADD_STUDENT":return a=[],e.courses.forEach((function(e){var n=Object(K.a)({},e);e._id.toString()===t.courseId&&(n.students=[].concat(Object(yt.a)(e.students),[t.payload.user]).sort((function(e,t){return aa(e,t)}))),a.push(n)})),Object(K.a)(Object(K.a)({},e),{},{courses:t.error?e.courses:a,errors:t.error?t.payload.errors:null,inProgress:!1});case"ALERT_CLOSED":return Object(K.a)(Object(K.a)({},e),{},{importCount:null});case"ASYNC_START":if("ADD_STUDENT"===t.subtype||"ADD_COURSE"===t.subtype||"IMPORT_STUDENTS"===t.subtype||"UPDATE_COURSE"===t.subtype||"UPDATE_STUDENT"===t.subtype)return Object(K.a)(Object(K.a)({},e),{},{inProgress:!0,errors:null});if("COURSES_PAGE_LOADED"===t.subtype)return Object(K.a)(Object(K.a)({},e),{},{errors:null,pageLoaded:!0});break;case"COURSE_DIALOG_UNLOADED":case"STUDENT_DIALOG_UNLOADED":return Object(K.a)(Object(K.a)({},e),{},{errors:null});case"COURSES_PAGE_LOADED":return Object(K.a)(Object(K.a)({},e),{},{courses:t.payload.courses,pageLoaded:!1});case"COURSES_PAGE_UNLOADED":return ta;case"DELETE_COURSE":return Object(K.a)(Object(K.a)({},e),{},{courses:t.error?e.courses:e.courses.filter((function(e){return e.slug!==t.slug}))});case"DELETE_STUDENT":return a=[],e.courses.forEach((function(e){var n=Object(K.a)({},e);e._id.toString()===t.courseId.toString()&&(n.students=e.students.filter((function(e){return e.username!==t.username}))),a.push(n)})),Object(K.a)(Object(K.a)({},e),{},{courses:t.error?e.courses:a});case"IMPORT_STUDENTS":return!t.error&&t.payload.course.students.sort((function(e,t){return aa(e,t)})),Object(K.a)(Object(K.a)({},e),{},{courses:t.error?e.courses:e.courses.map((function(e){return e._id===t.payload.course._id?t.payload.course:e})),errors:t.error?t.payload.errors:null,importCount:t.error?null:t.payload.count,inProgress:!1});case"RESET_STUDENT_PASSWORD":return Object(K.a)({},e);case"UPDATE_COURSE":return Object(K.a)(Object(K.a)({},e),{},{courses:t.error?e.courses:e.courses.map((function(e){return e._id===t.payload.course._id?t.payload.course:e})).sort((function(e,t){return na(e,t)})),errors:t.error?t.payload.errors:null,inProgress:!1});case"UPDATE_STUDENT":a=[];var n=t.payload.user;return e.courses.forEach((function(e){var r=Object(K.a)({},e);e._id.toString()===t.courseId.toString()&&(r.students=e.students.map((function(e){return e._id.toString()===n._id.toString()?n:e})).sort((function(e,t){return aa(e,t)}))),a.push(r)})),Object(K.a)(Object(K.a)({},e),{},{courses:t.error?e.courses:a,errors:t.error?t.payload.errors:null,inProgress:!1});default:return e}return e},ca=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NAV_LOADED":case"NAV_TAB_CHANGE":return Object(K.a)(Object(K.a)({},e),{},{navTabValue:t.value});case"NAV_UNLOADED":return{};default:return e}},oa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_COURSE":case"ADD_STUDENT":case"ADD_TEACHER":case"DELETE_COURSE":case"DELETE_SONG_REQUEST":case"DELETE_STUDENT":case"DELETE_TEACHER":case"IMPORT_STUDENTS":case"RESET_STUDENT_PASSWORD":case"SETTINGS_SAVED":case"SUBMIT_SONG_REQUEST":case"UPDATE_COURSE":case"UPDATE_STUDENT":case"UPDATE_TEACHER":return Object(K.a)(Object(K.a)({},e),{},{snackbar:t.error?null:t.snackbar});case"SNACKBAR_CLOSED":return Object(K.a)(Object(K.a)({},e),{},{snackbar:null});default:return e}},la=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ASYNC_START":if("SETTINGS_SAVED"===t.subtype)return Object(K.a)(Object(K.a)({},e),{},{inProgress:!0});break;case"SETTINGS_PAGE_UNLOADED":return{};case"SETTINGS_SAVED":return Object(K.a)(Object(K.a)({},e),{},{inProgress:!1,errors:t.error?t.payload.errors:null});default:return e}return e},sa={errors:null,inProgress:!1,teachers:[]},ua=function(e,t){return e.lastName.localeCompare(t.lastName)},ia=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TEACHER":return Object(K.a)(Object(K.a)({},e),{},{errors:t.error?t.payload.errors:null,inProgress:!1,teachers:t.error?e.teachers:[].concat(Object(yt.a)(e.teachers),[t.payload.user]).sort((function(e,t){return ua(e,t)}))});case"ASYNC_START":if("ADD_TEACHER"===t.subtype||"UPDATE_TEACHER"===t.subtype)return Object(K.a)(Object(K.a)({},e),{},{inProgress:!0,errors:null});break;case"DELETE_TEACHER":return Object(K.a)(Object(K.a)({},e),{},{teachers:t.error?e.teachers:e.teachers.filter((function(e){return e.username!==t.username}))});case"MANAGE_TEACHERS_PAGE_LOADED":return Object(K.a)(Object(K.a)({},e),{},{teachers:t.payload.users});case"MANAGE_TEACHERS_PAGE_UNLOADED":return sa;case"TEACHER_DIALOG_UNLOADED":return Object(K.a)(Object(K.a)({},e),{},{errors:null});case"UPDATE_TEACHER":return Object(K.a)(Object(K.a)({},e),{},{errors:t.error?t.payload.errors:null,inProgress:!1,teachers:t.error?e.teachers:e.teachers.map((function(e){return e.username===t.payload.user.username?t.payload.user:e})).sort((function(e,t){return ua(e,t)}))});default:return e}return e},ma={course:"",courses:[],courseSongs:[],errors:null,inProgress:!1,userSongs:[]},da=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ma,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DELETE_SONG_REQUEST":var a=[];return e.courses.forEach((function(e){var n=Object(K.a)({},e);n.songs=n.songs.filter((function(e){return e._id.toString()!==t.songId.toString()})),a.push(n)})),Object(K.a)(Object(K.a)({},e),{},{courses:t.error?e.courses:a});case"SONGS_PAGE_UNLOADED":return ma;case"STUDENT_SONGS_PAGE_LOADED":return Object(K.a)(Object(K.a)({},e),{},{userSongs:t.payload.songsByUser,courseSongs:t.payload.songsByCourse,course:t.payload.course});case"SUBMIT_SONG_REQUEST":return Object(K.a)(Object(K.a)({},e),{},{userSongs:[t.payload.song].concat(Object(yt.a)(e.userSongs)),courseSongs:[t.payload.song].concat(Object(yt.a)(e.courseSongs))});case"TEACHER_SONGS_PAGE_LOADED":return Object(K.a)(Object(K.a)({},e),{},{courses:t.payload.courses});default:return e}},pa=function(e){return function(t){return function(a){if((c=a.payload)&&"function"===typeof c.then){e.dispatch({type:"ASYNC_START",subtype:a.type});var n=e.getState().viewChangeCounter,r=a.skipTracking;a.payload.then((function(t){var c=e.getState();(r||c.viewChangeCounter===n)&&(a.payload=t,e.dispatch({type:"ASYNC_END",promise:a.payload}),e.dispatch(a))}),(function(t){var c=e.getState();(r||c.viewChangeCounter===n)&&(a.error=!0,a.payload=t.response.body,a.skipTracking||e.dispatch({type:"ASYNC_END",promise:a.payload}),e.dispatch(a))}))}else{var c;t(a)}}}},Ea=function(e){return function(e){return function(t){"REGISTER"===t.type||t.type===k?t.error||(window.localStorage.setItem("jwt",t.payload.user.token),ue.a.setToken(t.payload.user.token)):"LOGOUT"===t.type&&(window.localStorage.setItem("jwt",""),ue.a.setToken(null)),e(t)}}};var fa,ba=Object(Kt.a)(),ga=Object($t.a)(ba),Oa=Object(Qt.createStore)((fa=ba,Object(Qt.combineReducers)({auth:Zt,common:ea,courses:ra,nav:ca,notifier:oa,settings:la,teachers:ia,songs:da,router:Object(n.b)(fa)})),Object(Jt.composeWithDevTools)(Object(Qt.applyMiddleware)(ga,pa,Ea))),ha=Object(r.c)((function(e){return{appLoaded:e.common.appLoaded,redirectTo:e.common.redirectTo}}),(function(e){return{onLoad:function(t,a){return e({type:"APP_LOAD",payload:t,token:a,skipTracking:!0})},onRedirect:function(){return e({type:"REDIRECT"})}}}))((function(e){var t=e.appLoaded,a=e.redirectTo;return Object(c.useEffect)((function(){a&&(Oa.dispatch(Object(i.d)(a)),e.onRedirect())}),[a]),Object(c.useEffect)((function(){var t=window.localStorage.getItem("jwt");t&&ue.a.setToken(t),e.onLoad(t?ue.a.Auth.current():null,t)}),[]),t?o.a.createElement(m.a,{theme:v},o.a.createElement(d.a,null),o.a.createElement(Yt,null,o.a.createElement(E.a,null,o.a.createElement(c.Suspense,{fallback:o.a.createElement("p",null,"Loading...")},o.a.createElement(u.d,null,o.a.createElement(u.b,{exact:!0,path:"/login",component:Vt}),o.a.createElement(u.b,{path:"/",component:Lt})))))):o.a.createElement(m.a,{theme:v},o.a.createElement(d.a,null),o.a.createElement(qt,null))}));s.a.render(o.a.createElement(r.a,{store:Oa},o.a.createElement(n.a,{history:ba},o.a.createElement(u.d,null,o.a.createElement(u.b,{path:"/",component:ha})))),document.getElementById("root"))}},[[447,1,2]]]);
//# sourceMappingURL=main.64e66942.chunk.js.map