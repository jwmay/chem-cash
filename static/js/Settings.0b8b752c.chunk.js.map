{"version":3,"sources":["components/ListErrors.js","components/Settings.js"],"names":["ListErrors","errors","this","props","className","Object","keys","map","key","React","PureComponent","SettingsForm","currentUser","state","username","email","password","updateState","field","ev","newState","assign","target","value","setState","submitForm","preventDefault","user","onSubmitForm","onSubmit","type","placeholder","onChange","autoComplete","disabled","inProgress","Settings","onClick","onClickLogout","connect","settings","common","dispatch","LOGOUT","SETTINGS_SAVED","payload","agent","Auth","save","onUnload","SETTINGS_PAGE_UNLOADED"],"mappings":"iKAEMA,E,uKAEF,IAAMC,EAASC,KAAKC,MAAMF,OAC1B,OAAIA,EAEA,wBAAIG,UAAU,kBACXC,OAAOC,KAAKL,GAAQM,KAAI,SAACC,GACxB,OACE,wBAAIA,IAAKA,GACNA,EADH,IACSP,EAAOO,QAOjB,S,GAhBYC,IAAMC,eAqBhBV,O,yICZTW,E,kDACJ,WAAYR,GAAQ,IAAD,sBACjB,cAAMA,GADW,IAETS,EAAgBT,EAAhBS,YAFS,OAGjB,EAAKC,MAAQ,CACXC,SAAWF,GAAeA,EAAYE,UAAa,GACnDC,MAAQH,GAAeA,EAAYG,OAAU,GAC7CC,SAAWJ,GAAeA,EAAYI,UAAa,IAGrD,EAAKC,YAAc,SAACC,GAAD,OAAW,SAACC,GAC7B,IAAMN,EAAQ,EAAKA,MACbO,EAAWf,OAAOgB,OAAO,GAAIR,EAAlBR,OAAA,IAAAA,CAAA,GAA4Ba,EAAQC,EAAGG,OAAOC,QAC/D,EAAKC,SAASJ,KAGhB,EAAKK,WAAa,SAACN,GACjBA,EAAGO,iBAEH,IAAMC,EAAOtB,OAAOgB,OAAO,GAAI,EAAKR,OAC/Bc,EAAKX,iBACDW,EAAKX,SAGd,EAAKb,MAAMyB,aAAaD,IAvBT,E,qDA2BT,IAAD,EACqBzB,KAAKW,MAAzBC,EADD,EACCA,SAAUC,EADX,EACWA,MAElB,OACE,0BAAMc,SAAU3B,KAAKuB,YACnB,kCACE,8BAAUrB,UAAU,cAClB,2BACEA,UAAU,+BACV0B,KAAK,OACLC,YAAY,WACZR,MAAOT,GAAY,GACnBkB,SAAU9B,KAAKe,YAAY,eAI/B,8BAAUb,UAAU,cAClB,2BACEA,UAAU,+BACV6B,aAAa,WACbH,KAAK,QACLC,YAAY,QACZR,MAAOR,GAAS,GAChBiB,SAAU9B,KAAKe,YAAY,YAI/B,8BAAUb,UAAU,cAClB,2BACEA,UAAU,+BACV0B,KAAK,WACLG,aAAa,mBACbF,YAAY,eACZR,MAAOrB,KAAKW,MAAMG,SAClBgB,SAAU9B,KAAKe,YAAY,eAI/B,4BACEb,UAAU,uCACV0B,KAAK,SACLI,SAAUhC,KAAKW,MAAMsB,YAHvB,yB,GAlEiB1B,IAAMC,eA2F3B0B,E,uKAEF,OACE,yBAAKhC,UAAU,iBACb,yBAAKA,UAAU,kBACb,yBAAKA,UAAU,OACb,yBAAKA,UAAU,kCACb,wBAAIA,UAAU,kBAAd,iBAEA,kBAAC,IAAD,CAAYH,OAAQC,KAAKC,MAAMF,SAE/B,kBAACU,EAAD,CACEC,YAAaV,KAAKC,MAAMS,YACxBgB,aAAc1B,KAAKC,MAAMyB,eAG3B,6BAEA,4BACExB,UAAU,yBACViC,QAASnC,KAAKC,MAAMmC,eAFtB,oC,GAlBS7B,IAAMC,eAgCd6B,uBA5CS,SAAC1B,GAAD,mBAAC,eACpBA,EAAM2B,UADa,IAEtB5B,YAAaC,EAAM4B,OAAO7B,iBAGD,SAAC8B,GAAD,MAAe,CACxCJ,cAAe,kBAAMI,EAAS,CAAEZ,KAAMa,OACtCf,aAAc,SAACD,GAAD,OACZe,EAAS,CAAEZ,KAAMc,IAAgBC,QAASC,IAAMC,KAAKC,KAAKrB,MAC5DsB,SAAU,kBAAMP,EAAS,CAAEZ,KAAMoB,UAmCpBX,CAA6CH","file":"static/js/Settings.0b8b752c.chunk.js","sourcesContent":["import React from 'react'\n\nclass ListErrors extends React.PureComponent {\n  render() {\n    const errors = this.props.errors\n    if (errors) {\n      return (\n        <ul className='error-messages'>\n          {Object.keys(errors).map((key) => {\n            return (\n              <li key={key}>\n                {key} {errors[key]}\n              </li>\n            )\n          })}\n        </ul>\n      )\n    } else {\n      return null\n    }\n  }\n}\n\nexport default ListErrors\n","import { connect } from 'react-redux'\nimport ListErrors from './ListErrors'\nimport React from 'react'\n\nimport agent from '../agent'\nimport {\n  SETTINGS_SAVED,\n  SETTINGS_PAGE_UNLOADED,\n  LOGOUT,\n} from '../constants/actionTypes'\n\nclass SettingsForm extends React.PureComponent {\n  constructor(props) {\n    super(props)\n    const { currentUser } = props\n    this.state = {\n      username: (currentUser && currentUser.username) || '',\n      email: (currentUser && currentUser.email) || '',\n      password: (currentUser && currentUser.password) || '',\n    }\n\n    this.updateState = (field) => (ev) => {\n      const state = this.state\n      const newState = Object.assign({}, state, { [field]: ev.target.value })\n      this.setState(newState)\n    }\n\n    this.submitForm = (ev) => {\n      ev.preventDefault()\n\n      const user = Object.assign({}, this.state)\n      if (!user.password) {\n        delete user.password\n      }\n\n      this.props.onSubmitForm(user)\n    }\n  }\n\n  render() {\n    const { username, email } = this.state\n\n    return (\n      <form onSubmit={this.submitForm}>\n        <fieldset>\n          <fieldset className='form-group'>\n            <input\n              className='form-control form-control-lg'\n              type='text'\n              placeholder='Username'\n              value={username || ''}\n              onChange={this.updateState('username')}\n            />\n          </fieldset>\n\n          <fieldset className='form-group'>\n            <input\n              className='form-control form-control-lg'\n              autoComplete='username'\n              type='email'\n              placeholder='Email'\n              value={email || ''}\n              onChange={this.updateState('email')}\n            />\n          </fieldset>\n\n          <fieldset className='form-group'>\n            <input\n              className='form-control form-control-lg'\n              type='password'\n              autoComplete='current-password'\n              placeholder='New Password'\n              value={this.state.password}\n              onChange={this.updateState('password')}\n            />\n          </fieldset>\n\n          <button\n            className='btn btn-lg btn-primary pull-xs-right'\n            type='submit'\n            disabled={this.state.inProgress}\n          >\n            Update Settings\n          </button>\n        </fieldset>\n      </form>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  ...state.settings,\n  currentUser: state.common.currentUser,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onClickLogout: () => dispatch({ type: LOGOUT }),\n  onSubmitForm: (user) =>\n    dispatch({ type: SETTINGS_SAVED, payload: agent.Auth.save(user) }),\n  onUnload: () => dispatch({ type: SETTINGS_PAGE_UNLOADED }),\n})\n\nclass Settings extends React.PureComponent {\n  render() {\n    return (\n      <div className='settings-page'>\n        <div className='container page'>\n          <div className='row'>\n            <div className='col-md-6 offset-md-3 col-xs-12'>\n              <h1 className='text-xs-center'>Your Settings</h1>\n\n              <ListErrors errors={this.props.errors} />\n\n              <SettingsForm\n                currentUser={this.props.currentUser}\n                onSubmitForm={this.props.onSubmitForm}\n              />\n\n              <hr />\n\n              <button\n                className='btn btn-outline-danger'\n                onClick={this.props.onClickLogout}\n              >\n                Or click here to logout.\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Settings)\n"],"sourceRoot":""}