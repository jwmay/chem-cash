{"version":3,"sources":["images/chemistry-background.jpg","images/chem-cash-logo.png","images/chem-cash-prime-logo.png","images/songs-background.jpg","images/prime-darkmode.png","images/prime-jukebox.png","images/prime-sameday.png","images/prime-songremoval.png","images/prime-songs.png","images/prime-purchases.png","images/doc-may-profile.jpg","components/Theme.js","constants/actionTypes.js","components/LogoutButton.js","components/Student/AccountSuspendedDialog.js","components/Logo.js","components/Header.js","components/Navigation.js","components/PageWrapper.js","components/NotFound.js","components/ProtectedRoute.js","components/ControlledSwitch.js","components/Jukebox/JukeboxRequestDialog.js","components/ListErrors.js","components/PageHeader.js","components/InputBox.js","components/Jukebox/CreatePlaylistDialog.js","components/ConfirmationDialog.js","components/Jukebox/RemovePlaylistConfirmationDialog.js","components/Jukebox/CoursePlaylistCard.js","components/DialogAppBar.js","transitions.js","components/Jukebox/PlaylistManagerDialog.js","components/Prime/PrimeBadge.js","components/Teacher/SpotifyLinker.js","components/Settings.js","components/ActionButton.js","components/Points.js","components/AccountBalance.js","components/Products/ProductSelector.js","hooks.js","converter.js","components/Purchases/PurchaseDetailsList.js","components/Purchases/AddPurchaseDialog.js","components/DroppedChip.js","components/Notifications/NotificationDialog.js","components/Teacher/ResetStudentPasswordAlert.js","components/AutocompleteSelector.js","components/Passes/PassDialog.js","components/Teacher/BonusSelector.js","components/Fines/FineSelector.js","components/Teacher/TransactionDialog.js","components/AccountView.js","components/Student/StudentAccount.js","components/Passes/StudentPassesTable.js","components/Passes/StudentPasses.js","components/Alert.js","components/Spinner.js","components/Jukebox/AddToQueueDialog.js","constants/eventTypes.js","contexts/AudioContext.js","events.js","components/AudioPlayer.js","components/Jukebox/TrackCard.js","components/Jukebox/QueueDialog.js","components/Jukebox/JukeboxDialog.js","emailer.js","constants/emailjs.js","components/Student/SongRequestDialog.js","components/Student/StudentSongs.js","components/Teacher/EconomySummaryTable.js","components/StatCard.js","components/Teacher/EconomyDialog.js","components/Teacher/StudentSearch.js","components/Teacher/CourseSelector.js","components/Teacher/StudentsTable.js","components/Teacher/BulkTransactionsDialog.js","components/Filedrop.js","parsers.js","constants/support.js","components/Teacher/ImportScoresDialog.js","components/Teacher/ManageBonusesTable.js","components/Teacher/ManageBonusesDialog.js","components/Fines/ManageFinesTable.js","components/Fines/ManageFinesDialog.js","components/Passes/ManagePassesTable.js","components/Passes/ManagePassesDialog.js","components/Teacher/UpdateAccountsMenu.js","components/Teacher/TeacherAccounts.js","components/Teacher/CourseDialog.js","components/Teacher/DeleteStudentAlert.js","components/Teacher/StudentDialog.js","components/Teacher/StudentTransferDialog.js","components/Teacher/CourseStudentList.js","components/Teacher/DeleteCourseAlert.js","components/Teacher/GrouperDialog.js","components/Teacher/ImportStudentsDialog.js","components/Jukebox/JukeboxBadge.js","components/Tasks/TaskDataChart.js","components/Tasks/TaskDataDashboard.js","components/Tasks/TaskDataTable.js","components/Tasks/TaskDataDialog.js","components/Teacher/TasksTable.js","components/Teacher/TasksDialog.js","components/Teacher/CourseList.js","components/Teacher/TeacherCourses.js","components/FabBadge.js","components/Teacher/ProcessSongRequestsDialog.js","components/Teacher/TeacherSongs.js","components/Purchases/ManagePurchasesTable.js","components/Purchases/ProcessPurchasesDialog.js","components/Purchases/ManagePurchases.js","components/Admin/ResetWhatsNewAlert.js","components/Admin/TeacherDialog.js","components/Admin/DeleteTeacherAlert.js","components/Admin/TeacherList.js","components/Admin/ManageTeachers.js","components/BigButton.js","components/Prime/PrimeBanner.js","components/Prime/PrimeConfirmation.js","components/Prime/PrimeSignup.js","components/Prime/PrimeDialog.js","components/ImagePreview.js","components/TextFieldLimit.js","components/Products/ProductDialog.js","components/Products/DeleteProductDialog.js","components/Products/ProductsToolbar.js","components/Products/ProductsGallery.js","components/Products/ProductsTable.js","components/Purchases/ShoppingCart.js","components/Purchases/StudentPurchasesTable.js","components/Purchases/StudentPurchasesDialog.js","components/Products/Products.js","components/Home.js","components/Loading.js","components/About.js","components/Login/LoginForm.js","components/Login/index.js","components/Notifier.js","components/WhatsNewDialog.js","reducers/auth.js","reducers/bonuses.js","reducers/common.js","reducers/courses.js","reducers/economy.js","reducers/fines.js","reducers/jukebox.js","reducers/nav.js","reducers/notifications.js","reducers/notifier.js","reducers/passes.js","reducers/products.js","reducers/purchases.js","reducers/scores.js","reducers/settings.js","reducers/tasks.js","reducers/teachers.js","reducers/songs.js","middleware.js","store.js","reducer.js","components/App.js","index.js","agent.js"],"names":["module","exports","ChemCashTheme","breakpoints","values","md","lg","palette","primary","lightGreen","secondary","amber","overrides","MuiDialogActions","root","padding","MuiTableCell","justifyContent","ChemCashDarkTheme","createMuiTheme","type","ChemCashLightTheme","ASYNC_START","LOGIN","connect","dispatch","onLogout","Button","color","onClick","AccountSuspendedDialog","user","Dialog","open","dropped","DialogTitle","DialogContent","DialogActions","Logo","prime","props","alt","src","logoPrime","logo","useStyles","makeStyles","theme","height","marginBottom","spacing","marginTop","title","flexGrow","state","currentUser","common","navTabValue","nav","settings","classes","AppBar","position","Container","Toolbar","className","enabled","hasPrime","Typography","variant","align","charAt","toUpperCase","slice","bottom","width","zIndex","path","router","location","pathname","onLoad","tabValue","redirectTo","value","onTabChange","onUnload","userRole","role","beta","enableBetaFeatures","passes","hallpass","products","productsEnabled","songs","songRequestEnabled","store","storeEnabled","handleTabChange","useEffect","tabFromPath","split","BottomNavigation","onChange","event","newValue","showLabels","BottomNavigationAction","label","icon","LocalAtm","Wc","QueueMusic","Store","SupervisorAccount","People","wrapper","PageWrapper","children","NotFound","exact","component","to","ControlledSwitch","controlledBy","name","useFormikContext","setFieldValue","useField","field","Switch","disabled","undefined","button","darkMode","onSubmit","payload","agent","Settings","jukebox","snackbar","message","requested","useState","setOpen","useTheme","fullScreen","useMediaQuery","down","handleClose","maxWidth","onClose","initialValues","email","validationSchema","Yup","required","a","formik","DialogContentText","Link","href","target","Grid","container","item","xs","autoFocus","TextField","fullWidth","isValid","dirty","alert","alertList","ListErrors","errors","Object","keys","map","key","readableKey","replace","toLowerCase","severity","main","fontSize","fontStyle","headerLeft","alignItems","display","headerRight","pageHeader","marginRight","PageHeader","InputBox","inputValue","setInputValue","ev","CreatePlaylistDialog","course","period","playlistName","setPlaylistName","Tooltip","arrow","IconButton","PlaylistAdd","stopPropagation","onFocus","ConfirmationDialog","isOpen","onCancel","RemovePlaylistConfirmationDialog","HighlightOff","avatar","backgroundColor","card","background","default","minHeight","content","controls","paddingBottom","paddingLeft","details","flexDirection","image","info","tracks","playlists","tokens","spotifyTokens","id","Spotify","getPlaylist","onAddPlaylistClick","onRemovePlaylistClick","playlist","find","pl","playlistId","Card","CardContent","Avatar","total","external_urls","spotify","Visibility","images","length","CardMedia","url","white","margin","DialogAppBar","edge","Close","SlideUpTransition","React","forwardRef","ref","Slide","direction","courses","onCreatePlaylist","slug","createPlaylist","Courses","getAll","onRemovePlaylist","removePlaylist","handleAddPlaylistClick","handleRemovePlaylistClick","TransitionComponent","primeEnabled","permanent","size","aria-label","faFlask","link","cursor","textAlign","spotifyAuthUrl","getAuthUrl","onRemoveAuth","removeAuth","Fab","faSpotify","gridCenter","borderLeft","lock","marginLeft","paper","onSubmitForm","Promise","all","Auth","save","update","onWhatsNewClick","viewedChanges","inProgress","SwitchLabel","status","enableReinitialize","allowPurchasesWithInsufficientFunds","defaultStudentPassword","notifications","finesEnabled","fines","firstName","hallpassAllowPurchaseWithInsufficientFunds","allowPurchaseWithInsufficientFunds","hallpassAllowStudentCreation","allowStudentCreation","hallpassDefaultDuration","defaultDuration","hallpassEnabled","hallpassLimit","limit","hallpassPurchaseAmount","purchaseAmount","jukeboxEnabled","jukeboxPurchaseAmount","jukeboxPurchaseLimit","purchaseLimit","jukeboxRequested","lastName","notificationsEnabledForSongs","forSongs","notificationsEnabledForStore","forStore","password","primeDarkModeEnabled","darkModeEnabled","primeHallpassDiscount","hallpassDiscount","primeJukeboxEnabled","primePurchaseAmount","primeSameDayDeliveryEnabled","sameDayDeliveryEnabled","primeSongRemovalEnabled","songRemovalEnabled","primeSongRequestPurchaseDiscount","songRequestPurchaseDiscount","primeStorePurchaseDiscount","storePurchaseDiscount","roomNumber","schoolDistrict","score100","scoreConverter","score90","score80","score70","score60","score50","songRemovalPurchaseAmount","songRemovalRequestEnabled","songRemovalRefundAmount","songRequestPurchaseAmount","taxRate","typeError","notificationsForSongs","notificationsForStore","form","userSettings","100","90","80","70","60","50","40","30","20","10","0","resetForm","SaveAlt","Paper","style","gutterBottom","FormControl","InputLabel","Select","MenuItem","Lock","permissions","actionButton","text","ActionButton","action","enterTouchDelay","Points","prefix","suffix","displayType","thousandSeparator","Math","round","insufficient","error","light","sufficient","success","borderRadius","scores","balance","username","Scores","getStudentScores","cost","count","Products","allowAny","options","product","quantity","sort","b","localeCompare","Autocomplete","autoHighlight","freeSolo","getOptionLabel","getOptionSelected","opt","val","_id","groupBy","noOptionsText","onInputChange","renderInput","params","placeholder","renderOption","option","matches","match","parts","parse","part","index","fontWeight","highlight","useGetInvoice","quantities","primeRate","items","desc","imgUrl","photoUrl","max","maxPurchaseQuantity","onHand","price","qty","unit","subtotal","reduce","sum","i","taxes","invoice","convertGoogleLink","includes","fileIdMatch","convertScore","score","conversions","task","totalPoints","multiplier","nonZeroTotal","percent","floor","emptyCart","tableCellImg","actions","isPrime","showAddRow","setShowAddRow","newItem","setNewItem","handleAddRowClick","handleQtyUpdate","hasOwnProperty","setInvoice","TableContainer","Table","TableHead","TableRow","TableCell","colSpan","TableBody","row","productId","delete","Delete","maxOptions","push","getOptions","add","Check","rowSpan","Add","purchases","onAddItem","onDeleteItem","onExit","purchase","Purchases","onUpdateItem","cart","student","purchaseNote","setPurchaseNote","AddShoppingCart","note","DroppedChip","Chip","Notifications","clearAll","notification","AlertTitle","Students","btnSize","LockOpen","AutocompleteSelector","defaultValue","DESTINATIONS","ActivePassAlert","activePassExists","lastPass","duration","destination","moment","createdAt","format","InsufficientFundsAlert","accountBalance","canAfford","PassLimitExceededAlert","passLimitExceeded","StudentGeneratedPassAlert","allow","PassDisplay","pass","teacher","PassItemRow","titleCase","PassForm","pageLoaded","showForm","createdBy","doCharge","getLastPass","Passes","onAdd","onLoadStudent","onLoadTeacher","studentId","getStudentPasses","buttonType","passStatus","setPassStatus","setActivePassExists","setPassLimitExceeded","handleClickOpen","getHallpassAmount","getPassStatus","curTime","passTime","isSameDay","isSame","elapsedTime","diff","as","getPassLimitExceeded","lastPassStatus","BonusSelector","bonuses","bonus","description","FineSelector","fine","transaction","Transactions","typeTitle","handleSubmitAdd","Grade","Gavel","ShoppingBasket","amount","amt","up","borderTop","textTransform","centerOnMobile","edit","typography","pxToRem","AccountHeader","doEdit","onEditClick","balanceGridSize","TransactionList","onDelete","onUpdate","transactions","data","setData","mapTransaction","createdAtString","mappedData","mapped","mapScore","editable","defaultSort","render","rowData","renderType","columns","localization","body","emptyDataSourceMessage","editRow","deleteText","saveTooltip","actionsColumnIndex","paging","toolbar","onRowUpdate","newData","oldData","resolve","reject","dataUpdate","tableData","onRowDelete","splice","setDoEdit","StudentPassesTable","ProgressBar","withStyles","bar","LinearProgress","getPasses","plural","remain","passHeader","passUsage","CardHeader","disableClose","Collapse","in","minWidth","spinner","Spinner","CircularProgress","AddToQueueDialog","AudioContext","createContext","AudioProvider","song","setSong","playing","setPlaying","isPlaying","pause","play","newSong","Audio","eventName","listener","addEventListener","document","removeEventListener","unsubscribe","Provider","toggle","AudioPlayer","context","useContext","window","Error","useAudio","CustomEvent","detail","dispatchEvent","publish","Pause","PlayArrow","addToQueue","track","hideControls","albumArtists","album","artists","artist","join","uri","preview_url","getQueue","queue","currently_playing","nowPlaying","upNext","buttonSpan","formControl","setPlaylistId","showJukebox","disableJukebox","faTurntable","labelId","filter","t","emailer","template","emailjs","send","then","response","dialog","backgroundImage","backgroundPosition","backgroundSize","input","inputLabel","Songs","request","handleSubmit","student_name","song_title","song_artist","InputLabelProps","forStudent","courseSongs","userSongs","mySongsOnly","setMySongsOnly","setColumns","allowDelete","lookup","approved","pendingApproval","pendingRemoval","rejected","removed","statusDescription","InfoOutlined","purchasedBy","grid","FormControlLabel","control","Checkbox","checked","deleteTooltip","isDeletable","isDeleteHidden","EconomySummaryTable","accounts","account","accountTotal","totals","assessmentTotal","assessments","bonusTotal","purchaseTotal","songTotal","passTotal","jukeboxTotal","hidden","grouping","boxShadow","statAvatar","statCard","flexFlow","StatCard","precision","pow","getRounded","Dashboard","Assignment","prev","cur","Money","Group","MusicNote","Person","elevation","overflow","economy","students","search","setMappedData","flat","shadows","onSelect","tabIndex","StudentsTable","setSort","getNextSort","fullName","nRowsSelected","onSelectionChange","rows","selection","tooltip","isFreeAction","curStudent","addMany","isClosed","setCourse","setStudents","handleCourseSelect","handleStudentSelect","filedrop","grey","outline","transition","filedropActive","contrastText","filedropReject","Filedrop","onFiledrop","onDrop","useCallback","acceptedFiles","forEach","file","reader","FileReader","onabort","console","log","onerror","onload","parsedFile","result","relax_column_count","skip_empty_lines","readAsBinaryString","useDropzone","accept","multiple","onDropAccepted","getRootProps","getInputProps","isDragActive","isDragReject","parser","ccsd","usernames","pop","parsed","tasks","taskName","endsWith","column","parseFullName","first","last","element","evergreen","studentNumber","lehi","SUPPORTED_SCHOOLS","SCORES","STUDENTS","ScoreImportStepper","onDataChange","onShowImport","setFile","setTasks","handleTaskChange","tasksSelected","some","el","FormGroup","onImport","import","ready","setReady","importData","selected","Bonuses","addRowPosition","onRowAdd","Fines","active","expired","summary","PassTable","expanded","ExpansionPanel","ExpansionPanelSummary","expandIcon","ExpandMore","ExpansionPanelDetails","dataDelete","showTitle","setExpanded","handleExpandedChange","panel","isExpanded","AlarmOn","AlarmOff","UpdateAccountsMenu","menuAnchorEl","setMenuAnchorEl","menuSelection","setMenuSelection","handleMenuSelect","currentTarget","dataset","handleDialogClose","Menu","anchorEl","Boolean","data-type","ListItemIcon","Publish","ListItemText","Divider","LocalActivity","ConfirmationNumber","importSummary","setStudent","tasksCreated","scoresImported","scoresUpdated","handleSubmitUpdate","courseId","PersonAdd","courseOut","courseIn","unenroll","enroll","Loop","ds","select","hover","rowHeader","studentUsername","StudentListRow","CourseStudentList","GrouperDialog","numGroups","setNumGroups","groups","setGroups","group","shuffled","copy","randomIndex","random","shuffle","Array","Number","activeStudents","users","alwaysShow","disabledMessage","showBadge","MusicOff","TaskDataChart","bucketSize","setBucketSize","setColor","hAxis","vAxis","minorGridlines","legend","colors","histogram","minValue","maxValue","chartType","Slider","step","marks","min","valueLabelDisplay","hex","TaskDataDashboard","getAverage","getPassFailRates","fail","getPercent","average","grades","A","B","C","D","F","passFail","GradeStatCard","grade","faHundredPoints","faGauge","faPercent","faThumbsUp","faThumbsDown","TaskDataTable","taskID","getTaskScores","Assessment","Tasks","components","Action","courseDetails","courseHeader","coursePeriod","courseTitle","CourseList","importCount","importFailed","badge","left","top","FabBadge","anchorOrigin","horizontal","vertical","badgeContent","overlap","removalAlert","border","dark","h6","songInfo","statusButton","studentInfo","borderTopColor","borderTopStyle","borderTopWidth","paddingTop","studentName","isLoaded","setCount","setStatus","setStatusDescription","statusNote","setStatusNote","skippedSongs","setSkippedSongs","totalCount","setTotalCount","getSongCount","songCount","startsWith","getNextSong","nextSong","handleStatusButtonClick","handleStatusDescriptionChange","handleSubmitApproval","handleSubmitRemoval","refundAmount","removedBy","DroppedStudentAlert","PrimeAlert","PlaylistAddCheck","ButtonGroup","encodeURIComponent","getSpotifySearchUrl","ThumbUp","ThumbDown","RadioGroup","Radio","forTeacher","totalCost","totalItems","detailPanel","onRowClick","togglePanel","buttonGroup","inputBox","setPurchase","skippedPurchases","setSkippedPurchases","getPurchaseCount","handleSaveButtonClick","prevPurchaseId","nextPurchase","getNextPurchase","updatedPurchase","findIndex","prod","handleAddPurchaseItemClick","handleDeletePurchaseItemClick","handleUpdatePurchaseItemQuantity","onPageChange","onReset","Teachers","resetFlags","teachers","register","permissionsJukebox","teacherDetails","teacherHeader","teacherUsername","teacherName","TeacherStats","addItems","countStudentSetting","setting","faCircleHalfStroke","faUserLargeSlash","faPersonBooth","TeacherCourses","countSetting","StatListItem","ListItem","ListItemAvatar","List","TeacherSettings","SettingValue","valueString","JSON","stringify","TeacherList","fontFamily","h5","BigButton","getGradient","angle","banner","bannerLogo","bannerText","PrimeBanner","section","PrimeConfirmation","celebrate","numberOfPieces","recycle","any","listItem","discounts","faMusic","songRemoval","faVolumeXmark","faMoneyBillTrendUp","faTag","sameDay","faTruck","faTicket","faMoneyBillWave","color1","color2","list","padLeft","padRight","paddingRight","h2","h1","h3","h4","sectionImage","songRemovalAd","right","songsAd","storeAd","PrimeSignup","isMobile","black","primeDarkModeAd","wrap","primeSongsAd","primeSongRemovalAd","primeJukeboxAd","primeStoreAd","primeSameDayAd","trigger","confirm","setConfirm","testPrime","setTestPrime","handleConfirm","showBanner","showButton","overflowX","overflowY","header","img","maxHeight","borderColor","borderStyle","borderWidth","ImagePreview","TextFieldLimit","inputProps","maxLength","helperText","addIcon","updateIcon","updateIconBrightHover","brightHover","CHAR_LIMITS","ProductsToolbar","OutlinedInput","endAdornment","InputAdornment","actionIcon","opacity","whiteSpace","tile","tileBar","ProductsGallery","onAddToCart","onInventoryChange","isSmall","isMedium","cols","handleInventoryChangeClick","setSearch","GridList","maxQuantityReached","GridListTile","GridListTileBar","placement","subtitle","Remove","DeleteProductDialog","handleAddToCartClick","Badge","e","icons","Edit","EditAttributes","editTooltip","cartIcon","getTotalItemsInCart","hasInsufficientFunds","getPoints","numericFormatter","toString","orderDetails","order_details","onUpdateInventory","gridOn","setGridOn","isTeacher","inStockProducts","outOfStockProducts","handleInventoryChange","TableChart","GridOn","PrimeDialog","StudentAccount","StudentPasses","StudentSongs","TeacherAccounts","TeacherSongs","ManagePurchases","ManageTeachers","Loading","page","profile","float","About","auth","login","submitForm","aboutLink","loginLink","textDecoration","progress","AboutLink","LoginLink","startIcon","ArrowBackIos","Notification","enqueueSnackbar","useSnackbar","notifier","onSnackbarClose","notistackRef","createRef","onSnackbarDismiss","current","closeSnackbar","maxSnack","date","NewDate","NewItem","StudentWhatsNewContent","TeacherWhatsNewContent","subtype","defaultState","sortByDescription","appName","token","viewChangeCounter","appLoaded","sortByLastName","sortByPeriod","courseCopy","failed","updatedUser","sortByCost","productIndex","isAdded","updatedQuantity","allowed","withoutDeleted","getTotals","sumTransactions","addScores","added","curUser","curUserId","usersAdded","unionBy","addTransaction","addBulkTransaction","deleteTransaction","deleted","updateTransaction","updated","addedTransactions","addedTranasctions","purchaseTransaction","addedBulkTransactions","deletedTransactions","addedScores","results","updatedTransactions","songsByUser","songsByCourse","promiseMiddleware","next","v","currentView","getState","skipTracking","res","currentState","promise","localStorageMiddleware","localStorage","setItem","setToken","history","createBrowserHistory","myRouterMiddleware","routerMiddleware","createStore","combineReducers","connectRouter","composeWithDevTools","applyMiddleware","onRedirect","getItem","ThemeProvider","CssBaseline","fallback","Login","Home","ReactDOM","App","getElementById","superagent","superagentPromise","_superagent","global","API_ROOT","encode","responseBody","tokenPlugin","req","set","requests","del","use","get","post","put","taskId","_token"],"mappings":"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QAExB,IvIGwB,euIFtB,MAAO,GACT,QACE,OAAO9B,ICZPqtC,GAAe,CACnB3lC,OAAQ,KACRoI,cAAe,IAGF,cAAmC,IAAlC9P,EAAiC,uDAAzBqtC,GAAcn4B,EAAW,uCAC/C,OAAQA,EAAOpX,MACb,IxIgGsC,6BwI/FpC,OAAO,2BACFkC,GADL,IAEE0H,OAAQwN,EAAOU,MAAQV,EAAO/P,QAAQuC,OAAS,KAC/CoI,cAAeoF,EAAOU,MAClB5V,EAAM8P,cACNoF,EAAO/P,QAAQ2K,gBAEvB,IxIyFwC,+BwIxFtC,OAAOu9B,GACT,QACE,OAAOrtC,ICyBE,cAAyB,IAAxBA,EAAuB,uDAAf,GAAIkV,EAAW,uCACrC,OAAQA,EAAOpX,MACb,IzImFqB,YyIlFrB,IzInBsB,ayIoBtB,IzIkGoB,WyIjGpB,IzIsFoB,WyIrFpB,IzI8CuB,cyI7CvB,IzIhBuB,cyIiBvB,IzITuB,cyIUvB,IzIHwB,eyIIxB,IzI2B2B,kByI1B3B,IzI2B4B,mByI1B5B,IzIL2B,kByIM3B,IzIyEwB,eyIxExB,IzI1ByB,gByI2BzB,IzIwFuB,cyIvFvB,IzI4EuB,cyI3EvB,IzIoC0B,iByInC1B,IzIoD2B,kByInD3B,IzI5C+B,sByI6C/B,IzI5B0B,iByI6B1B,IzIIuB,cyIHvB,IzItB0B,iByIuB1B,IzIgB8B,qByIf9B,IzIFyB,gByIGzB,IzIhC2B,kByIiC3B,IzIfkC,yByIgBlC,IzIjCwB,eyIkCxB,IzIR2B,kByIS3B,IzIlCkC,yByImClC,IzIhE0B,iByIiE1B,IzI4CmC,0ByI3CnC,IzI8C2B,kByI7C3B,IzI8CiC,wByI7CjC,IzIvD+B,sByIwD/B,IzIvDuC,8ByIwDvC,IzIqDwB,eyIpDxB,IzIhDyB,gByIiDzB,IzIoEuB,cyInEvB,IzI6DuB,cyI5DvB,IzIc0B,iByIb1B,IzI5C0B,iByI6C1B,IzIZuB,cyIavB,IzIvC0B,iByIwC1B,IzIJ8B,qByIK9B,IzIaiC,wByIZ/B,OAAO,2BACFkC,GADL,IAEEuF,SAAU2P,EAAOU,MACb,KACAV,EAAO3P,WAEf,IzI/E2B,kByIgFzB,OAAO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","file":"static/js/main.5a0c294e.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/chemistry-background.11d1d297.jpg\";","module.exports = __webpack_public_path__ + \"static/media/chem-cash-logo.2b9148cb.png\";","module.exports = __webpack_public_path__ + \"static/media/chem-cash-prime-logo.7fb758e0.png\";","module.exports = __webpack_public_path__ + \"static/media/songs-background.cfcd4ce6.jpg\";","module.exports = __webpack_public_path__ + \"static/media/prime-darkmode.0ce7dead.png\";","module.exports = __webpack_public_path__ + \"static/media/prime-jukebox.0f6cd04e.png\";","module.exports = __webpack_public_path__ + \"static/media/prime-sameday.94aba20d.png\";","module.exports = __webpack_public_path__ + \"static/media/prime-songremoval.fa731870.png\";","module.exports = __webpack_public_path__ + \"static/media/prime-songs.ba7cf87f.png\";","module.exports = __webpack_public_path__ + \"static/media/prime-purchases.6c3bc375.png\";","module.exports = __webpack_public_path__ + \"static/media/doc-may-profile.f927335d.jpg\";","import { createMuiTheme } from '@material-ui/core/styles'\nimport { amber, lightGreen } from '@material-ui/core/colors'\n\nconst ChemCashTheme = {\n  breakpoints: {\n    values: {\n      md: 768,\n      lg: 1024,\n    },\n  },\n  palette: {\n    primary: lightGreen,\n    secondary: amber,\n  },\n  overrides: {\n    MuiDialogActions: {\n      root: {\n        padding: '16px 24px',\n      },\n    },\n    MuiTableCell: {\n      root: {\n        '& > div': {\n          justifyContent: 'flex-end', // fix for button alignment on <MaterialTable/> when deleting a row\n        },\n      },\n    },\n  },\n}\n\nexport const ChemCashDarkTheme = createMuiTheme({\n  ...ChemCashTheme,\n  palette: { ...ChemCashTheme.palette, type: 'dark' },\n})\n\nexport const ChemCashLightTheme = createMuiTheme({\n  ...ChemCashTheme,\n  palette: { ...ChemCashTheme.palette, type: 'light' },\n})\n","export const APP_LOAD = 'APP_LOAD'\nexport const REDIRECT = 'REDIRECT'\n\nexport const ASYNC_START = 'ASYNC_START'\nexport const ASYNC_END = 'ASYNC_END'\n\nexport const LOGIN = 'LOGIN'\nexport const LOGIN_PAGE_UNLOADED = 'LOGIN_PAGE_UNLOADED'\nexport const LOGOUT = 'LOGOUT'\n\nexport const REGISTER = 'REGISTER'\nexport const REGISTER_PAGE_UNLOADED = 'REGISTER_PAGE_UNLOADED'\n\nexport const SETTINGS_PAGE_UNLOADED = 'SETTINGS_PAGE_UNLOADED'\nexport const SETTINGS_SAVED = 'SETTINGS_SAVED'\n\nexport const NAV_LOADED = 'NAV_LOADED'\nexport const NAV_UNLOADED = 'NAV_UNLOADED'\nexport const NAV_TAB_CHANGE = 'NAV_TAB_CHANGE'\n\nexport const ALERT_CLOSED = 'ALERT_CLOSED'\nexport const SNACKBAR_CLOSED = 'SNACKBAR_CLOSED'\n\nexport const DELETE_SONG_REQUEST = 'DELETE_SONG_REQUEST'\nexport const SONG_REQUESTS_DIALOG_UNLOADED = 'SONG_REQUESTS_DIALOG_UNLOADED'\nexport const SONGS_PAGE_UNLOADED = 'SONGS_PAGE_UNLOADED'\nexport const STUDENT_SONGS_PAGE_LOADED = 'STUDENT_SONGS_PAGE_LOADED'\nexport const SUBMIT_SONG_REQUEST = 'SUBMIT_SONG_REQUEST'\nexport const SUBMIT_SONG_REMOVAL_REQUEST = 'SUBMIT_SONG_REMOVAL_REQUEST'\nexport const TEACHER_SONGS_PAGE_LOADED = 'TEACHER_SONGS_PAGE_LOADED'\nexport const UPDATE_SONG_REQUEST = 'UPDATE_SONG_REQUEST'\n\nexport const ADD_COURSE = 'ADD_COURSE'\nexport const COURSE_DIALOG_UNLOADED = 'COURSE_DIALOG_UNLOADED'\nexport const COURSES_PAGE_LOADED = 'COURSES_PAGE_LOADED'\nexport const COURSES_PAGE_UNLOADED = 'COURSES_PAGE_UNLOADED'\nexport const DELETE_COURSE = 'DELETE_COURSE'\nexport const UPDATE_COURSE = 'UPDATE_COURSE'\n\nexport const ADD_STUDENT = 'ADD_STUDENT'\nexport const DELETE_STUDENT = 'DELETE_STUDENT'\nexport const IMPORT_STUDENTS = 'IMPORT_STUDENTS'\nexport const MOVE_STUDENT = 'MOVE_STUDENT'\nexport const RESET_STUDENT_PASSWORD = 'RESET_STUDENT_PASSWORD'\nexport const STUDENT_DIALOG_UNLOADED = 'STUDENT_DIALOG_UNLOADED'\nexport const UPDATE_STUDENT = 'UPDATE_STUDENT'\n\nexport const ADD_TEACHER = 'ADD_TEACHER'\nexport const DELETE_TEACHER = 'DELETE_TEACHER'\nexport const MANAGE_TEACHERS_PAGE_LOADED = 'MANAGE_TEACHERS_PAGE_LOADED'\nexport const MANAGE_TEACHERS_PAGE_UNLOADED = 'MANAGE_TEACHERS_PAGE_UNLOADED'\nexport const TEACHER_DIALOG_UNLOADED = 'TEACHER_DIALOG_UNLOADED'\nexport const UPDATE_TEACHER = 'UPDATE_TEACHER'\n\nexport const ADD_TO_QUEUE = 'ADD_TO_QUEUE'\nexport const CREATE_PLAYLIST = 'CREATE_PLAYLIST'\nexport const GET_PLAYLIST = 'GET_PLAYLIST'\nexport const GET_QUEUE = 'GET_QUEUE'\nexport const JUKEBOX_DIALOG_UNLOADED = 'JUKEBOX_DIALOG_UNLOADED'\nexport const JUKEBOX_REQUEST_SUBMIT = 'JUKEBOX_REQUEST_SUBMIT'\nexport const JUKEBOX_STUDENT_DIALOG_LOADED = 'JUKEBOX_STUDENT_DIALOG_LOADED'\nexport const JUKEBOX_TEACHER_DIALOG_LOADED = 'JUKEBOX_TEACHER_DIALOG_LOADED'\nexport const SPOTIFY_REMOVE_AUTH = 'SPOTIFY_REMOVE_AUTH'\nexport const SPOTIFY_LINKER_LOADED = 'SPOTIFY_LINKER_LOADED'\nexport const SPOTIFY_LINKER_UNLOADED = 'SPOTIFY_LINKER_UNLOADED'\nexport const PLAYLIST_MANAGER_DIALOG_LOADED = 'PLAYLIST_MANAGER_DIALOG_LOADED'\nexport const PLAYLIST_MANAGER_DIALOG_UNLOADED =\n  'PLAYLIST_MANAGER_DIALOG_UNLOADED'\nexport const REMOVE_PLAYLIST = 'REMOVE_PLAYLIST'\n\nexport const IMPORT_SCORES = 'IMPORT_SCORES'\nexport const IMPORT_SCORES_DIALOG_UNLOADED = 'IMPORT_SCORES_DIALOG_UNLOADED'\n\nexport const DELETE_TASK = 'DELETE_TASK'\nexport const LOAD_TASK_SCORES = 'LOAD_TASK_SCORES'\nexport const TASKS_DIALOG_LOADED = 'TASKS_DIALOG_LOADED'\nexport const TASKS_DIALOG_UNLOADED = 'TASKS_DIALOG_UNLOADED'\nexport const UNLOAD_TASK_SCORES = 'UNLOAD_TASK_SCORES'\nexport const UPDATE_TASK = 'UPDATE_TASK'\n\nexport const ACCOUNT_BALANCE_LOADED = 'ACCOUNT_BALANCE_LOADED'\nexport const ACCOUNT_BALANCE_UNLOADED = 'ACCOUNT_BALANCE_UNLOADED'\nexport const ACCOUNT_VIEW_LOADED = 'ACCOUNT_VIEW_LOADED'\nexport const ACCOUNT_VIEW_UNLOADED = 'ACCOUNT_VIEW_UNLOADED'\nexport const ACCOUNTS_PAGE_UNLOADED = 'ACCOUNTS_PAGE_UNLOADED'\nexport const ADD_TRANSACTION = 'ADD_TRANSACTION'\nexport const ADD_TRANSACTIONS = 'ADD_TRANSACTIONS'\nexport const DELETE_TRANSACTION = 'DELETE_TRANSACTION'\nexport const UPDATE_TRANSACTION = 'UPDATE_TRANSACTION'\nexport const TRANSACTION_DIALOG_UNLOADED = 'TRANSACTION_DIALOG_UNLOADED'\nexport const TRANSACTIONS_DIALOG_UNLOADED = 'TRANSACTIONS_DIALOG_UNLOADED'\n\nexport const STUDENT_SEARCH_LOADED = 'STUDENT_SEARCH_LOADED'\nexport const STUDENT_SEARCH_UNLOADED = 'STUDENT_SEARCH_UNLOADED'\n\nexport const PRODUCTS_PAGE_LOADED = 'PRODUCTS_PAGE_LOADED'\nexport const PRODUCTS_PAGE_UNLOADED = 'PRODUCTS_PAGE_UNLOADED'\nexport const PRODUCT_DIALOG_UNLOADED = 'PRODUCT_DIALOG_UNLOADED'\nexport const PRODUCT_SELECTOR_LOADED = 'PRODUCT_SELECTOR_LOADED'\nexport const PRODUCT_SELECTOR_UNLOADED = 'PRODUCT_SELECTOR_UNLOADED'\nexport const ADD_PRODUCT = 'ADD_PRODUCT'\nexport const DELETE_PRODUCT = 'DELETE_PRODUCT'\nexport const UPDATE_PRODUCT = 'UPDATE_PRODUCT'\n\nexport const WHATS_NEW_DIALOG_LOADED = 'WHATS_NEW_DIALOG_LOADED'\nexport const WHATS_NEW_DIALOG_UNLOADED = 'WHATS_NEW_DIALOG_UNLOADED'\nexport const WHATS_NEW_FLAGS_RESET = 'WHATS_NEW_FLAGS_RESET'\n\nexport const NOTIFICATION_DIALOG_LOADED = 'NOTIFICATION_DIALOG_LOADED'\nexport const NOTIFICATION_DIALOG_UNLOADED = 'NOTIFICATION_DIALOG_UNLOADED'\n\nexport const ECONOMY_DIALOG_LOADED = 'ECONOMY_DIALOG_LOADED'\nexport const ECONOMY_DIALOG_UNLOADED = 'ECONOMY_DIALOG_UNLOADED'\n\nexport const ADD_PURCHASE = 'ADD_PURCHASE'\nexport const ADD_PURCHASE_DIALOG_UNLOADED = 'ADD_PURCHASE_DIALOG_UNLOADED'\nexport const ADD_TO_CART = 'ADD_TO_CART'\nexport const DELETE_CART_PRODUCT = 'DELETE_CART_PRODUCT'\nexport const DELETE_PURCHASE = 'DELETE_PURCHASE'\nexport const PRIME_PURCHASE_DIALOG_UNLOADED = 'PRIME_PURCHASE_DIALOG_UNLOADED'\nexport const PURCHASES_DIALOG_UNLOADED = 'PURCHASES_DIALOG_UNLOADED'\nexport const STUDENT_CART_LOADED = 'STUDENT_CART_LOADED'\nexport const STUDENT_CART_UNLOADED = 'STUDENT_CART_UNLOADED'\nexport const STUDENT_DELETE_PURCHASE = 'STUDENT_DELETE_PURCHASE'\nexport const STUDENT_PURCHASES_LOADED = 'STUDENT_PURCHASES_LOADED'\nexport const STUDENT_PURCHASES_UNLOADED = 'STUDENT_PURCHASES_UNLOADED'\nexport const SUBMIT_PURCHASE = 'SUBMIT_PURCHASE'\nexport const SUBMIT_PRIME_PURCHASE = 'SUBMIT_PRIME_PURCHASE'\nexport const TEACHER_PURCHASES_LOADED = 'TEACHER_PURCHASES_LOADED'\nexport const TEACHER_PURCHASES_UNLOADED = 'TEACHER_PURCHASES_UNLOADED'\nexport const UPDATE_CART_PRODUCT_QUANTITY = 'UPDATE_CART_PRODUCT_QUANTITY'\nexport const UPDATE_PURCHASE = 'UPDATE_PURCHASE'\n\nexport const ADD_BONUS = 'ADD_BONUS'\nexport const DELETE_BONUS = 'DELETE_BONUS'\nexport const LOAD_BONUSES = 'LOAD_BONUSES'\nexport const UNLOAD_BONUSES = 'UNLOAD_BONUSES'\nexport const UPDATE_BONUS = 'UPDATE_BONUS'\n\nexport const ADD_PASS = 'ADD_PASS'\nexport const DELETE_PASS = 'DELETE_PASS'\nexport const GET_LAST_PASS = 'GET_LAST_PASS'\nexport const LOAD_STUDENT_PASSES = 'LOAD_STUDENT_PASSES'\nexport const LOAD_TEACHER_PASSES = 'LOAD_TEACHER_PASSES'\nexport const LOAD_TEACHER_PASS_DIALOG = 'LOAD_TEACHER_PASS_DIALOG'\nexport const STUDENT_PASSES_LOADED = 'STUDENT_PASSES_LOADED'\nexport const STUDENT_PASSES_UNLOADED = 'STUDENT_PASSES_UNLOADED'\nexport const UNLOAD_MANAGE_PASSES = 'UNLOAD_MANAGE_PASSES'\nexport const UPDATE_PASS = 'UPDATE_PASS'\n\nexport const ADD_FINE = 'ADD_FINE'\nexport const DELETE_FINE = 'DELETE_FINE'\nexport const LOAD_FINES = 'LOAD_FINES'\nexport const UNLOAD_FINES = 'UNLOAD_FINES'\nexport const UPDATE_FINE = 'UPDATE_FINE'\n// export const X = 'X'\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Button } from '@material-ui/core'\n\nimport { LOGOUT } from '../constants/actionTypes'\n\nconst mapDispatchToProps = (dispatch) => ({\n  onLogout: () => dispatch({ type: LOGOUT }),\n})\n\nconst LogoutButton = ({ onLogout }) => (\n  <Button color='inherit' onClick={onLogout}>\n    Logout\n  </Button>\n)\n\nexport default connect(() => ({}), mapDispatchToProps)(LogoutButton)\n","import React from 'react'\nimport {\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n} from '@material-ui/core'\n\nimport LogoutButton from '../LogoutButton'\n\nconst AccountSuspendedDialog = ({ user }) => {\n  return (\n    <Dialog open={user.dropped}>\n      <DialogTitle>Account Suspended</DialogTitle>\n      <DialogContent>\n        Your account has been suspended. Please speak with your teacher if you\n        have any questions regarding your account suspension.\n      </DialogContent>\n      <DialogActions>\n        <LogoutButton />\n      </DialogActions>\n    </Dialog>\n  )\n}\n\nexport default AccountSuspendedDialog\n","import React from 'react'\nimport logo from '../images/chem-cash-logo.png'\nimport logoPrime from '../images/chem-cash-prime-logo.png'\n\nconst Logo = ({ prime, ...props }) => {\n  return (\n    <img\n      alt={`Chem Cash ${prime && 'Prime '}Logo`}\n      src={prime ? logoPrime : logo}\n      {...props}\n    />\n  )\n}\n\nexport default Logo\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport {\n  AppBar,\n  Container,\n  Toolbar,\n  Typography,\n  makeStyles,\n} from '@material-ui/core'\n\nimport Logo from '../components/Logo'\nimport LogoutButton from './LogoutButton'\n\nconst useStyles = makeStyles((theme) => ({\n  logo: {\n    height: '65px',\n    marginBottom: theme.spacing(2),\n    marginTop: theme.spacing(2),\n  },\n  title: {\n    color: 'white',\n    flexGrow: 1,\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  currentUser: state.common.currentUser,\n  navTabValue: state.nav.navTabValue,\n  prime: state.common.settings.prime,\n})\n\nconst Header = ({ currentUser, navTabValue, prime }) => {\n  const classes = useStyles()\n  const title = navTabValue\n\n  if (currentUser) {\n    return (\n      <AppBar position='static'>\n        <Container>\n          <Toolbar>\n            <Logo\n              className={classes.logo}\n              prime={prime.enabled && currentUser.hasPrime}\n            />\n            <Typography variant='h5' align='center' className={classes.title}>\n              {title && title.charAt(0).toUpperCase() + title.slice(1)}\n            </Typography>\n            <LogoutButton />\n          </Toolbar>\n        </Container>\n      </AppBar>\n    )\n  } else {\n    return null\n  }\n}\n\nexport default connect(mapStateToProps, () => ({}))(Header)\n","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  BottomNavigation,\n  BottomNavigationAction,\n  makeStyles,\n} from '@material-ui/core'\nimport {\n  LocalAtm,\n  People,\n  QueueMusic,\n  Settings,\n  Store,\n  SupervisorAccount,\n  Wc,\n} from '@material-ui/icons'\n\nimport {\n  NAV_TAB_CHANGE,\n  NAV_LOADED,\n  NAV_UNLOADED,\n} from '../constants/actionTypes'\n\nconst useStyles = makeStyles({\n  nav: {\n    position: 'fixed',\n    bottom: 0,\n    width: '100%',\n    zIndex: '1000',\n  },\n})\n\nconst mapStateToProps = (state) => ({\n  currentUser: state.common.currentUser,\n  navTabValue: state.nav.navTabValue,\n  path: state.router.location.pathname,\n  settings: state.common.settings,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onLoad: (tabValue, redirectTo) =>\n    dispatch({ type: NAV_LOADED, value: tabValue, redirectTo: redirectTo }),\n  onTabChange: (tabValue, redirectTo) =>\n    dispatch({ type: NAV_TAB_CHANGE, value: tabValue, redirectTo: redirectTo }),\n  onUnload: () => dispatch({ type: NAV_UNLOADED }),\n})\n\nconst Navigation = (props) => {\n  const classes = useStyles()\n  const userRole = props.currentUser.role\n  const enabled = {\n    beta: props.settings.enableBetaFeatures,\n    passes: props.settings.hallpass.enabled,\n    products: props.settings.productsEnabled,\n    songs: props.settings.songRequestEnabled,\n    store: props.settings.storeEnabled,\n  }\n\n  const handleTabChange = (tabValue) => {\n    props.onTabChange(tabValue, `/${userRole}/${tabValue}`)\n  }\n\n  useEffect(() => {\n    const tabFromPath = props.path.split('/')[2]\n    const tabValue =\n      tabFromPath ??\n      (userRole === 'student'\n        ? 'account'\n        : userRole === 'admin'\n        ? 'teachers'\n        : 'accounts')\n    const redirectTo = `/${userRole}/${tabValue}`\n    if (enabled.store && tabValue === 'products') {\n      props.onLoad('store', redirectTo)\n    } else {\n      props.onLoad(tabValue, redirectTo)\n    }\n\n    return () => {\n      props.onUnload()\n    }\n  }, [])\n\n  if (userRole === 'student') {\n    return (\n      <BottomNavigation\n        className={classes.nav}\n        onChange={(event, newValue) => handleTabChange(newValue)}\n        showLabels\n        value={props.navTabValue}\n      >\n        <BottomNavigationAction\n          label='Account'\n          icon={<LocalAtm />}\n          value='account'\n        />\n        {enabled.passes && (\n          <BottomNavigationAction label='Passes' icon={<Wc />} value='passes' />\n        )}\n        {enabled.songs && (\n          <BottomNavigationAction\n            label='Songs'\n            icon={<QueueMusic />}\n            value='songs'\n          />\n        )}\n        {(enabled.products || enabled.store) && (\n          <BottomNavigationAction\n            label={enabled.store ? 'Store' : 'Products'}\n            icon={<Store />}\n            value='store'\n          />\n        )}\n        <BottomNavigationAction\n          label='Settings'\n          icon={<Settings />}\n          value='settings'\n        />\n      </BottomNavigation>\n    )\n  }\n\n  if (userRole === 'admin') {\n    return (\n      <BottomNavigation\n        className={classes.nav}\n        onChange={(event, newValue) => handleTabChange(newValue)}\n        showLabels\n        value={props.navTabValue}\n      >\n        <BottomNavigationAction\n          label='Teachers'\n          icon={<SupervisorAccount />}\n          value='teachers'\n        />\n        <BottomNavigationAction\n          label='Settings'\n          icon={<Settings />}\n          value='settings'\n        />\n      </BottomNavigation>\n    )\n  }\n\n  return (\n    <BottomNavigation\n      className={classes.nav}\n      onChange={(event, newValue) => handleTabChange(newValue)}\n      showLabels\n      value={props.navTabValue}\n    >\n      <BottomNavigationAction\n        label='Accounts'\n        icon={<LocalAtm />}\n        value='accounts'\n      />\n      {enabled.songs && (\n        <BottomNavigationAction\n          label='Songs'\n          icon={<QueueMusic />}\n          value='songs'\n        />\n      )}\n      {(enabled.products || enabled.store) && (\n        <BottomNavigationAction\n          label={enabled.store ? 'Store' : 'Products'}\n          icon={<Store />}\n          value={enabled.store ? 'store' : 'products'}\n        />\n      )}\n      <BottomNavigationAction\n        label='Courses'\n        icon={<People />}\n        value='courses'\n      />\n      <BottomNavigationAction\n        label='Settings'\n        icon={<Settings />}\n        value='settings'\n      />\n    </BottomNavigation>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Navigation)\n","import React from 'react'\nimport { makeStyles } from '@material-ui/core/styles'\n\nconst useStyles = makeStyles((theme) => ({\n  wrapper: {\n    marginTop: theme.spacing(4),\n    marginBottom: theme.spacing(11),\n  },\n}))\n\nconst PageWrapper = (props) => {\n  const classes = useStyles()\n\n  return <div className={classes.wrapper}>{props.children}</div>\n}\n\nexport default PageWrapper\n","import React from 'react'\nimport { Container, Typography } from '@material-ui/core'\nimport PageWrapper from './PageWrapper'\n\nconst NotFound = (props) => {\n  return (\n    <PageWrapper>\n      <Container>\n        <Typography variant='h2'>Error 404: Page Not Found</Typography>\n      </Container>\n    </PageWrapper>\n  )\n}\n\nexport default NotFound\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Route, Redirect } from 'react-router-dom'\n\nconst mapStateToProps = (state) => ({ currentUser: state.common.currentUser })\n\nconst ProtectedRoute = (props) => {\n  if (!props.currentUser) {\n    return <Redirect to='/' />\n  }\n\n  return <Route exact path={props.path} component={props.component} />\n}\n\nexport default connect(mapStateToProps, () => ({}))(ProtectedRoute)\n","import React, { useEffect } from 'react'\nimport { Field, useField, useFormikContext } from 'formik'\nimport { Switch } from 'formik-material-ui'\n\n// @todo: this component throws an unresolved warning: 'Warning: property type=checkbox is missing from field productsEnabled, this can caused unexpected behaviour'\nconst ControlledSwitch = ({ controlledBy, label, name, prime }) => {\n  const { values, setFieldValue } = useFormikContext()\n  const [field] = useField({ name, type: 'checkbox' })\n\n  const getDisabled = () => {\n    if (prime !== undefined) {\n      return prime && values[controlledBy]\n    }\n    return values[controlledBy]\n  }\n\n  useEffect(() => {\n    if (values[controlledBy] === true) {\n      setFieldValue(name, true)\n    }\n  }, [values[controlledBy], setFieldValue, name, prime])\n\n  return (\n    <Field\n      component={Switch}\n      disabled={getDisabled()}\n      label={label}\n      {...field}\n    />\n  )\n}\n\nexport default ControlledSwitch\n","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Form, Field } from 'formik'\nimport { TextField } from 'formik-material-ui'\nimport * as Yup from 'yup'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  Grid,\n  Link,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\n\nimport agent from '../../agent'\n\nimport { JUKEBOX_REQUEST_SUBMIT } from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  button: {\n    marginBottom: theme.spacing(2),\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  darkMode: state.common.currentUser.darkMode,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onSubmit: (values) =>\n    dispatch({\n      type: JUKEBOX_REQUEST_SUBMIT,\n      payload: agent.Settings.jukebox(values),\n      snackbar: { message: 'Jukebox access requested', variant: 'success' },\n    }),\n})\n\nconst JukeboxRequestDialog = ({ darkMode, onSubmit, requested }) => {\n  const [open, setOpen] = useState(false)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n  const classes = useStyles()\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  return (\n    <>\n      <Button\n        className={classes.button}\n        color='secondary'\n        disabled={requested}\n        onClick={handleClickOpen}\n        variant={darkMode ? 'outlined' : 'contained'}\n      >\n        {requested ? 'Request has been sent' : 'Request Access to Jukebox'}\n      </Button>\n\n      <Dialog\n        fullScreen={fullScreen}\n        maxWidth='md'\n        onClose={handleClose}\n        open={open}\n      >\n        <Formik\n          initialValues={{\n            name: '',\n            email: '',\n          }}\n          validationSchema={Yup.object({\n            name: Yup.string().required('Required'),\n            email: Yup.string().email().required('Required'),\n          })}\n          onSubmit={async (values) => {\n            onSubmit(values)\n          }}\n        >\n          {(formik) => (\n            <Form>\n              <DialogTitle>Jukebox Request</DialogTitle>\n              {requested ? (\n                <DialogContent>\n                  <DialogContentText>\n                    Your request to enable Jukebox for your account has been\n                    received. Please allow 24 to 48 hours for a response to\n                    inform you that Jukebox has been enabled for your account.\n                  </DialogContentText>\n                </DialogContent>\n              ) : (\n                <DialogContent>\n                  <DialogContentText>\n                    Jukebox makes use of the{' '}\n                    <Link\n                      href='https://developer.spotify.com/documentation/web-api'\n                      target='_blank'\n                    >\n                      Spotify Web API\n                    </Link>{' '}\n                    to connect your Spotify account to Chem Cash. Currently the\n                    Chem Cash app is in{' '}\n                    <Link\n                      href='https://developer.spotify.com/documentation/web-api/concepts/quota-modes'\n                      target='_blank'\n                    >\n                      Development mode\n                    </Link>{' '}\n                    on Spotify, which requires users of the app to be added to\n                    an allowlist. Please provide your name and email address\n                    used on your Spotify account below. Once you have been added\n                    to the allowlist, you will be able to return here to setup\n                    Jukebox.\n                  </DialogContentText>\n                  <Grid container spacing={2}>\n                    <Grid item xs={12} md={6}>\n                      <Field\n                        autoFocus\n                        component={TextField}\n                        label='Spotify Name'\n                        name='name'\n                        type='text'\n                        variant='outlined'\n                        fullWidth\n                      />\n                    </Grid>\n                    <Grid item xs={12} md={6}>\n                      <Field\n                        component={TextField}\n                        label='Spotify Email'\n                        name='email'\n                        type='email'\n                        variant='outlined'\n                        fullWidth\n                      />\n                    </Grid>\n                  </Grid>\n                </DialogContent>\n              )}\n              <DialogActions>\n                {!requested && (\n                  <Button\n                    color='primary'\n                    disabled={!(formik.isValid && formik.dirty)}\n                    type='submit'\n                    variant='contained'\n                  >\n                    Submit\n                  </Button>\n                )}\n                <Button onClick={handleClose} variant='contained'>\n                  {requested ? 'Close' : 'Cancel'}\n                </Button>\n              </DialogActions>\n            </Form>\n          )}\n        </Formik>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(JukeboxRequestDialog)\n","import React from 'react'\nimport { makeStyles } from '@material-ui/core/styles'\nimport Alert from '@material-ui/lab/Alert'\n\nconst useStyles = makeStyles((theme) => ({\n  alert: {\n    'width': '100%',\n    '&:not(:last-of-type)': {\n      marginBottom: theme.spacing(1),\n    },\n  },\n  alertList: {\n    marginBottom: theme.spacing(2),\n  },\n}))\n\nconst ListErrors = ({ errors }) => {\n  const classes = useStyles()\n\n  if (errors) {\n    return (\n      <div className={classes.alertList}>\n        {Object.keys(errors).map((key) => {\n          const readableKey = key\n            .replace(/([a-z0-9])([A-Z])/g, '$1 $2')\n            .toLowerCase()\n          return (\n            <Alert className={classes.alert} severity='error' key={key}>\n              {readableKey} {errors[key]}\n            </Alert>\n          )\n        })}\n      </div>\n    )\n  }\n\n  return null\n}\n\nexport default ListErrors\n","import React from 'react'\nimport { Grid, Typography, makeStyles } from '@material-ui/core'\n\nconst useStyles = makeStyles((theme) => ({\n  beta: {\n    color: theme.palette.secondary.main,\n    fontSize: 'small',\n    fontStyle: 'italic',\n  },\n  headerLeft: {\n    alignItems: 'center',\n    display: 'flex',\n  },\n  headerRight: {\n    alignItems: 'center',\n    display: 'flex',\n    justifyContent: 'flex-end',\n  },\n  pageHeader: {\n    'marginBottom': theme.spacing(4),\n    '& button:not(:last-of-type)': { marginRight: theme.spacing(2) },\n  },\n}))\n\nconst PageHeader = ({ beta, children, title }) => {\n  const classes = useStyles()\n\n  return (\n    <Grid container spacing={2} className={classes.pageHeader}>\n      <Grid item xs={12} md={6} className={classes.headerLeft}>\n        <Typography variant='h4'>\n          {title}\n          {beta && <sup className={classes.beta}>beta</sup>}\n        </Typography>\n      </Grid>\n      <Grid item xs={12} md={6} className={classes.headerRight}>\n        {children}\n      </Grid>\n    </Grid>\n  )\n}\n\nexport default PageHeader\n","import React, { useEffect, useState } from 'react'\nimport { TextField } from '@material-ui/core'\n\nconst InputBox = ({ label, name, onChange, value }) => {\n  const [inputValue, setInputValue] = useState(value)\n\n  const handleInputChange = (ev) => {\n    const value = ev.target.value\n    onChange(value)\n    setInputValue(value)\n  }\n\n  useEffect(() => {\n    setInputValue(value)\n  }, [value])\n\n  return (\n    <TextField\n      fullWidth\n      label={label}\n      name={name}\n      onChange={handleInputChange}\n      value={inputValue}\n    />\n  )\n}\n\nexport default InputBox\n","import React, { useState } from 'react'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  IconButton,\n  Tooltip,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport { PlaylistAdd } from '@material-ui/icons'\nimport InputBox from '../InputBox'\n\nconst CreatePlaylistDialog = ({ course, disabled, onSubmit }) => {\n  const [open, setOpen] = useState(false)\n  const [playlistName, setPlaylistName] = useState(\n    `Period ${course.period} (${course.name})`\n  )\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('sm'))\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmit = () => {\n    onSubmit(playlistName)\n    setOpen(false)\n  }\n\n  return (\n    <>\n      <Tooltip title='Create playlist' arrow>\n        <span>\n          <IconButton disabled={disabled} onClick={handleClickOpen}>\n            <PlaylistAdd />\n          </IconButton>\n        </span>\n      </Tooltip>\n      <Dialog\n        fullScreen={fullScreen}\n        fullWidth\n        maxWidth='md'\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onFocus={(ev) => ev.stopPropagation()}\n        open={open}\n      >\n        <DialogTitle>Create Playlist</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            This will create a playlist on your Spotify account linked to Period{' '}\n            {course.period} on Chem Cash. You can enter a playlist name below or\n            use the default name. Be sure to add songs for this period to this\n            playlist when processing song requests.\n          </DialogContentText>\n          <InputBox\n            label='Playlist Name'\n            name='playlistName'\n            onChange={setPlaylistName}\n            value={playlistName}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button autoFocus color='primary' onClick={handleSubmit}>\n            Create\n          </Button>\n          <Button color='primary' onClick={handleClose}>\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  )\n}\n\nexport default CreatePlaylistDialog\n","import React from 'react'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n} from '@material-ui/core'\n\nconst ConfirmationDialog = ({\n  isOpen,\n  label,\n  message,\n  onCancel,\n  onSubmit,\n  title,\n}) => {\n  return (\n    <Dialog fullWidth maxWidth='md' open={isOpen}>\n      <DialogTitle>{title}</DialogTitle>\n      <DialogContent>\n        <DialogContentText>{message}</DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button autoFocus color='primary' onClick={onSubmit}>\n          {label}\n        </Button>\n        <Button color='primary' onClick={onCancel}>\n          Cancel\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n\nexport default ConfirmationDialog\n","import React, { useState } from 'react'\nimport { IconButton, Tooltip } from '@material-ui/core'\nimport { HighlightOff } from '@material-ui/icons'\n\nimport ConfirmationDialog from '../ConfirmationDialog'\n\nconst RemovePlaylistConfirmationDialog = ({ disabled, onSubmit }) => {\n  const [open, setOpen] = useState(false)\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmit = () => {\n    onSubmit()\n    setOpen(false)\n  }\n\n  const message =\n    'Do you want to remove this playlist from Chem Cash? ' +\n    'This will not delete the playlist from your Spotify account and ' +\n    'you will not be able to relink this playlist to Chem Cash.'\n\n  return (\n    <>\n      <Tooltip title='Remove playlist' arrow>\n        <span>\n          <IconButton disabled={disabled} onClick={handleClickOpen}>\n            <HighlightOff />\n          </IconButton>\n        </span>\n      </Tooltip>\n      <ConfirmationDialog\n        isOpen={open}\n        label='Remove'\n        message={message}\n        onCancel={handleClose}\n        onSubmit={handleSubmit}\n        title='Remove playlist?'\n      />\n    </>\n  )\n}\n\nexport default RemovePlaylistConfirmationDialog\n","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Avatar,\n  Card,\n  CardContent,\n  CardMedia,\n  IconButton,\n  Tooltip,\n  Typography,\n  makeStyles,\n} from '@material-ui/core'\nimport { Visibility } from '@material-ui/icons'\n\nimport CreatePlaylistDialog from './CreatePlaylistDialog'\nimport RemovePlaylistConfirmationDialog from './RemovePlaylistConfirmationDialog'\n\nimport { GET_PLAYLIST } from '../../constants/actionTypes'\n\nimport agent from '../../agent'\n\nconst useStyles = makeStyles((theme) => ({\n  avatar: {\n    backgroundColor: theme.palette.secondary.main,\n    marginRight: theme.spacing(2),\n  },\n  card: {\n    backgroundColor: theme.palette.background.default,\n    display: 'flex',\n    minHeight: 140,\n  },\n  content: {\n    display: 'flex',\n  },\n  controls: {\n    alignItems: 'center',\n    display: 'flex',\n    paddingBottom: theme.spacing(1),\n    paddingLeft: theme.spacing(1),\n  },\n  details: {\n    display: 'flex',\n    flexDirection: 'column',\n    flexGrow: 1,\n    justifyContent: 'space-between',\n  },\n  image: {\n    height: 140,\n    width: 140,\n  },\n  info: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  title: {\n    alignItems: 'center',\n    display: 'flex',\n  },\n  tracks: {\n    color: theme.palette.primary.main,\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  playlists: state.jukebox.playlists,\n  tokens: state.common.settings.spotifyTokens,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onLoad: (id, tokens) =>\n    dispatch({\n      type: GET_PLAYLIST,\n      payload: agent.Spotify.getPlaylist(id, tokens),\n    }),\n})\n\nconst CoursePlaylistCard = ({\n  course,\n  onAddPlaylistClick,\n  onLoad,\n  onRemovePlaylistClick,\n  playlists,\n  tokens,\n}) => {\n  const classes = useStyles()\n\n  const playlist = playlists.find((pl) => pl.id === course.playlistId)\n\n  useEffect(() => {\n    if (course.playlistId) {\n      onLoad(course.playlistId, tokens)\n    }\n  }, [])\n\n  return (\n    <Card className={classes.card}>\n      <div className={classes.details}>\n        <CardContent className={classes.content}>\n          <Avatar className={classes.avatar}>{course.period}</Avatar>\n          <div className={classes.info}>\n            <Typography variant='h5' component='h2' className={classes.title}>\n              {course.name}\n            </Typography>\n            {playlist ? (\n              <Typography className={classes.tracks} variant='subtitle2'>\n                {playlist.tracks.total} track\n                {playlist.tracks.total === 1 ? '' : 's'}\n              </Typography>\n            ) : (\n              <Typography className={classes.tracks} variant='subtitle2'>\n                No playlist created\n              </Typography>\n            )}\n          </div>\n        </CardContent>\n        <div className={classes.controls}>\n          <CreatePlaylistDialog\n            course={course}\n            disabled={!!course.playlistId}\n            onSubmit={(name) => onAddPlaylistClick(name, course)}\n          />\n          {playlist && (\n            <Tooltip title='View playlist' arrow>\n              <span>\n                <IconButton\n                  disabled={!course.playlistId}\n                  href={playlist.external_urls.spotify}\n                  target='_blank'\n                >\n                  <Visibility />\n                </IconButton>\n              </span>\n            </Tooltip>\n          )}\n          <RemovePlaylistConfirmationDialog\n            disabled={!course.playlistId}\n            onSubmit={() => onRemovePlaylistClick(course)}\n          />\n        </div>\n      </div>\n      {playlist && playlist.images && playlist.images.length > 0 && (\n        <CardMedia\n          className={classes.image}\n          image={playlist.images[0].url}\n          title={`Period ${course.period} playlist cover art`}\n        />\n      )}\n    </Card>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CoursePlaylistCard)\n","import React from 'react'\nimport {\n  AppBar,\n  IconButton,\n  Toolbar,\n  Typography,\n  makeStyles,\n} from '@material-ui/core'\nimport { Close } from '@material-ui/icons'\n\nconst useStyles = makeStyles((theme) => ({\n  title: {\n    color: theme.palette.common.white,\n    margin: '0 auto',\n  },\n}))\n\nconst DialogAppBar = ({ onClose, title }) => {\n  const classes = useStyles()\n\n  return (\n    <AppBar position='relative'>\n      <Toolbar>\n        <IconButton edge='start' onClick={onClose}>\n          <Close />\n        </IconButton>\n        <Typography variant='h5' className={classes.title}>\n          {title}\n        </Typography>\n      </Toolbar>\n    </AppBar>\n  )\n}\n\nexport default DialogAppBar\n","import React from 'react'\nimport { Slide } from '@material-ui/core'\n\nexport const SlideUpTransition = React.forwardRef((props, ref) => {\n  return <Slide direction='up' ref={ref} {...props} />\n})\n","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Button, Container, Dialog, Grid, Typography } from '@material-ui/core'\n\nimport CoursePlaylistCard from './CoursePlaylistCard'\nimport DialogAppBar from '../DialogAppBar'\nimport ListErrors from '../ListErrors'\nimport PageHeader from '../PageHeader'\nimport PageWrapper from '../PageWrapper'\nimport { SlideUpTransition } from '../../transitions'\n\nimport agent from '../../agent'\n\nimport {\n  CREATE_PLAYLIST,\n  PLAYLIST_MANAGER_DIALOG_LOADED,\n  PLAYLIST_MANAGER_DIALOG_UNLOADED,\n  REMOVE_PLAYLIST,\n} from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  courses: state.courses.courses,\n  errors: state.jukebox.errors,\n  tokens: state.common.settings.spotifyTokens,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onCreatePlaylist: (name, slug, tokens) =>\n    dispatch({\n      type: CREATE_PLAYLIST,\n      payload: agent.Spotify.createPlaylist(name, slug, tokens),\n      snackbar: { message: 'Playlist created', variant: 'success' },\n    }),\n  onLoad: () =>\n    dispatch({\n      type: PLAYLIST_MANAGER_DIALOG_LOADED,\n      payload: agent.Courses.getAll(),\n    }),\n  onRemovePlaylist: (slug) =>\n    dispatch({\n      type: REMOVE_PLAYLIST,\n      payload: agent.Spotify.removePlaylist(slug),\n      snackbar: { message: 'Playlist removed', variant: 'success' },\n    }),\n  onUnload: () => dispatch({ type: PLAYLIST_MANAGER_DIALOG_UNLOADED }),\n})\n\nconst PlaylistManagerDialog = ({\n  courses,\n  errors,\n  onCreatePlaylist,\n  onLoad,\n  onRemovePlaylist,\n  onUnload,\n  tokens,\n}) => {\n  const [open, setOpen] = useState(false)\n\n  const handleClickOpen = () => {\n    setOpen(true)\n    onLoad()\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n    onUnload()\n  }\n\n  const handleAddPlaylistClick = (name, course) => {\n    onCreatePlaylist(name, course.slug, tokens)\n  }\n\n  const handleRemovePlaylistClick = (course) => {\n    onRemovePlaylist(course.slug)\n  }\n\n  return (\n    <>\n      <Button color='secondary' onClick={handleClickOpen} variant='outlined'>\n        Manage Playlists\n      </Button>\n\n      <Dialog\n        fullScreen\n        open={open}\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onFocus={(ev) => ev.stopPropagation()}\n        TransitionComponent={SlideUpTransition}\n      >\n        <DialogAppBar onClose={handleClose} title='Jukebox' />\n        <PageWrapper>\n          <Container>\n            <PageHeader title='Manage Playlists' />\n            {errors && (\n              <Grid item xs={12}>\n                <ListErrors errors={errors} />\n              </Grid>\n            )}\n            {!errors && (\n              <Grid container spacing={2}>\n                {courses.length > 0 ? (\n                  courses.map((course) => (\n                    <Grid item xs={12} md={6} key={course.slug}>\n                      <CoursePlaylistCard\n                        course={course}\n                        onAddPlaylistClick={handleAddPlaylistClick}\n                        onRemovePlaylistClick={handleRemovePlaylistClick}\n                      />\n                    </Grid>\n                  ))\n                ) : (\n                  <Grid item xs={12}>\n                    <Typography variant='body1'>You have no courses</Typography>\n                  </Grid>\n                )}\n              </Grid>\n            )}\n          </Container>\n        </PageWrapper>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(PlaylistManagerDialog)\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Tooltip, makeStyles } from '@material-ui/core'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faFlask } from '@fortawesome/free-solid-svg-icons'\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    color: theme.palette.primary.main,\n    margin: `0 ${theme.spacing(1)}px`,\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  primeEnabled: state.common.settings.prime.enabled,\n})\n\nconst PrimeBadge = ({ permanent, primeEnabled, size, title }) => {\n  const classes = useStyles()\n\n  return (\n    <>\n      {(primeEnabled || permanent) && (\n        <Tooltip\n          title={title || 'Chem Cash Prime'}\n          aria-label={title || 'Chem Cash Prime'}\n          arrow\n        >\n          <span>\n            <FontAwesomeIcon\n              className={classes.root}\n              icon={faFlask}\n              size={size || 'lg'}\n            />\n          </span>\n        </Tooltip>\n      )}\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, () => ({}))(PrimeBadge)\n","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { Fab, Grid, Link, Typography, makeStyles } from '@material-ui/core'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faSpotify } from '@fortawesome/free-brands-svg-icons'\n\nimport agent from '../../agent'\n\nimport {\n  SPOTIFY_LINKER_LOADED,\n  SPOTIFY_LINKER_UNLOADED,\n  SPOTIFY_REMOVE_AUTH,\n} from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  icon: {\n    marginRight: theme.spacing(1),\n  },\n  link: {\n    cursor: 'pointer',\n  },\n  root: {\n    textAlign: 'center',\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  spotifyAuthUrl: state.settings.spotifyAuthUrl,\n  spotifyTokens: state.common.settings.spotifyTokens,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onLoad: () =>\n    dispatch({\n      type: SPOTIFY_LINKER_LOADED,\n      payload: agent.Spotify.getAuthUrl(),\n    }),\n  onRemoveAuth: () =>\n    dispatch({\n      type: SPOTIFY_REMOVE_AUTH,\n      payload: agent.Spotify.removeAuth(),\n    }),\n  onUnload: () => dispatch({ type: SPOTIFY_LINKER_UNLOADED }),\n})\n\nconst SpotifyLinker = ({\n  onRemoveAuth,\n  onLoad,\n  onUnload,\n  spotifyAuthUrl,\n  spotifyTokens,\n}) => {\n  const classes = useStyles()\n\n  useEffect(() => {\n    onLoad()\n\n    return () => {\n      onUnload()\n    }\n  }, [])\n\n  return (\n    <Grid container spacing={2} className={classes.root}>\n      <Grid item xs={12}>\n        <Fab\n          color='primary'\n          disabled={spotifyTokens && true}\n          href={spotifyAuthUrl}\n          variant='extended'\n        >\n          <FontAwesomeIcon\n            className={classes.icon}\n            icon={faSpotify}\n            size='2x'\n          />\n          {spotifyTokens ? 'Connected to Spotify' : 'Connect to Spotify'}\n        </Fab>\n      </Grid>\n      <Grid item xs={12}>\n        {spotifyTokens ? (\n          <Typography>\n            <Link className={classes.link} onClick={onRemoveAuth}>\n              disconnect\n            </Link>\n          </Typography>\n        ) : (\n          <Typography variant='subtitle2'>\n            Jukebox requires a connection\n            <br />\n            to your Spotify account\n          </Typography>\n        )}\n      </Grid>\n    </Grid>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SpotifyLinker)\n","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Form, Field } from 'formik'\nimport { Select, Switch, TextField } from 'formik-material-ui'\nimport * as Yup from 'yup'\nimport {\n  Button,\n  Fab,\n  FormControl,\n  Grid,\n  InputLabel,\n  MenuItem,\n  Paper,\n  Typography,\n  makeStyles,\n} from '@material-ui/core'\nimport { Lock, SaveAlt } from '@material-ui/icons'\n\nimport ControlledSwitch from './ControlledSwitch'\nimport JukeboxRequestDialog from './Jukebox/JukeboxRequestDialog'\nimport ListErrors from './ListErrors'\nimport PageHeader from './PageHeader'\nimport PlaylistManagerDialog from './Jukebox/PlaylistManagerDialog'\nimport PrimeBadge from './Prime/PrimeBadge'\nimport SpotifyLinker from './Teacher/SpotifyLinker'\nimport agent from '../agent'\n\nimport {\n  SETTINGS_PAGE_UNLOADED,\n  SETTINGS_SAVED,\n  WHATS_NEW_DIALOG_LOADED,\n} from '../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  gridCenter: {\n    alignItems: 'center',\n    display: 'flex',\n    justifyContent: 'center',\n  },\n  icon: {\n    marginRight: theme.spacing(1),\n  },\n  info: {\n    backgroundColor: theme.palette.background.default,\n    borderLeft: `4px solid ${theme.palette.info.main}`,\n    fontStyle: 'italic',\n    padding: theme.spacing(1),\n  },\n  lock: {\n    alignItems: 'center',\n    color: theme.palette.secondary.main,\n    display: 'inline-flex',\n    fontStyle: 'italic',\n    marginLeft: theme.spacing(1),\n  },\n  paper: {\n    padding: theme.spacing(2),\n    marginBottom: theme.spacing(4),\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.settings,\n  currentUser: state.common.currentUser,\n  settings: state.common.settings,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onSubmitForm: (settings) =>\n    dispatch({\n      type: SETTINGS_SAVED,\n      payload: Promise.all([\n        agent.Auth.save(settings),\n        agent.Settings.update(settings),\n      ]),\n      snackbar: { message: 'Settings saved', variant: 'success' },\n    }),\n  onUnload: () => dispatch({ type: SETTINGS_PAGE_UNLOADED }),\n  onWhatsNewClick: () =>\n    dispatch({\n      type: WHATS_NEW_DIALOG_LOADED,\n      payload: agent.Auth.save({ viewedChanges: false }),\n    }),\n})\n\nconst Settings = ({\n  currentUser,\n  errors,\n  inProgress,\n  onSubmitForm,\n  onUnload,\n  onWhatsNewClick,\n  settings,\n}) => {\n  const classes = useStyles()\n\n  useEffect(() => {\n    return () => {\n      onUnload()\n    }\n  }, [])\n\n  const primeMessage =\n    'Chem Cash Prime allows students to pay a one-time fee for access to special ' +\n    'features and discounts...just another way for students to spend their points!'\n\n  const SwitchLabel = ({ status, value }) =>\n    `${value} ${status ? 'enabled' : 'disabled'}`\n\n  return (\n    <Formik\n      enableReinitialize={true}\n      initialValues={{\n        allowPurchasesWithInsufficientFunds:\n          settings?.allowPurchasesWithInsufficientFunds || false,\n        darkMode: currentUser.darkMode || false,\n        defaultStudentPassword: settings?.defaultStudentPassword || '',\n        email: settings?.notifications?.email || '',\n        enableBetaFeatures: settings?.enableBetaFeatures || false,\n        finesEnabled: settings?.fines?.enabled || false,\n        firstName: currentUser.firstName,\n        hallpassAllowPurchaseWithInsufficientFunds:\n          settings?.hallpass?.allowPurchaseWithInsufficientFunds || false,\n        hallpassAllowStudentCreation:\n          settings?.hallpass?.allowStudentCreation || false,\n        hallpassDefaultDuration: settings?.hallpass?.defaultDuration || 5,\n        hallpassEnabled: settings?.hallpass?.enabled || false,\n        hallpassLimit: settings?.hallpass?.limit || 0,\n        hallpassPurchaseAmount: settings?.hallpass?.purchaseAmount || 0,\n        jukeboxEnabled: settings?.jukebox?.enabled || false,\n        jukeboxPurchaseAmount: settings?.jukebox?.purchaseAmount || 0,\n        jukeboxPurchaseLimit: settings?.jukebox?.purchaseLimit || 0,\n        jukeboxRequested: settings?.jukebox?.requested || false,\n        lastName: currentUser.lastName,\n        notificationsEnabledForSongs:\n          settings?.notifications?.enabled?.forSongs || false,\n        notificationsEnabledForStore:\n          settings?.notifications?.enabled?.forStore || false,\n        password: '',\n        primeDarkModeEnabled: settings?.prime?.darkModeEnabled || false,\n        primeEnabled: settings?.prime?.enabled || false,\n        primeHallpassDiscount: settings?.prime?.hallpassDiscount || 0,\n        primeJukeboxEnabled: settings?.prime?.jukeboxEnabled || false,\n        primePurchaseAmount: settings?.prime?.purchaseAmount || 0,\n        primeSameDayDeliveryEnabled:\n          settings?.prime?.sameDayDeliveryEnabled || false,\n        primeSongRemovalEnabled: settings?.prime?.songRemovalEnabled || false,\n        primeSongRequestPurchaseDiscount:\n          settings?.prime?.songRequestPurchaseDiscount || 0,\n        primeStorePurchaseDiscount: settings?.prime?.storePurchaseDiscount || 0,\n        productsEnabled: settings?.productsEnabled || false,\n        roomNumber: settings?.roomNumber || 0,\n        schoolDistrict: settings.schoolDistrict || 'none',\n        score100: settings?.scoreConverter?.[100] || 1200,\n        score90: settings?.scoreConverter?.[90] || 1000,\n        score80: settings?.scoreConverter?.[80] || 800,\n        score70: settings?.scoreConverter?.[70] || 600,\n        score60: settings?.scoreConverter?.[60] || 0,\n        score50: settings?.scoreConverter?.[50] || 0,\n        songRemovalPurchaseAmount: settings?.songRemovalPurchaseAmount || 0,\n        songRemovalRequestEnabled: settings?.songRemovalRequestEnabled || false,\n        songRemovalRefundAmount: settings?.songRemovalRefundAmount || 0,\n        songRequestEnabled: settings?.songRequestEnabled || false,\n        songRequestPurchaseAmount: settings?.songRequestPurchaseAmount || 0,\n        storeEnabled: settings?.storeEnabled || false,\n        taxRate: settings?.taxRate || 0,\n        title: currentUser?.title || '',\n      }}\n      validationSchema={Yup.object({\n        allowPurchasesWithInsufficientFunds: Yup.boolean(),\n        darkMode: Yup.boolean(),\n        defaultStudentPassword: Yup.string(),\n        email: Yup.string().email(),\n        enableBetaFeatures: Yup.boolean(),\n        finesEnabled: Yup.boolean(),\n        firstName: Yup.string(),\n        hallpassAllowPurchaseWithInsufficientFunds: Yup.boolean(),\n        hallpassAllowStudentCreation: Yup.boolean(),\n        hallpassDefaultDuration: Yup.number().typeError('Numbers only'),\n        hallpassEnabled: Yup.boolean(),\n        hallpassLimit: Yup.number().typeError('Numbers only'),\n        hallpassPurchaseAmount: Yup.number().typeError('Numbers only'),\n        jukeboxEnabled: Yup.boolean(),\n        jukeboxPurchaseAmount: Yup.number().typeError('Numbers only'),\n        jukeboxPurchaseLimit: Yup.number().typeError('Numbers only'),\n        jukeboxRequested: Yup.boolean(),\n        lastName: Yup.string(),\n        notificationsForSongs: Yup.boolean(),\n        notificationsForStore: Yup.boolean(),\n        password: Yup.string(),\n        primeDarkModeEnabled: Yup.boolean(),\n        primeEnabled: Yup.boolean(),\n        primeHallpassDiscount: Yup.number().typeError('Numbers only'),\n        primeJukeboxEnabled: Yup.boolean(),\n        primePurchaseAmount: Yup.number().typeError('Numbers only'),\n        primeSameDayDeliveryEnabled: Yup.boolean(),\n        primeSongRemovalEnabled: Yup.boolean(),\n        primeSongRequestPurchaseDiscount:\n          Yup.number().typeError('Numbers only'),\n        primeStorePurchaseDiscount: Yup.number().typeError('Numbers only'),\n        productsEnabled: Yup.boolean(),\n        roomNumber: Yup.number(),\n        schoolDistrict: Yup.string(),\n        score100: Yup.number().typeError('Numbers only'),\n        score90: Yup.number().typeError('Numbers only'),\n        score80: Yup.number().typeError('Numbers only'),\n        score70: Yup.number().typeError('Numbers only'),\n        score60: Yup.number().typeError('Numbers only'),\n        score50: Yup.number().typeError('Numbers only'),\n        songRemovalPurchaseAmount: Yup.number().typeError('Numbers only'),\n        songRemovalRequestEnabled: Yup.boolean(),\n        songRemovalRefundAmount: Yup.number().typeError('Numbers only'),\n        songRequestEnabled: Yup.boolean(),\n        songRequestPurchaseAmount: Yup.number().typeError('Numbers only'),\n        storeEnabled: Yup.boolean(),\n        taxRate: Yup.number().typeError('Numbers only'),\n        title: Yup.string(),\n      })}\n      onSubmit={async (values, form) => {\n        const userSettings = { ...values }\n\n        if (!userSettings.password) delete userSettings.password\n\n        if (currentUser.role !== 'student') {\n          userSettings.fines = {\n            enabled: values.finesEnabled,\n          }\n\n          userSettings.hallpass = {\n            allowPurchaseWithInsufficientFunds:\n              values.hallpassAllowPurchaseWithInsufficientFunds,\n            allowStudentCreation: values.hallpassAllowStudentCreation,\n            defaultDuration: values.hallpassDefaultDuration,\n            enabled: values.hallpassEnabled,\n            limit: values.hallpassLimit,\n            purchaseAmount: values.hallpassPurchaseAmount,\n          }\n\n          userSettings.jukebox = {\n            enabled: values.jukeboxEnabled,\n            purchaseAmount: values.jukeboxPurchaseAmount,\n            purchaseLimit: values.jukeboxPurchaseLimit,\n            requested: values.jukeboxRequested,\n          }\n\n          userSettings.notifications = {\n            email: values.email,\n            enabled: {\n              forSongs: values.notificationsEnabledForSongs,\n              forStore: values.notificationsEnabledForStore,\n            },\n          }\n\n          userSettings.prime = {\n            darkModeEnabled: values.primeDarkModeEnabled,\n            enabled: values.primeEnabled,\n            hallpassDiscount: values.primeHallpassDiscount,\n            jukeboxEnabled: values.primeJukeboxEnabled,\n            purchaseAmount: values.primePurchaseAmount,\n            sameDayDeliveryEnabled: values.primeSameDayDeliveryEnabled,\n            songRemovalEnabled: values.primeSongRemovalEnabled,\n            songRequestPurchaseDiscount:\n              values.primeSongRequestPurchaseDiscount,\n            storePurchaseDiscount: values.primeStorePurchaseDiscount,\n          }\n\n          userSettings.scoreConverter = {\n            100: values.score100,\n            90: values.score90,\n            80: values.score80,\n            70: values.score70,\n            60: values.score60,\n            50: values.score50,\n            40: 0,\n            30: 0,\n            20: 0,\n            10: 0,\n            0: 0,\n          }\n        }\n\n        onSubmitForm(userSettings)\n\n        form.resetForm({\n          values: { ...userSettings, password: '' },\n        })\n      }}\n    >\n      {(formik) => (\n        <Form>\n          <PageHeader title='Manage Account'>\n            <Button onClick={onWhatsNewClick} size='small'>\n              See What's New\n            </Button>\n            <Fab\n              color='primary'\n              disabled={inProgress}\n              type='sumbit'\n              variant='extended'\n            >\n              <SaveAlt className={classes.icon} />\n              {inProgress ? 'Saving...' : 'Save settings'}\n            </Fab>\n          </PageHeader>\n          <ListErrors errors={errors} />\n          {currentUser.role !== 'student' && (\n            <Paper className={classes.paper}>\n              <Grid container spacing={2} style={{ alignItems: 'center' }}>\n                <Grid item xs={12}>\n                  <Typography variant='h5' gutterBottom>\n                    Account Details\n                  </Typography>\n                </Grid>\n                <Grid item xs={12} md={6}>\n                  <Field\n                    component={TextField}\n                    label='First Name'\n                    name='firstName'\n                    type='text'\n                    variant='outlined'\n                    fullWidth\n                  />\n                </Grid>\n                <Grid item xs={12} md={6}>\n                  <Field\n                    component={TextField}\n                    label='Last Name'\n                    name='lastName'\n                    type='text'\n                    variant='outlined'\n                    fullWidth\n                  />\n                </Grid>\n                {currentUser.role === 'teacher' && (\n                  <>\n                    <Grid item xs={12} md={4}>\n                      <FormControl fullWidth>\n                        <InputLabel>Title</InputLabel>\n                        <Field component={Select} label='Title' name='title'>\n                          <MenuItem value='Dr.'>Dr.</MenuItem>\n                          <MenuItem value='Miss.'>Miss.</MenuItem>\n                          <MenuItem value='Mr.'>Mr.</MenuItem>\n                          <MenuItem value='Mrs.'>Mrs.</MenuItem>\n                          <MenuItem value='Ms.'>Ms.</MenuItem>\n                        </Field>\n                      </FormControl>\n                    </Grid>\n                    <Grid item xs={12} md={4}>\n                      <FormControl fullWidth>\n                        <InputLabel>School District</InputLabel>\n                        <Field\n                          component={Select}\n                          label='School District'\n                          name='schoolDistrict'\n                        >\n                          <MenuItem value='none'></MenuItem>\n                          <MenuItem value='ccsd'>CCSD</MenuItem>\n                          <MenuItem value='evergreen'>Evergreen</MenuItem>\n                          <MenuItem value='lehi'>Lehi</MenuItem>\n                        </Field>\n                      </FormControl>\n                    </Grid>\n                    <Grid item xs={12} md={4}>\n                      <label>\n                        <Field\n                          component={Switch}\n                          name='enableBetaFeatures'\n                          type='checkbox'\n                        />\n                        <SwitchLabel\n                          status={formik.values.enableBetaFeatures}\n                          value='Beta features'\n                        />\n                      </label>\n                    </Grid>\n                  </>\n                )}\n              </Grid>\n            </Paper>\n          )}\n          <Paper className={classes.paper}>\n            <Grid container spacing={2}>\n              <Grid item xs={12}>\n                <Typography variant='h5' gutterBottom>\n                  Account Security\n                </Typography>\n              </Grid>\n              <Grid item xs={12} md={6}>\n                <Field\n                  component={TextField}\n                  label='New Password'\n                  name='password'\n                  type='password'\n                  variant='outlined'\n                  fullWidth\n                />\n              </Grid>\n            </Grid>\n          </Paper>\n          {currentUser.role === 'student' && (\n            <Paper className={classes.paper}>\n              <Grid container spacing={2}>\n                <Grid item xs={12}>\n                  <Typography variant='h5' gutterBottom>\n                    Appearance\n                  </Typography>\n                  <Grid item xs={12}>\n                    <label style={{ alignItems: 'center', display: 'flex' }}>\n                      <Field\n                        component={Switch}\n                        disabled={\n                          settings.prime.enabled &&\n                          settings.prime.darkModeEnabled &&\n                          !currentUser.hasPrime\n                        }\n                        name='darkMode'\n                        type='checkbox'\n                      />\n                      <SwitchLabel\n                        status={formik.values.darkMode}\n                        value='Dark mode'\n                      />\n                      {settings.prime.enabled &&\n                        settings.prime.darkModeEnabled &&\n                        !currentUser.hasPrime && (\n                          <span className={classes.lock}>\n                            <Lock /> (available with Chem Cash Prime)\n                          </span>\n                        )}\n                    </label>\n                  </Grid>\n                </Grid>\n              </Grid>\n            </Paper>\n          )}\n          {currentUser.role !== 'student' && (\n            <Paper className={classes.paper}>\n              <Grid container spacing={2}>\n                <Grid item xs={12}>\n                  <Typography variant='h5' gutterBottom>\n                    Appearance\n                  </Typography>\n                  <Grid item xs={12}>\n                    <label>\n                      <Field\n                        component={Switch}\n                        name='darkMode'\n                        type='checkbox'\n                      />\n                      <SwitchLabel\n                        status={formik.values.darkMode}\n                        value='Dark mode'\n                      />\n                    </label>\n                  </Grid>\n                </Grid>\n              </Grid>\n            </Paper>\n          )}\n          {currentUser.role === 'teacher' && (\n            <Paper className={classes.paper}>\n              <Grid container spacing={2}>\n                <Grid item xs={12}>\n                  <Typography variant='h5' gutterBottom>\n                    Fines\n                  </Typography>\n                  <Grid item xs={12}>\n                    <label>\n                      <Field\n                        component={Switch}\n                        name='finesEnabled'\n                        type='checkbox'\n                      />\n                      <SwitchLabel\n                        status={formik.values.finesEnabled}\n                        value='Fines'\n                      />\n                    </label>\n                  </Grid>\n                </Grid>\n              </Grid>\n            </Paper>\n          )}\n          {currentUser.role === 'teacher' && (\n            <Paper className={classes.paper}>\n              <Grid container spacing={2}>\n                <Grid item xs={12}>\n                  <Typography variant='h5' gutterBottom>\n                    Hallpasses\n                  </Typography>\n                </Grid>\n                <Grid item xs={12} md={4}>\n                  <label>\n                    <Field\n                      component={Switch}\n                      name='hallpassEnabled'\n                      type='checkbox'\n                    />\n                    <SwitchLabel\n                      status={formik.values.hallpassEnabled}\n                      value='Hallpasses'\n                    />\n                  </label>\n                </Grid>\n                {formik.values.hallpassEnabled && (\n                  <>\n                    <Grid item xs={12} md={3}>\n                      <Field\n                        component={TextField}\n                        label='Hallpass Purchase Amount'\n                        name='hallpassPurchaseAmount'\n                        type='number'\n                        variant='outlined'\n                        fullWidth\n                      />\n                    </Grid>\n                    <Grid item xs={12} md={3}>\n                      <Field\n                        component={TextField}\n                        label='Default Hallpass Duration (min)'\n                        name='hallpassDefaultDuration'\n                        type='number'\n                        variant='outlined'\n                        fullWidth\n                      />\n                    </Grid>\n                    <Grid item xs={12} md={2}>\n                      <Field\n                        component={TextField}\n                        label='Hallpass Limit'\n                        name='hallpassLimit'\n                        type='number'\n                        variant='outlined'\n                        fullWidth\n                      />\n                    </Grid>\n                    <Grid item xs={12} md={4}>\n                      <label>\n                        <Field\n                          component={Switch}\n                          name='hallpassAllowStudentCreation'\n                          type='checkbox'\n                        />\n                        <SwitchLabel\n                          status={formik.values.hallpassAllowStudentCreation}\n                          value='Student-generated hallpasses'\n                        />\n                      </label>\n                    </Grid>\n                    <Grid item xs={12} md={6}>\n                      <label>\n                        <Field\n                          component={Switch}\n                          name='hallpassAllowPurchaseWithInsufficientFunds'\n                          type='checkbox'\n                        />\n                        <SwitchLabel\n                          status={\n                            formik.values\n                              .hallpassAllowPurchaseWithInsufficientFunds\n                          }\n                          value='Purchase with insufficient funds'\n                        />\n                      </label>\n                    </Grid>\n                    <Grid item xs={12} md={2}>\n                      <Field\n                        component={TextField}\n                        label='Classroom Number'\n                        name='roomNumber'\n                        type='number'\n                        variant='outlined'\n                        fullWidth\n                      />\n                    </Grid>\n                  </>\n                )}\n              </Grid>\n            </Paper>\n          )}\n          {currentUser.role === 'teacher' &&\n            formik.values.enableBetaFeatures && (\n              <Paper className={classes.paper}>\n                <Grid container spacing={2}>\n                  <Grid item xs={12}>\n                    <Typography variant='h5' gutterBottom>\n                      Jukebox\n                      <sup>\n                        <em>\n                          <small>beta</small>\n                        </em>\n                      </sup>\n                    </Typography>\n                  </Grid>\n                  {currentUser.permissions.jukebox ? (\n                    <>\n                      <Grid item xs={12} md={4}>\n                        <label>\n                          <Field\n                            component={Switch}\n                            name='jukeboxEnabled'\n                            type='checkbox'\n                          />\n                          <SwitchLabel\n                            status={formik.values.jukeboxEnabled}\n                            value='Jukebox'\n                          />\n                        </label>\n                      </Grid>\n                      {formik.values.jukeboxEnabled && (\n                        <>\n                          <Grid item xs={12} md={4}>\n                            <Field\n                              component={TextField}\n                              label='Jukebox Purchase Amount'\n                              name='jukeboxPurchaseAmount'\n                              type='number'\n                              variant='outlined'\n                              fullWidth\n                            />\n                          </Grid>\n                          {/* <Grid item xs={12} md={4}>\n                      <Field\n                      component={TextField}\n                      label='Jukebox Limit'\n                      name='jukeboxPurchaseLimit'\n                      type='number'\n                      variant='outlined'\n                      fullWidth\n                      />\n                    </Grid> */}\n                          {settings.spotifyTokens && (\n                            <Grid\n                              item\n                              xs={12}\n                              md={4}\n                              className={classes.gridCenter}\n                            >\n                              <PlaylistManagerDialog />\n                            </Grid>\n                          )}\n                          <Grid item xs={12} md={12}>\n                            <SpotifyLinker />\n                          </Grid>\n                        </>\n                      )}\n                    </>\n                  ) : (\n                    <>\n                      <Grid item xs={12}>\n                        <Typography variant='body1' gutterBottom>\n                          Jukebox connects your Spotify account to Chem Cash to\n                          allow students to see your queue and to add songs to\n                          the queue from their class playlist of approved songs.\n                          Jukebox is currently available to teachers by request\n                          only.\n                        </Typography>\n                      </Grid>\n                      <Grid item xs={12} className={classes.gridCenter}>\n                        <JukeboxRequestDialog\n                          requested={formik.values.jukeboxRequested}\n                        />\n                      </Grid>\n                    </>\n                  )}\n                </Grid>\n              </Paper>\n            )}\n          {currentUser.role === 'teacher' && (\n            <Paper className={classes.paper}>\n              <Grid container spacing={2}>\n                <Grid item xs={12}>\n                  <Typography variant='h5' gutterBottom>\n                    Notifications\n                  </Typography>\n                </Grid>\n                <Grid item xs={12} md={6}>\n                  <Field\n                    component={TextField}\n                    label='Email Address'\n                    name='email'\n                    type='email'\n                    variant='outlined'\n                    fullWidth\n                  />\n                </Grid>\n                <Grid item container xs={12}>\n                  <Grid item xs={12} md={4}>\n                    <label>\n                      <Field\n                        component={Switch}\n                        name='notificationsEnabledForSongs'\n                        type='checkbox'\n                      />\n                      <SwitchLabel\n                        status={formik.values.notificationsEnabledForSongs}\n                        value='Song purchase notifications'\n                      />\n                    </label>\n                  </Grid>\n                  <Grid item xs={12} md={4}>\n                    <label>\n                      <Field\n                        component={Switch}\n                        name='notificationsEnabledForStore'\n                        type='checkbox'\n                      />\n                      <SwitchLabel\n                        status={formik.values.notificationsEnabledForStore}\n                        value='Store purchase notifications'\n                      />\n                    </label>\n                  </Grid>\n                </Grid>\n              </Grid>\n            </Paper>\n          )}\n          {currentUser.role === 'teacher' && (\n            <Paper className={classes.paper}>\n              <Grid container spacing={2}>\n                <Grid item xs={12}>\n                  <Typography variant='h5' gutterBottom>\n                    Prime <PrimeBadge permanent={true} title={primeMessage} />\n                  </Typography>\n                </Grid>\n                <Grid item xs={12} md={6}>\n                  <label>\n                    <Field\n                      component={Switch}\n                      name='primeEnabled'\n                      type='checkbox'\n                    />\n                    <SwitchLabel\n                      status={formik.values.primeEnabled}\n                      value='Prime'\n                    />\n                  </label>\n                </Grid>\n                {formik.values.primeEnabled && (\n                  <>\n                    <Grid item xs={12} md={6}>\n                      <Field\n                        component={TextField}\n                        label='Prime Purchase Amount'\n                        name='primePurchaseAmount'\n                        type='number'\n                        variant='outlined'\n                        fullWidth\n                      />\n                    </Grid>\n                    <Grid item xs={12} md={6}>\n                      <label>\n                        <Field\n                          component={Switch}\n                          name='primeDarkModeEnabled'\n                          type='checkbox'\n                        />\n                        <SwitchLabel\n                          status={formik.values.primeDarkModeEnabled}\n                          value='Dark Mode for Prime only'\n                        />\n                      </label>\n                    </Grid>\n                    {formik.values.enableBetaFeatures && (\n                      <Grid item xs={12} md={6}>\n                        <label>\n                          <Field\n                            component={Switch}\n                            name='primeJukeboxEnabled'\n                            type='checkbox'\n                          />\n                          <SwitchLabel\n                            status={formik.values.primeJukeboxEnabled}\n                            value='Jukebox for Prime only'\n                          />\n                        </label>\n                      </Grid>\n                    )}\n                    <Grid item xs={12} md={6}>\n                      <label>\n                        <Field\n                          component={Switch}\n                          name='primeSameDayDeliveryEnabled'\n                          type='checkbox'\n                        />\n                        <SwitchLabel\n                          status={formik.values.primeSameDayDeliveryEnabled}\n                          value='Same-day delivery'\n                        />\n                      </label>\n                    </Grid>\n                    <Grid item xs={12} md={6}>\n                      <label>\n                        <Field\n                          component={Switch}\n                          name='primeSongRemovalEnabled'\n                          type='checkbox'\n                        />\n                        <SwitchLabel\n                          status={formik.values.primeSongRemovalEnabled}\n                          value='Song removal for Prime only'\n                        />\n                      </label>\n                    </Grid>\n                    <Grid item xs={12}>\n                      <Typography\n                        className={classes.info}\n                        display='block'\n                        variant='body2'\n                        gutterBottom\n                      >\n                        Values entered below will be treated as percentages. To\n                        disable any of these just set the value to zero.\n                      </Typography>\n                    </Grid>\n                    <Grid item xs={12} md={4}>\n                      <Field\n                        component={TextField}\n                        label='Hallpass Discount'\n                        name='primeHallpassDiscount'\n                        type='number'\n                        variant='outlined'\n                        fullWidth\n                      />\n                    </Grid>\n                    <Grid item xs={12} md={4}>\n                      <Field\n                        component={TextField}\n                        label='Song Request Discount'\n                        name='primeSongRequestPurchaseDiscount'\n                        type='number'\n                        variant='outlined'\n                        fullWidth\n                      />\n                    </Grid>\n                    <Grid item xs={12} md={4}>\n                      <Field\n                        component={TextField}\n                        label='Store Discount'\n                        name='primeStorePurchaseDiscount'\n                        type='number'\n                        variant='outlined'\n                        fullWidth\n                      />\n                    </Grid>\n                  </>\n                )}\n              </Grid>\n            </Paper>\n          )}\n          {currentUser.role === 'teacher' && (\n            <Paper className={classes.paper}>\n              <Grid container spacing={2}>\n                <Grid item xs={12}>\n                  <Typography variant='h5' gutterBottom>\n                    Products and Online Purchases\n                  </Typography>\n                </Grid>\n                <Grid item xs={12} md={formik.values.storeEnabled ? 6 : 12}>\n                  <label>\n                    <Field\n                      component={Switch}\n                      name='storeEnabled'\n                      type='checkbox'\n                    />\n                    <SwitchLabel\n                      status={formik.values.storeEnabled}\n                      value='Online purchases'\n                    />\n                  </label>\n                </Grid>\n                {formik.values.storeEnabled && (\n                  <Grid item xs={12} md={3}>\n                    <Field\n                      component={TextField}\n                      label='Tax Rate'\n                      name='taxRate'\n                      type='number'\n                      variant='outlined'\n                      fullWidth\n                    />\n                  </Grid>\n                )}\n                <Grid item xs={12} md={6}>\n                  <label>\n                    <ControlledSwitch\n                      controlledBy={'storeEnabled'}\n                      name='productsEnabled'\n                    />\n                    <SwitchLabel\n                      status={formik.values.productsEnabled}\n                      value='Products page'\n                    />\n                    {formik.values.storeEnabled && (\n                      <em> (required for online purchases)</em>\n                    )}\n                  </label>\n                </Grid>\n                {formik.values.storeEnabled && (\n                  <Grid item xs={12} md={6}>\n                    <label>\n                      <Field\n                        component={Switch}\n                        name='allowPurchasesWithInsufficientFunds'\n                        type='checkbox'\n                      />\n                      <SwitchLabel\n                        status={\n                          formik.values.allowPurchasesWithInsufficientFunds\n                        }\n                        value='Purchases with insufficient funds'\n                      />\n                    </label>\n                  </Grid>\n                )}\n              </Grid>\n            </Paper>\n          )}\n          {currentUser.role === 'teacher' && (\n            <Paper className={classes.paper}>\n              <Grid container spacing={2}>\n                <Grid item xs={12}>\n                  <Typography variant='h5' gutterBottom>\n                    Score Conversions\n                  </Typography>\n                </Grid>\n                <Grid item xs={12} md={2}>\n                  <Field\n                    component={TextField}\n                    label='100% and up'\n                    name='score100'\n                    type='number'\n                    variant='outlined'\n                    fullWidth\n                  />\n                </Grid>\n                <Grid item xs={12} md={2}>\n                  <Field\n                    component={TextField}\n                    label='90% and up'\n                    name='score90'\n                    type='number'\n                    variant='outlined'\n                    fullWidth\n                  />\n                </Grid>\n                <Grid item xs={12} md={2}>\n                  <Field\n                    component={TextField}\n                    label='80% and up'\n                    name='score80'\n                    type='number'\n                    variant='outlined'\n                    fullWidth\n                  />\n                </Grid>\n                <Grid item xs={12} md={2}>\n                  <Field\n                    component={TextField}\n                    label='70% and up'\n                    name='score70'\n                    type='number'\n                    variant='outlined'\n                    fullWidth\n                  />\n                </Grid>\n                <Grid item xs={12} md={2}>\n                  <Field\n                    component={TextField}\n                    label='60% and up'\n                    name='score60'\n                    type='number'\n                    variant='outlined'\n                    fullWidth\n                  />\n                </Grid>\n                <Grid item xs={12} md={2}>\n                  <Field\n                    component={TextField}\n                    label='50% and up'\n                    name='score50'\n                    type='number'\n                    variant='outlined'\n                    fullWidth\n                  />\n                </Grid>\n              </Grid>\n            </Paper>\n          )}\n          {currentUser.role === 'teacher' && (\n            <Paper className={classes.paper}>\n              <Grid container spacing={2}>\n                <Grid item xs={12}>\n                  <Typography variant='h5' gutterBottom>\n                    Song Requests\n                  </Typography>\n                </Grid>\n                <Grid item xs={12} md={4}>\n                  <label>\n                    <Field\n                      component={Switch}\n                      name='songRequestEnabled'\n                      type='checkbox'\n                    />\n                    <SwitchLabel\n                      status={formik.values.songRequestEnabled}\n                      value='Song requests'\n                    />\n                  </label>\n                </Grid>\n                {formik.values.songRequestEnabled && (\n                  <Grid item xs={12} md={4}>\n                    <Field\n                      component={TextField}\n                      label='Song Request Purchase Amount'\n                      name='songRequestPurchaseAmount'\n                      type='number'\n                      variant='outlined'\n                      fullWidth\n                    />\n                  </Grid>\n                )}\n                <Grid item xs={12}>\n                  <Typography variant='h6' gutterBottom>\n                    Song Removal Requests\n                  </Typography>\n                </Grid>\n                <Grid item xs={12} md={4}>\n                  <label>\n                    <ControlledSwitch\n                      controlledBy={'primeSongRemovalEnabled'}\n                      name='songRemovalRequestEnabled'\n                      prime={formik.values.primeEnabled}\n                    />\n                    <SwitchLabel\n                      status={formik.values.songRemovalRequestEnabled}\n                      value='Song removal requests'\n                    />\n                    {formik.values.primeEnabled &&\n                      formik.values.primeSongRemovalEnabled && (\n                        <em> (required for Prime)</em>\n                      )}\n                  </label>\n                </Grid>\n                {formik.values.songRemovalRequestEnabled && (\n                  <>\n                    <Grid item xs={12} md={4}>\n                      <Field\n                        component={TextField}\n                        label='Song Removal Purchase Amount'\n                        name='songRemovalPurchaseAmount'\n                        type='number'\n                        variant='outlined'\n                        fullWidth\n                      />\n                    </Grid>\n                    <Grid item xs={12} md={4}>\n                      <Field\n                        component={TextField}\n                        label='Song Removal Refund Amount'\n                        name='songRemovalRefundAmount'\n                        type='number'\n                        variant='outlined'\n                        fullWidth\n                      />\n                    </Grid>\n                  </>\n                )}\n              </Grid>\n            </Paper>\n          )}\n          {currentUser.role === 'teacher' && (\n            <Paper className={classes.paper}>\n              <Grid container spacing={2}>\n                <Grid item xs={12}>\n                  <Typography variant='h5' gutterBottom>\n                    Student Accounts\n                  </Typography>\n                </Grid>\n                <Grid item xs={12} md={6}>\n                  <Field\n                    component={TextField}\n                    label='Default Student Password'\n                    name='defaultStudentPassword'\n                    type='text'\n                    variant='outlined'\n                    fullWidth\n                  />\n                </Grid>\n              </Grid>\n            </Paper>\n          )}\n        </Form>\n      )}\n    </Formik>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Settings)\n","import React from 'react'\nimport { IconButton, Tooltip, makeStyles } from '@material-ui/core'\n\nconst useStyles = makeStyles((theme) => ({\n  actionButton: {\n    color: theme.palette.text.disabled,\n  },\n}))\n\nconst ActionButton = ({\n  action,\n  children,\n  className,\n  disabled,\n  onClick,\n  size,\n}) => {\n  const classes = useStyles()\n\n  const handleClick = (ev) => {\n    ev.stopPropagation()\n    onClick()\n  }\n\n  return (\n    <Tooltip arrow enterTouchDelay={0} title={action}>\n      <span>\n        <IconButton\n          aria-label={action}\n          className={`${classes.actionButton} ${className || ''}`}\n          disabled={disabled}\n          onClick={handleClick}\n          onFocus={(ev) => ev.stopPropagation()}\n          size={size}\n        >\n          {children}\n        </IconButton>\n      </span>\n    </Tooltip>\n  )\n}\n\nexport default ActionButton\n","import React from 'react'\nimport { NumericFormat } from 'react-number-format'\n\nconst Points = ({ prefix, suffix, value }) => (\n  <NumericFormat\n    displayType='text'\n    prefix={prefix || ''}\n    suffix={suffix || ' pts'}\n    thousandSeparator={true}\n    value={Math.round(value)}\n  />\n)\n\nexport default Points\n","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { Typography, makeStyles } from '@material-ui/core'\n\nimport Points from './Points'\nimport agent from '../agent'\n\nimport {\n  ACCOUNT_BALANCE_LOADED,\n  ACCOUNT_BALANCE_UNLOADED,\n} from '../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  insufficient: {\n    backgroundColor: theme.palette.error.light,\n  },\n  sufficient: {\n    backgroundColor: theme.palette.success.light,\n  },\n  root: {\n    borderRadius: theme.spacing(1),\n    color: theme.palette.common.white,\n    padding: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\n    textAlign: 'center',\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.scores.balance,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onLoad: (username) =>\n    dispatch({\n      type: ACCOUNT_BALANCE_LOADED,\n      payload: agent.Scores.getStudentScores(username),\n    }),\n  onUnload: () => dispatch({ type: ACCOUNT_BALANCE_UNLOADED }),\n})\n\nconst AccountBalance = ({\n  balance,\n  cost,\n  count,\n  onLoad,\n  onUnload,\n  username,\n}) => {\n  const classes = useStyles()\n\n  useEffect(() => {\n    onLoad(username)\n\n    return () => {\n      onUnload()\n    }\n  }, [])\n\n  useEffect(() => {\n    onLoad(username)\n  }, [count, username])\n\n  return (\n    <div\n      className={`${classes.root} ${\n        balance >= cost ? classes.sufficient : classes.insufficient\n      }`}\n    >\n      <Typography variant='h5'>\n        <Points value={balance} />\n      </Typography>\n      <Typography variant='subtitle2'>\n        <em>Account Balance</em>\n      </Typography>\n    </div>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AccountBalance)\n","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { TextField } from '@material-ui/core'\nimport { Autocomplete } from '@material-ui/lab'\nimport parse from 'autosuggest-highlight/parse'\nimport match from 'autosuggest-highlight/match'\n\nimport agent from '../../agent'\n\nimport {\n  PRODUCT_SELECTOR_LOADED,\n  PRODUCT_SELECTOR_UNLOADED,\n} from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  ...state.products,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onLoad: () =>\n    dispatch({\n      type: PRODUCT_SELECTOR_LOADED,\n      payload: agent.Products.getAll(),\n    }),\n  onUnload: () => dispatch({ type: PRODUCT_SELECTOR_UNLOADED }),\n})\n\nconst ProductSelector = ({\n  allowAny,\n  onChange,\n  onLoad,\n  onUnload,\n  products,\n}) => {\n  useEffect(() => {\n    onLoad()\n\n    return () => {\n      onUnload()\n    }\n  }, [])\n\n  // Add stock status and sort products by stock status\n  const options = products\n    .map((product) => ({\n      ...product,\n      status: product.quantity > 0 ? 'In Stock' : 'Out of Stock',\n    }))\n    .sort((a, b) => -b.status.localeCompare(a.status))\n\n  return (\n    <Autocomplete\n      autoHighlight\n      freeSolo={allowAny ?? true}\n      getOptionLabel={(product) => product.name}\n      getOptionSelected={(opt, val) => opt._id === val._id}\n      groupBy={(product) => product.status}\n      noOptionsText='No products have been added'\n      onInputChange={(ev, value) => {\n        onChange(value)\n      }}\n      onChange={(ev, value) => {\n        onChange(value)\n      }}\n      options={options}\n      renderInput={(params) => (\n        <TextField\n          {...params}\n          label='Description'\n          placeholder='Type or select a product'\n          required\n        />\n      )}\n      renderOption={(option, { inputValue }) => {\n        const matches = match(option.name, inputValue)\n        const parts = parse(option.name, matches)\n\n        return (\n          <div>\n            {parts.map((part, index) => (\n              <span\n                key={index}\n                style={{\n                  fontWeight: part.highlight ? 700 : 400,\n                }}\n              >\n                {part.text}\n              </span>\n            ))}\n          </div>\n        )\n      }}\n    />\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductSelector)\n","export const useGetInvoice = (products, quantities, taxRate, primeRate = 0) => {\n  if (products && quantities) {\n    const items = products.map((product) => ({\n      desc: product.name,\n      imgUrl: product.photoUrl,\n      max: product.maxPurchaseQuantity,\n      onHand: product.quantity,\n      price: quantities[product._id] * product.cost,\n      qty: quantities[product._id],\n      unit: product.cost,\n      _id: product._id,\n    }))\n\n    const subtotal = items\n      .map(({ price }) => price)\n      .reduce((sum, i) => sum + i, 0)\n\n    const prime = (primeRate / 100) * subtotal\n\n    const taxes =\n      primeRate > 0\n        ? (taxRate / 100) * (subtotal - prime)\n        : (taxRate / 100) * subtotal\n\n    const total = primeRate > 0 ? subtotal - prime + taxes : subtotal + taxes\n\n    const invoice = { subtotal, prime, taxes, total }\n\n    return { items, invoice }\n  } else {\n    return {}\n  }\n}\n","// Convert the given Google Drive photo link into a hosted version\nexport const convertGoogleLink = (link) => {\n  if (link.includes('drive.google.com')) {\n    const regex = /file\\/d\\/(.*)\\/view*/\n    const fileIdMatch = link.match(regex)\n    if (fileIdMatch !== null)\n      // Current fix for issue with Google [01.10.2024]\n      //  * Google Issue Tracker: https://issuetracker.google.com/issues/319531488?pli=1\n      //  * StackOverflow Discussion: https://stackoverflow.com/questions/77803187/having-trouble-displaying-an-image-from-google-drive\n      //  - Current fix uses url for thumbnail rather than the original image file; a possible fix from Google may be on the way\n      // return `https://drive.google.com/uc?export=view&id=${fileIdMatch[1]}`\n      return `https://drive.google.com/thumbnail?id=${fileIdMatch[1]}&sz=w1000`\n  }\n  return link\n}\n\n// Convert the given score to points using the given conversions\nexport const convertScore = (score, conversions) => {\n  const total = score.task.totalPoints\n  const multiplier = score.task.multiplier\n  const nonZeroTotal = total === 0 ? 1 : total\n  const percent = Math.round((score.value / nonZeroTotal) * 100)\n  const conversionKey = Math.floor((percent > 100 ? 100 : percent) / 10) * 10\n  return conversions[conversionKey] * multiplier\n}\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  MenuItem,\n  Select,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  makeStyles,\n} from '@material-ui/core'\nimport { Add, Check, Close, Delete } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport Points from '../Points'\nimport PrimeBadge from '../Prime/PrimeBadge'\nimport ProductSelector from '../Products/ProductSelector'\nimport { useGetInvoice } from '../../hooks'\nimport { convertGoogleLink } from '../../converter'\n\nconst useStyles = makeStyles((theme) => ({\n  emptyCart: {\n    textAlign: 'center',\n  },\n  icon: {\n    marginRight: theme.spacing(1),\n  },\n  tableCellImg: {\n    'alignItems': 'center',\n    'display': 'flex',\n    '& img': {\n      height: '50px',\n      marginRight: theme.spacing(2),\n    },\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  currentUser: state.common.currentUser,\n  prime: state.common.settings.prime,\n  taxRate: state.common.settings.taxRate,\n})\n\nconst getOptions = (max) => {\n  const maxOptions = max === 0 ? 100 : max\n  let options = []\n  for (let i = 1; i <= maxOptions; i++) {\n    options.push(\n      <MenuItem value={i} key={i}>\n        {i}\n      </MenuItem>\n    )\n  }\n  return options\n}\n\nconst PurchaseDetailsList = ({\n  actions,\n  currentUser,\n  hasPrime,\n  prime,\n  products,\n  quantities,\n  taxRate,\n}) => {\n  const classes = useStyles()\n\n  const isPrime =\n    prime.enabled &&\n    prime.storePurchaseDiscount > 0 &&\n    (hasPrime || currentUser.hasPrime)\n\n  const { items, invoice } = useGetInvoice(\n    products,\n    quantities,\n    taxRate,\n    isPrime ? prime.storePurchaseDiscount : 0\n  )\n  const [showAddRow, setShowAddRow] = useState(false)\n  const [newItem, setNewItem] = useState({})\n\n  const handleAddItemClick = () => {\n    actions.add(newItem)\n    handleAddRowClick()\n  }\n\n  const handleAddRowClick = () => {\n    setShowAddRow(!showAddRow)\n    setNewItem({})\n  }\n\n  const handleDeleteProduct = (productId) => actions.delete(productId)\n\n  const handleQtyUpdate = (event) =>\n    actions.update(event.target.name, event.target.value)\n\n  useEffect(() => {\n    if (actions && actions.hasOwnProperty('setInvoice'))\n      actions.setInvoice(invoice)\n  }, [products, quantities, taxRate])\n\n  return (\n    <TableContainer>\n      <Table>\n        <TableHead>\n          <TableRow>\n            <TableCell align='center' colSpan={3}>\n              Purchase Details\n            </TableCell>\n            <TableCell align='right'>Cost</TableCell>\n          </TableRow>\n          <TableRow>\n            <TableCell>Items</TableCell>\n            <TableCell align='right'>Quantity</TableCell>\n            <TableCell align='right'>Item Cost</TableCell>\n            <TableCell align='right'>Total Cost</TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {items.length > 0 ? (\n            items.map((row) => (\n              <TableRow key={row.desc}>\n                <TableCell className={classes.tableCellImg}>\n                  <img height='50px' src={convertGoogleLink(row.imgUrl)} />\n                  {row.desc}\n                </TableCell>\n                <TableCell align='right'>\n                  {actions ? (\n                    <>\n                      <ActionButton\n                        action='Remove from cart'\n                        onClick={() => handleDeleteProduct(row._id)}\n                      >\n                        <Delete />\n                      </ActionButton>\n                      <Select\n                        name={row._id}\n                        onChange={handleQtyUpdate}\n                        value={row.qty}\n                      >\n                        {getOptions(\n                          (row.onHand < row.max && row.onHand > 0) ||\n                            row.max === 0\n                            ? row.onHand\n                            : row.max\n                        )}\n                      </Select>\n                    </>\n                  ) : (\n                    row.qty\n                  )}\n                </TableCell>\n                <TableCell align='right'>\n                  <Points value={row.unit} />\n                </TableCell>\n                <TableCell align='right'>\n                  <Points value={row.price} />\n                </TableCell>\n              </TableRow>\n            ))\n          ) : (\n            <TableRow>\n              <TableCell colSpan={4} className={classes.emptyCart}>\n                Your cart is empty\n              </TableCell>\n            </TableRow>\n          )}\n\n          {showAddRow && (\n            <TableRow>\n              <TableCell colSpan={3}>\n                <ProductSelector\n                  allowAny={false}\n                  onChange={(product) =>\n                    product ? setNewItem(product) : setNewItem({})\n                  }\n                />\n              </TableCell>\n              <TableCell align='right'>\n                <ActionButton\n                  action='Add to cart'\n                  disabled={!newItem.hasOwnProperty('name')}\n                  onClick={handleAddItemClick}\n                >\n                  <Check />\n                </ActionButton>\n                <ActionButton action='Cancel' onClick={handleAddRowClick}>\n                  <Close />\n                </ActionButton>\n              </TableCell>\n            </TableRow>\n          )}\n\n          <TableRow>\n            <TableCell rowSpan={isPrime ? 4 : 3}>\n              {actions && actions.hasOwnProperty('add') && (\n                <Button\n                  color='primary'\n                  disabled={showAddRow}\n                  onClick={handleAddRowClick}\n                  size='small'\n                  variant='outlined'\n                >\n                  <Add className={classes.icon} />\n                  Add item\n                </Button>\n              )}\n            </TableCell>\n            <TableCell colSpan={2}>Subtotal</TableCell>\n            <TableCell align='right'>\n              <Points value={invoice.subtotal} />\n            </TableCell>\n          </TableRow>\n          {isPrime && (\n            <TableRow>\n              <TableCell>\n                Prime Discount\n                <PrimeBadge />\n              </TableCell>\n              <TableCell align='right'>{`${prime.storePurchaseDiscount}%`}</TableCell>\n              <TableCell align='right'>\n                <Points value={-invoice.prime} />\n              </TableCell>\n            </TableRow>\n          )}\n          <TableRow>\n            <TableCell>Taxes & Fees</TableCell>\n            <TableCell align='right'>{`${taxRate}%`}</TableCell>\n            <TableCell align='right'>\n              <Points prefix='+' value={invoice.taxes} />\n            </TableCell>\n          </TableRow>\n          <TableRow>\n            <TableCell colSpan={2}>Total</TableCell>\n            <TableCell align='right'>\n              <Points value={invoice.total} />\n            </TableCell>\n          </TableRow>\n        </TableBody>\n      </Table>\n    </TableContainer>\n  )\n}\n\nexport default connect(mapStateToProps, {})(PurchaseDetailsList)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Grid,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport { AddShoppingCart } from '@material-ui/icons'\n\nimport AccountBalance from '../AccountBalance'\nimport ActionButton from '../ActionButton'\nimport InputBox from '../InputBox'\nimport ListErrors from '../ListErrors'\nimport PurchaseDetailsList from './PurchaseDetailsList'\nimport agent from '../../agent'\n\nimport {\n  ADD_PURCHASE,\n  ADD_PURCHASE_DIALOG_UNLOADED,\n  ADD_TO_CART,\n  DELETE_CART_PRODUCT,\n  UPDATE_CART_PRODUCT_QUANTITY,\n} from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  ...state.purchases,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onAddItem: (product) => dispatch({ type: ADD_TO_CART, product }),\n  onDeleteItem: (productId) =>\n    dispatch({ type: DELETE_CART_PRODUCT, productId }),\n  onExit: () => dispatch({ type: ADD_PURCHASE_DIALOG_UNLOADED }),\n  onSubmit: (purchase) =>\n    dispatch({\n      type: ADD_PURCHASE,\n      payload: agent.Purchases.add(purchase),\n      snackbar: { message: 'Purchase added', variant: 'success' },\n    }),\n  onUpdateItem: (productId, qty) =>\n    dispatch({ type: UPDATE_CART_PRODUCT_QUANTITY, productId, qty }),\n})\n\nconst AddPurchaseDialog = ({\n  cart,\n  errors,\n  inProgress,\n  onAddItem,\n  onDeleteItem,\n  onExit,\n  onSubmit,\n  onUpdateItem,\n  student,\n}) => {\n  const [open, setOpen] = useState(false)\n  const [invoice, setInvoice] = useState({})\n  const [purchaseNote, setPurchaseNote] = useState('')\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n\n  const handleClickOpen = () => setOpen(true)\n\n  const handleClose = () => {\n    setOpen(false)\n    setInvoice({})\n    setPurchaseNote('')\n  }\n\n  const handleSubmit = () => {\n    onSubmit({\n      note: purchaseNote,\n      products: cart.products,\n      quantities: cart.quantities,\n      status: 'approved',\n      student,\n    })\n    handleClose()\n  }\n\n  useEffect(() => {\n    // Close the dialog only if there are no errors\n    if (!inProgress && !errors) setOpen(false)\n  }, [inProgress])\n\n  return (\n    <>\n      <ActionButton action={'Add purchase'} onClick={handleClickOpen}>\n        <AddShoppingCart />\n      </ActionButton>\n\n      <Dialog\n        fullScreen={fullScreen}\n        fullWidth={true}\n        maxWidth={'md'}\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onExit={onExit}\n        onFocus={(ev) => ev.stopPropagation()}\n        open={open}\n      >\n        <DialogTitle>Add Purchase</DialogTitle>\n        <DialogContent>\n          <ListErrors errors={errors} />\n          <Grid container spacing={2}>\n            <Grid item xs={12}>\n              <PurchaseDetailsList\n                actions={{\n                  add: onAddItem,\n                  delete: onDeleteItem,\n                  setInvoice: (invoice) => setInvoice(invoice),\n                  update: onUpdateItem,\n                }}\n                hasPrime={student.hasPrime}\n                products={cart.products}\n                quantities={cart.quantities}\n              />\n              <InputBox\n                label='Notes (optional)'\n                name='purchaseNote'\n                onChange={setPurchaseNote}\n              />\n            </Grid>\n          </Grid>\n        </DialogContent>\n        <DialogActions>\n          <div style={{ marginRight: 'auto' }}>\n            <AccountBalance cost={invoice.total} username={student.username} />\n          </div>\n          <Button\n            disabled={inProgress || cart.products.length === 0}\n            color='primary'\n            onClick={handleSubmit}\n            type='submit'\n            variant='contained'\n          >\n            {inProgress ? 'Adding...' : 'Add'}\n          </Button>\n          <Button\n            disabled={inProgress}\n            onClick={handleClose}\n            variant='contained'\n          >\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AddPurchaseDialog)\n","import React from 'react'\nimport { Chip, makeStyles } from '@material-ui/core'\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    fontStyle: 'italic',\n    marginLeft: theme.spacing(1),\n  },\n}))\n\nconst DroppedChip = (props) => {\n  const classes = useStyles()\n\n  return (\n    <Chip\n      className={classes.root}\n      color='secondary'\n      label='dropped'\n      size='small'\n      variant='outlined'\n      {...props}\n    />\n  )\n}\n\nexport default DroppedChip\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport { Alert, AlertTitle } from '@material-ui/lab'\n\nimport ListErrors from '../ListErrors'\n\nimport agent from '../../agent'\n\nimport {\n  NOTIFICATION_DIALOG_LOADED,\n  NOTIFICATION_DIALOG_UNLOADED,\n} from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  alert: {\n    '&:not(:last-of-type)': {\n      marginBottom: theme.spacing(2),\n    },\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.notifications,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onLoad: () =>\n    dispatch({\n      type: NOTIFICATION_DIALOG_LOADED,\n      payload: agent.Notifications.getAll(),\n    }),\n  onUnload: () =>\n    dispatch({\n      type: NOTIFICATION_DIALOG_UNLOADED,\n      payload: agent.Notifications.clearAll(),\n    }),\n})\n\nconst NotificationDialog = ({ errors, notifications, onLoad, onUnload }) => {\n  const [open, setOpen] = useState(false)\n\n  const classes = useStyles()\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n\n  const handleClose = () => {\n    setOpen(false)\n    onUnload()\n  }\n\n  useEffect(() => {\n    onLoad()\n  }, [])\n\n  // Automatically show the notification center if there are notifications\n  useEffect(() => {\n    if (notifications.length > 0) setOpen(true)\n  }, [notifications])\n\n  return (\n    <Dialog\n      fullScreen={fullScreen}\n      fullWidth={true}\n      maxWidth={'md'}\n      open={open}\n      onClose={handleClose}\n      onClick={(ev) => ev.stopPropagation()}\n      onFocus={(ev) => ev.stopPropagation()}\n    >\n      <DialogTitle>Notification Center</DialogTitle>\n      <DialogContent>\n        <ListErrors errors={errors} />\n        {notifications.length > 0 ? (\n          notifications.map((notification, index) => (\n            <Alert\n              className={classes.alert}\n              key={index}\n              severity={notification.type}\n            >\n              <AlertTitle>{notification.title}</AlertTitle>\n              {notification.content}\n            </Alert>\n          ))\n        ) : (\n          <Alert severity='info'>\n            <AlertTitle>All caught up!</AlertTitle>\n            You have no notifications at this time\n          </Alert>\n        )}\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={handleClose} variant='contained'>\n          Close\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NotificationDialog)\n","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n} from '@material-ui/core'\nimport { LockOpen } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport agent from '../../agent'\n\nimport { RESET_STUDENT_PASSWORD } from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  defaultStudentPassword: state.common.settings.defaultStudentPassword,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onSubmit: (user) =>\n    dispatch({\n      type: RESET_STUDENT_PASSWORD,\n      payload: agent.Students.update(user),\n      snackbar: { message: 'Password reset', variant: 'success' },\n    }),\n})\n\nconst ResetStudentPasswordAlert = ({\n  btnSize,\n  defaultStudentPassword,\n  onSubmit,\n  student,\n}) => {\n  const [open, setOpen] = useState(false)\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmit = () => {\n    const user = { ...student, password: defaultStudentPassword }\n    onSubmit(user)\n    setOpen(false)\n  }\n\n  return (\n    <>\n      <ActionButton\n        action='Reset password'\n        onClick={handleClickOpen}\n        size={btnSize ?? 'small'}\n      >\n        <LockOpen fontSize='inherit' />\n      </ActionButton>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        onClick={(ev) => ev.stopPropagation()}\n        onFocus={(ev) => ev.stopPropagation()}\n      >\n        <DialogTitle>Reset Password</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Do you want to reset{' '}\n            <b>\n              {student.firstName} {student.lastName}\n            </b>\n            's password to <strong>{defaultStudentPassword}</strong>?\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button\n            onClick={handleSubmit}\n            color='primary'\n            variant='contained'\n            autoFocus\n          >\n            Reset\n          </Button>\n          <Button onClick={handleClose} variant='contained'>\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ResetStudentPasswordAlert)\n","import React from 'react'\nimport { TextField } from '@material-ui/core'\nimport { Autocomplete } from '@material-ui/lab'\n\nconst AutocompleteSelector = ({\n  allowAny,\n  defaultValue,\n  disabled,\n  label,\n  onChange,\n  options,\n}) => (\n  <Autocomplete\n    autoHighlight\n    defaultValue={defaultValue || null}\n    disabled={disabled || false}\n    freeSolo={allowAny ?? false}\n    onInputChange={(ev, value) => {\n      onChange(value)\n    }}\n    onChange={(ev, value) => {\n      onChange(value)\n    }}\n    options={options}\n    renderInput={(params) => <TextField {...params} label={label} />}\n  />\n)\n\nexport default AutocompleteSelector\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Form, Field } from 'formik'\nimport { Switch, TextField } from 'formik-material-ui'\nimport * as Yup from 'yup'\nimport moment from 'moment'\nimport { titleCase } from 'title-case'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Fab,\n  Grid,\n  Typography,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport { Add, Wc } from '@material-ui/icons'\nimport { Alert, AlertTitle } from '@material-ui/lab'\n\nimport ActionButton from '../ActionButton'\nimport AutocompleteSelector from '../AutocompleteSelector'\nimport ListErrors from '../ListErrors'\nimport agent from '../../agent'\n\nimport {\n  ADD_PASS,\n  GET_LAST_PASS,\n  LOAD_STUDENT_PASSES,\n  LOAD_TEACHER_PASS_DIALOG,\n} from '../../constants/actionTypes'\n\nconst DESTINATIONS = [\n  'classroom',\n  'counselor',\n  'gym',\n  'health office',\n  'library',\n  'office',\n  'restroom',\n  'social worker',\n]\n\nconst useStyles = makeStyles((theme) => ({\n  icon: {\n    marginRight: theme.spacing(1),\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.passes,\n  ...state.common.settings,\n  accountBalance: state.scores.total?.balance,\n  role: state.common.currentUser.role,\n  teacher: state.common.settings.user,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  getLastPass: () =>\n    dispatch({ type: GET_LAST_PASS, payload: agent.Passes.getLastPass() }),\n  onAdd: (pass) =>\n    dispatch({\n      type: ADD_PASS,\n      payload: agent.Passes.add(pass),\n      snackbar: {\n        message: 'Pass created',\n        variant: 'success',\n      },\n    }),\n  onLoadStudent: () =>\n    dispatch({\n      type: LOAD_STUDENT_PASSES,\n      payload: agent.Passes.getAll(),\n    }),\n  onLoadTeacher: (studentId) =>\n    dispatch({\n      type: LOAD_TEACHER_PASS_DIALOG,\n      payload: agent.Passes.getStudentPasses(studentId),\n    }),\n})\n\nconst ActivePassAlert = ({ activePassExists, lastPass, role }) => (\n  <>\n    {activePassExists && (\n      <Grid item xs={12}>\n        <Alert severity='error'>\n          <AlertTitle>Active Hallpass</AlertTitle>\n          {role === 'student'\n            ? `An active hallpass already exists for another student. Please try again in ${lastPass?.duration} minutes. If this is an emergency, please see your teacher.`\n            : `An active hallpass already exists for ${\n                lastPass?.student.firstName\n              } ${lastPass?.student.lastName} to go to the ${\n                lastPass?.destination\n              } and was created at ${moment(lastPass?.createdAt).format(\n                'LT'\n              )} with a duration of ${lastPass?.duration} minutes`}\n        </Alert>\n      </Grid>\n    )}\n  </>\n)\n\nconst InsufficientFundsAlert = ({ accountBalance, canAfford, role }) => (\n  <>\n    {!canAfford && (\n      <Grid item xs={12}>\n        <Alert severity='error'>\n          <AlertTitle>Insufficient Funds</AlertTitle>\n          {role === 'student'\n            ? `You do not have enough points to purchase a hallpass. If this is an emergency, please see your teacher.`\n            : `This student has ${accountBalance} pts which is less than the cost of a hallpass`}\n        </Alert>\n      </Grid>\n    )}\n  </>\n)\n\nconst PassLimitExceededAlert = ({ passes, passLimitExceeded, role }) => (\n  <>\n    {passLimitExceeded && (\n      <Grid item xs={12}>\n        <Alert severity='error'>\n          <AlertTitle>Hallpass Limit Reached</AlertTitle>\n          {role === 'student'\n            ? `You have reached your pass limit. If this is an emergency, please see your teacher.`\n            : `This student has ${passes.length} passes and has exceeded their pass limit`}\n        </Alert>\n      </Grid>\n    )}\n  </>\n)\n\nconst StudentGeneratedPassAlert = ({ allow, role }) => (\n  <>\n    {!allow && role === 'student' && (\n      <Grid item xs={12}>\n        <Alert severity='info'>Please see your teacher for a hallpass</Alert>\n      </Grid>\n    )}\n  </>\n)\n\nconst PassDisplay = ({ onClose, pass, roomNumber, status, teacher }) => {\n  const PassItemRow = ({ title, value }) => (\n    <>\n      <Grid item xs={3}>\n        <Typography>\n          <b>{title}:</b>\n        </Typography>\n      </Grid>\n      <Grid item xs={9}>\n        <Typography>{value}</Typography>\n      </Grid>\n    </>\n  )\n\n  return (\n    <>\n      <DialogTitle>Hallpass</DialogTitle>\n      <DialogContent>\n        <Grid container spacing={2}>\n          {status === 'expired' ? (\n            <Grid item xs={12}>\n              <Alert severity='error'>\n                <AlertTitle>Hallpass Expired</AlertTitle>\n                Your hallpass for today is expired. If you need a new hallpass,\n                please see your teacher.\n              </Alert>\n            </Grid>\n          ) : (\n            <>\n              <Grid item xs={12}>\n                <Alert severity='info'>\n                  This hallpass is good for {pass.duration} minutes and expires\n                  at{' '}\n                  {moment(pass.createdAt)\n                    .add(pass.duration, 'minutes')\n                    .format('LT')}\n                </Alert>\n              </Grid>\n              <Grid container spacing={1} item xs={12}>\n                <PassItemRow\n                  title={'Student'}\n                  value={`${pass.student.firstName} ${pass.student.lastName}`}\n                />\n                <PassItemRow title={'From'} value={roomNumber} />\n                <PassItemRow title={'To'} value={titleCase(pass.destination)} />\n                <PassItemRow\n                  title={'Date'}\n                  value={moment(pass.createdAt).format('ll')}\n                />\n                <PassItemRow\n                  title={'Time'}\n                  value={moment(pass.createdAt).format('LT')}\n                />\n                <PassItemRow\n                  title={'Teacher'}\n                  value={`${teacher.title} ${teacher.lastName}`}\n                />\n              </Grid>\n            </>\n          )}\n        </Grid>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose} variant='contained'>\n          Close\n        </Button>\n      </DialogActions>\n    </>\n  )\n}\n\nconst PassForm = ({\n  accountBalance,\n  activePassExists,\n  cost,\n  errors,\n  hallpass,\n  inProgress,\n  lastPass,\n  onClose,\n  onSubmit,\n  pageLoaded,\n  passes,\n  passLimitExceeded,\n  role,\n}) => {\n  const canAfford =\n    (!hallpass.allowPurchaseWithInsufficientFunds && accountBalance >= cost) ||\n    hallpass.allowPurchaseWithInsufficientFunds\n\n  const showForm =\n    (role === 'student' &&\n      !activePassExists &&\n      hallpass.allowStudentCreation &&\n      !passLimitExceeded &&\n      canAfford) ||\n    role === 'teacher'\n\n  return (\n    <Formik\n      initialValues={{\n        createdBy: role,\n        destination: 'restroom',\n        doCharge: true,\n        duration: hallpass.defaultDuration,\n      }}\n      validationSchema={Yup.object({\n        createdBy: Yup.string().required('Required'),\n        destination: Yup.string().required('Required'),\n        doCharge: Yup.boolean(),\n        duration: Yup.number().typeError('Numbers only').required('Required'),\n      })}\n      onSubmit={async (values) => {\n        onSubmit(values)\n      }}\n    >\n      {(formik) => (\n        <Form>\n          <DialogTitle>\n            {role === 'student' ? 'Purchase Hallpass' : 'Create Hallpass'}\n          </DialogTitle>\n          <DialogContent>\n            <ListErrors errors={errors} />\n\n            <Grid container spacing={2}>\n              <ActivePassAlert\n                activePassExists={activePassExists}\n                lastPass={lastPass}\n                role={role}\n              />\n              <InsufficientFundsAlert\n                accountBalance={accountBalance}\n                canAfford={canAfford}\n                role={role}\n              />\n              <PassLimitExceededAlert\n                passes={passes}\n                passLimitExceeded={passLimitExceeded}\n                role={role}\n              />\n              <StudentGeneratedPassAlert\n                allow={hallpass.allowStudentCreation}\n                role={role}\n              />\n              {showForm && role === 'student' && (\n                <Grid item xs={12}>\n                  <Typography variant='body1' gutterBottom>\n                    This will charge your account <b>{cost} pts</b>\n                  </Typography>\n                  <Typography variant='body2' gutterBottom>\n                    <em>\n                      If you need a pass to a different destination or for a\n                      longer duration, please see your teacher\n                    </em>\n                  </Typography>\n                </Grid>\n              )}\n              {showForm && (\n                <Grid item xs={12} md={6}>\n                  <AutocompleteSelector\n                    allowAny\n                    defaultValue='restroom'\n                    disabled={inProgress || role === 'student'}\n                    label='Destination'\n                    onChange={(value) => {\n                      formik.setFieldValue('destination', value)\n                    }}\n                    options={DESTINATIONS}\n                  />\n                </Grid>\n              )}\n              {showForm && (\n                <Grid item xs={12} md={6}>\n                  <Field\n                    color='primary'\n                    component={TextField}\n                    disabled={inProgress || role === 'student'}\n                    label='Duration (minutes)'\n                    name='duration'\n                    type='text'\n                    fullWidth\n                  />\n                </Grid>\n              )}\n              {role === 'teacher' && (\n                <Grid item xs={12} md={6}>\n                  <label>\n                    <Field component={Switch} name='doCharge' type='checkbox' />\n                    <b>Cost: </b>\n                    {formik.values.doCharge ? `${cost} pts` : 'Free'}\n                  </label>\n                </Grid>\n              )}\n            </Grid>\n          </DialogContent>\n          <DialogActions>\n            {showForm && (\n              <Button\n                disabled={inProgress || !pageLoaded}\n                color='primary'\n                type='submit'\n                variant='contained'\n              >\n                {inProgress ? 'Creating...' : 'Create'}\n              </Button>\n            )}\n            <Button disabled={inProgress} onClick={onClose} variant='contained'>\n              {showForm ? 'Cancel' : 'Close'}\n            </Button>\n          </DialogActions>\n        </Form>\n      )}\n    </Formik>\n  )\n}\n\nconst PassDialog = ({\n  accountBalance,\n  buttonType,\n  errors,\n  hallpass,\n  getLastPass,\n  inProgress,\n  lastPass,\n  onAdd,\n  onLoadStudent,\n  onLoadTeacher,\n  pageLoaded,\n  passes,\n  prime,\n  role,\n  roomNumber,\n  student,\n  teacher,\n}) => {\n  const [open, setOpen] = useState(false)\n  const [passStatus, setPassStatus] = useState(null)\n  const [activePassExists, setActivePassExists] = useState(false)\n  const [passLimitExceeded, setPassLimitExceeded] = useState(false)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n  const classes = useStyles()\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const getHallpassAmount = () =>\n    prime.enabled && student.hasPrime\n      ? (1 - prime.hallpassDiscount / 100) * hallpass.purchaseAmount\n      : hallpass.purchaseAmount\n\n  const handleSubmitAdd = (values) => {\n    onAdd({\n      cost: values.doCharge || role === 'student' ? getHallpassAmount() : 0,\n      createdBy: values.createdBy,\n      destination: values.destination,\n      duration: values.duration,\n      student,\n    })\n  }\n\n  const getPassStatus = (passes) => {\n    if (passes.length > 0) {\n      const pass = passes[0]\n      const curTime = moment()\n      const passTime = moment(pass.createdAt)\n      const isSameDay = passTime.isSame(curTime, 'day')\n      const elapsedTime = moment.duration(curTime.diff(passTime)).as('minutes')\n      if (!isSameDay) return null\n      if (elapsedTime > pass.duration) return 'expired'\n      return 'active'\n    }\n    return null\n  }\n\n  const getPassLimitExceeded = (passes) => {\n    if (hallpass.limit === 0) return false\n    return passes.length >= hallpass.limit\n  }\n\n  useEffect(() => {\n    // Close the dialog for teachers only if there are no errors\n    if (role === 'teacher' && !inProgress && !errors) setOpen(false)\n  }, [inProgress])\n\n  useEffect(() => {\n    // Load pass data when dialog is opened by a student user\n    if (open && role === 'student') onLoadStudent()\n\n    // Load pass data for the selected student when dialog is opened by a teacher user\n    if (open && role === 'teacher') onLoadTeacher(student._id)\n\n    // Load last pass data for all users\n    if (open) getLastPass()\n  }, [open])\n\n  useEffect(() => {\n    if (role === 'student') setPassStatus(getPassStatus(passes))\n    setPassLimitExceeded(getPassLimitExceeded(passes))\n  }, [passes])\n\n  useEffect(() => {\n    const lastPassStatus = lastPass ? getPassStatus([lastPass]) : null\n    setActivePassExists(lastPassStatus === 'active' ? true : false)\n  }, [lastPass])\n\n  return (\n    <>\n      {hallpass.enabled && buttonType === 'icon' && (\n        <ActionButton\n          action={role === 'teacher' ? 'Create hallpass' : 'Purchase hallpass'}\n          onClick={handleClickOpen}\n        >\n          <Wc />\n        </ActionButton>\n      )}\n\n      {hallpass.enabled && buttonType === 'fab' && (\n        <Fab color='primary' onClick={handleClickOpen} variant='extended'>\n          <Add className={classes.icon} />\n          Buy a pass\n        </Fab>\n      )}\n\n      <Dialog\n        fullScreen={fullScreen}\n        fullWidth={true}\n        maxWidth={'md'}\n        onClick={(ev) => ev.stopPropagation()}\n        onFocus={(ev) => ev.stopPropagation()}\n        open={open}\n      >\n        {passStatus && passes.length > 0 ? (\n          <PassDisplay\n            onClose={handleClose}\n            pass={passes[0]}\n            roomNumber={roomNumber}\n            status={passStatus}\n            teacher={teacher}\n          />\n        ) : (\n          <PassForm\n            accountBalance={accountBalance}\n            activePassExists={activePassExists}\n            cost={getHallpassAmount()}\n            errors={errors}\n            hallpass={hallpass}\n            inProgress={inProgress}\n            lastPass={lastPass}\n            onClose={handleClose}\n            onSubmit={handleSubmitAdd}\n            pageLoaded={pageLoaded}\n            passes={passes}\n            passLimitExceeded={passLimitExceeded}\n            role={role}\n          />\n        )}\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PassDialog)\n","import React from 'react'\nimport { TextField } from '@material-ui/core'\nimport { Autocomplete } from '@material-ui/lab'\nimport parse from 'autosuggest-highlight/parse'\nimport match from 'autosuggest-highlight/match'\n\nconst BonusSelector = ({ allowAny, bonuses, onChange }) => (\n  <Autocomplete\n    autoHighlight\n    freeSolo={allowAny ?? true}\n    getOptionLabel={(bonus) => bonus.description}\n    getOptionSelected={(opt, val) => opt._id === val._id}\n    noOptionsText='No bonuses have been added'\n    onInputChange={(ev, value) => {\n      onChange(value)\n    }}\n    onChange={(ev, value) => {\n      onChange(value)\n    }}\n    options={bonuses}\n    renderInput={(params) => (\n      <TextField\n        {...params}\n        label='Description'\n        placeholder='Type or select a bonus'\n        required\n      />\n    )}\n    renderOption={(option, { inputValue }) => {\n      const matches = match(option.description, inputValue)\n      const parts = parse(option.description, matches)\n\n      return (\n        <div>\n          {parts.map((part, index) => (\n            <span\n              key={index}\n              style={{\n                fontWeight: part.highlight ? 700 : 400,\n              }}\n            >\n              {part.text}\n            </span>\n          ))}\n        </div>\n      )\n    }}\n  />\n)\n\nexport default BonusSelector\n","import React from 'react'\nimport { TextField } from '@material-ui/core'\nimport { Autocomplete } from '@material-ui/lab'\nimport parse from 'autosuggest-highlight/parse'\nimport match from 'autosuggest-highlight/match'\n\nconst FineSelector = ({ allowAny, fines, onChange }) => (\n  <Autocomplete\n    autoHighlight\n    freeSolo={allowAny ?? true}\n    getOptionLabel={(fine) => fine.description}\n    getOptionSelected={(opt, val) => opt._id === val._id}\n    noOptionsText='No fines have been added'\n    onInputChange={(ev, value) => {\n      onChange(value)\n    }}\n    onChange={(ev, value) => {\n      onChange(value)\n    }}\n    options={fines}\n    renderInput={(params) => (\n      <TextField\n        {...params}\n        label='Description'\n        placeholder='Type or select a fine'\n        required\n      />\n    )}\n    renderOption={(option, { inputValue }) => {\n      const matches = match(option.description, inputValue)\n      const parts = parse(option.description, matches)\n\n      return (\n        <div>\n          {parts.map((part, index) => (\n            <span\n              key={index}\n              style={{\n                fontWeight: part.highlight ? 700 : 400,\n              }}\n            >\n              {part.text}\n            </span>\n          ))}\n        </div>\n      )\n    }}\n  />\n)\n\nexport default FineSelector\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Form, Field } from 'formik'\nimport { TextField } from 'formik-material-ui'\nimport * as Yup from 'yup'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Grid,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport { Gavel, Grade, ShoppingBasket } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport BonusSelector from './BonusSelector'\nimport FineSelector from '../Fines/FineSelector'\nimport ListErrors from '../ListErrors'\nimport ProductSelector from '../Products/ProductSelector'\nimport agent from '../../agent'\n\nimport {\n  ADD_TRANSACTION,\n  TRANSACTION_DIALOG_UNLOADED,\n} from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  ...state.scores,\n  bonuses: state.bonuses.bonuses,\n  fines: state.fines.fines,\n  products: state.products.products,\n  taxRate: state.common.settings.taxRate,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onAdd: (transaction) =>\n    dispatch({\n      type: ADD_TRANSACTION,\n      payload: agent.Transactions.add(transaction),\n      snackbar: {\n        message: `${transaction.typeTitle} added`,\n        variant: 'success',\n      },\n    }),\n  onExit: () => dispatch({ type: TRANSACTION_DIALOG_UNLOADED }),\n})\n\nconst TransactionDialog = ({\n  bonuses,\n  errors,\n  fines,\n  inProgress,\n  onAdd,\n  onExit,\n  student,\n  taxRate,\n  type,\n}) => {\n  const [open, setOpen] = useState(false)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n\n  const getCost = (amt) => Math.round(amt * (taxRate / 100 + 1))\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmitAdd = (values) => {\n    onAdd({ ...values, student, type: type.toLowerCase(), typeTitle: type })\n  }\n\n  useEffect(() => {\n    // Close the dialog only if there are no errors\n    if (!inProgress && !errors) setOpen(false)\n  }, [inProgress])\n\n  return (\n    <>\n      <ActionButton\n        action={`Add ${\n          type === 'Purchase' ? 'quick' : ''\n        } ${type.toLowerCase()}`}\n        onClick={handleClickOpen}\n      >\n        {type === 'Bonus' && <Grade />}\n        {type === 'Fine' && <Gavel />}\n        {type === 'Purchase' && <ShoppingBasket />}\n      </ActionButton>\n\n      <Dialog\n        fullScreen={fullScreen}\n        fullWidth={true}\n        maxWidth={'md'}\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onExit={onExit}\n        onFocus={(ev) => ev.stopPropagation()}\n        open={open}\n      >\n        <Formik\n          initialValues={{\n            amount: '',\n            description: '',\n            productId: '',\n          }}\n          validationSchema={Yup.object({\n            amount: Yup.number().typeError('Numbers only').required('Required'),\n            description: Yup.string().required('Required'),\n            productId: Yup.string(),\n          })}\n          onSubmit={async (values) => {\n            handleSubmitAdd(values)\n          }}\n        >\n          {(formik) => (\n            <Form>\n              <DialogTitle>\n                Add {type === 'Purchase' && 'Quick'} {type}\n              </DialogTitle>\n              <DialogContent>\n                <ListErrors errors={errors} />\n                <Grid container spacing={2}>\n                  <Grid item xs={12} md={6}>\n                    {type === 'Bonus' ? (\n                      <BonusSelector\n                        bonuses={bonuses}\n                        onChange={(bonus) => {\n                          if (typeof bonus === 'string') {\n                            formik.setFieldValue('description', bonus)\n                          } else if (bonus && typeof bonus === 'object') {\n                            formik.setFieldValue('amount', bonus.amount)\n                            formik.setFieldValue(\n                              'description',\n                              bonus.description\n                            )\n                          } else {\n                            formik.setFieldValue('amount', '')\n                            formik.setFieldValue('description', '')\n                          }\n                        }}\n                      />\n                    ) : type === 'Fine' ? (\n                      <FineSelector\n                        fines={fines}\n                        onChange={(fine) => {\n                          if (typeof fine === 'string') {\n                            formik.setFieldValue('description', fine)\n                          } else if (fine && typeof fine === 'object') {\n                            formik.setFieldValue('amount', fine.amount)\n                            formik.setFieldValue(\n                              'description',\n                              fine.description\n                            )\n                          } else {\n                            formik.setFieldValue('amount', '')\n                            formik.setFieldValue('description', '')\n                          }\n                        }}\n                      />\n                    ) : (\n                      <ProductSelector\n                        onChange={(product) => {\n                          if (typeof product === 'string') {\n                            formik.setFieldValue('description', product)\n                          } else if (product && typeof product === 'object') {\n                            formik.setFieldValue(\n                              'amount',\n                              getCost(product.cost)\n                            )\n                            formik.setFieldValue('description', product.name)\n                            formik.setFieldValue('productId', product._id)\n                          } else {\n                            formik.setFieldValue('amount', '')\n                            formik.setFieldValue('description', '')\n                          }\n                        }}\n                      />\n                    )}\n                  </Grid>\n                  <Grid item xs={12} md={6}>\n                    <Field\n                      color='primary'\n                      component={TextField}\n                      disabled={inProgress}\n                      label='Amount'\n                      name='amount'\n                      type='text'\n                      fullWidth\n                    />\n                  </Grid>\n                </Grid>\n              </DialogContent>\n              <DialogActions>\n                <Button\n                  disabled={inProgress}\n                  color='primary'\n                  type='submit'\n                  variant='contained'\n                >\n                  {inProgress ? 'Adding...' : 'Add'}\n                </Button>\n                <Button\n                  disabled={inProgress}\n                  onClick={handleClose}\n                  variant='contained'\n                >\n                  Cancel\n                </Button>\n              </DialogActions>\n            </Form>\n          )}\n        </Formik>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TransactionDialog)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport MaterialTable from 'material-table'\nimport moment from 'moment'\nimport { Grid, Paper, Tooltip, Typography, makeStyles } from '@material-ui/core'\nimport { Close, Edit } from '@material-ui/icons'\n\nimport ActionButton from './ActionButton'\nimport AddPurchaseDialog from './Purchases/AddPurchaseDialog'\nimport DroppedChip from './DroppedChip'\nimport NotificationDialog from './Notifications/NotificationDialog'\nimport ResetStudentPasswordAlert from './Teacher/ResetStudentPasswordAlert'\nimport PassDialog from './Passes/PassDialog'\nimport Points from './Points'\nimport PrimeBadge from './Prime/PrimeBadge'\nimport TransactionDialog from './Teacher/TransactionDialog'\nimport agent from '../agent'\nimport { convertScore } from '../converter'\n\nimport {\n  ACCOUNT_VIEW_LOADED,\n  ACCOUNT_VIEW_UNLOADED,\n  DELETE_TRANSACTION,\n  UPDATE_TRANSACTION,\n} from '../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  actions: {\n    alignItems: 'flex-start',\n    display: 'flex',\n    [theme.breakpoints.up('md')]: {\n      justifyContent: 'flex-end',\n    },\n  },\n  balance: {\n    'textAlign': 'center',\n    '& > h6': {\n      borderTop: '1px solid #ccc',\n      fontStyle: 'italic',\n      margin: '0 auto',\n      textTransform: 'lowercase',\n      width: '80%',\n    },\n  },\n  centerOnMobile: {\n    [theme.breakpoints.down('sm')]: {\n      alignItems: 'center',\n      justifyContent: 'center',\n      textAlign: 'center',\n    },\n  },\n  edit: {\n    backgroundColor: theme.palette.primary.main,\n  },\n  paper: {\n    padding: theme.spacing(2),\n  },\n  subtotal: {\n    'position': 'relative',\n    'textAlign': 'center',\n    '& > p': {\n      position: 'relative',\n      bottom: -theme.spacing(1),\n    },\n    '& > h6': {\n      fontSize: theme.typography.pxToRem(12),\n      fontStyle: 'italic',\n      textTransform: 'lowercase',\n    },\n  },\n  unit: {\n    fontSize: theme.typography.pxToRem(12),\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  conversions: state.scores.conversions,\n  finesEnabled: state.common.settings.fines.enabled,\n  storeEnabled: state.common.settings.storeEnabled,\n  total: state.scores.total,\n  transactions: state.scores.transactions,\n  userRole: state.common.currentUser.role,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onDelete: (transaction) =>\n    dispatch({\n      type: DELETE_TRANSACTION,\n      payload: agent.Transactions.delete(transaction),\n      snackbar: { message: 'Transaction deleted', variant: 'success' },\n    }),\n  onLoad: (username) =>\n    dispatch({\n      type: ACCOUNT_VIEW_LOADED,\n      payload: agent.Scores.getStudentScores(username),\n    }),\n  onUnload: () => dispatch({ type: ACCOUNT_VIEW_UNLOADED }),\n  onUpdate: (transaction) =>\n    dispatch({\n      type: UPDATE_TRANSACTION,\n      payload: agent.Transactions.update(transaction),\n      snackbar: { message: 'Transaction updated', variant: 'success' },\n    }),\n})\n\nconst AccountHeader = ({\n  doEdit,\n  finesEnabled,\n  onEditClick,\n  storeEnabled,\n  student,\n  total,\n  userRole,\n}) => {\n  const classes = useStyles()\n\n  const balanceGridSize = finesEnabled ? 3 : 4\n\n  return (\n    <Paper className={classes.paper}>\n      <Grid container spacing={2}>\n        <Grid item xs={12} md={4} className={classes.centerOnMobile}>\n          <Typography gutterBottom variant='h5'>\n            {student.firstName} {student.lastName}{' '}\n            {student.hasPrime && <PrimeBadge />}\n            {student.dropped && <DroppedChip />}\n          </Typography>\n          {student.course && (\n            <Typography gutterBottom color='textSecondary' variant='subtitle1'>\n              {student.course} &middot; Period {student.period}\n            </Typography>\n          )}\n          <Typography color='textSecondary' variant='subtitle2'>\n            {student.username}\n          </Typography>\n        </Grid>\n        <Grid item xs={12} md={4} container>\n          <Grid item xs={12} className={classes.balance}>\n            <Typography\n              color={total?.balance >= 0 ? 'primary' : 'secondary'}\n              variant='h4'\n            >\n              <Points suffix=' ' value={total?.balance} />\n              <span className={classes.unit}>pts</span>\n            </Typography>\n            <Typography color='textSecondary' variant='subtitle2'>\n              Balance\n            </Typography>\n          </Grid>\n          <Grid item xs={balanceGridSize} className={classes.subtotal}>\n            <Typography color='primary' variant='body1'>\n              <Points suffix=' ' value={total?.scores} />\n              <span className={classes.unit}>pts</span>\n            </Typography>\n            <Typography color='primary' variant='subtitle2'>\n              Assessments\n            </Typography>\n          </Grid>\n          <Grid item xs={balanceGridSize} className={classes.subtotal}>\n            <Typography color='primary' variant='body1'>\n              <Points suffix=' ' value={total?.bonuses} />\n              <span className={classes.unit}>pts</span>\n            </Typography>\n            <Typography color='primary' variant='subtitle2'>\n              Bonuses\n            </Typography>\n          </Grid>\n          {finesEnabled && (\n            <Grid item xs={balanceGridSize} className={classes.subtotal}>\n              <Typography color='secondary' variant='body1'>\n                <Points suffix=' ' value={total?.fines} />\n                <span className={classes.unit}>pts</span>\n              </Typography>\n              <Typography color='secondary' variant='subtitle2'>\n                Fines\n              </Typography>\n            </Grid>\n          )}\n          <Grid item xs={balanceGridSize} className={classes.subtotal}>\n            <Typography color='secondary' variant='body1'>\n              <Points suffix=' ' value={total?.purchases} />\n              <span className={classes.unit}>pts</span>\n            </Typography>\n            <Typography color='secondary' variant='subtitle2'>\n              Purchases\n            </Typography>\n          </Grid>\n        </Grid>\n        <Grid\n          item\n          xs={12}\n          md={4}\n          className={`${classes.actions} ${classes.centerOnMobile}`}\n        >\n          <PassDialog buttonType='icon' student={student} />\n          {userRole === 'teacher' ? (\n            <>\n              <TransactionDialog student={student} type='Bonus' />\n              {finesEnabled && (\n                <TransactionDialog student={student} type='Fine' />\n              )}\n              <TransactionDialog student={student} type='Purchase' />\n              {storeEnabled && <AddPurchaseDialog student={student} />}\n              <ActionButton\n                action={doEdit ? 'Finish editing' : 'Edit transactions'}\n                className={doEdit && classes.edit}\n                onClick={onEditClick}\n              >\n                {doEdit ? <Close /> : <Edit />}\n              </ActionButton>\n              <ResetStudentPasswordAlert btnSize='medium' student={student} />\n            </>\n          ) : (\n            <NotificationDialog />\n          )}\n        </Grid>\n      </Grid>\n    </Paper>\n  )\n}\n\nconst TransactionList = ({\n  conversions,\n  doEdit,\n  onDelete,\n  onUpdate,\n  transactions,\n}) => {\n  const [data, setData] = useState([])\n\n  const mapTransaction = (transaction) => ({\n    amount: transaction.amount,\n    createdAt: moment(transaction.createdAt),\n    createdAtString: transaction.createdAt,\n    description: transaction.description,\n    type: transaction.type,\n    _id: transaction._id,\n  })\n\n  const mapScore = (score) => ({\n    amount: convertScore(score, conversions),\n    createdAt: moment(score.createdAt),\n    createdAtString: score.createdAt,\n    description: score.task.title,\n    type: 'assessment',\n  })\n\n  const mappedData = (transactions) => {\n    const { bonuses, fines, purchases, scores } = transactions\n    const mapped = [\n      ...bonuses.map((bonus) => mapTransaction(bonus)),\n      ...fines.map((fine) => mapTransaction(fine)),\n      ...purchases.map((purchase) => mapTransaction(purchase)),\n    ]\n    if (doEdit) {\n      return mapped\n    } else {\n      return [...mapped, ...scores.map((score) => mapScore(score))]\n    }\n  }\n\n  const [columns] = useState([\n    {\n      title: 'Date',\n      field: 'createdAt',\n      editable: 'never',\n      defaultSort: 'desc',\n      render: (rowData, renderType) =>\n        renderType === 'row' ? (\n          <Tooltip\n            arrow\n            color='primary'\n            enterTouchDelay={0}\n            title={rowData.createdAt.format('h:mm:ss a')}\n          >\n            <span>{rowData.createdAt.format('ddd, MMM D, YYYY')}</span>\n          </Tooltip>\n        ) : (\n          rowData.format('ddd, MMM D, YYYY, h:mm:ss a')\n        ),\n    },\n    { title: 'Description', field: 'description' },\n    {\n      title: 'Amount',\n      field: 'amount',\n      render: (rowData) => <Points value={rowData.amount} />,\n    },\n    { title: 'Type', field: 'type', editable: 'never' },\n  ])\n\n  useEffect(() => {\n    transactions && setData(mappedData(transactions))\n  }, [doEdit, transactions])\n\n  return (\n    <MaterialTable\n      columns={columns}\n      data={data}\n      localization={{\n        body: {\n          emptyDataSourceMessage: doEdit\n            ? 'No editable transactions available'\n            : 'No transactions have posted',\n          editRow: {\n            deleteText: 'Delete this transaction?',\n            saveTooltip: 'Confirm',\n          },\n        },\n      }}\n      options={{ actionsColumnIndex: -1, paging: false, toolbar: false }}\n      editable={\n        doEdit\n          ? {\n              onRowUpdate: (newData, oldData) =>\n                new Promise((resolve, reject) => {\n                  const dataUpdate = [...data]\n                  const index = oldData.tableData.id\n                  dataUpdate[index] = {\n                    ...newData,\n                    createdAt: moment(newData.createdAtString),\n                  }\n                  setData([...dataUpdate])\n                  onUpdate(newData)\n                  resolve()\n                }),\n              onRowDelete: (oldData) =>\n                new Promise((resolve, reject) => {\n                  const newData = [...data]\n                  const index = oldData.tableData.id\n                  newData.splice(index, 1)\n                  setData([...newData])\n                  onDelete(oldData)\n                  resolve()\n                }),\n            }\n          : {}\n      }\n    />\n  )\n}\n\nconst AccountView = ({\n  conversions,\n  finesEnabled,\n  onDelete,\n  onLoad,\n  onUnload,\n  onUpdate,\n  storeEnabled,\n  student,\n  total,\n  transactions,\n  userRole,\n}) => {\n  const [doEdit, setDoEdit] = useState(false)\n\n  const handleEditClick = () => {\n    setDoEdit(!doEdit)\n  }\n\n  useEffect(() => {\n    return () => {\n      onUnload()\n    }\n  }, [])\n\n  useEffect(() => {\n    onLoad(student.username)\n  }, [student])\n\n  return (\n    <>\n      {transactions && (\n        <Grid container spacing={2}>\n          <Grid item xs={12}>\n            <AccountHeader\n              doEdit={doEdit}\n              finesEnabled={finesEnabled}\n              onEditClick={handleEditClick}\n              storeEnabled={storeEnabled}\n              student={student}\n              total={total}\n              userRole={userRole}\n            />\n          </Grid>\n          <Grid item xs={12}>\n            <TransactionList\n              conversions={conversions}\n              doEdit={doEdit}\n              onDelete={onDelete}\n              onUpdate={onUpdate}\n              transactions={transactions}\n            />\n          </Grid>\n        </Grid>\n      )}\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AccountView)\n","import React from 'react'\nimport { connect } from 'react-redux'\n\nimport AccountView from '../AccountView'\n\nconst mapStateToProps = (state) => ({\n  currentUser: state.common.currentUser,\n})\n\nconst StudentAccount = ({ currentUser }) => {\n  return <AccountView student={currentUser} />\n}\n\nexport default connect(mapStateToProps, () => ({}))(StudentAccount)\n","import React, { useEffect, useState } from 'react'\nimport MaterialTable from 'material-table'\nimport moment from 'moment'\n\nconst StudentPassesTable = ({ passes }) => {\n  const [data, setData] = useState([])\n\n  const mappedData = passes.map((pass) => ({\n    createdAt: moment(pass.createdAt),\n    createdBy: pass.createdBy,\n    destination: pass.destination,\n    duration: pass.duration,\n  }))\n\n  const [columns] = useState([\n    {\n      title: 'Date',\n      field: 'createdAt',\n      render: (rowData) => rowData.createdAt.format('ddd, MMM D, YYYY'),\n    },\n    {\n      title: 'Time',\n      field: 'createdAt',\n      render: (rowData) => rowData.createdAt.format('h:mm A'),\n    },\n    { title: 'Duration (min)', field: 'duration' },\n    { title: 'Destination', field: 'destination' },\n    { title: 'Created by', field: 'createdBy' },\n  ])\n\n  useEffect(() => {\n    setData(mappedData)\n  }, [passes])\n\n  return (\n    <MaterialTable\n      columns={columns}\n      data={data}\n      localization={{\n        body: { emptyDataSourceMessage: 'No passes have been created' },\n      }}\n      options={{\n        paging: false,\n        toolbar: false,\n      }}\n    />\n  )\n}\n\nexport default StudentPassesTable\n","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Card,\n  CardContent,\n  CardHeader,\n  Grid,\n  LinearProgress,\n  withStyles,\n} from '@material-ui/core'\n\nimport PageHeader from '../PageHeader'\nimport PassDialog from '../Passes/PassDialog'\nimport StudentPassesTable from './StudentPassesTable'\nimport agent from '../../agent'\n\nimport {\n  LOAD_STUDENT_PASSES,\n  STUDENT_PASSES_LOADED,\n  STUDENT_PASSES_UNLOADED,\n} from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  passes: state.passes.passes,\n  settings: state.common.settings.hallpass,\n  student: state.common.currentUser,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  getPasses: () =>\n    dispatch({ type: LOAD_STUDENT_PASSES, payload: agent.Passes.getAll() }),\n  onLoad: (username) =>\n    dispatch({\n      type: STUDENT_PASSES_LOADED,\n      payload: agent.Scores.getStudentScores(username),\n    }),\n  onUnload: () => dispatch({ type: STUDENT_PASSES_UNLOADED }),\n})\n\nconst ProgressBar = withStyles((theme) => ({\n  root: {\n    height: 10,\n    borderRadius: 5,\n  },\n  bar: {\n    borderRadius: 5,\n  },\n}))(LinearProgress)\n\nconst StudentPasses = ({\n  getPasses,\n  onLoad,\n  onUnload,\n  passes,\n  settings,\n  student,\n}) => {\n  const plural = (value) => `pass${value === 1 ? '' : 'es'}`\n\n  const pass = {\n    count: passes.length,\n    max: settings.limit,\n    remain: passes.length > settings.limit ? 0 : settings.limit - passes.length,\n  }\n\n  const passHeader =\n    pass.max > 0\n      ? `Used ${pass.count} ${plural(pass.count)} of ${pass.max} (${\n          pass.remain\n        } ${plural(pass.remain)} remaining)`\n      : `Used ${pass.count} ${plural(pass.count)} of unlimited`\n\n  const passUsage = pass.count > pass.max ? 100 : (pass.count * 100) / pass.max\n\n  useEffect(() => {\n    onLoad(student.username)\n    getPasses()\n\n    return () => {\n      onUnload()\n    }\n  }, [student])\n\n  return (\n    <>\n      <PageHeader title={`Passes for ${student.firstName}`}>\n        <PassDialog buttonType='fab' student={student} />\n      </PageHeader>\n      <Grid container spacing={2}>\n        <Grid item xs={12}>\n          <Card>\n            <CardHeader title={passHeader} />\n            {pass.max > 0 && (\n              <CardContent>\n                <ProgressBar value={passUsage} variant='determinate' />\n              </CardContent>\n            )}\n          </Card>\n        </Grid>\n        <Grid item xs={12}>\n          <StudentPassesTable passes={passes} />\n        </Grid>\n      </Grid>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StudentPasses)\n","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Collapse, IconButton, makeStyles } from '@material-ui/core'\nimport { Alert as MuiAlert } from '@material-ui/lab'\nimport { Close } from '@material-ui/icons'\n\nimport { ALERT_CLOSED } from '../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  alert: {\n    marginBottom: theme.spacing(2),\n  },\n}))\n\nconst mapDispatchToProps = (dispatch) => ({\n  onClose: () => dispatch({ type: ALERT_CLOSED }),\n})\n\nconst Alert = ({ children, disableClose, onClose, severity, variant }) => {\n  const classes = useStyles()\n  const [open, setOpen] = useState(true)\n\n  return (\n    <div className={classes.alert}>\n      <Collapse in={open}>\n        <MuiAlert\n          action={\n            !disableClose && (\n              <IconButton\n                aria-label='close'\n                color='inherit'\n                size='small'\n                onClick={() => {\n                  setOpen(false)\n                  onClose()\n                }}\n              >\n                <Close fontSize='inherit' />\n              </IconButton>\n            )\n          }\n          severity={severity || 'info'}\n          variant={variant || 'outlined'}\n        >\n          {children}\n        </MuiAlert>\n      </Collapse>\n    </div>\n  )\n}\n\nexport default connect(() => ({}), mapDispatchToProps)(Alert)\n","import React from 'react'\nimport { CircularProgress, Typography, makeStyles } from '@material-ui/core'\n\nconst useStyles = makeStyles((theme) => ({\n  message: {\n    fontStyle: 'italic',\n  },\n  root: {\n    alignItems: 'center',\n    display: 'flex',\n    justifyContent: 'center',\n    minWidth: theme.spacing(40),\n  },\n  spinner: {\n    marginRight: theme.spacing(2),\n  },\n}))\n\nconst Spinner = ({ message }) => {\n  const classes = useStyles()\n\n  return (\n    <div className={classes.root}>\n      <CircularProgress className={classes.spinner} />\n      <Typography className={classes.message}>\n        {message || 'Working...'}\n      </Typography>\n    </div>\n  )\n}\n\nexport default Spinner\n","import React, { useState } from 'react'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  IconButton,\n  Tooltip,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport { PlaylistAdd } from '@material-ui/icons'\n\nconst AddToQueueDialog = ({ balance, cost, currentUser, onSubmit }) => {\n  const [open, setOpen] = useState(false)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('sm'))\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmit = () => {\n    onSubmit()\n    setOpen(false)\n  }\n\n  return (\n    <>\n      <Tooltip title='Add to queue' arrow>\n        <IconButton onClick={handleClickOpen}>\n          <PlaylistAdd />\n        </IconButton>\n      </Tooltip>\n      <Dialog\n        fullScreen={fullScreen}\n        fullWidth\n        maxWidth='md'\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onFocus={(ev) => ev.stopPropagation()}\n        open={open}\n      >\n        <DialogTitle>Add to Queue</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Would you like to add this song to the Spotify queue to play next\n            for a fee of {cost} pts?\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          {balance >= cost || currentUser.role !== 'student' ? (\n            <Button\n              autoFocus\n              color='primary'\n              onClick={handleSubmit}\n              variant='contained'\n            >\n              Purchase\n            </Button>\n          ) : (\n            <Tooltip\n              title={`Insufficient funds! You have ${balance} pts`}\n              arrow\n            >\n              <span>\n                <Button color='primary' disabled variant='contained'>\n                  Puchase\n                </Button>\n              </span>\n            </Tooltip>\n          )}\n          <Button onClick={handleClose} variant='contained'>\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  )\n}\n\nexport default AddToQueueDialog\n","export const UNMOUNT_AUDIO_PLAYER = 'UNMOUNT_AUDIO_PLAYER'\n","import React, { createContext, useContext, useEffect, useState } from 'react'\nimport { subscribe, unsubscribe } from '../events'\nimport { UNMOUNT_AUDIO_PLAYER } from '../constants/eventTypes'\n\nexport const AudioContext = createContext()\n\nexport const useAudio = () => {\n  const context = useContext(AudioContext)\n  if (!context && typeof window !== 'undefined') {\n    throw new Error(`useAudio must be used within a AudioContext `)\n  }\n  return context\n}\n\nexport const AudioProvider = ({ children }) => {\n  const [song, setSong] = useState(null)\n  const [playing, setPlaying] = useState(false)\n\n  const isPlaying = (src) => playing && song && song.src === src\n\n  const pauseSong = () => {\n    if (song) {\n      song.pause()\n      setPlaying(false)\n    }\n  }\n\n  const controls = {\n    pause: (src) => {\n      if (isPlaying(src)) {\n        song.pause()\n        setPlaying(false)\n      }\n    },\n    play: (src) => {\n      if (song && song.src === src) {\n        song.play()\n      } else {\n        if (song) song.pause()\n        const newSong = new Audio(src)\n        newSong.play()\n        setSong(newSong)\n      }\n      setPlaying(true)\n    },\n  }\n\n  const toggle = (src) => {\n    if (isPlaying(src)) {\n      controls.pause(src)\n    } else {\n      controls.play(src)\n    }\n  }\n\n  // Handle song ending on its own and pause music when audio player component unmounts\n  useEffect(() => {\n    if (song) song.addEventListener('ended', () => setPlaying(false))\n    subscribe(UNMOUNT_AUDIO_PLAYER, () => pauseSong())\n\n    return () => {\n      if (song) song.removeEventListener('ended', () => setPlaying(false))\n      unsubscribe(UNMOUNT_AUDIO_PLAYER, () => {})\n    }\n  }, [song])\n\n  return (\n    <AudioContext.Provider value={{ controls, isPlaying, song, toggle }}>\n      {children}\n    </AudioContext.Provider>\n  )\n}\n","////\n// events.js - Manage custom events\n////\n\nfunction subscribe(eventName, listener) {\n  document.addEventListener(eventName, listener)\n}\n\nfunction unsubscribe(eventName, listener) {\n  document.removeEventListener(eventName, listener)\n}\n\nfunction publish(eventName, data) {\n  const event = new CustomEvent(eventName, { detail: data })\n  document.dispatchEvent(event)\n}\n\nexport { publish, subscribe, unsubscribe }\n","import React, { useEffect } from 'react'\nimport { IconButton, Tooltip } from '@material-ui/core'\nimport { PlayArrow, Pause } from '@material-ui/icons'\n\nimport { useAudio } from '../contexts/AudioContext'\nimport { publish } from '../events'\nimport { UNMOUNT_AUDIO_PLAYER } from '../constants/eventTypes'\n\nconst AudioPlayer = ({ src }) => {\n  const { isPlaying, toggle } = useAudio()\n\n  const playing = isPlaying(src)\n\n  const handleClick = () => toggle(src)\n\n  // Pause song when audio player unmounts\n  useEffect(() => {\n    return () => {\n      publish(UNMOUNT_AUDIO_PLAYER)\n    }\n  }, [])\n\n  return (\n    <Tooltip title={`${playing ? 'Pause' : 'Play'} song preview`} arrow>\n      <IconButton onClick={handleClick}>\n        {playing ? <Pause /> : <PlayArrow />}\n      </IconButton>\n    </Tooltip>\n  )\n}\n\nexport default AudioPlayer\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Card,\n  CardContent,\n  CardMedia,\n  IconButton,\n  Tooltip,\n  Typography,\n  makeStyles,\n} from '@material-ui/core'\nimport { Visibility } from '@material-ui/icons'\n\nimport AddToQueueDialog from './AddToQueueDialog'\nimport AudioPlayer from '../AudioPlayer'\n\nimport agent from '../../agent'\n\nimport { ADD_TO_QUEUE } from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  card: {\n    backgroundColor: theme.palette.background.default,\n    display: 'flex',\n    flexDirection: 'row',\n    [theme.breakpoints.up('md')]: {\n      minHeight: 140,\n    },\n  },\n  content: {\n    display: 'flex',\n  },\n  controls: {\n    alignItems: 'center',\n    display: 'flex',\n    paddingBottom: theme.spacing(1),\n    paddingLeft: theme.spacing(1),\n  },\n  details: {\n    display: 'flex',\n    flexDirection: 'column',\n    flexGrow: 1,\n    justifyContent: 'space-between',\n  },\n  image: {\n    height: 140,\n    minWidth: 140,\n  },\n  info: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  balance: state.scores.balance?.balance,\n  cost: state.common.settings.jukebox.purchaseAmount,\n  currentUser: state.common.currentUser,\n  tokens: state.common.settings.spotifyTokens,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  addToQueue: (cost, track, tokens) =>\n    dispatch({\n      type: ADD_TO_QUEUE,\n      payload: agent.Spotify.addToQueue(cost, track, tokens),\n      snackbar: { message: 'Song added to queue', variant: 'success' },\n    }),\n})\n\nconst TrackCard = ({\n  addToQueue,\n  balance,\n  cost,\n  currentUser,\n  hideControls,\n  track,\n  tokens,\n}) => {\n  const classes = useStyles()\n\n  const albumArtists = track.album.artists\n    .map((artist) => artist.name)\n    .join(', ')\n\n  const artists = track.artists.map((artist) => artist.name).join(', ')\n\n  const handleAddToQueue = () => {\n    addToQueue(\n      cost,\n      {\n        artists,\n        name: track.name,\n        uri: track.uri,\n      },\n      tokens\n    )\n  }\n\n  return (\n    <Card className={classes.card}>\n      <div className={classes.details}>\n        <CardContent className={classes.content}>\n          <div className={classes.info}>\n            <Typography color='primary' component='h2' variant='h5'>\n              {track.name}\n            </Typography>\n            <Typography color='secondary' variant='subtitle2'>\n              {artists}\n            </Typography>\n          </div>\n        </CardContent>\n        {!hideControls && (\n          <div className={classes.controls}>\n            <AddToQueueDialog\n              balance={balance}\n              cost={cost}\n              currentUser={currentUser}\n              onSubmit={handleAddToQueue}\n            />\n            <AudioPlayer src={track.preview_url} />\n            <Tooltip title='View song on Spotify' arrow>\n              <IconButton href={track.external_urls.spotify} target='_blank'>\n                <Visibility />\n              </IconButton>\n            </Tooltip>\n          </div>\n        )}\n      </div>\n\n      <CardMedia\n        className={classes.image}\n        image={track.album.images[0].url}\n        title={`Album art for \"${track.album.name}\" by ${albumArtists}`}\n      />\n    </Card>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TrackCard)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Container,\n  Dialog,\n  Fab,\n  Grid,\n  Typography,\n  makeStyles,\n} from '@material-ui/core'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faSpotify } from '@fortawesome/free-brands-svg-icons'\n\nimport DialogAppBar from '../DialogAppBar'\nimport ListErrors from '../ListErrors'\nimport PageHeader from '../PageHeader'\nimport PageWrapper from '../PageWrapper'\nimport Spinner from '../Spinner'\nimport TrackCard from './TrackCard'\nimport { SlideUpTransition } from '../../transitions'\n\nimport agent from '../../agent'\n\nimport { GET_QUEUE } from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  button: {\n    marginLeft: theme.spacing(2),\n  },\n  icon: {\n    marginRight: theme.spacing(1),\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.jukebox,\n  tokens: state.common.settings.spotifyTokens,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onLoad: (tokens) =>\n    dispatch({ type: GET_QUEUE, payload: agent.Spotify.getQueue(tokens) }),\n})\n\nconst QueueDialog = ({ errors, onLoad, queue, tokens }) => {\n  const [open, setOpen] = useState(false)\n\n  const classes = useStyles()\n\n  const isPlaying = queue.currently_playing !== null\n  const nowPlaying = queue.currently_playing\n  const upNext = queue.queue || []\n\n  const handleClickOpen = () => {\n    setOpen(true)\n    onLoad(tokens)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  useEffect(() => {\n    onLoad(tokens)\n  }, [])\n\n  return (\n    <>\n      {isPlaying && (\n        <Fab\n          className={classes.button}\n          color='primary'\n          onClick={handleClickOpen}\n          variant='extended'\n        >\n          <FontAwesomeIcon\n            className={classes.icon}\n            icon={faSpotify}\n            size='xl'\n          />\n          View Queue\n        </Fab>\n      )}\n\n      <Dialog\n        fullScreen\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onFocus={(ev) => ev.stopPropagation()}\n        open={open}\n        TransitionComponent={SlideUpTransition}\n      >\n        <DialogAppBar onClose={handleClose} title='Jukebox' />\n        <PageWrapper>\n          <Container>\n            <PageHeader title='Spotify Queue' beta />\n\n            <Grid container spacing={6}>\n              {errors && (\n                <Grid item xs={12}>\n                  <ListErrors errors={errors} />\n                </Grid>\n              )}\n\n              <Grid item xs={12}>\n                <Typography color='secondary' variant='h5' gutterBottom>\n                  <em>See what's playing now</em>\n                </Typography>\n                <Typography variant='body1'>\n                  Below you will find the currently playing song and the songs\n                  that will play next. Note that information on this page does\n                  not update automatically so you will need to close this window\n                  and reopen it to get the latest information.\n                </Typography>\n              </Grid>\n\n              <Grid item xs={12} md={8}>\n                <Typography color='primary' variant='h5' gutterBottom>\n                  Now Playing\n                </Typography>\n                <TrackCard track={nowPlaying} hideControls />\n              </Grid>\n\n              <Grid item xs={12} md={8}>\n                <Typography color='primary' variant='h5' gutterBottom>\n                  Up Next\n                </Typography>\n                {upNext.length > 0 ? (\n                  <Grid container item xs={12} spacing={2}>\n                    {upNext.map((track) => (\n                      <Grid item xs={12} key={track.id}>\n                        <TrackCard track={track} hideControls />\n                      </Grid>\n                    ))}\n                  </Grid>\n                ) : (\n                  <Typography variant='body1'>No upcoming songs</Typography>\n                )}\n              </Grid>\n            </Grid>\n          </Container>\n        </PageWrapper>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(QueueDialog)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Container,\n  Dialog,\n  Fab,\n  FormControl,\n  Grid,\n  InputLabel,\n  MenuItem,\n  Select,\n  Tooltip,\n  Typography,\n  makeStyles,\n} from '@material-ui/core'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faTurntable } from '@fortawesome/pro-solid-svg-icons'\n\nimport Alert from '../Alert'\nimport DialogAppBar from '../DialogAppBar'\nimport ListErrors from '../ListErrors'\nimport PageHeader from '../PageHeader'\nimport PageWrapper from '../PageWrapper'\nimport QueueDialog from './QueueDialog'\nimport Spinner from '../Spinner'\nimport TrackCard from './TrackCard'\nimport { SlideUpTransition } from '../../transitions'\n\nimport agent from '../../agent'\n\nimport {\n  JUKEBOX_DIALOG_UNLOADED,\n  JUKEBOX_STUDENT_DIALOG_LOADED,\n  JUKEBOX_TEACHER_DIALOG_LOADED,\n} from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  buttonSpan: {\n    marginRight: theme.spacing(2),\n  },\n  formControl: {\n    margin: '0 auto',\n    minWidth: '40%',\n  },\n  icon: {\n    marginRight: theme.spacing(1),\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  course: state.songs.course,\n  courses: state.songs.courses,\n  currentUser: state.common.currentUser,\n  errors: state.jukebox.errors,\n  inProgress: state.jukebox.inProgress,\n  playlist: state.jukebox.playlists[0],\n  settings: state.common.settings,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onLoadStudent: (id, tokens, username) =>\n    dispatch({\n      type: JUKEBOX_STUDENT_DIALOG_LOADED,\n      payload: Promise.all([\n        agent.Spotify.getPlaylist(id, tokens),\n        agent.Scores.getStudentScores(username),\n      ]),\n    }),\n  onLoadTeacher: (id, tokens) =>\n    dispatch({\n      type: JUKEBOX_TEACHER_DIALOG_LOADED,\n      payload: agent.Spotify.getPlaylist(id, tokens),\n    }),\n  onUnload: () => dispatch({ type: JUKEBOX_DIALOG_UNLOADED }),\n})\n\nconst JukeboxDialog = ({\n  course,\n  courses,\n  currentUser,\n  errors,\n  inProgress,\n  onLoadStudent,\n  onLoadTeacher,\n  onUnload,\n  playlist,\n  settings,\n}) => {\n  const [open, setOpen] = useState(false)\n  const [playlistId, setPlaylistId] = useState(course?.playlistId || '')\n\n  const classes = useStyles()\n\n  const showJukebox =\n    settings.spotifyTokens &&\n    settings.jukebox?.enabled &&\n    settings.enableBetaFeatures &&\n    settings.user.permissions?.jukebox &&\n    (playlistId || currentUser.role === 'teacher')\n\n  const disableJukebox =\n    settings.prime.enabled &&\n    settings.prime.jukeboxEnabled &&\n    currentUser.role === 'student' &&\n    !currentUser.hasPrime\n\n  const tracks = playlist?.tracks?.items || []\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleCourseSelectChange = (ev) => {\n    setPlaylistId(ev.target.value)\n  }\n\n  // Update the playlistId when the course information changes\n  useEffect(() => {\n    setPlaylistId(course?.playlistId || '')\n  }, [course])\n\n  // Load the playlist information when playlistID changes\n  useEffect(() => {\n    if (settings.spotifyTokens && playlistId)\n      if (currentUser.role === 'student') {\n        onLoadStudent(playlistId, settings.spotifyTokens, currentUser.username)\n      } else {\n        onLoadTeacher(playlistId, settings.spotifyTokens)\n      }\n  }, [playlistId])\n\n  // Cleanup when component unmounts\n  useEffect(() => {\n    return () => {\n      onUnload()\n    }\n  }, [])\n\n  return (\n    <>\n      {showJukebox && (\n        <Tooltip title={disableJukebox ? 'Available with Prime' : ''} arrow>\n          <span className={classes.buttonSpan}>\n            <Fab\n              color='secondary'\n              disabled={disableJukebox}\n              onClick={handleClickOpen}\n              variant='extended'\n            >\n              <FontAwesomeIcon\n                className={classes.icon}\n                icon={faTurntable}\n                size='xl'\n              />\n              Jukebox\n            </Fab>\n          </span>\n        </Tooltip>\n      )}\n\n      <Dialog\n        fullScreen\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onFocus={(ev) => ev.stopPropagation()}\n        open={open}\n        TransitionComponent={SlideUpTransition}\n      >\n        <DialogAppBar onClose={handleClose} title='Songs' />\n        <PageWrapper>\n          <Container>\n            <PageHeader title='Jukebox' beta>\n              {playlistId && (\n                <Tooltip title='View playlist on Spotify' arrow>\n                  <Button\n                    href={playlist?.external_urls?.spotify}\n                    size='large'\n                    target='_blank'\n                  >\n                    View Playlist\n                  </Button>\n                </Tooltip>\n              )}\n              <QueueDialog />\n            </PageHeader>\n\n            <Grid container spacing={6}>\n              {errors &&\n                (errors?.message.includes('No active device found') ? (\n                  <Grid item xs={12}>\n                    <Alert severity='error' variant='filled'>\n                      Sorry your purchase could not be completed because there\n                      is no music playing in class right now. Try again when the\n                      music is playing.\n                    </Alert>\n                  </Grid>\n                ) : (\n                  <Grid item xs={12}>\n                    <ListErrors errors={errors} />\n                  </Grid>\n                ))}\n\n              <Grid item xs={12}>\n                <Typography color='secondary' variant='h5' gutterBottom>\n                  <em>Play your song...now!</em>\n                </Typography>\n                <Typography variant='body1'>\n                  With Jukebox you can pay to play your song next in the Spotify\n                  queue. Note that Jukebox purchases can only be made when music\n                  is playing in class.\n                </Typography>\n              </Grid>\n\n              {currentUser.role === 'teacher' && (\n                <Grid item xs={12}>\n                  <FormControl\n                    className={classes.formControl}\n                    variant='outlined'\n                  >\n                    <InputLabel id='course-select-label'>Course</InputLabel>\n                    <Select\n                      id='course-select'\n                      label='Course'\n                      labelId='course-select-label'\n                      onChange={handleCourseSelectChange}\n                      value={playlistId}\n                    >\n                      {courses\n                        .filter((course) => !!course.playlistId)\n                        .map((course) => (\n                          <MenuItem\n                            key={course.playlistId}\n                            value={course.playlistId}\n                          >\n                            Period {course.period} | {course.name}\n                          </MenuItem>\n                        ))}\n                    </Select>\n                  </FormControl>\n                </Grid>\n              )}\n\n              <Grid container item spacing={2} xs={12}>\n                {inProgress ? (\n                  <Grid item xs={12}>\n                    <Spinner message='Loading...' />\n                  </Grid>\n                ) : (\n                  <>\n                    {tracks.length > 0 ? (\n                      tracks.map((t) => {\n                        const track = t.track\n                        return (\n                          <Grid item xs={12} md={6} key={track.id}>\n                            <TrackCard track={track} />\n                          </Grid>\n                        )\n                      })\n                    ) : (\n                      <Grid item xs={12}>\n                        <Alert disableClose>\n                          {playlistId\n                            ? 'No tracks have been added to this playlist'\n                            : \"Select a course to view it's playlist\"}\n                        </Alert>\n                      </Grid>\n                    )}\n                  </>\n                )}\n              </Grid>\n            </Grid>\n          </Container>\n        </PageWrapper>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(JukeboxDialog)\n","import emailjs from '@emailjs/browser'\nimport {\n  EMAILJS_PUBLIC_KEY,\n  EMAILJS_PURCHASE_TEMPLATE_ID,\n  EMAILJS_SONG_TEMPLATE_ID,\n  EMAILJS_SERVICE_ID,\n} from './constants/emailjs'\n\nconst emailer = (params, type) => {\n  let template = null\n  switch (type) {\n    case 'song':\n      template = EMAILJS_SONG_TEMPLATE_ID\n      break\n    case 'store':\n      template = EMAILJS_PURCHASE_TEMPLATE_ID\n      break\n    default:\n      break\n  }\n\n  emailjs.send(EMAILJS_SERVICE_ID, template, params, EMAILJS_PUBLIC_KEY).then(\n    (response) => {\n      // console.log('SUCCESS!', response.status, response.text) // for debugging only\n    },\n    (error) => {\n      // console.log('Notification failed to send:', error.text) // for debugging only\n    }\n  )\n}\n\nexport default emailer\n","export const EMAILJS_PUBLIC_KEY = 'EM6Um3bfBnZTJEB5J'\nexport const EMAILJS_PURCHASE_TEMPLATE_ID = 'template_cc_purchase'\nexport const EMAILJS_SONG_TEMPLATE_ID = 'template_cc_song_request'\nexport const EMAILJS_SERVICE_ID = 'service_chem_cash_zoho'\n","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Form, Field } from 'formik'\nimport { TextField } from 'formik-material-ui'\nimport * as Yup from 'yup'\nimport {\n  Button,\n  Dialog,\n  Fab,\n  Grid,\n  Typography,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport { QueueMusic } from '@material-ui/icons'\n\nimport agent from '../../agent'\nimport emailer from '../../emailer'\nimport background from './../../images/songs-background.jpg'\n\nimport { SUBMIT_SONG_REQUEST } from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  button: {\n    marginBottom: theme.spacing(2),\n    marginRight: theme.spacing(2),\n  },\n  dialog: {\n    backgroundImage: `url(${background})`,\n    backgroundPosition: 'center bottom',\n    backgroundSize: 'cover',\n    color: 'white',\n    padding: theme.spacing(4),\n  },\n  icon: {\n    marginRight: theme.spacing(1),\n  },\n  input: {\n    'backgroundColor': 'rgba(0,65,91,0.8)',\n    'borderRadius': theme.spacing(1),\n    'height': 78,\n    '& input': {\n      color: theme.palette.secondary.main,\n    },\n  },\n  inputLabel: {\n    color: 'white',\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  currentUser: state.common.currentUser,\n  settings: state.common.settings,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onSubmit: (song) =>\n    dispatch({\n      type: SUBMIT_SONG_REQUEST,\n      payload: agent.Songs.request(song),\n      snackbar: { message: 'Song requested', variant: 'success' },\n    }),\n})\n\nconst SongRequestDialog = ({ currentUser, onSubmit, settings }) => {\n  const [open, setOpen] = useState(false)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n  const classes = useStyles()\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmit = (values) => {\n    onSubmit(values)\n\n    if (settings.notifications.enabled.forSongs) {\n      emailer(\n        {\n          student_name: `${currentUser.firstName} ${currentUser.lastName}`,\n          email: settings.notifications.email,\n          song_title: values.title,\n          song_artist: values.artist,\n        },\n        'song'\n      )\n    }\n\n    setOpen(false)\n  }\n\n  const getSongRequestPurchaseAmount = () =>\n    settings.prime.enabled && currentUser.hasPrime\n      ? (1 - settings.prime.songRequestPurchaseDiscount / 100) *\n        settings.songRequestPurchaseAmount\n      : settings.songRequestPurchaseAmount\n\n  return (\n    <>\n      <Fab color='primary' onClick={handleClickOpen} variant='extended'>\n        <QueueMusic className={classes.icon} />\n        Buy a song\n      </Fab>\n      <Dialog\n        classes={{\n          paper: classes.dialog,\n        }}\n        fullScreen={fullScreen}\n        open={open}\n        onClose={handleClose}\n      >\n        <Typography variant='h3' align='center' color='secondary' gutterBottom>\n          Purchase a Song\n        </Typography>\n        <Typography variant='body1' gutterBottom>\n          Please provide the song and artist title for your request. If\n          approved, {getSongRequestPurchaseAmount()} points will be charged to\n          your account.\n        </Typography>\n        <Formik\n          initialValues={{\n            artist: '',\n            title: '',\n          }}\n          validationSchema={Yup.object({\n            artist: Yup.string().required('Required'),\n            title: Yup.string().required('Required'),\n          })}\n          onSubmit={async (values) => {\n            handleSubmit(values)\n          }}\n        >\n          <Form>\n            <Grid container spacing={4}>\n              <Grid item xs={12} md={6}>\n                <Field\n                  autoFocus\n                  className={classes.input}\n                  color='primary'\n                  component={TextField}\n                  InputLabelProps={{\n                    classes: {\n                      root: classes.inputLabel,\n                    },\n                  }}\n                  label='Song Title'\n                  name='title'\n                  type='text'\n                  variant='filled'\n                  fullWidth\n                />\n              </Grid>\n              <Grid item xs={12} md={6}>\n                <Field\n                  className={classes.input}\n                  color='primary'\n                  component={TextField}\n                  InputLabelProps={{\n                    classes: {\n                      root: classes.inputLabel,\n                    },\n                  }}\n                  label='Artist'\n                  name='artist'\n                  type='text'\n                  variant='filled'\n                  fullWidth\n                />\n              </Grid>\n              <Grid item xs={12}>\n                <Button\n                  className={classes.button}\n                  color='primary'\n                  type='submit'\n                  variant='contained'\n                >\n                  Buy\n                </Button>\n                <Button\n                  className={classes.button}\n                  onClick={handleClose}\n                  variant='contained'\n                >\n                  Cancel\n                </Button>\n              </Grid>\n            </Grid>\n          </Form>\n        </Formik>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SongRequestDialog)\n","import React, { useState, useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport moment from 'moment'\nimport {\n  Checkbox,\n  Grid,\n  FormControlLabel,\n  Paper,\n  Tooltip,\n  makeStyles,\n} from '@material-ui/core'\nimport MaterialTable from 'material-table'\nimport { InfoOutlined } from '@material-ui/icons'\n\nimport JukeboxDialog from '../Jukebox/JukeboxDialog'\nimport PageHeader from '../PageHeader'\nimport SongRequestDialog from './SongRequestDialog'\nimport agent from '../../agent'\n\nimport {\n  SONGS_PAGE_UNLOADED,\n  STUDENT_SONGS_PAGE_LOADED,\n  SUBMIT_SONG_REMOVAL_REQUEST,\n} from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  icon: {\n    marginLeft: theme.spacing(1),\n  },\n  paper: {\n    paddingLeft: theme.spacing(2),\n    marginBottom: theme.spacing(4),\n  },\n  status: {\n    alignItems: 'center',\n    display: 'flex',\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.songs,\n  currentUser: state.common.currentUser,\n  settings: state.common.settings,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onDelete: (song) =>\n    dispatch({\n      type: SUBMIT_SONG_REMOVAL_REQUEST,\n      payload: agent.Songs.update(song),\n      snackbar: {\n        message: 'Song removal request submitted',\n        variant: 'success',\n      },\n    }),\n  onLoad: () =>\n    dispatch({\n      type: STUDENT_SONGS_PAGE_LOADED,\n      payload: agent.Songs.forStudent(),\n    }),\n  onUnload: () => dispatch({ type: SONGS_PAGE_UNLOADED }),\n})\n\nconst StudentSongs = ({\n  course,\n  courseSongs,\n  currentUser,\n  onDelete,\n  onLoad,\n  onUnload,\n  settings,\n  userSongs,\n}) => {\n  const [mySongsOnly, setMySongsOnly] = useState(true)\n  const [data, setData] = useState([])\n  const [columns, setColumns] = useState([])\n\n  const classes = useStyles()\n\n  const allowDelete =\n    (settings.songRemovalRequestEnabled &&\n      (!settings.prime.enabled || !settings.prime.songRemovalEnabled)) ||\n    (settings.prime.enabled &&\n      settings.prime.songRemovalEnabled &&\n      currentUser.hasPrime)\n\n  const handleMySongsOnlyClick = (event) => {\n    setMySongsOnly(event.target.checked)\n  }\n\n  const getColumns = () => [\n    {\n      title: 'Request Date',\n      field: 'createdAt',\n      editable: 'never',\n      render: (rowData, renderType) =>\n        renderType === 'row'\n          ? rowData.createdAt.format('ddd, MMM D, YYYY')\n          : rowData.format('ddd, MMM D, YYYY'),\n    },\n    { title: 'Song Title', field: 'title' },\n    { title: 'Song Artist', field: 'artist' },\n    ...(!mySongsOnly\n      ? [\n          {\n            title: 'Purchased by',\n            field: 'purchasedBy',\n            editable: 'never',\n          },\n        ]\n      : []),\n    {\n      title: 'Status',\n      field: 'status',\n      lookup: {\n        approved: 'approved',\n        pendingApproval: 'pending approval',\n        pendingRemoval: 'pending removal',\n        rejected: 'rejected',\n        removed: 'removed',\n      },\n      render: (rowData, renderType) =>\n        renderType === 'row' ? (\n          <span style={{ alignItems: 'center', display: 'flex' }}>\n            {rowData.statusDescription ? (\n              <>\n                {rowData.status}\n                <Tooltip\n                  arrow\n                  color='primary'\n                  enterTouchDelay={0}\n                  title={rowData.statusDescription}\n                >\n                  <InfoOutlined style={{ marginLeft: '8px' }} />\n                </Tooltip>\n              </>\n            ) : (\n              rowData.status\n            )}\n          </span>\n        ) : (\n          <span>{rowData}</span>\n        ),\n    },\n  ]\n\n  const getMappedData = (source) =>\n    source.map((song) => ({\n      createdAt: moment(song.createdAt),\n      title: song.title,\n      artist: song.artist,\n      purchasedBy: `${song.student.firstName} ${song.student.lastName}`,\n      status: song.status,\n      statusDescription: song.statusDescription,\n      _id: song._id,\n    }))\n\n  useEffect(() => {\n    onLoad()\n\n    return () => {\n      return onUnload()\n    }\n  }, [])\n\n  useEffect(() => {\n    setColumns(getColumns())\n    setData(getMappedData(mySongsOnly ? userSongs : courseSongs))\n  }, [courseSongs, mySongsOnly, userSongs])\n\n  return (\n    <>\n      <PageHeader\n        title={\n          'Songs for ' +\n          (mySongsOnly ? currentUser.firstName : 'Period ' + course.period)\n        }\n      >\n        <JukeboxDialog />\n        <SongRequestDialog />\n      </PageHeader>\n\n      <Paper className={classes.paper}>\n        <Grid container spacing={2} className={classes.grid}>\n          <Grid item xs={12} className={classes.grid}>\n            <FormControlLabel\n              control={\n                <Checkbox\n                  checked={mySongsOnly}\n                  onChange={handleMySongsOnlyClick}\n                  name='mySongsOnly'\n                />\n              }\n              label='show only my songs'\n            />\n          </Grid>\n        </Grid>\n      </Paper>\n\n      <MaterialTable\n        title='Class Playlist'\n        columns={columns}\n        data={data}\n        localization={{\n          body: {\n            deleteTooltip: allowDelete\n              ? 'Delete song'\n              : 'Delete song (Requires Prime Membership)',\n            emptyDataSourceMessage:\n              'No songs have been added to this class playlist',\n            editRow: {\n              deleteText: `Delete this song for ${settings.songRemovalPurchaseAmount} points?`,\n              saveTooltip: 'Delete song',\n            },\n          },\n        }}\n        options={{ actionsColumnIndex: -1, paging: false, toolbar: false }}\n        editable={{\n          isDeletable: (rowData) =>\n            rowData.status === 'approved' && allowDelete,\n          isDeleteHidden: () => !settings.songRemovalRequestEnabled,\n          onRowDelete: (song) =>\n            new Promise((resolve) => {\n              onDelete({\n                id: song._id,\n                status: 'pending removal',\n                statusDescription: '',\n              })\n              resolve()\n            }),\n        }}\n      />\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StudentSongs)\n","import React, { useEffect, useState } from 'react'\nimport MaterialTable from 'material-table'\nimport { Chip } from '@material-ui/core'\n\nimport Points from '../Points'\nimport PrimeBadge from '../Prime/PrimeBadge'\n\nconst EconomySummaryTable = ({ accounts, settings }) => {\n  const [data, setData] = useState([])\n\n  const mappedData = accounts.map((account) => ({\n    accountTotal: account.totals.account,\n    assessmentTotal: account.totals.assessments,\n    bonusTotal: account.totals.bonuses,\n    course: account.course,\n    firstName: account.firstName,\n    hasPrime: account.hasPrime,\n    id: account.id,\n    lastName: account.lastName,\n    period: account.period,\n    purchaseTotal: account.totals.purchases,\n    songTotal: account.totals.songs,\n    passTotal: account.totals.passes,\n    jukeboxTotal: account.totals.jukebox,\n  }))\n\n  const [columns] = useState([\n    { title: 'First Name', field: 'firstName' },\n    { title: 'Last Name', field: 'lastName' },\n    {\n      title: 'Prime',\n      field: 'hasPrime',\n      hidden: !settings.prime.enabled,\n      render: (rowData, renderType) =>\n        renderType === 'row' ? (\n          rowData.hasPrime ? (\n            <PrimeBadge />\n          ) : (\n            ''\n          )\n        ) : rowData ? (\n          <PrimeBadge />\n        ) : (\n          'No Prime'\n        ),\n    },\n    {\n      title: 'Period',\n      field: 'period',\n      render: (rowData, renderType) =>\n        renderType === 'row' ? (\n          <Chip label={rowData.period} color='secondary' />\n        ) : (\n          <Chip label={rowData} color='secondary' />\n        ),\n    },\n    {\n      title: 'Account Total',\n      field: 'accountTotal',\n      render: (rowData, renderType) =>\n        renderType === 'row' ? (\n          <Points suffix=' ' value={rowData.accountTotal} />\n        ) : (\n          <Points value={rowData} />\n        ),\n    },\n    {\n      title: 'Hallpass Total',\n      field: 'passTotal',\n      hidden: !settings.hallpass.enabled,\n    },\n    {\n      title: 'Song Total',\n      field: 'songTotal',\n      hidden: !settings.songRequestEnabled,\n    },\n    {\n      title: 'Jukebox Total',\n      field: 'jukeboxTotal',\n      hidden: !settings.jukebox.enabled || !settings.enableBetaFeatures,\n    },\n    {\n      title: 'Assessment Total',\n      field: 'assessmentTotal',\n      render: (rowData, renderType) =>\n        renderType === 'row' ? (\n          <Points suffix=' ' value={rowData.assessmentTotal} />\n        ) : (\n          <Points value={rowData} />\n        ),\n    },\n    {\n      title: 'Bonus Total',\n      field: 'bonusTotal',\n      render: (rowData, renderType) =>\n        renderType === 'row' ? (\n          <Points suffix=' ' value={rowData.bonusTotal} />\n        ) : (\n          <Points value={rowData} />\n        ),\n    },\n    {\n      title: 'Purchase Total',\n      field: 'purchaseTotal',\n      hidden: !settings.storeEnabled,\n      render: (rowData, renderType) =>\n        renderType === 'row' ? (\n          <Points suffix=' ' value={rowData.purchaseTotal} />\n        ) : (\n          <Points value={rowData} />\n        ),\n    },\n  ])\n\n  useEffect(() => {\n    setData(mappedData)\n  }, [accounts])\n\n  return (\n    <MaterialTable\n      columns={columns}\n      data={data}\n      options={{ grouping: true, paging: false, toolbar: false }}\n      style={{ boxShadow: 'none' }}\n      title='Account Summary'\n    />\n  )\n}\n\nexport default EconomySummaryTable\n","import React from 'react'\nimport { NumericFormat } from 'react-number-format'\nimport {\n  Avatar,\n  Card,\n  CardContent,\n  Grid,\n  Typography,\n  makeStyles,\n} from '@material-ui/core'\n\nconst useStyles = makeStyles((theme) => ({\n  statAvatar: {\n    backgroundColor: theme.palette.primary.main,\n    height: theme.spacing(6),\n    marginBottom: theme.spacing(2),\n    width: theme.spacing(6),\n  },\n  statCard: {\n    alignItems: 'center',\n    display: 'flex',\n    flexFlow: 'column nowrap',\n    justifyContent: 'center',\n  },\n}))\n\nconst StatCard = ({\n  children,\n  icon,\n  lg,\n  md,\n  percent,\n  precision,\n  round,\n  title,\n  value,\n  xs,\n}) => {\n  const classes = useStyles()\n\n  const getRounded = (value, precision) => {\n    const multiplier = Math.pow(10, precision || 0)\n    return Math.round(value * multiplier) / multiplier\n  }\n\n  return (\n    <Grid item xs={xs || 12} md={md || 6} lg={lg || 4}>\n      <Card variant='outlined'>\n        <CardContent className={classes.statCard}>\n          <Avatar className={classes.statAvatar}>{icon}</Avatar>\n          <Typography variant='h5'>{title}</Typography>\n          <Typography color='secondary' variant='h6'>\n            <NumericFormat\n              displayType='text'\n              thousandSeparator={true}\n              value={round ? getRounded(value, precision) : value}\n            />\n            {percent && '%'}\n          </Typography>\n          <Typography color='secondary' variant='h6'>\n            {children}\n          </Typography>\n        </CardContent>\n      </Card>\n    </Grid>\n  )\n}\n\nexport default StatCard\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Container,\n  Dialog,\n  Grid,\n  Paper,\n  Typography,\n} from '@material-ui/core'\nimport { Alert, AlertTitle } from '@material-ui/lab'\nimport {\n  AccountBalance,\n  Assignment,\n  Gavel,\n  Group,\n  Money,\n  MusicNote,\n  Person,\n  ShoppingCart,\n  Wc,\n} from '@material-ui/icons'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faFlask } from '@fortawesome/free-solid-svg-icons'\nimport { faTurntable } from '@fortawesome/pro-solid-svg-icons'\n\nimport DialogAppBar from '../DialogAppBar'\nimport EconomySummaryTable from './EconomySummaryTable'\nimport ListErrors from '../ListErrors'\nimport PageHeader from '../PageHeader'\nimport PageWrapper from '../PageWrapper'\nimport Spinner from '../Spinner'\nimport StatCard from '../StatCard'\nimport { SlideUpTransition } from '../../transitions'\n\nimport agent from '../../agent'\n\nimport {\n  ECONOMY_DIALOG_LOADED,\n  ECONOMY_DIALOG_UNLOADED,\n} from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  ...state.economy,\n  settings: state.common.settings,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onLoad: () =>\n    dispatch({\n      type: ECONOMY_DIALOG_LOADED,\n      payload: agent.Scores.getAll(),\n    }),\n  onUnload: () =>\n    dispatch({\n      type: ECONOMY_DIALOG_UNLOADED,\n    }),\n})\n\nconst Dashboard = ({ data, settings }) => (\n  <Grid container spacing={3}>\n    <StatCard\n      icon={<Assignment fontSize='large' />}\n      title='Assessments'\n      value={data.reduce(\n        (prev, cur) => prev + (cur.totals.assessments || 0),\n        0\n      )}\n      round\n    />\n    <StatCard\n      icon={<Money fontSize='large' />}\n      title='Bonuses'\n      value={data.reduce((prev, cur) => prev + (cur.totals.bonuses || 0), 0)}\n      round\n    />\n    {settings.fines.enabled && (\n      <StatCard\n        icon={<Gavel fontSize='large' />}\n        title='Fines'\n        value={data.reduce((prev, cur) => prev + (cur.totals.fines || 0), 0)}\n        round\n      />\n    )}\n    {settings.hallpass.enabled && (\n      <StatCard\n        icon={<Wc fontSize='large' />}\n        title='Hallpasses'\n        value={data.reduce((prev, cur) => prev + cur.totals.passes, 0)}\n        round\n      />\n    )}\n    {settings.jukebox.enabled && settings.enableBetaFeatures && (\n      <StatCard\n        icon={<FontAwesomeIcon icon={faTurntable} size='lg' />}\n        title='Jukebox Requests'\n        value={data.reduce((prev, cur) => prev + cur.totals.jukebox, 0)}\n        round\n      />\n    )}\n    <StatCard\n      icon={<AccountBalance fontSize='large' />}\n      title='Points'\n      value={data.reduce((prev, cur) => prev + (cur.totals.account || 0), 0)}\n      round\n    />\n    {settings.prime.enabled && (\n      <StatCard\n        icon={<FontAwesomeIcon icon={faFlask} size='lg' />}\n        title='Prime Memberships'\n        value={data.reduce((prev, cur) => prev + cur.hasPrime, 0)}\n        round\n      />\n    )}\n    {settings.storeEnabled && (\n      <StatCard\n        icon={<ShoppingCart fontSize='large' />}\n        title='Purchases'\n        value={data.reduce(\n          (prev, cur) => prev + (cur.totals.purchases || 0),\n          0\n        )}\n        round\n      />\n    )}\n    <StatCard\n      icon={<Group fontSize='large' />}\n      title='Students'\n      value={data.length}\n      round\n    />\n    {settings.songRequestEnabled && (\n      <StatCard\n        icon={<MusicNote fontSize='large' />}\n        title='Song Requests'\n        value={data.reduce((prev, cur) => prev + cur.totals.songs, 0)}\n        round\n      />\n    )}\n    <StatCard icon={<Person fontSize='large' />} title='Top Student' round>\n      {data[0]?.firstName} {data[0]?.lastName}\n    </StatCard>\n    <Grid item xs={12}>\n      <Paper elevation={3} style={{ padding: '16px', overflow: 'scroll' }}>\n        <Typography gutterBottom variant='h6'>\n          Account Summary\n        </Typography>\n        <EconomySummaryTable accounts={data} settings={settings} />\n      </Paper>\n    </Grid>\n  </Grid>\n)\n\nconst EconomyDialog = ({\n  errors,\n  inProgress,\n  onLoad,\n  onUnload,\n  settings,\n  students,\n}) => {\n  const [data, setData] = useState([])\n  const [open, setOpen] = useState(false)\n\n  const handleClickOpen = () => {\n    setOpen(true)\n    onLoad()\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n    onUnload()\n  }\n\n  useEffect(() => {\n    setData(students.sort((a, b) => b.totals.account - a.totals.account))\n  }, [students])\n\n  return (\n    <>\n      <Button onClick={handleClickOpen} size='small'>\n        View Economy\n      </Button>\n\n      <Dialog\n        fullScreen\n        open={open}\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onFocus={(ev) => ev.stopPropagation()}\n        TransitionComponent={SlideUpTransition}\n      >\n        <DialogAppBar onClose={handleClose} title='Accounts' />\n        <PageWrapper>\n          <Container>\n            <PageHeader title='Economy View' />\n            <ListErrors errors={errors} />\n            {inProgress ? (\n              <Spinner message='Computing...' />\n            ) : data.length > 0 ? (\n              <Dashboard data={data} settings={settings} />\n            ) : (\n              <Alert severity='info'>\n                <AlertTitle>No data available</AlertTitle>\n                You must create at least one course, add students to that\n                course, and add bonuses, purchases, or scores before any data\n                will be visible here\n              </Alert>\n            )}\n          </Container>\n        </PageWrapper>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EconomyDialog)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Paper, TextField, makeStyles } from '@material-ui/core'\nimport { Autocomplete } from '@material-ui/lab'\nimport parse from 'autosuggest-highlight/parse'\nimport match from 'autosuggest-highlight/match'\n\nimport agent from '../../agent'\n\nimport {\n  STUDENT_SEARCH_LOADED,\n  STUDENT_SEARCH_UNLOADED,\n} from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  search: {\n    padding: theme.spacing(2),\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  courses: state.courses.courses,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onLoad: () =>\n    dispatch({ type: STUDENT_SEARCH_LOADED, payload: agent.Courses.getAll() }),\n  onUnload: () => dispatch({ type: STUDENT_SEARCH_UNLOADED }),\n})\n\nconst StudentSearch = ({ courses, onChange, onLoad, onUnload }) => {\n  const [mappedData, setMappedData] = useState([])\n\n  const classes = useStyles()\n\n  useEffect(() => {\n    onLoad()\n\n    return () => {\n      onUnload()\n    }\n  }, [])\n\n  useEffect(() => {\n    const mapped = courses\n      .map((course) =>\n        course.students.map((student) => ({\n          ...student,\n          course: course.name,\n          period: course.period,\n          name: `${student.firstName} ${student.lastName}`,\n        }))\n      )\n      .flat()\n    setMappedData(mapped)\n  }, [courses])\n\n  return (\n    <Paper className={classes.search}>\n      <Autocomplete\n        autoHighlight\n        getOptionLabel={(option) => option.name}\n        groupBy={(option) => `Period ${option.period} | ${option.course}`}\n        noOptionsText='No students have been added'\n        onChange={(ev, value) => onChange(value)}\n        options={mappedData}\n        renderInput={(params) => (\n          <TextField\n            {...params}\n            label='Student'\n            placeholder='Type or select a name'\n          />\n        )}\n        renderOption={(option, { inputValue }) => {\n          const matches = match(option.name, inputValue)\n          const parts = parse(option.name, matches)\n\n          return (\n            <div>\n              {parts.map((part, index) => (\n                <span\n                  key={index}\n                  style={{ fontWeight: part.highlight ? 700 : 400 }}\n                >\n                  {part.text}\n                </span>\n              ))}\n            </div>\n          )\n        }}\n      />\n    </Paper>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StudentSearch)\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Typography, makeStyles } from '@material-ui/core'\nimport { Alert } from '@material-ui/lab'\n\nconst useStyles = makeStyles((theme) => ({\n  courses: {\n    '& div': {\n      'backgroundColor': theme.palette.background.default,\n      'boxShadow': theme.shadows[4],\n      'cursor': 'pointer',\n      'marginBottom': theme.spacing(1),\n      'padding': `${theme.spacing(3)}px ${theme.spacing(4)}px`,\n      'transition': 'all 0.15s ease-in-out',\n      '&:focus, &:hover': {\n        backgroundColor: theme.palette.primary.light,\n        boxShadow: theme.shadows[1],\n      },\n    },\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  courses: state.courses.courses,\n})\n\nconst CourseSelector = ({ courses, onSelect }) => {\n  const classes = useStyles()\n\n  return (\n    <div>\n      <Typography gutterBottom variant='h6'>\n        Select a course\n      </Typography>\n      {courses.length > 0 ? (\n        <div className={classes.courses}>\n          {courses.map((course) => (\n            <div\n              key={course.slug}\n              onClick={() => {\n                onSelect(course)\n              }}\n              tabIndex='0'\n            >\n              <Typography variant='body1'>\n                <b>{course.name}</b> &middot; Period {course.period}\n              </Typography>\n            </div>\n          ))}\n        </div>\n      ) : (\n        <Alert severity='info'>\n          You must create a course before continuing\n        </Alert>\n      )}\n    </div>\n  )\n}\n\nexport default connect(mapStateToProps, () => ({}))(CourseSelector)\n","import React, { useEffect, useState } from 'react'\nimport MaterialTable from 'material-table'\n\nimport PrimeBadge from '../Prime/PrimeBadge'\n\nconst StudentsTable = ({ course, onSelect, primeEnabled }) => {\n  const [data, setData] = useState([])\n  const [sort, setSort] = useState('last')\n\n  const getNextSort = () => (sort === 'last' ? 'first' : 'last')\n\n  const handleSortButtonClick = () => setSort(getNextSort())\n\n  const mappedData = course.students\n    .filter((student) => !student.dropped)\n    .map((student) => ({\n      username: student.username,\n      firstName: student.firstName,\n      lastName: student.lastName,\n      hasPrime: student.hasPrime,\n      fullName:\n        sort === 'last'\n          ? `${student.lastName}, ${student.firstName}`\n          : `${student.firstName} ${student.lastName}`,\n      role: student.role,\n      _id: student._id,\n    }))\n    .sort((a, b) => a[`${sort}Name`].localeCompare(b[`${sort}Name`]))\n\n  const [columns, setColumns] = useState([\n    { title: 'Students', field: 'fullName' },\n  ])\n\n  useEffect(() => {\n    if (primeEnabled) {\n      setColumns([\n        ...columns,\n        {\n          title: 'Prime',\n          field: 'hasPrime',\n          render: (rowData) => (rowData.hasPrime ? <PrimeBadge /> : ''),\n        },\n      ])\n    }\n  }, [primeEnabled])\n\n  useEffect(() => {\n    setData(mappedData)\n  }, [course, sort])\n\n  return (\n    <MaterialTable\n      columns={columns}\n      data={data}\n      localization={{\n        body: {\n          emptyDataSourceMessage: 'No students found for this course',\n        },\n        toolbar: {\n          nRowsSelected: '{0} student(s) selected',\n        },\n      }}\n      onSelectionChange={(rows) => onSelect(rows)}\n      options={{ paging: false, selection: true, toolbar: true }}\n      title={`${course.name} | Period ${course.period}`}\n      actions={[\n        {\n          icon: 'sort',\n          tooltip: `Sort by ${getNextSort()} name`,\n          isFreeAction: true,\n          onClick: () => handleSortButtonClick(),\n        },\n      ]}\n    />\n  )\n}\n\nexport default StudentsTable\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Form, Field } from 'formik'\nimport { TextField } from 'formik-material-ui'\nimport * as Yup from 'yup'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Grid,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\n\nimport BonusSelector from './BonusSelector'\nimport CourseSelector from './CourseSelector'\nimport FineSelector from '../Fines/FineSelector'\nimport ListErrors from '../ListErrors'\nimport ProductSelector from '../Products/ProductSelector'\nimport StudentsTable from './StudentsTable'\nimport agent from '../../agent'\n\nimport {\n  ADD_TRANSACTIONS,\n  TRANSACTIONS_DIALOG_UNLOADED,\n} from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  dialog: {\n    '& > .MuiDialog-container > .MuiPaper-root': {\n      [theme.breakpoints.up('lg')]: {\n        width: theme.spacing(80),\n      },\n    },\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.scores,\n  bonuses: state.bonuses.bonuses,\n  fines: state.fines.fines,\n  primeEnabled: state.common.settings.prime.enabled,\n  taxRate: state.common.settings.taxRate,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onAdd: (transactions, curStudent) =>\n    dispatch({\n      type: ADD_TRANSACTIONS,\n      payload: agent.Transactions.addMany(transactions),\n      curStudent,\n      snackbar: {\n        message: `${transactions.typeTitle} added`,\n        variant: 'success',\n      },\n    }),\n  onExit: () => dispatch({ type: TRANSACTIONS_DIALOG_UNLOADED }),\n})\n\nconst BulkTransactionsDialog = ({\n  bonuses,\n  curStudent,\n  errors,\n  fines,\n  inProgress,\n  isClosed,\n  isOpen,\n  onAdd,\n  onExit,\n  primeEnabled,\n  taxRate,\n  type,\n}) => {\n  const [open, setOpen] = useState(false)\n  const [course, setCourse] = useState(null)\n  const [students, setStudents] = useState([])\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n  const classes = useStyles()\n\n  const getCost = (amt) => Math.round(amt * (taxRate / 100 + 1))\n\n  const handleClose = () => {\n    setOpen(false)\n    setCourse(null)\n    isClosed()\n  }\n\n  const handleSubmitAdd = (values) => {\n    onAdd(\n      {\n        ...values,\n        students: students.map((student) => student._id),\n        type:\n          type === 'Bonuses' ? 'bonus' : type === 'Fines' ? 'fine' : 'purchase',\n        typeTitle: type,\n      },\n      curStudent\n    )\n  }\n\n  const handleCourseSelect = (slug) => {\n    setCourse(slug)\n  }\n\n  const handleStudentSelect = (rows) => {\n    setStudents(rows)\n  }\n\n  useEffect(() => {\n    // Close the dialog only if there are no errors\n    if (!inProgress && !errors) handleClose()\n  }, [inProgress])\n\n  // Allow for external component control of displaying the dialog\n  useEffect(() => {\n    setOpen(isOpen)\n  }, [isOpen])\n\n  return (\n    <Dialog\n      className={classes.dialog}\n      fullScreen={fullScreen}\n      onClick={(ev) => ev.stopPropagation()}\n      onClose={handleClose}\n      onExit={onExit}\n      onFocus={(ev) => ev.stopPropagation()}\n      open={open}\n    >\n      <Formik\n        initialValues={{\n          amount: '',\n          description: '',\n          productId: '',\n        }}\n        validationSchema={Yup.object({\n          amount: Yup.number().typeError('Numbers only').required('Required'),\n          description: Yup.string().required('Required'),\n          productId: Yup.string(),\n        })}\n        onSubmit={async (values) => {\n          handleSubmitAdd(values)\n        }}\n      >\n        {(formik) => (\n          <Form>\n            <DialogTitle>Add {type}</DialogTitle>\n            <DialogContent>\n              <ListErrors errors={errors} />\n              {!course && <CourseSelector onSelect={handleCourseSelect} />}\n              {course && (\n                <Grid container spacing={2}>\n                  <Grid item xs={12} md={6}>\n                    {type === 'Bonuses' ? (\n                      <BonusSelector\n                        bonuses={bonuses}\n                        onChange={(bonus) => {\n                          if (typeof bonus === 'string') {\n                            formik.setFieldValue('description', bonus)\n                          } else if (bonus && typeof bonus === 'object') {\n                            formik.setFieldValue('amount', bonus.amount)\n                            formik.setFieldValue(\n                              'description',\n                              bonus.description\n                            )\n                          } else {\n                            formik.setFieldValue('amount', '')\n                            formik.setFieldValue('description', '')\n                          }\n                        }}\n                      />\n                    ) : type === 'Fines' ? (\n                      <FineSelector\n                        fines={fines}\n                        onChange={(fine) => {\n                          if (typeof fine === 'string') {\n                            formik.setFieldValue('description', fine)\n                          } else if (fine && typeof fine === 'object') {\n                            formik.setFieldValue('amount', fine.amount)\n                            formik.setFieldValue(\n                              'description',\n                              fine.description\n                            )\n                          } else {\n                            formik.setFieldValue('amount', '')\n                            formik.setFieldValue('description', '')\n                          }\n                        }}\n                      />\n                    ) : (\n                      <ProductSelector\n                        onChange={(product) => {\n                          if (typeof product === 'string') {\n                            formik.setFieldValue('description', product)\n                          } else if (product && typeof product === 'object') {\n                            formik.setFieldValue(\n                              'amount',\n                              getCost(product.cost)\n                            )\n                            formik.setFieldValue('description', product.name)\n                            formik.setFieldValue('productId', product._id)\n                          } else {\n                            formik.setFieldValue('amount', '')\n                            formik.setFieldValue('description', '')\n                          }\n                        }}\n                      />\n                    )}\n                  </Grid>\n                  <Grid item xs={12} md={6}>\n                    <Field\n                      color='primary'\n                      component={TextField}\n                      disabled={inProgress}\n                      label='Amount'\n                      name='amount'\n                      type='text'\n                      fullWidth\n                    />\n                  </Grid>\n                  <Grid item xs={12}>\n                    <StudentsTable\n                      course={course}\n                      onSelect={handleStudentSelect}\n                      primeEnabled={primeEnabled}\n                    />\n                  </Grid>\n                </Grid>\n              )}\n            </DialogContent>\n            <DialogActions>\n              <Button\n                disabled={inProgress || students.length === 0}\n                color='primary'\n                type='submit'\n                variant='contained'\n              >\n                {inProgress ? 'Adding...' : 'Add'}\n              </Button>\n              <Button\n                disabled={inProgress}\n                onClick={handleClose}\n                variant='contained'\n              >\n                Cancel\n              </Button>\n            </DialogActions>\n          </Form>\n        )}\n      </Formik>\n    </Dialog>\n  )\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(BulkTransactionsDialog)\n","import React, { useCallback } from 'react'\nimport { useDropzone } from 'react-dropzone'\nimport parse from 'csv-parse/lib/sync'\nimport { Typography, makeStyles } from '@material-ui/core'\n\nconst useStyles = makeStyles((theme) => ({\n  filedrop: {\n    alignItems: 'center',\n    backgroundColor: theme.palette.grey[300],\n    borderRadius: theme.spacing(1),\n    color: theme.palette.grey[600],\n    display: 'flex',\n    flexDirection: 'column',\n    outline: 'none',\n    padding: '20px',\n    transition: 'all 0.25s ease-in-out',\n  },\n  filedropActive: {\n    backgroundColor: theme.palette.primary.light,\n    color: theme.palette.primary.contrastText,\n  },\n  filedropReject: {\n    backgroundColor: theme.palette.secondary.light,\n    color: theme.palette.secondary.contrastText,\n  },\n}))\n\nfunction Filedrop({ onFiledrop }) {\n  const classes = useStyles()\n\n  const onDrop = useCallback((acceptedFiles) => {\n    // Due to {multiple: false} in useDropzone(), only one file will be received\n    acceptedFiles.forEach((file) => {\n      const reader = new FileReader()\n      reader.onabort = () => console.log('file reading was aborted')\n      reader.onerror = () => console.log('file reading has failed')\n      reader.onload = () => {\n        const parsedFile = parse(reader.result, {\n          columns: true,\n          relax_column_count: true,\n          skip_empty_lines: true,\n        })\n        onFiledrop(parsedFile)\n      }\n      reader.readAsBinaryString(file)\n    })\n  }, [])\n\n  const { getRootProps, getInputProps, isDragActive, isDragReject } =\n    useDropzone({\n      accept: 'text/csv, text/plain',\n      multiple: false,\n      onDropAccepted: onDrop,\n    })\n\n  return (\n    <div\n      {...getRootProps({\n        className: `${classes.filedrop} ${\n          isDragActive ? classes.filedropActive : ''\n        } ${isDragReject ? classes.filedropReject : ''}`,\n      })}\n    >\n      <input {...getInputProps()} />\n      {!isDragActive && (\n        <Typography>\n          Drop a .csv file here or click to select a .csv file\n        </Typography>\n      )}\n      {isDragActive && !isDragReject && (\n        <Typography>Drop .csv file here</Typography>\n      )}\n      {isDragReject && <Typography>File type not accepted</Typography>}\n    </div>\n  )\n}\n\nexport default Filedrop\n","import { parseFullName } from 'parse-full-name'\n\nconst parser = {\n  // Clark County School District (CCSD) - Las Vegas, NV\n  // Gradebook Software: Infinite Campus\n  ccsd: {\n    // Parser for importing student scores from a CCSD Infinite Campus gradebook export csv file\n    scores: (data) => {\n      // Get student usernames (student numbers)\n      const usernames = data.file\n        .map(\n          (student, index) =>\n            index > 1 && student['Assignment Name'].split('#').pop()\n        )\n        .filter((username) => username !== false)\n\n      // Prepare data to send to server\n      const parsed = { course: data.course, tasks: [] }\n      for (const taskName in data.tasks) {\n        const selected = data.tasks[taskName]\n        if (selected) {\n          const task = {\n            title: taskName,\n            totalPoints: data.file[1][taskName],\n            scores: {},\n          }\n\n          for (const username of usernames) {\n            const student = data.file.find((row) =>\n              row['Assignment Name'].endsWith(username)\n            )\n            if (student) task.scores[username] = student[taskName]\n          }\n\n          parsed.tasks.push(task)\n        }\n      }\n\n      return parsed\n    },\n\n    // Parser for creating student accounts from a CCSD Infinite Campus gradebook export csv file\n    students: (file, password) => {\n      const column = Object.keys(file[0])\n      return file\n        .map((row, index) => {\n          if (index < 2) return null\n          const student = row[column[0]]\n          const user = {\n            firstName: parseFullName(student).first,\n            lastName: parseFullName(student).last,\n            username: student.split('#')[1],\n            password,\n            role: 'student',\n          }\n          return user\n        })\n        .filter((element) => element !== null)\n    },\n  },\n\n  // Evergreen School District - Vancouver, WA\n  // Gradebook Software: Skyward\n  evergreen: {\n    // Parser for importing student scores from an Evergreen Skyward gradebook export csv file\n    // @todo: implement this parser once gradebook file is received\n    scores: (data) => {\n      alert(\n        '[Parser Unavailable] Please email a copy of your gradebook export file to Dr. May so he can setup a parser in the app'\n      )\n    },\n\n    // Parser for creating student accounts from an Evergreen Skyward gradebook export csv file\n    students: (file, password) => {\n      const column = Object.keys(file[0])\n      return file\n        .map((row, index) => {\n          if (index < 4) return null\n          const student = parseFullName(row[column[0]])\n          const studentNumber = row[column[1]]\n          const user = {\n            firstName: student.first,\n            lastName: student.last,\n            username: `u${studentNumber.replace(/^0+/, '')}`,\n            password,\n            role: 'student',\n          }\n          return user\n        })\n        .filter((element) => element !== null)\n    },\n  },\n\n  // Lehi School District - Lehi, UT\n  // Gradebook Software: Skyward\n  lehi: {\n    // Parser for importing student scores from a Lehi Skyward gradebook export csv file\n    // @todo: implement this parser once gradebook file is received\n    scores: (data) => {\n      alert(\n        '[Parser Unavailable] Please email a copy of your gradebook export file to Dr. May so he can setup a parser in the app'\n      )\n    },\n\n    // Parser for creating student accounts from a Lehi Skyward gradebook export csv file\n    students: (file, password) => {\n      const column = Object.keys(file[0])\n      return file\n        .map((row, index) => {\n          if (index < 4) return null\n          const student = parseFullName(row[column[2]])\n          const studentNumber = row[column[1]]\n          const user = {\n            firstName: student.first,\n            lastName: student.last,\n            username: `red${studentNumber.replace(/^0+/, '')}`,\n            password,\n            role: 'student',\n          }\n          return user\n        })\n        .filter((element) => element !== null)\n    },\n  },\n}\n\nexport default parser\n","export const SUPPORTED_SCHOOLS = {\n  SCORES: ['ccsd'],\n  STUDENTS: ['ccsd', 'evergreen', 'lehi'],\n}\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Checkbox,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  FormControl,\n  FormControlLabel,\n  FormGroup,\n  Link,\n  Typography,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\n\nimport CourseSelector from './CourseSelector'\nimport Filedrop from '../Filedrop'\nimport ListErrors from '../ListErrors'\nimport Spinner from '../Spinner'\nimport agent from '../../agent'\nimport parser from '../../parsers'\n\nimport {\n  IMPORT_SCORES,\n  IMPORT_SCORES_DIALOG_UNLOADED,\n} from '../../constants/actionTypes'\nimport { SUPPORTED_SCHOOLS } from '../../constants/support'\n\nconst useStyles = makeStyles((theme) => ({\n  dialog: {\n    '& > .MuiDialog-container > .MuiPaper-root': {\n      [theme.breakpoints.up('lg')]: {\n        width: theme.spacing(100),\n      },\n    },\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.common.settings,\n  ...state.scores,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onImport: (data, curStudent) =>\n    dispatch({\n      type: IMPORT_SCORES,\n      payload: agent.Scores.import(data),\n      curStudent,\n      snackbar: { message: 'Scores imported', variant: 'success' },\n    }),\n  onExit: () => dispatch({ type: IMPORT_SCORES_DIALOG_UNLOADED }),\n})\n\nconst ScoreImportStepper = ({ onDataChange, onShowImport }) => {\n  const [file, setFile] = useState(null)\n  const [course, setCourse] = useState(null)\n  const [tasks, setTasks] = useState(null)\n\n  const handleCourseSelect = (course) => {\n    setCourse(course)\n  }\n\n  const handleFiledrop = (file) => {\n    const tasks = {}\n    Object.keys(file[0])\n      .slice(1)\n      .forEach((task) => {\n        tasks[task] = false\n      })\n    setFile(file)\n    setTasks(tasks)\n  }\n\n  const handleTaskChange = (ev) => {\n    setTasks({ ...tasks, [ev.target.name]: ev.target.checked })\n  }\n\n  // Determine if any tasks have been checked/selected\n  useEffect(() => {\n    const tasksSelected = tasks\n      ? Object.values(tasks).some((el) => el === true)\n      : false\n    onShowImport(tasksSelected)\n  }, [tasks])\n\n  // Keep the imported data object current\n  useEffect(() => {\n    onDataChange({ file, course, tasks })\n  }, [file, course, tasks])\n\n  return (\n    <>\n      {!file && !course && !tasks && (\n        <CourseSelector onSelect={handleCourseSelect} />\n      )}\n\n      {!file && course && !tasks && (\n        <div>\n          <Typography gutterBottom>\n            Scores must be imported from a .csv file exported from your\n            gradebook software\n          </Typography>\n          <Filedrop onFiledrop={handleFiledrop} />\n        </div>\n      )}\n\n      {file &&\n        course &&\n        tasks && ( // @todo: use material-table here?\n          <FormControl component='fieldset'>\n            <Typography gutterBottom variant='body1'>\n              Select the assignments to import\n            </Typography>\n            <FormGroup>\n              {Object.keys(tasks).map((task) => (\n                <FormControlLabel\n                  control={\n                    <Checkbox\n                      checked={tasks[task]}\n                      onChange={handleTaskChange}\n                      name={task}\n                    />\n                  }\n                  key={task}\n                  label={task}\n                />\n              ))}\n            </FormGroup>\n          </FormControl>\n        )}\n    </>\n  )\n}\n\nconst ImportScoresDialog = ({\n  curStudent,\n  errors,\n  inProgress,\n  isClosed,\n  isOpen,\n  onExit,\n  onImport,\n  schoolDistrict,\n}) => {\n  const [open, setOpen] = useState(false)\n  const [ready, setReady] = useState(false)\n  const [data, setData] = useState(null)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n  const classes = useStyles()\n\n  const handleClose = () => {\n    setOpen(false)\n    isClosed()\n  }\n\n  const handleDataChange = (importData) => {\n    setData(importData)\n  }\n\n  const handleShowImport = (selected) => {\n    setReady(selected)\n  }\n\n  const handleClickImport = () => {\n    const parsed = parser[schoolDistrict].scores(data)\n    onImport(parsed, curStudent)\n  }\n\n  useEffect(() => {\n    // Close the dialog only if there are no errors\n    if (!inProgress && !errors) handleClose()\n  }, [inProgress])\n\n  // Allow for external component control of displaying the dialog\n  useEffect(() => {\n    setOpen(isOpen)\n  }, [isOpen])\n\n  return (\n    <Dialog\n      className={classes.dialog}\n      fullScreen={fullScreen}\n      onClick={(ev) => ev.stopPropagation()}\n      onClose={handleClose}\n      onExit={onExit}\n      onFocus={(ev) => ev.stopPropagation()}\n      open={open}\n    >\n      <DialogTitle>Import Scores</DialogTitle>\n      {SUPPORTED_SCHOOLS.SCORES.includes(schoolDistrict) ? (\n        <DialogContent>\n          <ListErrors errors={errors} />\n          {inProgress ? (\n            <Spinner message='Importing...' />\n          ) : (\n            <ScoreImportStepper\n              onDataChange={handleDataChange}\n              onShowImport={handleShowImport}\n            />\n          )}\n        </DialogContent>\n      ) : (\n        <DialogContent>\n          {schoolDistrict === 'none' ? (\n            <Typography>\n              You must select a <em>School District</em> in the{' '}\n              <em>Account Details</em> section of the <em>Settings</em> page to\n              use the import feature\n            </Typography>\n          ) : (\n            <Typography>\n              Please email a copy of your gradebook export file to{' '}\n              <Link href='mailto:support@chem.cash'>support@chem.cash</Link> to\n              enable this feature\n            </Typography>\n          )}\n        </DialogContent>\n      )}\n      <DialogActions>\n        <Button\n          color='primary'\n          disabled={!ready || inProgress}\n          onClick={handleClickImport}\n          variant='contained'\n        >\n          {inProgress ? 'Importing...' : 'Import'}\n        </Button>\n        <Button disabled={inProgress} onClick={handleClose} variant='contained'>\n          Cancel\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ImportScoresDialog)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\n\nimport MaterialTable from 'material-table'\nimport agent from '../../agent'\n\nimport {\n  ADD_BONUS,\n  DELETE_BONUS,\n  UPDATE_BONUS,\n} from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  ...state.bonuses,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onAdd: (bonus) =>\n    dispatch({\n      payload: agent.Bonuses.add(bonus),\n      snackbar: { message: 'Bonus added', variant: 'success' },\n      type: ADD_BONUS,\n    }),\n  onDelete: (bonus) =>\n    dispatch({\n      payload: agent.Bonuses.delete(bonus),\n      snackbar: { message: 'Bonus deleted', variant: 'success' },\n      type: DELETE_BONUS,\n    }),\n  onUpdate: (bonus) =>\n    dispatch({\n      payload: agent.Bonuses.update(bonus),\n      snackbar: { message: 'Bonus updated', variant: 'success' },\n      type: UPDATE_BONUS,\n    }),\n})\n\nconst ManageBonusesTable = ({ bonuses, onAdd, onDelete, onUpdate }) => {\n  const [data, setData] = useState([])\n\n  const [columns] = useState([\n    { title: 'Description', field: 'description' },\n    { title: 'Amount', field: 'amount' },\n  ])\n\n  useEffect(() => {\n    setData(bonuses)\n  }, [bonuses])\n\n  return (\n    <MaterialTable\n      title='Bonuses'\n      columns={columns}\n      data={data}\n      localization={{\n        body: {\n          emptyDataSourceMessage: 'No bonuses have been added',\n          editRow: {\n            deleteText: 'Delete this bonus?',\n          },\n        },\n      }}\n      options={{\n        actionsColumnIndex: -1,\n        addRowPosition: 'first',\n        paging: false,\n      }}\n      editable={{\n        onRowAdd: (bonus) =>\n          new Promise((resolve) => {\n            onAdd(bonus)\n            resolve()\n          }),\n        onRowUpdate: (bonus) =>\n          new Promise((resolve) => {\n            onUpdate(bonus)\n            resolve()\n          }),\n        onRowDelete: (bonus) =>\n          new Promise((resolve) => {\n            onDelete(bonus)\n            resolve()\n          }),\n      }}\n    />\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ManageBonusesTable)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\n\nimport ListErrors from '../ListErrors'\nimport ManageBonusesTable from './ManageBonusesTable'\nimport agent from '../../agent'\n\nimport { LOAD_BONUSES, UNLOAD_BONUSES } from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  dialog: {\n    '& > .MuiDialog-container > .MuiPaper-root': {\n      [theme.breakpoints.up('lg')]: {\n        width: theme.spacing(100),\n      },\n    },\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.bonuses,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onLoad: () =>\n    dispatch({\n      type: LOAD_BONUSES,\n      payload: agent.Bonuses.getAll(),\n    }),\n  onUnload: () => dispatch({ type: UNLOAD_BONUSES }),\n})\n\nconst ManageBonusesDialog = ({ errors, isOpen, onClose, onLoad, onUnload }) => {\n  const [open, setOpen] = useState(false)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n  const classes = useStyles()\n\n  const handleClose = () => {\n    setOpen(false)\n    onClose()\n  }\n\n  useEffect(() => {\n    onLoad()\n\n    return () => {\n      onUnload()\n    }\n  }, [])\n\n  // Allow for external component control of displaying the dialog\n  useEffect(() => {\n    setOpen(isOpen)\n  }, [isOpen])\n\n  return (\n    <Dialog\n      className={classes.dialog}\n      fullScreen={fullScreen}\n      onClick={(ev) => ev.stopPropagation()}\n      onClose={handleClose}\n      onFocus={(ev) => ev.stopPropagation()}\n      open={open}\n    >\n      <DialogTitle>Manage Bonuses</DialogTitle>\n      <DialogContent>\n        <ListErrors errors={errors} />\n        <ManageBonusesTable />\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={handleClose} variant='contained'>\n          Close\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ManageBonusesDialog)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\n\nimport MaterialTable from 'material-table'\nimport agent from '../../agent'\n\nimport { ADD_FINE, DELETE_FINE, UPDATE_FINE } from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  ...state.fines,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onAdd: (fine) =>\n    dispatch({\n      payload: agent.Fines.add(fine),\n      snackbar: { message: 'Fine added', variant: 'success' },\n      type: ADD_FINE,\n    }),\n  onDelete: (fine) =>\n    dispatch({\n      payload: agent.Fines.delete(fine),\n      snackbar: { message: 'Fine deleted', variant: 'success' },\n      type: DELETE_FINE,\n    }),\n  onUpdate: (fine) =>\n    dispatch({\n      payload: agent.Fines.update(fine),\n      snackbar: { message: 'Fine updated', variant: 'success' },\n      type: UPDATE_FINE,\n    }),\n})\n\nconst ManageFinesTable = ({ fines, onAdd, onDelete, onUpdate }) => {\n  const [data, setData] = useState([])\n\n  const [columns] = useState([\n    { title: 'Description', field: 'description' },\n    { title: 'Amount', field: 'amount' },\n  ])\n\n  useEffect(() => {\n    setData(fines)\n  }, [fines])\n\n  return (\n    <MaterialTable\n      title='Fines'\n      columns={columns}\n      data={data}\n      localization={{\n        body: {\n          emptyDataSourceMessage: 'No fines have been added',\n          editRow: {\n            deleteText: 'Delete this fine?',\n          },\n        },\n      }}\n      options={{\n        actionsColumnIndex: -1,\n        addRowPosition: 'first',\n        paging: false,\n      }}\n      editable={{\n        onRowAdd: (fine) =>\n          new Promise((resolve) => {\n            onAdd(fine)\n            resolve()\n          }),\n        onRowUpdate: (fine) =>\n          new Promise((resolve) => {\n            onUpdate(fine)\n            resolve()\n          }),\n        onRowDelete: (fine) =>\n          new Promise((resolve) => {\n            onDelete(fine)\n            resolve()\n          }),\n      }}\n    />\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ManageFinesTable)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\n\nimport ListErrors from '../ListErrors'\nimport ManageFinesTable from './ManageFinesTable'\nimport agent from '../../agent'\n\nimport { LOAD_FINES, UNLOAD_FINES } from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  dialog: {\n    '& > .MuiDialog-container > .MuiPaper-root': {\n      [theme.breakpoints.up('lg')]: {\n        width: theme.spacing(100),\n      },\n    },\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.fines,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onLoad: () =>\n    dispatch({\n      type: LOAD_FINES,\n      payload: agent.Fines.getAll(),\n    }),\n  onUnload: () => dispatch({ type: UNLOAD_FINES }),\n})\n\nconst ManageFinesDialog = ({ errors, isOpen, onClose, onLoad, onUnload }) => {\n  const [open, setOpen] = useState(false)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n  const classes = useStyles()\n\n  const handleClose = () => {\n    setOpen(false)\n    onClose()\n  }\n\n  useEffect(() => {\n    onLoad()\n\n    return () => {\n      onUnload()\n    }\n  }, [])\n\n  // Allow for external component control of displaying the dialog\n  useEffect(() => {\n    setOpen(isOpen)\n  }, [isOpen])\n\n  return (\n    <Dialog\n      className={classes.dialog}\n      fullScreen={fullScreen}\n      onClick={(ev) => ev.stopPropagation()}\n      onClose={handleClose}\n      onFocus={(ev) => ev.stopPropagation()}\n      open={open}\n    >\n      <DialogTitle>Manage Fines</DialogTitle>\n      <DialogContent>\n        <ListErrors errors={errors} />\n        <ManageFinesTable />\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={handleClose} variant='contained'>\n          Close\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ManageFinesDialog)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport MaterialTable from 'material-table'\nimport moment from 'moment'\nimport { titleCase } from 'title-case'\nimport {\n  Avatar,\n  Chip,\n  ExpansionPanel,\n  ExpansionPanelDetails,\n  ExpansionPanelSummary,\n  Typography,\n  makeStyles,\n} from '@material-ui/core'\nimport { AlarmOn, AlarmOff, ExpandMore } from '@material-ui/icons'\n\nimport PrimeBadge from '../Prime/PrimeBadge'\n\nimport { DELETE_PASS, UPDATE_PASS } from '../../constants/actionTypes'\nimport agent from '../../agent'\n\nconst useStyles = makeStyles((theme) => ({\n  active: {\n    backgroundColor: theme.palette.primary.main,\n    marginRight: theme.spacing(2),\n  },\n  expired: {\n    backgroundColor: theme.palette.secondary.main,\n    marginRight: theme.spacing(2),\n  },\n  summary: {\n    display: 'flex',\n    alignItems: 'center',\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  // ...state,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onDelete: (id) =>\n    dispatch({\n      type: DELETE_PASS,\n      payload: agent.Passes.delete(id),\n      snackbar: { message: 'Hallpass deleted', variant: 'success' },\n    }),\n  onUpdate: (pass) =>\n    dispatch({\n      type: UPDATE_PASS,\n      payload: agent.Passes.update(pass),\n      snackbar: { message: 'Hallpass updated', variant: 'success' },\n    }),\n})\n\nconst PassTable = ({\n  courses,\n  expanded,\n  icon,\n  onChange,\n  onDelete,\n  onUpdate,\n  status,\n}) => {\n  const classes = useStyles()\n\n  const [data, setData] = useState([])\n\n  const mappedData = courses\n    .map((course) =>\n      course.passes.map((pass) => ({\n        createdAt: moment(pass.createdAt),\n        createdAtString: pass.createdAt,\n        createdBy: pass.createdBy,\n        destination: pass.destination,\n        duration: pass.duration,\n        hasPrime: pass.student.hasPrime,\n        period: course.period,\n        status:\n          moment.duration(moment().diff(moment(pass.createdAt))).as('minutes') >\n          pass.duration\n            ? 'expired'\n            : 'active',\n        student: `${pass.student.firstName} ${pass.student.lastName} ${\n          pass.student.dropped ? '(dropped)' : ''\n        }`,\n        _id: pass._id,\n      }))\n    )\n    .flat()\n\n  const [columns] = useState([\n    {\n      title: 'Date',\n      field: 'createdAt',\n      editable: 'never',\n      render: (rowData, renderType) =>\n        renderType === 'row'\n          ? rowData.createdAt.format('ddd, MMM D, YYYY')\n          : rowData.format('ddd, MMM D, YYYY'),\n    },\n    {\n      title: 'Time',\n      field: 'createdAt',\n      editable: 'never',\n      render: (rowData, renderType) =>\n        renderType === 'row'\n          ? rowData.createdAt.format('h:mm A')\n          : rowData.format('h:mm A'),\n    },\n    { title: 'Student', field: 'student', editable: 'never' },\n    {\n      title: 'Prime',\n      field: 'hasPrime',\n      editable: 'never',\n      render: (rowData, renderType) =>\n        renderType === 'row' ? (\n          rowData.hasPrime ? (\n            <PrimeBadge />\n          ) : (\n            ''\n          )\n        ) : rowData ? (\n          <PrimeBadge />\n        ) : (\n          'No Prime'\n        ),\n    },\n    {\n      title: 'Period',\n      field: 'period',\n      editable: 'never',\n      render: (rowData, renderType) =>\n        renderType === 'row' ? (\n          <Chip label={rowData.period} color='secondary' />\n        ) : (\n          <Chip label={rowData} color='secondary' />\n        ),\n    },\n    { title: 'Destination', field: 'destination' },\n    { title: 'Duration (min)', field: 'duration' },\n    { title: 'Created by', field: 'createdBy' },\n  ])\n\n  useEffect(() => {\n    setData(mappedData)\n  }, [courses])\n\n  return (\n    <ExpansionPanel expanded={expanded === status} onChange={onChange(status)}>\n      <ExpansionPanelSummary expandIcon={<ExpandMore />}>\n        <div className={classes.summary}>\n          <Avatar className={classes[status]}>{icon}</Avatar>\n          <Typography variant='h5'>{titleCase(status)} Hallpasses</Typography>\n        </div>\n      </ExpansionPanelSummary>\n      <ExpansionPanelDetails>\n        <MaterialTable\n          columns={columns}\n          data={data.filter((pass) => pass.status === status)}\n          editable={{\n            onRowDelete: (oldData) =>\n              new Promise((resolve, reject) => {\n                const dataDelete = [...data]\n                const index = oldData.tableData.id\n                dataDelete.splice(index, 1)\n                setData([...dataDelete])\n                onDelete(oldData._id)\n                resolve()\n              }),\n            onRowUpdate: (newData, oldData) =>\n              new Promise((resolve, reject) => {\n                const dataUpdate = [...data]\n                const index = oldData.tableData.id\n                dataUpdate[index] = {\n                  ...newData,\n                  createdAt: moment(newData.createdAtString),\n                }\n                setData([...dataUpdate])\n                onUpdate(newData)\n                resolve()\n              }),\n          }}\n          localization={{\n            body: {\n              emptyDataSourceMessage:\n                status === 'active'\n                  ? 'No active passes at this time'\n                  : 'No hallpasses have been created',\n              editRow: {\n                deleteText: `Delete ${status} hallpass?`,\n              },\n            },\n          }}\n          options={{\n            actionsColumnIndex: -1,\n            grouping: status !== 'active',\n            paging: false,\n            showTitle: false,\n            toolbar: status !== 'active',\n          }}\n          style={{\n            boxShadow: 'none',\n            width: '100%',\n          }}\n        />\n      </ExpansionPanelDetails>\n    </ExpansionPanel>\n  )\n}\n\nconst ManagePassesTable = ({ courses, onDelete, onUpdate }) => {\n  const [expanded, setExpanded] = useState('active')\n\n  const handleExpandedChange = (panel) => (ev, isExpanded) => {\n    setExpanded(isExpanded ? panel : false)\n  }\n\n  return (\n    <>\n      <PassTable\n        courses={courses}\n        expanded={expanded}\n        icon={<AlarmOn />}\n        onChange={handleExpandedChange}\n        onDelete={onDelete}\n        onUpdate={onUpdate}\n        status='active'\n      />\n      <PassTable\n        courses={courses}\n        expanded={expanded}\n        icon={<AlarmOff />}\n        onChange={handleExpandedChange}\n        onDelete={onDelete}\n        onUpdate={onUpdate}\n        status='expired'\n      />\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ManagePassesTable)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Container, Dialog } from '@material-ui/core'\n\nimport DialogAppBar from '../DialogAppBar'\nimport ListErrors from '../ListErrors'\nimport ManagePassesTable from './ManagePassesTable'\nimport PageHeader from '../PageHeader'\nimport PageWrapper from '../PageWrapper'\nimport Spinner from '../Spinner'\nimport { SlideUpTransition } from '../../transitions'\n\nimport agent from '../../agent'\n\nimport {\n  LOAD_TEACHER_PASSES,\n  UNLOAD_MANAGE_PASSES,\n} from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  ...state.passes,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onLoad: () =>\n    dispatch({ type: LOAD_TEACHER_PASSES, payload: agent.Passes.getAll() }),\n  onUnload: () => dispatch({ type: UNLOAD_MANAGE_PASSES }),\n})\n\nconst ManagePassesDialog = ({\n  courses,\n  errors,\n  inProgress,\n  isOpen,\n  onClose,\n  onLoad,\n  onUnload,\n}) => {\n  const [open, setOpen] = useState(false)\n\n  const handleOpen = () => {\n    setOpen(true)\n    onLoad()\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n    onUnload()\n    onClose()\n  }\n\n  // Allow for external component control of displaying the dialog\n  useEffect(() => {\n    if (isOpen) handleOpen()\n  }, [isOpen])\n\n  return (\n    <Dialog\n      fullScreen\n      open={open}\n      onClick={(ev) => ev.stopPropagation()}\n      onClose={handleClose}\n      onFocus={(ev) => ev.stopPropagation()}\n      TransitionComponent={SlideUpTransition}\n    >\n      <DialogAppBar onClose={handleClose} title='Accounts' />\n      <PageWrapper>\n        <Container>\n          <PageHeader title='Manage Hallpasses' />\n          <ListErrors errors={errors} />\n          {inProgress ? (\n            <Spinner message='Loading...' />\n          ) : (\n            <ManagePassesTable courses={courses} />\n          )}\n        </Container>\n      </PageWrapper>\n    </Dialog>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ManagePassesDialog)\n","import React, { useState } from 'react'\nimport {\n  Divider,\n  Fab,\n  ListItemIcon,\n  ListItemText,\n  Menu,\n  MenuItem,\n  makeStyles,\n} from '@material-ui/core'\nimport {\n  ConfirmationNumber,\n  Gavel,\n  Grade,\n  LocalActivity,\n  Money,\n  Publish,\n  ShoppingCart,\n  Wc,\n} from '@material-ui/icons'\n\nimport BulkTransactionsDialog from './BulkTransactionsDialog'\nimport ImportScoresDialog from './ImportScoresDialog'\nimport ManageBonusesDialog from './ManageBonusesDialog'\nimport ManageFinesDialog from '../Fines/ManageFinesDialog'\nimport ManagePassesDialog from '../Passes/ManagePassesDialog'\n\nconst useStyles = makeStyles((theme) => ({\n  icon: {\n    marginRight: theme.spacing(1),\n  },\n}))\n\nconst UpdateAccountsMenu = ({ curStudent, settings }) => {\n  const [menuAnchorEl, setMenuAnchorEl] = useState(null)\n  const [menuSelection, setMenuSelection] = useState(null)\n\n  const classes = useStyles()\n\n  const handleMenuOpen = (ev) => {\n    setMenuAnchorEl(ev.currentTarget)\n  }\n\n  const handleMenuClose = () => {\n    setMenuAnchorEl(null)\n  }\n\n  const handleMenuSelect = (ev) => {\n    setMenuSelection(ev.currentTarget.dataset.type)\n    setMenuAnchorEl(null)\n  }\n\n  const handleDialogClose = () => {\n    setMenuSelection(null)\n  }\n\n  return (\n    <>\n      <Fab color='primary' onClick={handleMenuOpen} variant='extended'>\n        <Money className={classes.icon} />\n        Update Accounts\n      </Fab>\n      <Menu\n        anchorEl={menuAnchorEl}\n        open={Boolean(menuAnchorEl)}\n        onClose={handleMenuClose}\n      >\n        <MenuItem data-type='scores' onClick={handleMenuSelect}>\n          <ListItemIcon>\n            <Publish />\n          </ListItemIcon>\n          <ListItemText>Import scores</ListItemText>\n        </MenuItem>\n        <MenuItem data-type='bonuses' onClick={handleMenuSelect}>\n          <ListItemIcon>\n            <Grade />\n          </ListItemIcon>\n          <ListItemText>Add Bonuses</ListItemText>\n        </MenuItem>\n        {settings.fines.enabled && (\n          <MenuItem data-type='fines' onClick={handleMenuSelect}>\n            <ListItemIcon>\n              <Gavel />\n            </ListItemIcon>\n            <ListItemText>Add Fines</ListItemText>\n          </MenuItem>\n        )}\n        <MenuItem data-type='purchases' onClick={handleMenuSelect}>\n          <ListItemIcon>\n            <ShoppingCart />\n          </ListItemIcon>\n          <ListItemText>Add Purchases</ListItemText>\n        </MenuItem>\n        <Divider />\n        <MenuItem data-type='manageBonuses' onClick={handleMenuSelect}>\n          <ListItemIcon>\n            <LocalActivity />\n          </ListItemIcon>\n          <ListItemText>Manage Bonuses</ListItemText>\n        </MenuItem>\n        {settings.fines.enabled && (\n          <MenuItem data-type='manageFines' onClick={handleMenuSelect}>\n            <ListItemIcon>\n              <ConfirmationNumber />\n            </ListItemIcon>\n            <ListItemText>Manage Fines</ListItemText>\n          </MenuItem>\n        )}\n        {settings.hallpass.enabled && (\n          <MenuItem data-type='managePasses' onClick={handleMenuSelect}>\n            <ListItemIcon>\n              <Wc />\n            </ListItemIcon>\n            <ListItemText>Manage Hallpasses</ListItemText>\n          </MenuItem>\n        )}\n      </Menu>\n      <ImportScoresDialog\n        curStudent={curStudent}\n        isClosed={handleDialogClose}\n        isOpen={menuSelection === 'scores'}\n      />\n      <BulkTransactionsDialog\n        curStudent={curStudent}\n        isClosed={handleDialogClose}\n        isOpen={menuSelection === 'bonuses'}\n        type='Bonuses'\n      />\n      <BulkTransactionsDialog\n        curStudent={curStudent}\n        isClosed={handleDialogClose}\n        isOpen={menuSelection === 'fines'}\n        type='Fines'\n      />\n      <BulkTransactionsDialog\n        curStudent={curStudent}\n        isClosed={handleDialogClose}\n        isOpen={menuSelection === 'purchases'}\n        type='Purchases'\n      />\n      <ManageBonusesDialog\n        isOpen={menuSelection === 'manageBonuses'}\n        onClose={handleDialogClose}\n      />\n      <ManageFinesDialog\n        isOpen={menuSelection === 'manageFines'}\n        onClose={handleDialogClose}\n      />\n      <ManagePassesDialog\n        isOpen={menuSelection === 'managePasses'}\n        onClose={handleDialogClose}\n      />\n    </>\n  )\n}\n\nexport default UpdateAccountsMenu\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Grid } from '@material-ui/core'\n\nimport AccountView from '../AccountView'\nimport Alert from '../Alert'\nimport EconomyDialog from './EconomyDialog'\nimport PageHeader from '../PageHeader'\nimport StudentSearch from './StudentSearch'\nimport UpdateAccountsMenu from './UpdateAccountsMenu'\n\nimport { ACCOUNTS_PAGE_UNLOADED } from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  importSummary: state.scores.importSummary,\n  settings: state.common.settings,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onUnload: () => dispatch({ type: ACCOUNTS_PAGE_UNLOADED }),\n})\n\nconst TeacherAccounts = ({ importSummary, onUnload, settings }) => {\n  const [student, setStudent] = useState(null)\n\n  const plural = (qty, unit) => `${qty} ${unit}${qty !== 1 ? 's' : ''}`\n\n  const handleStudentSelect = (student) => {\n    setStudent(student)\n  }\n\n  useEffect(() => {\n    return () => {\n      onUnload()\n    }\n  }, [])\n\n  return (\n    <>\n      <PageHeader title='Manage Accounts'>\n        <EconomyDialog />\n        <UpdateAccountsMenu curStudent={student} settings={settings} />\n      </PageHeader>\n\n      {importSummary && (\n        <Alert>\n          Created {plural(importSummary.tasksCreated, 'assignment')}, imported{' '}\n          {plural(importSummary.scoresImported, 'score')}, and updated{' '}\n          {plural(importSummary.scoresUpdated, 'score')}\n        </Alert>\n      )}\n\n      <Grid container spacing={4}>\n        <Grid item xs={12}>\n          <StudentSearch onChange={handleStudentSelect} />\n        </Grid>\n        <Grid item xs={12}>\n          {student && <AccountView student={student} />}\n        </Grid>\n      </Grid>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TeacherAccounts)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Form, Field } from 'formik'\nimport { TextField } from 'formik-material-ui'\nimport * as Yup from 'yup'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Fab,\n  Grid,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport { Add, Edit } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport ListErrors from '../ListErrors'\nimport agent from '../../agent'\n\nimport {\n  ADD_COURSE,\n  COURSE_DIALOG_UNLOADED,\n  UPDATE_COURSE,\n} from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  icon: {\n    marginRight: theme.spacing(1),\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.courses,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onAdd: (course) =>\n    dispatch({\n      type: ADD_COURSE,\n      payload: agent.Courses.add(course),\n      snackbar: { message: 'Course added', variant: 'success' },\n    }),\n  onExit: () => dispatch({ type: COURSE_DIALOG_UNLOADED }),\n  onUpdate: (course) =>\n    dispatch({\n      type: UPDATE_COURSE,\n      payload: agent.Courses.update(course),\n      snackbar: { message: 'Course updated', variant: 'success' },\n    }),\n})\n\nconst CourseDialog = ({\n  course,\n  errors,\n  inProgress,\n  onAdd,\n  onExit,\n  onUpdate,\n}) => {\n  const [open, setOpen] = useState(false)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n  const classes = useStyles()\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmitAdd = (values) => {\n    onAdd({ ...values })\n  }\n\n  const handleSubmitUpdate = (values) => {\n    onUpdate({ ...course, ...values })\n  }\n\n  useEffect(() => {\n    // Close the dialog only if there are no errors\n    if (!inProgress && !errors) setOpen(false)\n  }, [inProgress])\n\n  return (\n    <>\n      {course ? (\n        <ActionButton action='Edit course' onClick={handleClickOpen}>\n          <Edit />\n        </ActionButton>\n      ) : (\n        <Fab color='primary' onClick={handleClickOpen} variant='extended'>\n          <Add className={classes.icon} />\n          Create course\n        </Fab>\n      )}\n\n      <Dialog\n        fullScreen={fullScreen}\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onExit={onExit}\n        onFocus={(ev) => ev.stopPropagation()}\n        open={open}\n      >\n        <Formik\n          initialValues={{\n            name: course?.name || '',\n            period: course?.period || '',\n          }}\n          validationSchema={Yup.object({\n            name: Yup.string().required('Required'),\n            period: Yup.number().typeError('Numbers only').required('Required'),\n          })}\n          onSubmit={async (values) => {\n            course ? handleSubmitUpdate(values) : handleSubmitAdd(values)\n          }}\n        >\n          {(formik) => (\n            <Form>\n              <DialogTitle>\n                {course ? 'Edit Course' : 'Create Course'}\n              </DialogTitle>\n              <DialogContent>\n                <ListErrors errors={errors} />\n                <Grid container spacing={2}>\n                  <Grid item xs={12} md={6}>\n                    <Field\n                      autoFocus={course ? false : true}\n                      color='primary'\n                      component={TextField}\n                      disabled={inProgress}\n                      label='Course Name'\n                      name='name'\n                      type='text'\n                      fullWidth\n                    />\n                  </Grid>\n                  <Grid item xs={12} md={6}>\n                    <Field\n                      color='primary'\n                      component={TextField}\n                      disabled={inProgress}\n                      label='Period'\n                      name='period'\n                      type='text'\n                      fullWidth\n                    />\n                  </Grid>\n                </Grid>\n              </DialogContent>\n              <DialogActions>\n                <Button\n                  disabled={inProgress || !(formik.isValid && formik.dirty)}\n                  color='primary'\n                  type='submit'\n                  variant='contained'\n                >\n                  {course\n                    ? inProgress\n                      ? 'Updating...'\n                      : 'Update'\n                    : inProgress\n                    ? 'Adding...'\n                    : 'Add'}\n                </Button>\n                <Button\n                  disabled={inProgress}\n                  onClick={handleClose}\n                  variant='contained'\n                >\n                  Cancel\n                </Button>\n              </DialogActions>\n            </Form>\n          )}\n        </Formik>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CourseDialog)\n","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n} from '@material-ui/core'\nimport { Delete } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport agent from '../../agent'\n\nimport { DELETE_STUDENT } from '../../constants/actionTypes'\n\nconst mapDispatchToProps = (dispatch) => ({\n  onDelete: (user) =>\n    dispatch({\n      type: DELETE_STUDENT,\n      payload: agent.Students.delete(user),\n      snackbar: { message: 'Student deleted', variant: 'success' },\n    }),\n})\n\nconst DeleteStudentAlert = ({ course, onDelete, student }) => {\n  const [open, setOpen] = useState(false)\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmit = () => {\n    setOpen(false)\n    onDelete(student)\n  }\n\n  return (\n    <>\n      <ActionButton\n        action='Delete student'\n        onClick={handleClickOpen}\n        size='small'\n      >\n        <Delete fontSize='inherit' />\n      </ActionButton>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        onClick={(ev) => ev.stopPropagation()}\n        onFocus={(ev) => ev.stopPropagation()}\n      >\n        <DialogTitle>Delete Student</DialogTitle>\n        <DialogContent>\n          <DialogContentText component='div'>\n            Are you sure you want to delete{' '}\n            <b>\n              {student.firstName} {student.lastName}\n            </b>\n            ? This action will permanently delete:\n            <ul>\n              <li>the student's account, and</li>\n              <li>all song requests</li>\n              <li>all transactions</li>\n              <li>all hallpasses</li>\n              <li>all purchases</li>\n              <li>all scores</li>\n            </ul>\n            associated with this student. This action <b>cannot be undone</b>.\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button\n            onClick={handleSubmit}\n            color='secondary'\n            variant='contained'\n            autoFocus\n          >\n            Delete\n          </Button>\n          <Button onClick={handleClose} variant='contained'>\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(() => ({}), mapDispatchToProps)(DeleteStudentAlert)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Form, Field } from 'formik'\nimport { Switch, TextField } from 'formik-material-ui'\nimport * as Yup from 'yup'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Grid,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport { Edit, PersonAdd } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport ListErrors from '../ListErrors'\nimport agent from '../../agent'\n\nimport {\n  ADD_STUDENT,\n  STUDENT_DIALOG_UNLOADED,\n  UPDATE_STUDENT,\n} from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  ...state.common.settings,\n  ...state.courses,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onAdd: (user, courseId) =>\n    dispatch({\n      type: ADD_STUDENT,\n      payload: agent.Students.add(user, courseId),\n      courseId,\n      snackbar: { message: 'Student added', variant: 'success' },\n    }),\n  onExit: () => dispatch({ type: STUDENT_DIALOG_UNLOADED }),\n  onUpdate: (user, courseId) =>\n    dispatch({\n      type: UPDATE_STUDENT,\n      payload: agent.Students.update(user),\n      courseId,\n      snackbar: { message: 'Student updated', variant: 'success' },\n    }),\n})\n\nconst StudentDialog = ({\n  course,\n  defaultStudentPassword,\n  errors,\n  inProgress,\n  onAdd,\n  onExit,\n  onUpdate,\n  prime,\n  student,\n}) => {\n  const [open, setOpen] = useState(false)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmitAdd = (values) => {\n    const user = { ...values }\n    const courseId = course._id\n    user.role = 'student'\n    onAdd(user, courseId)\n  }\n\n  const handleSubmitUpdate = (values) => {\n    const user = { ...student, ...values }\n    const courseId = course._id\n    onUpdate(user, courseId)\n  }\n\n  useEffect(() => {\n    // Close the dialog only if there are no errors\n    if (!inProgress && !errors) setOpen(false)\n  }, [inProgress])\n\n  return (\n    <>\n      {student ? (\n        <ActionButton\n          action='Edit student'\n          onClick={handleClickOpen}\n          size='small'\n        >\n          <Edit fontSize='inherit' />\n        </ActionButton>\n      ) : (\n        <ActionButton action='Add student' onClick={handleClickOpen}>\n          <PersonAdd />\n        </ActionButton>\n      )}\n\n      <Dialog\n        fullScreen={fullScreen}\n        maxWidth='md'\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onExit={onExit}\n        onFocus={(ev) => ev.stopPropagation()}\n        open={open}\n      >\n        <Formik\n          initialValues={{\n            firstName: student?.firstName || '',\n            lastName: student?.lastName || '',\n            username: student?.username || '',\n            password: !student ? defaultStudentPassword : '',\n            dropped: student?.dropped || false,\n            hasPrime: student?.hasPrime || false,\n          }}\n          validationSchema={Yup.object({\n            firstName: Yup.string().required('Required'),\n            lastName: Yup.string().required('Required'),\n            username: Yup.number()\n              .typeError('Numbers only')\n              .required('Required'),\n            password: Yup.string().required(!student ? 'Required' : ''),\n            dropped: Yup.boolean(),\n            hasPrime: Yup.boolean(),\n          })}\n          onSubmit={async (values) => {\n            student ? handleSubmitUpdate(values) : handleSubmitAdd(values)\n          }}\n        >\n          {(formik) => (\n            <Form>\n              <DialogTitle>\n                {student ? 'Edit Student' : 'Add Student'}\n              </DialogTitle>\n              <DialogContent>\n                <ListErrors errors={errors} />\n                <Grid container spacing={2}>\n                  <Grid item xs={12} md={6}>\n                    <Field\n                      autoFocus={student ? false : true}\n                      color='primary'\n                      component={TextField}\n                      disabled={inProgress}\n                      label='First Name'\n                      name='firstName'\n                      type='text'\n                      fullWidth\n                    />\n                  </Grid>\n                  <Grid item xs={12} md={6}>\n                    <Field\n                      color='primary'\n                      component={TextField}\n                      disabled={inProgress}\n                      label='Last Name'\n                      name='lastName'\n                      type='text'\n                      fullWidth\n                    />\n                  </Grid>\n                  <Grid item xs={12} md={6}>\n                    <Field\n                      color='primary'\n                      component={TextField}\n                      disabled={!!student || inProgress}\n                      label='Username'\n                      name='username'\n                      type='text'\n                      fullWidth\n                    />\n                  </Grid>\n                  <Grid item xs={12} md={6}>\n                    <Field\n                      color='primary'\n                      component={TextField}\n                      disabled={inProgress}\n                      label='Password'\n                      name='password'\n                      type='text'\n                      fullWidth\n                    />\n                  </Grid>\n                  {student && (\n                    <Grid item xs={12} md={6}>\n                      <label>\n                        <Field\n                          component={Switch}\n                          name='dropped'\n                          type='checkbox'\n                        />\n                        Student is{' '}\n                        {formik.values.dropped ? 'dropped' : 'active'}\n                      </label>\n                    </Grid>\n                  )}\n                  {student && prime.enabled && (\n                    <Grid item xs={12} md={6}>\n                      <label>\n                        <Field\n                          component={Switch}\n                          name='hasPrime'\n                          type='checkbox'\n                        />\n                        Prime is{' '}\n                        {formik.values.hasPrime ? 'enabled' : 'disabled'}\n                      </label>\n                    </Grid>\n                  )}\n                </Grid>\n              </DialogContent>\n              <DialogActions>\n                <Button\n                  color='primary'\n                  disabled={inProgress || !(formik.isValid && formik.dirty)}\n                  type='submit'\n                  variant='contained'\n                >\n                  {student\n                    ? inProgress\n                      ? 'Updating...'\n                      : 'Update'\n                    : inProgress\n                    ? 'Adding...'\n                    : 'Add'}\n                </Button>\n                <Button\n                  disabled={inProgress}\n                  onClick={handleClose}\n                  variant='contained'\n                >\n                  Cancel\n                </Button>\n              </DialogActions>\n            </Form>\n          )}\n        </Formik>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StudentDialog)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Form, Field } from 'formik'\nimport { TextField } from 'formik-material-ui'\nimport * as Yup from 'yup'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Grid,\n  MenuItem,\n} from '@material-ui/core'\nimport { Loop } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport ListErrors from '../ListErrors'\nimport agent from '../../agent'\n\nimport { MOVE_STUDENT } from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  ...state.courses,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onSubmit: (courseOut, courseIn) =>\n    dispatch({\n      type: MOVE_STUDENT,\n      payload: Promise.all([\n        agent.Courses.unenroll(courseOut),\n        agent.Courses.enroll(courseIn),\n      ]),\n      snackbar: { message: 'Student moved', variant: 'success' },\n    }),\n})\n\nconst StudentTransferDialog = ({\n  course,\n  courses,\n  errors,\n  inProgress,\n  onSubmit,\n  student,\n}) => {\n  const [open, setOpen] = useState(false)\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmit = (values) => {\n    if (course.slug !== values.course) {\n      const courseOut = { usernames: [student.username], slug: course.slug }\n      const courseIn = { usernames: [student.username], slug: values.course }\n      onSubmit(courseOut, courseIn)\n    }\n  }\n\n  useEffect(() => {\n    // Close the dialog only if there are no errors\n    if (!inProgress && !errors) setOpen(false)\n  }, [inProgress])\n\n  return (\n    <>\n      <ActionButton\n        action='Move student'\n        onClick={handleClickOpen}\n        size='small'\n      >\n        <Loop fontSize='inherit' />\n      </ActionButton>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        onClick={(ev) => ev.stopPropagation()}\n        onFocus={(ev) => ev.stopPropagation()}\n      >\n        <Formik\n          initialValues={{\n            course: course.slug || '',\n          }}\n          validationSchema={Yup.object({\n            course: Yup.string().required('Required'),\n          })}\n          onSubmit={async (values) => {\n            handleSubmit(values)\n          }}\n        >\n          {(formik) => (\n            <Form>\n              <DialogTitle>Move Student</DialogTitle>\n              <DialogContent>\n                <ListErrors errors={errors} />\n                <Grid container spacing={2}>\n                  <Grid item ds={12}>\n                    Move{' '}\n                    <b>\n                      {student.firstName} {student.lastName}\n                    </b>{' '}\n                    to...\n                  </Grid>\n                  <Grid item xs={12}>\n                    <Field\n                      color='primary'\n                      component={TextField}\n                      disabled={inProgress}\n                      id='course'\n                      label='Course'\n                      name='course'\n                      type='select'\n                      select\n                      fullWidth\n                    >\n                      {courses.map((course) => (\n                        <MenuItem key={course.slug} value={course.slug}>\n                          {`Period ${course.period} | ${course.name}`}\n                        </MenuItem>\n                      ))}\n                    </Field>\n                  </Grid>\n                </Grid>\n              </DialogContent>\n              <DialogActions>\n                <Button\n                  color='primary'\n                  disabled={inProgress || formik.values.course === course.slug}\n                  type='submit'\n                  variant='contained'\n                >\n                  {inProgress ? 'Moving...' : 'Move'}\n                </Button>\n                <Button onClick={handleClose} variant='contained'>\n                  Cancel\n                </Button>\n              </DialogActions>\n            </Form>\n          )}\n        </Formik>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(StudentTransferDialog)\n","import React from 'react'\nimport { Chip, Typography, makeStyles } from '@material-ui/core'\n\nimport DeleteStudentAlert from './DeleteStudentAlert'\nimport DroppedChip from '../DroppedChip'\nimport PrimeBadge from '../Prime/PrimeBadge'\nimport ResetStudentPasswordAlert from './ResetStudentPasswordAlert'\nimport StudentDialog from './StudentDialog'\nimport StudentTransferDialog from './StudentTransferDialog'\n\nconst useStyles = makeStyles((theme) => ({\n  row: {\n    'alignItems': 'center',\n    'display': 'flex',\n    'height': theme.spacing(6),\n    'justifyContent': 'space-between',\n    'padding': theme.spacing(1),\n    '&:hover': {\n      backgroundColor: theme.palette.action.hover,\n    },\n  },\n  rowHeader: {\n    alignItems: 'center',\n    display: 'flex',\n  },\n  studentUsername: {\n    marginRight: theme.spacing(2),\n    minWidth: theme.spacing(12),\n  },\n}))\n\nconst StudentListRow = ({ course, student }) => {\n  const classes = useStyles()\n\n  return (\n    <div className={classes.row}>\n      <div className={classes.rowHeader}>\n        <Chip\n          color='primary'\n          label={student.username}\n          className={classes.studentUsername}\n        />\n        <Typography>\n          {student.lastName}, {student.firstName}\n        </Typography>\n        {student.hasPrime && <PrimeBadge />}\n        {student.dropped && <DroppedChip />}\n      </div>\n      <div>\n        <ResetStudentPasswordAlert student={student} />\n        <StudentTransferDialog course={course} student={student} />\n        <StudentDialog course={course} student={student} />\n        <DeleteStudentAlert course={course} student={student} />\n      </div>\n    </div>\n  )\n}\n\nconst CourseStudentList = ({ course }) => {\n  return (\n    <>\n      <Typography variant='h6'>Students</Typography>{' '}\n      {course.students && course.students.length > 0 ? (\n        course.students.map((student) => {\n          return (\n            <StudentListRow\n              key={student._id}\n              course={course}\n              student={student}\n            />\n          )\n        })\n      ) : (\n        <div>\n          <Typography>No students have been added to this course</Typography>\n        </div>\n      )}\n    </>\n  )\n}\n\nexport default CourseStudentList\n","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n} from '@material-ui/core'\nimport { Delete } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport agent from '../../agent'\n\nimport { DELETE_COURSE } from '../../constants/actionTypes'\n\nconst mapDispatchToProps = (dispatch) => ({\n  onDelete: (slug) =>\n    dispatch({\n      type: DELETE_COURSE,\n      payload: agent.Courses.delete(slug),\n      snackbar: { message: 'Course deleted', variant: 'success' },\n    }),\n})\n\nconst DeleteCourseAlert = ({ course, onDelete }) => {\n  const [open, setOpen] = useState(false)\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmit = () => {\n    setOpen(false)\n    onDelete(course.slug)\n  }\n\n  return (\n    <>\n      <ActionButton action='Delete course' onClick={handleClickOpen}>\n        <Delete />\n      </ActionButton>\n\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        onClick={(ev) => ev.stopPropagation()}\n        onFocus={(ev) => ev.stopPropagation()}\n      >\n        <DialogTitle>Delete Course</DialogTitle>\n        <DialogContent>\n          <DialogContentText component='div'>\n            Are you sure you want to delete{' '}\n            <b>\n              {course.name} Period {course.period}\n            </b>\n            ? This action will permanently delete:\n            <ul>\n              <li>all student accounts</li>\n              <li>all song requests</li>\n              <li>all notifications</li>\n              <li>all transactions</li>\n              <li>all hallpasses</li>\n              <li>all purchases</li>\n              <li>all scores</li>\n            </ul>\n            associated with this course. This action <b>cannot be undone</b>.\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button\n            onClick={handleSubmit}\n            color='secondary'\n            variant='contained'\n            autoFocus\n          >\n            Delete\n          </Button>\n          <Button onClick={handleClose} variant='contained'>\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(() => ({}), mapDispatchToProps)(DeleteCourseAlert)\n","import React, { useState } from 'react'\nimport {\n  Avatar,\n  Button,\n  Card,\n  CardContent,\n  Container,\n  Dialog,\n  Grid,\n  TextField,\n  Typography,\n  makeStyles,\n} from '@material-ui/core'\nimport { Group } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport DialogAppBar from '../DialogAppBar'\nimport PageHeader from '../PageHeader'\nimport PageWrapper from '../PageWrapper'\nimport { SlideUpTransition } from '../../transitions'\n\nconst MAX_GROUPS = 20\nconst MIN_GROUPS = 2\n\nconst useStyles = makeStyles((theme) => ({\n  avatar: {\n    backgroundColor: theme.palette.secondary.main,\n    margin: '0 auto',\n    marginBottom: theme.spacing(2),\n  },\n  button: {\n    marginLeft: theme.spacing(2),\n  },\n  card: { height: '100%' },\n  controls: { alignItems: 'center', display: 'flex' },\n}))\n\nconst GrouperDialog = ({ course }) => {\n  const [open, setOpen] = useState(false)\n  const [numGroups, setNumGroups] = useState(10)\n  const [groups, setGroups] = useState([])\n\n  const classes = useStyles()\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleGroupCountChange = (event) => {\n    setGroups([])\n    const value = Number(event.target.value)\n    if (value < MIN_GROUPS) {\n      setNumGroups(MIN_GROUPS)\n    } else if (value > MAX_GROUPS) {\n      setNumGroups(MAX_GROUPS)\n    } else {\n      setNumGroups(value)\n    }\n  }\n\n  const shuffle = (students) => {\n    const copy = [...students]\n    const shuffled = []\n    while (copy.length !== 0) {\n      let randomIndex = Math.floor(Math.random() * copy.length)\n      shuffled.push(copy[randomIndex])\n      copy.splice(randomIndex, 1)\n    }\n    return shuffled\n  }\n\n  const group = (students) => {\n    const shuffled = shuffle(students)\n    const groups = [...new Array(numGroups)].map(() => [])\n    shuffled.forEach((student, index) => {\n      const groupNum = index % numGroups\n      groups[groupNum].push(student)\n    })\n    return groups\n  }\n\n  const handleGenerateClick = () => {\n    const activeStudents = course.students.filter((student) => !student.dropped)\n    setGroups(group(activeStudents))\n  }\n\n  return (\n    <>\n      <ActionButton action='Random group generator' onClick={handleClickOpen}>\n        <Group />\n      </ActionButton>\n\n      <Dialog\n        fullScreen\n        open={open}\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onFocus={(ev) => ev.stopPropagation()}\n        TransitionComponent={SlideUpTransition}\n      >\n        <DialogAppBar onClose={handleClose} title='Random Group Generator' />\n        <PageWrapper>\n          <Container>\n            <PageHeader title={`Period ${course.period} | ${course.name}`} />\n            <Grid container spacing={6}>\n              <Grid item xs={12} className={classes.controls}>\n                <TextField\n                  id='groups'\n                  label='Number of Groups'\n                  onChange={handleGroupCountChange}\n                  type='number'\n                  value={numGroups}\n                  variant='outlined'\n                />\n                <Button\n                  className={classes.button}\n                  color='primary'\n                  onClick={handleGenerateClick}\n                  variant='contained'\n                >\n                  Create Groups\n                </Button>\n              </Grid>\n              <Grid container spacing={2} item xs={12}>\n                {groups.map((group, index) => (\n                  <Grid item xs={numGroups > 2 ? 4 : 6}>\n                    <Card className={classes.card} variant='outlined'>\n                      <CardContent>\n                        <Avatar className={classes.avatar}>{index + 1}</Avatar>\n                        {group.map((student) => (\n                          <Typography align='center' variant='h5'>\n                            {student.firstName} {student.lastName.charAt(0)}\n                          </Typography>\n                        ))}\n                      </CardContent>\n                    </Card>\n                  </Grid>\n                ))}\n              </Grid>\n            </Grid>\n          </Container>\n        </PageWrapper>\n      </Dialog>\n    </>\n  )\n}\n\nexport default GrouperDialog\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Link,\n  Typography,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport { Publish } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport Filedrop from '../Filedrop'\nimport Spinner from '../Spinner'\nimport agent from '../../agent'\nimport parser from '../../parsers'\n\nimport {\n  IMPORT_STUDENTS,\n  STUDENT_DIALOG_UNLOADED,\n} from '../../constants/actionTypes'\nimport { SUPPORTED_SCHOOLS } from '../../constants/support'\n\nconst mapStateToProps = (state) => ({\n  ...state.common.settings,\n  ...state.courses,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onDrop: (users, courseId) =>\n    dispatch({\n      type: IMPORT_STUDENTS,\n      payload: agent.Students.import(users, courseId),\n      snackbar: { message: 'Students imported', variant: 'success' },\n    }),\n  onExit: () => dispatch({ type: STUDENT_DIALOG_UNLOADED }),\n})\n\nconst ImportStudentsDialog = ({\n  course,\n  defaultStudentPassword,\n  errors,\n  inProgress,\n  onDrop,\n  onExit,\n  schoolDistrict,\n}) => {\n  const [open, setOpen] = useState(false)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleFiledrop = (file) => {\n    try {\n      const users = parser[schoolDistrict].students(\n        file,\n        defaultStudentPassword\n      )\n      onDrop(users, course._id)\n    } catch {\n      alert('[ERROR] Invalid file type or improperly formatted file')\n    }\n  }\n\n  useEffect(() => {\n    // Close the dialog only if there are no errors\n    if (!inProgress && !errors) setOpen(false)\n  }, [inProgress])\n\n  return (\n    <>\n      <ActionButton action='Import students' onClick={handleClickOpen}>\n        <Publish />\n      </ActionButton>\n\n      <Dialog\n        fullScreen={fullScreen}\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onExit={onExit}\n        onFocus={(ev) => ev.stopPropagation()}\n        open={open}\n      >\n        <DialogTitle>Import Students</DialogTitle>\n        {SUPPORTED_SCHOOLS.STUDENTS.includes(schoolDistrict) ? (\n          <DialogContent>\n            {inProgress ? (\n              <Spinner message='Importing...' />\n            ) : (\n              <>\n                <Typography gutterBottom>\n                  Students can be imported from a .csv file exported from your\n                  gradebook software\n                </Typography>\n                <Filedrop onFiledrop={handleFiledrop} />\n              </>\n            )}\n          </DialogContent>\n        ) : (\n          <DialogContent>\n            {schoolDistrict === 'none' ? (\n              <Typography>\n                You must select a <em>School District</em> in the{' '}\n                <em>Account Details</em> section of the <em>Settings</em> page\n                to use the import feature\n              </Typography>\n            ) : (\n              <Typography>\n                Please email a copy of your gradebook export file to{' '}\n                <Link href='mailto:support@chem.cash'>support@chem.cash</Link>{' '}\n                to enable this feature\n              </Typography>\n            )}\n          </DialogContent>\n        )}\n        <DialogActions>\n          <Button\n            disabled={inProgress}\n            onClick={handleClose}\n            variant='contained'\n          >\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ImportStudentsDialog)\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Tooltip, makeStyles } from '@material-ui/core'\nimport { MusicNote, MusicOff } from '@material-ui/icons'\n\nconst useStyles = makeStyles((theme) => ({\n  icon: {\n    marginLeft: theme.spacing(1),\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  settings: state.common.settings,\n})\n\nconst JukeboxBadge = ({ alwaysShow, enabled, settings }) => {\n  const classes = useStyles()\n\n  const disabledMessage =\n    'Jukebox disabled. Go to Settings > Jukebox > Manage Playlists to create a playlist for this course.'\n\n  const showBadge =\n    alwaysShow || (settings.jukebox.enabled && settings.enableBetaFeatures)\n\n  return (\n    <>\n      {showBadge && (\n        <Tooltip\n          aria-label={enabled ? 'Jukebox enabled' : disabledMessage}\n          title={enabled ? 'Jukebox enabled' : disabledMessage}\n          arrow\n        >\n          {enabled ? (\n            <MusicNote className={classes.icon} color='primary' />\n          ) : (\n            <MusicOff className={classes.icon} color='secondary' />\n          )}\n        </Tooltip>\n      )}\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, () => ({}))(JukeboxBadge)\n","import React, { useState } from 'react'\nimport {\n  ExpansionPanel,\n  ExpansionPanelDetails,\n  ExpansionPanelSummary,\n  Grid,\n  Slider,\n  Typography,\n} from '@material-ui/core'\nimport { ExpandMore } from '@material-ui/icons'\nimport { Chart } from 'react-google-charts'\nimport { CirclePicker } from 'react-color'\n\nconst TaskDataChart = ({ course, scores, task }) => {\n  const [bucketSize, setBucketSize] = useState(1)\n  const [color, setColor] = useState('#4caf50')\n\n  const getAverage = () =>\n    Math.round(\n      (scores.reduce((sum, score) => sum + score.value, 0) /\n        scores.length /\n        task.totalPoints || 1) * 100\n    )\n\n  const handleColorChange = (color) => {\n    setColor(color.hex)\n  }\n\n  const handleSliderChange = (event, newValue) => {\n    setBucketSize(newValue)\n  }\n\n  const data = [\n    ['Student', 'Score'],\n    ...scores.map((score) => [\n      `${score.student.firstName} ${score.student.lastName}`,\n      score.value,\n    ]),\n  ]\n\n  const options = {\n    title: `Period ${course.period} | ${task.title} | ${getAverage()}% avg.`,\n    hAxis: { title: 'Score' },\n    vAxis: { title: 'Number of Students', minorGridlines: { count: 0 } },\n    legend: { position: 'none' },\n    colors: [color],\n    histogram: {\n      bucketSize: bucketSize,\n      minValue: 0,\n      maxValue: task.totalPoints,\n    },\n  }\n\n  return (\n    <Grid container spacing={2}>\n      <Grid item xs={12}>\n        <Chart\n          chartType='Histogram'\n          width='100%'\n          height='400px'\n          data={data}\n          options={options}\n        />\n      </Grid>\n      <Grid item xs={12}>\n        <ExpansionPanel>\n          <ExpansionPanelSummary expandIcon={<ExpandMore />}>\n            <Typography variant='h6'>Histogram Settings</Typography>\n          </ExpansionPanelSummary>\n          <ExpansionPanelDetails>\n            <Grid container spacing={2}>\n              <Grid item xs={12}>\n                <Typography gutterBottom>Bucket Size</Typography>\n                <Slider\n                  defaultValue={1}\n                  step={1}\n                  marks\n                  min={1}\n                  max={task.totalPoints}\n                  onChange={handleSliderChange}\n                  valueLabelDisplay='auto'\n                />\n              </Grid>\n              <Grid item xs={12}>\n                <Typography gutterBottom>Bar Color</Typography>\n                <CirclePicker color={color} onChange={handleColorChange} />\n              </Grid>\n            </Grid>\n          </ExpansionPanelDetails>\n        </ExpansionPanel>\n      </Grid>\n    </Grid>\n  )\n}\n\nexport default TaskDataChart\n","import React from 'react'\nimport { Grid } from '@material-ui/core'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport {\n  faGauge,\n  faPercent,\n  faThumbsDown,\n  faThumbsUp,\n} from '@fortawesome/free-solid-svg-icons'\nimport { faHundredPoints } from '@fortawesome/pro-solid-svg-icons'\n\nimport StatCard from '../StatCard'\n\nconst TaskDataDashboard = ({ scores, task }) => {\n  const getAverage = () =>\n    scores.reduce((sum, score) => sum + score.value, 0) / scores.length\n\n  const getGrades = () => {\n    const A = scores.filter(\n      (score) => score.value >= task.totalPoints * 0.9\n    ).length\n    const B = scores.filter(\n      (score) =>\n        score.value < task.totalPoints * 0.9 &&\n        score.value >= task.totalPoints * 0.8\n    ).length\n    const C = scores.filter(\n      (score) =>\n        score.value < task.totalPoints * 0.8 &&\n        score.value >= task.totalPoints * 0.7\n    ).length\n    const D = scores.filter(\n      (score) =>\n        score.value < task.totalPoints * 0.7 &&\n        score.value >= task.totalPoints * 0.6\n    ).length\n    const F = scores.filter(\n      (score) => score.value < task.totalPoints * 0.6\n    ).length\n    return { A, B, C, D, F }\n  }\n\n  const getPassFailRates = () => {\n    const passTotal = scores.filter(\n      (score) => score.value >= task.totalPoints * 0.6\n    ).length\n    const failTotal = scores.filter(\n      (score) => score.value < task.totalPoints * 0.6\n    ).length\n    return { pass: passTotal, fail: failTotal }\n  }\n\n  const getPercent = (value, total) => (value / (total || 10)) * 100\n\n  const data = {\n    average: {\n      score: getAverage(),\n      percent: getPercent(getAverage(), task.totalPoints),\n    },\n    grades: getGrades(),\n    passFail: {\n      fail: {\n        count: getPassFailRates().fail,\n        percent: Math.round(getPercent(getPassFailRates().fail, scores.length)),\n      },\n      pass: {\n        count: getPassFailRates().pass,\n        percent: Math.round(getPercent(getPassFailRates().pass, scores.length)),\n      },\n    },\n  }\n\n  const GradeStatCard = ({ grade }) => (\n    <StatCard\n      icon={<FontAwesomeIcon icon={faHundredPoints} size='lg' />}\n      lg={3}\n      title={grade}\n    >\n      {Math.round(getPercent(data.grades[grade], scores.length))}% (\n      {data.grades[grade]})\n    </StatCard>\n  )\n\n  return (\n    <Grid container spacing={3}>\n      <StatCard\n        icon={<FontAwesomeIcon icon={faGauge} size='lg' />}\n        lg={6}\n        precision={1}\n        round={true}\n        title='Average Score'\n        value={data.average.score}\n      />\n      <StatCard\n        icon={<FontAwesomeIcon icon={faPercent} size='lg' />}\n        lg={6}\n        precision={1}\n        round={true}\n        title='Average Percent'\n        value={data.average.percent}\n        percent\n      />\n      <StatCard\n        icon={<FontAwesomeIcon icon={faThumbsUp} size='lg' />}\n        lg={6}\n        title='Pass Rate'\n      >\n        {data.passFail.pass.percent}% ({data.passFail.pass.count})\n      </StatCard>\n      <StatCard\n        icon={<FontAwesomeIcon icon={faThumbsDown} size='lg' />}\n        lg={6}\n        title='Fail Rate'\n      >\n        {data.passFail.fail.percent}% ({data.passFail.fail.count})\n      </StatCard>\n      <GradeStatCard grade='A' />\n      <GradeStatCard grade='B' />\n      <GradeStatCard grade='C' />\n      <GradeStatCard grade='D' />\n    </Grid>\n  )\n}\n\nexport default TaskDataDashboard\n","import React, { useEffect, useState } from 'react'\nimport MaterialTable from 'material-table'\n\nconst TaskDataTable = ({ scores, task }) => {\n  const [data, setData] = useState([])\n\n  const mappedData = scores.map((score) => ({\n    firstName: score.student.firstName,\n    lastName: score.student.lastName,\n    score: score.value,\n    percent: Math.round((score.value / (task.totalPoints || 10)) * 100),\n  }))\n\n  const [columns] = useState([\n    { title: 'Last Name', field: 'lastName' },\n    { title: 'First Name', field: 'firstName' },\n    {\n      title: 'Score',\n      field: 'score',\n      render: (rowData, renderType) =>\n        `${renderType === 'row' ? rowData.score : rowData} / ${\n          task.totalPoints\n        }`,\n    },\n    {\n      title: 'Percent',\n      field: 'percent',\n      render: (rowData, renderType) =>\n        `${renderType === 'row' ? rowData.percent : rowData}%`,\n    },\n  ])\n\n  useEffect(() => {\n    setData(mappedData)\n  }, [scores])\n\n  return (\n    <MaterialTable\n      columns={columns}\n      data={data}\n      localization={{\n        body: { emptyDataSourceMessage: 'No scores found for this assignment' },\n      }}\n      options={{ grouping: true, paging: false }}\n      title='Student Scores'\n    />\n  )\n}\n\nexport default TaskDataTable\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Container,\n  Dialog,\n  Grid,\n  Typography,\n  makeStyles,\n} from '@material-ui/core'\nimport { Assessment } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport DialogAppBar from '../DialogAppBar'\nimport ListErrors from '../ListErrors'\nimport PageHeader from '../PageHeader'\nimport PageWrapper from '../PageWrapper'\nimport Spinner from '../Spinner'\nimport TaskDataChart from './TaskDataChart'\nimport TaskDataDashboard from './TaskDataDashboard'\nimport TaskDataTable from './TaskDataTable'\nimport { SlideUpTransition } from '../../transitions'\nimport agent from '../../agent'\n\nimport {\n  LOAD_TASK_SCORES,\n  UNLOAD_TASK_SCORES,\n} from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  icon: {\n    color: theme.palette.text.primary,\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.tasks,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onLoad: (taskID) =>\n    dispatch({\n      type: LOAD_TASK_SCORES,\n      payload: agent.Scores.getTaskScores(taskID),\n    }),\n  onUnload: () => dispatch({ type: UNLOAD_TASK_SCORES }),\n})\n\nconst TaskDataDialog = ({\n  course,\n  errors,\n  inProgress,\n  onLoad,\n  onUnload,\n  scores,\n  task,\n}) => {\n  const [open, setOpen] = useState(false)\n\n  const classes = useStyles()\n\n  const handleClickOpen = () => {\n    onLoad(task.id)\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n    onUnload()\n  }\n\n  return (\n    <>\n      <ActionButton\n        action='View data'\n        className={classes.icon}\n        onClick={handleClickOpen}\n      >\n        <Assessment />\n      </ActionButton>\n\n      <Dialog\n        fullScreen\n        open={open}\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onFocus={(ev) => ev.stopPropagation()}\n        TransitionComponent={SlideUpTransition}\n      >\n        <DialogAppBar onClose={handleClose} title='Assignment Data Viewer' />\n        <PageWrapper>\n          <Container>\n            <PageHeader title={task.title}>\n              <Typography variant='h5'>\n                Period {course.period} | {course.name}\n              </Typography>\n            </PageHeader>\n            <ListErrors errors={errors} />\n            {inProgress ? (\n              <Spinner message='Loading...' />\n            ) : (\n              <Grid container spacing={4}>\n                <Grid item xs={12}>\n                  <TaskDataDashboard scores={scores} task={task} />\n                </Grid>\n                <Grid item xs={12}>\n                  <TaskDataChart course={course} scores={scores} task={task} />\n                </Grid>\n                <Grid item xs={12}>\n                  <TaskDataTable scores={scores} task={task} />\n                </Grid>\n              </Grid>\n            )}\n          </Container>\n        </PageWrapper>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TaskDataDialog)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport MaterialTable, { MTableAction } from 'material-table'\nimport moment from 'moment'\n\nimport TaskDataDialog from '../Tasks/TaskDataDialog'\nimport agent from '../../agent'\n\nimport {\n  DELETE_TASK,\n  TASKS_DIALOG_LOADED,\n  UPDATE_TASK,\n} from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  tasks: state.tasks.tasks,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onDelete: (task) =>\n    dispatch({\n      type: DELETE_TASK,\n      payload: agent.Tasks.delete(task),\n      snackbar: { message: 'Assignment deleted', variant: 'success' },\n    }),\n  onLoad: (courseId) =>\n    dispatch({\n      type: TASKS_DIALOG_LOADED,\n      payload: agent.Tasks.getAll(courseId),\n    }),\n  onUpdate: (task) =>\n    dispatch({\n      type: UPDATE_TASK,\n      payload: agent.Tasks.update(task),\n      snackbar: { message: 'Assignment updated', variant: 'success' },\n    }),\n})\n\nconst TasksTable = ({ course, onDelete, onLoad, onUpdate, tasks }) => {\n  const [data, setData] = useState([])\n\n  const mappedData = tasks.map((task) => ({\n    createdAt: moment(task.createdAt),\n    createdAtString: task.createdAt,\n    id: task._id,\n    multiplier: task.multiplier,\n    slug: task.slug,\n    title: task.title,\n    totalPoints: task.totalPoints,\n  }))\n\n  const [columns] = useState([\n    {\n      title: 'Date',\n      field: 'createdAt',\n      editable: 'never',\n      render: (rowData, renderType) =>\n        renderType === 'row'\n          ? rowData.createdAt.format('ddd, MMM D, YYYY')\n          : rowData.format('ddd, MMM D, YYYY'),\n    },\n    { title: 'Title', field: 'title', editable: 'never' },\n    { title: 'Total Points', field: 'totalPoints' },\n    { title: 'Multiplier', field: 'multiplier' },\n  ])\n\n  useEffect(() => {\n    onLoad(course._id)\n  }, [])\n\n  useEffect(() => {\n    setData(mappedData)\n  }, [tasks])\n\n  return (\n    <MaterialTable\n      actions={[\n        {\n          component: 'TaskDataDialog',\n          icon: 'assessment',\n          position: 'row',\n          tooltip: 'View data',\n        },\n      ]}\n      columns={columns}\n      components={{\n        Action: (props) => {\n          if (props.action.component === 'TaskDataDialog')\n            return <TaskDataDialog course={course} task={props.data} />\n          return <MTableAction {...props} />\n        },\n      }}\n      data={data}\n      localization={{\n        body: {\n          emptyDataSourceMessage: 'No assignments found for this course',\n          editRow: {\n            deleteText:\n              'Delete assignment? This will delete all scores for this assignment.',\n            saveTooltip: 'Confirm',\n          },\n        },\n      }}\n      options={{ actionsColumnIndex: -1, paging: false, showTitle: false }}\n      editable={{\n        onRowUpdate: (newData, oldData) =>\n          new Promise((resolve, reject) => {\n            const dataUpdate = [...data]\n            const index = oldData.tableData.id\n            dataUpdate[index] = {\n              ...newData,\n              createdAt: moment(newData.createdAtString),\n            }\n            setData([...dataUpdate])\n            onUpdate(newData)\n            resolve()\n          }),\n        onRowDelete: (oldData) =>\n          new Promise((resolve, reject) => {\n            const newData = [...data]\n            const index = oldData.tableData.id\n            newData.splice(index, 1)\n            setData([...newData])\n            onDelete(oldData)\n            resolve()\n          }),\n      }}\n    />\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TasksTable)\n","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport { Assignment } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport ListErrors from '../ListErrors'\nimport TasksTable from './TasksTable'\n\nimport { TASKS_DIALOG_UNLOADED } from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  dialog: {\n    '& > .MuiDialog-container > .MuiPaper-root': {\n      [theme.breakpoints.up('lg')]: {\n        minHeight: theme.spacing(54),\n        width: theme.spacing(100),\n      },\n    },\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.tasks,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onExit: () => dispatch({ type: TASKS_DIALOG_UNLOADED }),\n})\n\nconst TasksDialog = ({ course, errors, inProgress, onExit }) => {\n  const [open, setOpen] = useState(false)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n  const classes = useStyles()\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  return (\n    <>\n      <ActionButton action='Manage assignments' onClick={handleClickOpen}>\n        <Assignment />\n      </ActionButton>\n\n      <Dialog\n        className={classes.dialog}\n        fullScreen={fullScreen}\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onExit={onExit}\n        onFocus={(ev) => ev.stopPropagation()}\n        open={open}\n      >\n        <DialogTitle>Manage Assignments</DialogTitle>\n        <DialogContent>\n          <ListErrors errors={errors} />\n          <TasksTable course={course} />\n        </DialogContent>\n        <DialogActions>\n          <Button\n            disabled={inProgress}\n            onClick={handleClose}\n            variant='contained'\n          >\n            Close\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TasksDialog)\n","import React, { useState } from 'react'\nimport {\n  Avatar,\n  ExpansionPanel,\n  ExpansionPanelDetails,\n  ExpansionPanelSummary,\n  Typography,\n  makeStyles,\n} from '@material-ui/core'\nimport { ExpandMore } from '@material-ui/icons'\n\nimport CourseDialog from './CourseDialog'\nimport CourseStudentList from './CourseStudentList'\nimport DeleteCourseAlert from './DeleteCourseAlert'\nimport GrouperDialog from './GrouperDialog'\nimport ImportStudentsDialog from './ImportStudentsDialog'\nimport JukeboxBadge from '../Jukebox/JukeboxBadge'\nimport StudentDialog from './StudentDialog'\nimport TasksDialog from './TasksDialog'\n\nconst useStyles = makeStyles((theme) => ({\n  courseDetails: {\n    display: 'block',\n  },\n  courseHeader: {\n    alignItems: 'center',\n    display: 'flex',\n    justifyContent: 'space-between',\n    width: '100%',\n  },\n  coursePeriod: {\n    backgroundColor: theme.palette.secondary.main,\n    marginRight: theme.spacing(2),\n  },\n  courseTitle: {\n    alignItems: 'center',\n    display: 'flex',\n    flexGrow: '1',\n  },\n}))\n\nconst CourseList = ({ courses }) => {\n  const [expanded, setExpanded] = useState(false)\n\n  const classes = useStyles()\n\n  const handleChange = (panel) => (ev, isExpanded) => {\n    setExpanded(isExpanded ? panel : false)\n  }\n\n  return (\n    <>\n      {courses?.length > 0 ? (\n        courses.map((course) => {\n          return (\n            <ExpansionPanel\n              expanded={expanded === course._id}\n              key={course._id}\n              onChange={handleChange(course._id)}\n            >\n              <ExpansionPanelSummary expandIcon={<ExpandMore />}>\n                <div className={classes.courseHeader}>\n                  <Avatar className={classes.coursePeriod}>\n                    {course.period}\n                  </Avatar>\n                  <Typography className={classes.courseTitle} variant='h5'>\n                    {course.name}\n                    <JukeboxBadge enabled={course.playlistId ? true : false} />\n                  </Typography>\n                  <TasksDialog course={course} />\n                  <GrouperDialog course={course} />\n                  <StudentDialog course={course} />\n                  <ImportStudentsDialog course={course} />\n                  <CourseDialog course={course} />\n                  <DeleteCourseAlert course={course} />\n                </div>\n              </ExpansionPanelSummary>\n              <ExpansionPanelDetails className={classes.courseDetails}>\n                <CourseStudentList course={course} />\n              </ExpansionPanelDetails>\n            </ExpansionPanel>\n          )\n        })\n      ) : (\n        <Typography>You have no courses</Typography>\n      )}\n    </>\n  )\n}\n\nexport default CourseList\n","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\n\nimport Alert from '../Alert'\nimport CourseDialog from './CourseDialog'\nimport CourseList from './CourseList'\nimport PageHeader from '../PageHeader'\nimport Spinner from '../Spinner'\nimport agent from '../../agent'\n\nimport {\n  COURSES_PAGE_LOADED,\n  COURSES_PAGE_UNLOADED,\n} from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  ...state.courses,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onLoad: () =>\n    dispatch({ type: COURSES_PAGE_LOADED, payload: agent.Courses.getAll() }),\n  onUnload: () => dispatch({ type: COURSES_PAGE_UNLOADED }),\n})\n\nconst TeacherCourses = ({\n  courses,\n  importCount,\n  importFailed,\n  onLoad,\n  onUnload,\n  pageLoaded,\n}) => {\n  useEffect(() => {\n    onLoad()\n\n    return () => {\n      onUnload()\n    }\n  }, [])\n\n  return (\n    <>\n      <PageHeader title='Manage Courses'>\n        <CourseDialog />\n      </PageHeader>\n      {importCount !== null && (\n        <Alert>\n          {importCount} students imported\n          <br />\n          {importFailed > 0 &&\n            `${importFailed} students not imported (already have accounts)`}\n        </Alert>\n      )}\n      {pageLoaded ? (\n        <Spinner message='Loading...' />\n      ) : (\n        <CourseList courses={courses} />\n      )}\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TeacherCourses)\n","import React from 'react'\nimport { Badge as MuiBadge, makeStyles } from '@material-ui/core'\n\nconst useStyles = makeStyles((theme) => ({\n  badge: {\n    left: '-6%',\n    top: '-30%',\n  },\n}))\n\nconst FabBadge = ({ children, value }) => {\n  const classes = useStyles()\n\n  return (\n    <MuiBadge\n      anchorOrigin={{ horizontal: 'left', vertical: 'top' }}\n      badgeContent={value}\n      classes={{ badge: classes.badge }}\n      color='secondary'\n      overlap='circle'\n    >\n      {children}\n    </MuiBadge>\n  )\n}\n\nexport default FabBadge\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  ButtonGroup,\n  Chip,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Fab,\n  FormControl,\n  FormControlLabel,\n  Grid,\n  Radio,\n  RadioGroup,\n  Tooltip,\n  Typography,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport { Alert, AlertTitle } from '@material-ui/lab'\nimport { PlaylistAddCheck, ThumbDown, ThumbUp } from '@material-ui/icons'\n\nimport AccountBalance from '../AccountBalance'\nimport FabBadge from '../FabBadge'\nimport InputBox from '../InputBox'\nimport ListErrors from '../ListErrors'\nimport PrimeBadge from '../Prime/PrimeBadge'\nimport agent from '../../agent'\n\nimport {\n  SONG_REQUESTS_DIALOG_UNLOADED,\n  UPDATE_SONG_REQUEST,\n} from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  dialog: {\n    '& > .MuiDialog-container > .MuiPaper-root': {\n      [theme.breakpoints.up('lg')]: {\n        minHeight: theme.spacing(54),\n        width: theme.spacing(100),\n      },\n    },\n  },\n  icon: {\n    marginRight: theme.spacing(1),\n  },\n  panel: {\n    minWidth: theme.spacing(40),\n    maxWidth: theme.spacing(60),\n  },\n  removalAlert: {\n    backgroundColor: theme.palette.error.light,\n    border: `2px solid ${theme.palette.error.dark}`,\n    borderRadius: theme.spacing(2),\n    color: theme.palette.common.white,\n    fontSize: theme.typography.h6.fontSize,\n    padding: theme.spacing(1),\n    textAlign: 'center',\n    textTransform: 'uppercase',\n  },\n  selected: {\n    backgroundColor: theme.palette.primary.main,\n  },\n  songInfo: {\n    marginBottom: theme.spacing(4),\n  },\n  statusButton: {\n    '&:hover': {\n      backgroundColor: theme.palette.primary.light,\n    },\n  },\n  statusDescription: {\n    backgroundColor:\n      theme.palette.type === 'dark'\n        ? theme.palette.background.default\n        : theme.palette.grey[100],\n    borderRadius: theme.spacing(1),\n    marginTop: theme.spacing(2),\n    padding: theme.spacing(2),\n  },\n  studentInfo: {\n    alignItems: 'center',\n    display: 'flex',\n    justifyContent: 'space-between',\n    marginTop: theme.spacing(4),\n    [theme.breakpoints.up('md')]: {\n      borderTopColor: theme.palette.primary.main,\n      borderTopStyle: 'dotted',\n      borderTopWidth: '4px',\n      paddingTop: theme.spacing(2),\n    },\n  },\n  studentName: {\n    'alignItems': 'center',\n    'display': 'flex',\n    '& > div': {\n      marginRight: theme.spacing(1),\n    },\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.songs,\n  prime: state.common.settings.prime,\n  songRemovalPurchaseAmount: state.common.settings.songRemovalPurchaseAmount,\n  songRemovalRefundAmount: state.common.settings.songRemovalRefundAmount,\n  songRemovalRequestEnabled: state.common.settings.songRemovalRequestEnabled,\n  songRequestPurchaseAmount: state.common.settings.songRequestPurchaseAmount,\n  // spotifyTokens: state.common.settings.spotifyTokens,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onExit: () => dispatch({ type: SONG_REQUESTS_DIALOG_UNLOADED }),\n  onSubmit: (song) =>\n    dispatch({\n      type: UPDATE_SONG_REQUEST,\n      payload: agent.Songs.update(song),\n    }),\n})\n\nconst ProcessSongRequestsDialog = ({\n  courses,\n  errors,\n  inProgress,\n  isLoaded,\n  onExit,\n  onSubmit,\n  prime,\n  songRemovalPurchaseAmount,\n  songRemovalRefundAmount,\n  songRemovalRequestEnabled,\n  songRequestPurchaseAmount,\n  // spotifyTokens,\n}) => {\n  const [count, setCount] = useState(0)\n  const [open, setOpen] = useState(false)\n  const [song, setSong] = useState(null)\n  const [status, setStatus] = useState(null)\n  const [statusDescription, setStatusDescription] = useState(null)\n  const [statusNote, setStatusNote] = useState(null)\n  const [skippedSongs, setSkippedSongs] = useState([])\n  const [totalCount, setTotalCount] = useState(0)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n  const classes = useStyles()\n\n  const getLyricSearchUrl = (artist, title) =>\n    `http://www.google.com/search?q=${encodeURIComponent(\n      `lyrics: ${title} by ${artist}`\n    )}`\n\n  const getSpotifySearchUrl = (artist, title) =>\n    `https://open.spotify.com/search/${encodeURIComponent(\n      `${title} ${artist}`\n    )}`\n\n  const getSongCount = () => {\n    let songCount = 0\n    if (courses.length > 0)\n      for (const course of courses)\n        songCount += course.songs.filter((song) =>\n          song.status.startsWith('pending')\n        ).length\n    return songCount\n  }\n\n  const getNextSong = () => {\n    setSong(null)\n    if (courses.length > 0) {\n      for (const course of courses) {\n        if (course.songs.length > 0) {\n          const nextSong = course.songs.find(\n            (song) =>\n              song.status.startsWith('pending') &&\n              !skippedSongs.includes(song._id)\n          )\n          if (nextSong) {\n            nextSong.period = course.period\n            setSong(nextSong)\n            setCount(count + 1)\n            break\n          }\n        }\n      }\n    }\n  }\n\n  const handleClickOpen = () => {\n    setOpen(true)\n    setTotalCount(getSongCount())\n  }\n\n  const handleClose = () => {\n    setCount(0)\n    setOpen(false)\n    setStatus(null)\n    setStatusDescription(null)\n    setStatusNote(null)\n    setSkippedSongs([])\n    setTotalCount(getSongCount())\n  }\n\n  const handleStatusButtonClick = (status) => {\n    setStatus(status)\n  }\n\n  const handleStatusDescriptionChange = (ev) => {\n    setStatusDescription(ev.target.value)\n  }\n\n  const handleSkip = () => {\n    setSkippedSongs([...skippedSongs, song._id])\n    setStatus(null)\n    setStatusDescription(null)\n    setStatusNote(null)\n  }\n\n  const handleSubmitApproval = async () => {\n    onSubmit({\n      amount:\n        prime.enabled && song.student.hasPrime\n          ? (1 - prime.songRequestPurchaseDiscount / 100) *\n            songRequestPurchaseAmount\n          : songRequestPurchaseAmount,\n      id: song._id,\n      status,\n      statusDescription:\n        statusDescription === 'other' && statusNote !== null\n          ? statusNote\n          : statusDescription,\n    })\n    setStatus(null)\n    setStatusDescription(null)\n    setStatusNote(null)\n  }\n\n  const refundAllowed = (hasPrime) =>\n    (songRemovalRequestEnabled &&\n      (!prime.enabled || !prime.songRemovalEnabled)) ||\n    (prime.enabled && prime.songRemovalEnabled && hasPrime)\n\n  const handleSubmitRemoval = async () => {\n    onSubmit({\n      id: song._id,\n      purchaseAmount: songRemovalPurchaseAmount,\n      refundAmount: refundAllowed(song.student.hasPrime)\n        ? songRemovalRefundAmount\n        : 0,\n      status: 'removed',\n      statusDescription: `${song.removedBy.firstName} ${song.removedBy.lastName} paid to remove this song`,\n    })\n  }\n\n  useEffect(() => {\n    setTotalCount(getSongCount())\n  }, [isLoaded])\n\n  useEffect(() => {\n    getNextSong()\n  }, [courses])\n\n  useEffect(() => {\n    getNextSong()\n  }, [skippedSongs])\n\n  const DroppedStudentAlert = () => (\n    <Alert severity='error'>\n      This student's account is currently suspended\n    </Alert>\n  )\n\n  const PrimeAlert = () => (\n    <>{prime.enabled && <Alert severity='success'>Prime member</Alert>}</>\n  )\n\n  return (\n    <>\n      <Fab color='primary' onClick={handleClickOpen} variant='extended'>\n        <FabBadge value={totalCount}>\n          <PlaylistAddCheck className={classes.icon} />\n          Process requests\n        </FabBadge>\n      </Fab>\n\n      <Dialog\n        className={classes.dialog}\n        fullScreen={fullScreen}\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onExit={onExit}\n        onFocus={(ev) => ev.stopPropagation()}\n        open={open}\n      >\n        <DialogTitle>Process Song Requests</DialogTitle>\n        <DialogContent>\n          <ListErrors errors={errors} />\n          {song ? (\n            song.status !== 'pending removal' ? (\n              <Grid container spacing={2}>\n                <Grid item xs={12}>\n                  {song.student.dropped && <DroppedStudentAlert />}\n                </Grid>\n                <Grid item xs={12}>\n                  {song.student.hasPrime && <PrimeAlert />}\n                </Grid>\n                <Grid item xs={12} md={6}>\n                  <div className={classes.panel}>\n                    <div className={classes.songInfo}>\n                      <Typography variant='h6'>{song.title}</Typography>\n                      <Typography\n                        color='textSecondary'\n                        variant='body1'\n                        gutterBottom\n                      >\n                        Song\n                      </Typography>\n                      <Typography variant='h6'>{song.artist}</Typography>\n                      <Typography color='textSecondary' variant='body1'>\n                        Artist\n                      </Typography>\n                    </div>\n\n                    <ButtonGroup>\n                      <Button\n                        href={getLyricSearchUrl(song.artist, song.title)}\n                        target='_blank'\n                      >\n                        Search Lyrics\n                      </Button>\n                      <Button\n                        href={getSpotifySearchUrl(song.artist, song.title)}\n                        target='_blank'\n                      >\n                        Search Spotify\n                      </Button>\n                    </ButtonGroup>\n\n                    <div className={classes.studentInfo}>\n                      <div className={classes.studentName}>\n                        <Chip color='secondary' label={song.period} />\n                        <Typography>\n                          {song.student.firstName} {song.student.lastName}\n                        </Typography>\n                        {song.student.hasPrime && <PrimeBadge size='2xl' />}\n                      </div>\n                      <AccountBalance\n                        cost={songRequestPurchaseAmount}\n                        count={count}\n                        username={song.student.username}\n                      />\n                    </div>\n                  </div>\n                </Grid>\n\n                <Grid item xs={12} md={6}>\n                  <div className={classes.panel}>\n                    <Typography variant='h6'>Status</Typography>\n\n                    <ButtonGroup fullWidth size='large'>\n                      <Tooltip arrow enterTouchDelay={0} title='Approve'>\n                        <Button\n                          className={`${classes.statusButton} ${\n                            status === 'approved' && classes.selected\n                          }`}\n                          onClick={() => handleStatusButtonClick('approved')}\n                        >\n                          <ThumbUp />\n                        </Button>\n                      </Tooltip>\n                      <Tooltip arrow enterTouchDelay={0} title='Reject'>\n                        <Button\n                          className={`${classes.statusButton} ${\n                            status === 'rejected' && classes.selected\n                          }`}\n                          onClick={() => handleStatusButtonClick('rejected')}\n                        >\n                          <ThumbDown />\n                        </Button>\n                      </Tooltip>\n                    </ButtonGroup>\n                    {status === 'approved' && (\n                      <div className={classes.statusDescription}>\n                        <Typography gutterBottom>\n                          <strong>Condition for Approval</strong> (optional)\n                        </Typography>\n                        <FormControl component='fieldset' fullWidth>\n                          <RadioGroup\n                            name='statusDescription'\n                            value={statusDescription}\n                            onChange={handleStatusDescriptionChange}\n                          >\n                            <FormControlLabel\n                              value='Clean version'\n                              control={<Radio />}\n                              label='Clean version'\n                            />\n                            <FormControlLabel\n                              value='Instrumental version'\n                              control={<Radio />}\n                              label='Instrumental version'\n                            />\n                            <FormControlLabel\n                              value='Picked my best guess'\n                              control={<Radio />}\n                              label='Picked my best guess'\n                            />\n                            <FormControlLabel\n                              value='other'\n                              control={<Radio />}\n                              label='Other'\n                            />\n                            {statusDescription === 'other' && (\n                              <InputBox\n                                label='Status Note'\n                                name='statusNote'\n                                onChange={setStatusNote}\n                                value={statusNote}\n                              />\n                            )}\n                          </RadioGroup>\n                        </FormControl>\n                      </div>\n                    )}\n                    {status === 'rejected' && (\n                      <div className={classes.statusDescription}>\n                        <Typography gutterBottom>\n                          <strong>Reason for Rejection</strong> (optional)\n                        </Typography>\n                        <FormControl component='fieldset' fullWidth>\n                          <RadioGroup\n                            name='statusDescription'\n                            value={statusDescription}\n                            onChange={handleStatusDescriptionChange}\n                          >\n                            <FormControlLabel\n                              value='Inappropriate content (language, drugs, sex, and/or violence)'\n                              control={<Radio />}\n                              label='Inappropriate content (language, drugs, sex, and/or violence)'\n                            />\n                            <FormControlLabel\n                              value='Already on playlist'\n                              control={<Radio />}\n                              label='Already on playlist'\n                            />\n                            <FormControlLabel\n                              value='Not available on Spotify'\n                              control={<Radio />}\n                              label='Not available on Spotify'\n                            />\n                            <FormControlLabel\n                              value='other'\n                              control={<Radio />}\n                              label='Other'\n                            />\n                            {statusDescription === 'other' && (\n                              <InputBox\n                                label='Status Note'\n                                name='statusNote'\n                                onChange={setStatusNote}\n                                value={statusNote}\n                              />\n                            )}\n                          </RadioGroup>\n                        </FormControl>\n                      </div>\n                    )}\n                  </div>\n                </Grid>\n              </Grid>\n            ) : (\n              <Grid container spacing={2}>\n                <Grid item xs={12}>\n                  {song.removedBy.dropped && <DroppedStudentAlert />}\n                </Grid>\n                <Grid item xs={12}>\n                  {song.removedBy.hasPrime && <PrimeAlert />}\n                </Grid>\n                <Grid item xs={12}>\n                  <div className={classes.panel}>\n                    <div className={classes.songInfo}>\n                      <Typography variant='h6'>{song.title}</Typography>\n                      <Typography\n                        color='textSecondary'\n                        variant='body1'\n                        gutterBottom\n                      >\n                        Song\n                      </Typography>\n                      <Typography variant='h6'>{song.artist}</Typography>\n                      <Typography color='textSecondary' variant='body1'>\n                        Artist\n                      </Typography>\n                    </div>\n\n                    <div className={classes.removalAlert}>\n                      Removal Requested by{' '}\n                      {`${song.removedBy.firstName} ${song.removedBy.lastName}`}\n                      {song.removedBy.hasPrime && <PrimeBadge />}\n                    </div>\n\n                    <div className={classes.studentInfo}>\n                      <div className={classes.studentName}>\n                        <Chip color='secondary' label={song.period} />\n                        <Typography>\n                          {song.student.firstName} {song.student.lastName}\n                        </Typography>\n                        {song.student.hasPrime && <PrimeBadge size='2xl' />}\n                      </div>\n                      <AccountBalance\n                        cost={songRemovalPurchaseAmount}\n                        count={count}\n                        username={song.removedBy.username}\n                      />\n                    </div>\n                  </div>\n                </Grid>\n              </Grid>\n            )\n          ) : (\n            <Alert severity='info'>\n              <AlertTitle>All caught up!</AlertTitle>\n              There are no songs to process at this time\n            </Alert>\n          )}\n        </DialogContent>\n\n        <DialogActions>\n          {song && (\n            <Typography\n              style={{ marginRight: 'auto' }}\n              variant='subtitle2'\n            >{`Song ${count} of ${totalCount}`}</Typography>\n          )}\n          {song &&\n            (song.status !== 'pending removal' ? (\n              <Button\n                color='primary'\n                disabled={inProgress || !status}\n                onClick={handleSubmitApproval}\n                variant='contained'\n              >\n                {inProgress ? 'Saving...' : 'Save & Continue'}\n              </Button>\n            ) : (\n              <Button\n                color='secondary'\n                disabled={inProgress}\n                onClick={handleSubmitRemoval}\n                variant='contained'\n              >\n                {inProgress ? 'Removing...' : 'Remove & Continue'}\n              </Button>\n            ))}\n          {song && (\n            <Button\n              disabled={inProgress}\n              onClick={handleSkip}\n              variant='contained'\n            >\n              Skip\n            </Button>\n          )}\n          <Button\n            disabled={inProgress}\n            onClick={handleClose}\n            variant='contained'\n          >\n            {song ? 'Cancel' : 'Close'}\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ProcessSongRequestsDialog)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport MaterialTable from 'material-table'\nimport moment from 'moment'\nimport { Chip, Tooltip } from '@material-ui/core'\nimport { InfoOutlined } from '@material-ui/icons'\n\nimport JukeboxDialog from '../Jukebox/JukeboxDialog'\nimport PageHeader from '../PageHeader'\nimport PrimeBadge from '../Prime/PrimeBadge'\nimport ProcessSongRequestsDialog from './ProcessSongRequestsDialog'\nimport agent from '../../agent'\n\nimport {\n  DELETE_SONG_REQUEST,\n  SONGS_PAGE_UNLOADED,\n  TEACHER_SONGS_PAGE_LOADED,\n} from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({ ...state.songs })\n\nconst mapDispatchToProps = (dispatch) => ({\n  onDelete: (id) =>\n    dispatch({\n      type: DELETE_SONG_REQUEST,\n      payload: agent.Songs.delete(id),\n      snackbar: { message: 'Song request deleted', variant: 'success' },\n    }),\n  onLoad: () =>\n    dispatch({\n      type: TEACHER_SONGS_PAGE_LOADED,\n      payload: agent.Songs.forTeacher(),\n    }),\n  onUnload: () => dispatch({ type: SONGS_PAGE_UNLOADED }),\n})\n\nconst TeacherSongs = ({ courses, onDelete, onLoad, onUnload }) => {\n  const [data, setData] = useState([])\n\n  const mappedData = courses\n    .map((course) =>\n      course.songs.map((song) => ({\n        artist: song.artist,\n        createdAt: moment(song.createdAt),\n        dropped: song.student.dropped,\n        hasPrime: song.student.hasPrime,\n        period: course.period,\n        purchasedBy: `${song.student.firstName} ${song.student.lastName} ${\n          song.student.dropped ? '(dropped)' : ''\n        }`,\n        status: song.status,\n        statusDescription: song.statusDescription,\n        title: song.title,\n        _id: song._id,\n      }))\n    )\n    .flat()\n\n  const [columns] = useState([\n    {\n      title: 'Request Date',\n      field: 'createdAt',\n      editable: 'never',\n      render: (rowData, renderType) =>\n        renderType === 'row' ? (\n          <Tooltip\n            arrow\n            color='primary'\n            enterTouchDelay={0}\n            title={rowData.createdAt.format('h:mm:ss a')}\n          >\n            <span>{rowData.createdAt.format('ddd, MMM D, YYYY')}</span>\n          </Tooltip>\n        ) : (\n          rowData.format('ddd, MMM D, YYYY, h:mm:ss a')\n        ),\n    },\n    { title: 'Song Title', field: 'title' },\n    { title: 'Song Artist', field: 'artist' },\n    { title: 'Purchased by', field: 'purchasedBy', editable: 'never' },\n    {\n      title: 'Prime',\n      field: 'hasPrime',\n      render: (rowData, renderType) =>\n        renderType === 'row' ? (\n          rowData.hasPrime ? (\n            <PrimeBadge />\n          ) : (\n            ''\n          )\n        ) : rowData ? (\n          <PrimeBadge />\n        ) : (\n          'No Prime'\n        ),\n    },\n    {\n      title: 'Period',\n      field: 'period',\n      editable: 'never',\n      render: (rowData, renderType) =>\n        renderType === 'row' ? (\n          <Chip label={rowData.period} color='secondary' />\n        ) : (\n          <Chip label={rowData} color='secondary' />\n        ),\n    },\n    {\n      title: 'Status',\n      field: 'status',\n      lookup: {\n        'approved': 'approved',\n        'pending approval': 'pending approval',\n        'pending removal': 'pending removal',\n        'rejected': 'rejected',\n        'removed': 'removed',\n      },\n      render: (rowData, renderType) =>\n        renderType === 'row' ? (\n          <span style={{ alignItems: 'center', display: 'flex' }}>\n            {rowData.statusDescription ? (\n              <>\n                {rowData.status}\n                <Tooltip\n                  arrow\n                  color='primary'\n                  enterTouchDelay={0}\n                  title={rowData.statusDescription}\n                >\n                  <InfoOutlined style={{ marginLeft: '8px' }} />\n                </Tooltip>\n              </>\n            ) : (\n              rowData.status\n            )}\n          </span>\n        ) : (\n          <span>{rowData}</span>\n        ),\n    },\n  ])\n\n  useEffect(() => {\n    onLoad()\n\n    return () => {\n      return onUnload()\n    }\n  }, [])\n\n  useEffect(() => {\n    setData(mappedData)\n  }, [courses])\n\n  return (\n    <>\n      <PageHeader title='Manage Song Requests'>\n        <JukeboxDialog />\n        <ProcessSongRequestsDialog />\n      </PageHeader>\n\n      <MaterialTable\n        title='Song Requests'\n        columns={columns}\n        data={data}\n        localization={{\n          body: {\n            emptyDataSourceMessage: 'No song requests have been submitted',\n            editRow: {\n              deleteText: 'Delete song request?',\n              saveTooltip: 'Delete song',\n            },\n          },\n        }}\n        options={{ actionsColumnIndex: -1, paging: false, grouping: true }}\n        editable={{\n          onRowDelete: (oldData) =>\n            new Promise((resolve, reject) => {\n              const dataDelete = [...data]\n              const index = oldData.tableData.id\n              dataDelete.splice(index, 1)\n              setData([...dataDelete])\n              onDelete(oldData._id)\n              resolve()\n            }),\n        }}\n      />\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TeacherSongs)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport moment from 'moment'\nimport { Chip, Tooltip } from '@material-ui/core'\nimport MaterialTable from 'material-table'\n\nimport Points from '../Points'\nimport PrimeBadge from '../Prime/PrimeBadge'\nimport PurchaseDetailsList from './PurchaseDetailsList'\nimport agent from '../../agent'\n\nimport { DELETE_PURCHASE } from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  courses: state.purchases.courses,\n  prime: state.common.settings.prime,\n  taxRate: state.common.settings.taxRate,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onDelete: (id) =>\n    dispatch({\n      type: DELETE_PURCHASE,\n      payload: agent.Purchases.delete(id),\n      snackbar: { message: 'Purchase deleted', variant: 'success' },\n    }),\n})\n\nconst ManagePurchasesTable = ({ courses, onDelete, prime, taxRate }) => {\n  const [data, setData] = useState([])\n\n  const primeRate = prime.storePurchaseDiscount\n  const isPrime = prime.enabled && primeRate > 0\n\n  const mappedData = courses\n    .map((course) =>\n      course.purchases.map((purchase) => ({\n        createdAt: moment(purchase.createdAt),\n        hasPrime: purchase.student.hasPrime,\n        note: purchase.note,\n        period: course.period,\n        products: purchase.products,\n        purchasedBy: `${purchase.student.firstName} ${\n          purchase.student.lastName\n        } ${purchase.student.dropped ? '(dropped)' : ''}`,\n        quantities: purchase.quantities,\n        status: purchase.status,\n        totalCost: purchase.products.reduce(\n          (prev, cur) =>\n            prev +\n            cur.cost *\n              purchase.quantities[cur._id] *\n              (taxRate / 100 + 1) *\n              (isPrime && purchase.student.hasPrime ? 1 - primeRate / 100 : 1),\n          0\n        ),\n        totalItems: Object.values(purchase.quantities).reduce(\n          (prev, cur) => prev + cur,\n          0\n        ),\n        _id: purchase._id,\n      }))\n    )\n    .flat()\n\n  const [columns] = useState([\n    {\n      title: 'Purchase Date',\n      field: 'createdAt',\n      editable: 'never',\n      render: (rowData, renderType) =>\n        renderType === 'row' ? (\n          <Tooltip\n            arrow\n            color='primary'\n            enterTouchDelay={0}\n            title={rowData.createdAt.format('h:mm:ss a')}\n          >\n            <span>{rowData.createdAt.format('ddd, MMM D, YYYY')}</span>\n          </Tooltip>\n        ) : (\n          rowData.format('ddd, MMM D, YYYY, h:mm:ss a')\n        ),\n    },\n    { title: 'Total Items', field: 'totalItems' },\n    {\n      title: 'Total Cost',\n      field: 'totalCost',\n      render: (rowData, renderType) =>\n        renderType === 'row' ? (\n          <Points value={rowData.totalCost} />\n        ) : (\n          <Points value={rowData} />\n        ),\n    },\n    { title: 'Purchased by', field: 'purchasedBy' },\n    {\n      title: 'Prime',\n      field: 'hasPrime',\n      render: (rowData, renderType) =>\n        renderType === 'row' ? (\n          rowData.hasPrime ? (\n            <PrimeBadge />\n          ) : (\n            ''\n          )\n        ) : rowData ? (\n          <PrimeBadge />\n        ) : (\n          'No Prime'\n        ),\n    },\n    {\n      title: 'Period',\n      field: 'period',\n      editable: 'never',\n      render: (rowData, renderType) =>\n        renderType === 'row' ? (\n          <Chip label={rowData.period} color='secondary' />\n        ) : (\n          <Chip label={rowData} color='secondary' />\n        ),\n    },\n    { title: 'Notes', field: 'note' },\n    { title: 'Status', field: 'status' },\n  ])\n\n  useEffect(() => {\n    setData(mappedData)\n  }, [courses])\n\n  return (\n    <MaterialTable\n      title='Purchases'\n      columns={columns}\n      data={data}\n      localization={{\n        body: {\n          emptyDataSourceMessage: 'No purchases have been made',\n          editRow: {\n            deleteText: 'Delete purchase?',\n            saveTooltip: 'Delete purchase',\n          },\n        },\n      }}\n      options={{ actionsColumnIndex: -1, paging: false, grouping: true }}\n      detailPanel={(rowData) => {\n        return (\n          <PurchaseDetailsList\n            hasPrime={rowData.hasPrime}\n            products={rowData.products}\n            quantities={rowData.quantities}\n          />\n        )\n      }}\n      onRowClick={(event, rowData, togglePanel) => togglePanel()}\n      editable={{\n        onRowDelete: (oldData) =>\n          new Promise((resolve, reject) => {\n            const dataDelete = [...data]\n            const index = oldData.tableData.id\n            dataDelete.splice(index, 1)\n            setData([...dataDelete])\n            onDelete(oldData._id)\n            resolve()\n          }),\n      }}\n    />\n  )\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ManagePurchasesTable)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  ButtonGroup,\n  Chip,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Fab,\n  Grid,\n  Tooltip,\n  Typography,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport { Alert, AlertTitle } from '@material-ui/lab'\nimport { ShoppingCart, ThumbDown, ThumbUp } from '@material-ui/icons'\n\nimport AccountBalance from '../AccountBalance'\nimport FabBadge from '../FabBadge'\nimport InputBox from '../InputBox'\nimport ListErrors from '../ListErrors'\nimport PrimeBadge from '../Prime/PrimeBadge'\nimport PurchaseDetailsList from '../Purchases/PurchaseDetailsList'\nimport agent from '../../agent'\n\nimport {\n  PURCHASES_DIALOG_UNLOADED,\n  UPDATE_PURCHASE,\n} from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  buttonGroup: {\n    marginBottom: theme.spacing(2),\n  },\n  dialog: {\n    '& > .MuiDialog-container > .MuiPaper-root': {\n      [theme.breakpoints.up('lg')]: {\n        minHeight: theme.spacing(54),\n        width: theme.spacing(100),\n      },\n    },\n  },\n  icon: {\n    marginRight: theme.spacing(1),\n  },\n  inputBox: {\n    backgroundColor:\n      theme.palette.type === 'dark'\n        ? theme.palette.background.default\n        : theme.palette.grey[100],\n    borderRadius: theme.spacing(1),\n    padding: theme.spacing(2),\n  },\n  panel: {\n    minWidth: theme.spacing(40),\n    maxWidth: theme.spacing(60),\n  },\n  purchaseNote: {\n    backgroundColor: theme.palette.grey[100],\n    borderRadius: theme.spacing(1),\n    marginTop: theme.spacing(2),\n    padding: theme.spacing(2),\n  },\n  removalAlert: {\n    backgroundColor: theme.palette.error.light,\n    border: `2px solid ${theme.palette.error.dark}`,\n    borderRadius: theme.spacing(2),\n    color: theme.palette.common.white,\n    fontSize: theme.typography.h6.fontSize,\n    padding: theme.spacing(1),\n    textAlign: 'center',\n    textTransform: 'uppercase',\n  },\n  selected: {\n    backgroundColor: theme.palette.primary.main,\n  },\n  songInfo: {\n    marginBottom: theme.spacing(4),\n  },\n  statusButton: {\n    '&:hover': {\n      backgroundColor: theme.palette.primary.light,\n    },\n  },\n  studentInfo: {\n    alignItems: 'center',\n    display: 'flex',\n    justifyContent: 'space-between',\n    marginTop: theme.spacing(4),\n    [theme.breakpoints.up('md')]: {\n      borderTopColor: theme.palette.primary.main,\n      borderTopStyle: 'dotted',\n      borderTopWidth: '4px',\n      paddingTop: theme.spacing(2),\n    },\n  },\n  studentName: {\n    'alignItems': 'center',\n    'display': 'flex',\n    '& > div': {\n      marginRight: theme.spacing(1),\n    },\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.common.settings,\n  ...state.purchases,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onExit: () => dispatch({ type: PURCHASES_DIALOG_UNLOADED }),\n  onUpdate: (purchase) =>\n    dispatch({\n      type: UPDATE_PURCHASE,\n      payload: agent.Purchases.update(purchase),\n    }),\n})\n\nconst ProcessPurchasesDialog = ({\n  courses,\n  errors,\n  inProgress,\n  isLoaded,\n  onExit,\n  onUpdate,\n  prime,\n}) => {\n  const [count, setCount] = useState(0)\n  const [invoice, setInvoice] = useState({})\n  const [open, setOpen] = useState(false)\n  const [purchase, setPurchase] = useState(null)\n  const [purchaseNote, setPurchaseNote] = useState('')\n  const [skippedPurchases, setSkippedPurchases] = useState([])\n  const [status, setStatus] = useState(null)\n  const [totalCount, setTotalCount] = useState(0)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n  const classes = useStyles()\n\n  const getPurchaseCount = () => {\n    let count = 0\n    if (courses.length > 0)\n      for (const course of courses)\n        count += course.purchases.filter((purchase) =>\n          purchase.status.startsWith('pending')\n        ).length\n    return count\n  }\n\n  const getNextPurchase = () => {\n    const prevPurchaseId = purchase?._id\n    setPurchase(null)\n    if (courses.length > 0) {\n      for (const course of courses) {\n        if (course.purchases.length > 0) {\n          const nextPurchase = course.purchases.find(\n            (purchase) =>\n              purchase.status.startsWith('pending') &&\n              !skippedPurchases.includes(purchase._id)\n          )\n          if (nextPurchase) {\n            nextPurchase.period = course.period\n            setPurchase(nextPurchase)\n            if (prevPurchaseId !== nextPurchase._id) setCount(count + 1)\n            break\n          }\n        }\n      }\n    }\n  }\n\n  const handleClickOpen = () => {\n    setOpen(true)\n    setTotalCount(getPurchaseCount())\n  }\n\n  const handleClose = () => {\n    setCount(0)\n    setOpen(false)\n    setStatus(null)\n    setPurchaseNote('')\n    setSkippedPurchases([])\n    setTotalCount(getPurchaseCount())\n  }\n\n  const handleAddPurchaseItemClick = (product) => {\n    const updatedPurchase = {\n      ...purchase,\n      products:\n        purchase.products.findIndex((prod) => prod._id === product._id) > -1\n          ? purchase.products\n          : [...purchase.products, product],\n      quantities: { ...purchase.quantities, [product._id]: 1 },\n      id: purchase._id,\n    }\n    onUpdate(updatedPurchase)\n  }\n\n  const handleDeletePurchaseItemClick = (productId, purchase) => {\n    const products = purchase.products.filter(\n      (product) => product._id !== productId\n    )\n    const quantities = { ...purchase.quantities }\n    delete quantities[productId]\n    onUpdate({\n      ...purchase,\n      products,\n      quantities,\n      id: purchase._id,\n    })\n  }\n\n  const handleUpdatePurchaseItemQuantity = (productId, quantity) => {\n    const quantities = { ...purchase.quantities, [productId]: quantity }\n    onUpdate({ ...purchase, quantities, id: purchase._id })\n  }\n\n  const handleSaveButtonClick = async () => {\n    onUpdate({\n      ...purchase,\n      id: purchase._id,\n      note: purchaseNote,\n      status,\n    })\n    setStatus(null)\n    setPurchaseNote('')\n  }\n\n  const handleStatusButtonClick = (status) => {\n    setStatus(status)\n  }\n\n  const handleSkip = () => {\n    setSkippedPurchases([...skippedPurchases, purchase._id])\n    setStatus(null)\n    setPurchaseNote('')\n  }\n\n  useEffect(() => {\n    setTotalCount(getPurchaseCount())\n  }, [isLoaded])\n\n  useEffect(() => {\n    getNextPurchase()\n  }, [courses, skippedPurchases])\n\n  const DroppedStudentAlert = () => (\n    <Alert severity='error'>\n      This student's account is currently suspended\n    </Alert>\n  )\n\n  const PrimeAlert = () => (\n    <>{prime.enabled && <Alert severity='success'>Prime member</Alert>}</>\n  )\n\n  return (\n    <>\n      <Fab color='primary' onClick={handleClickOpen} variant='extended'>\n        <FabBadge value={totalCount}>\n          <ShoppingCart className={classes.icon} />\n          Process purchases\n        </FabBadge>\n      </Fab>\n\n      <Dialog\n        className={classes.dialog}\n        fullScreen={fullScreen}\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onExit={onExit}\n        onFocus={(ev) => ev.stopPropagation()}\n        open={open}\n      >\n        <DialogTitle>Process Purchases</DialogTitle>\n        <DialogContent>\n          <ListErrors errors={errors} />\n          {purchase ? (\n            <Grid container spacing={2}>\n              <Grid item xs={12}>\n                {purchase.student.dropped && <DroppedStudentAlert />}\n              </Grid>\n              <Grid item xs={12}>\n                {purchase.student.hasPrime && <PrimeAlert />}\n              </Grid>\n              <Grid item xs={12}>\n                <PurchaseDetailsList\n                  actions={{\n                    add: (product) => handleAddPurchaseItemClick(product),\n                    delete: (productId) =>\n                      handleDeletePurchaseItemClick(productId, purchase),\n                    setInvoice: (invoice) => setInvoice(invoice),\n                    update: (productId, quantity) =>\n                      handleUpdatePurchaseItemQuantity(productId, quantity),\n                  }}\n                  hasPrime={purchase.student.hasPrime}\n                  products={purchase.products}\n                  quantities={purchase.quantities}\n                />\n              </Grid>\n              <Grid item xs={12} md={6}>\n                <div className={classes.panel}>\n                  <div className={classes.studentInfo}>\n                    <div className={classes.studentName}>\n                      <Chip color='secondary' label={purchase.period} />\n                      <Typography>\n                        {purchase.student.firstName} {purchase.student.lastName}\n                      </Typography>\n                      {purchase.student.hasPrime && <PrimeBadge size='2xl' />}\n                    </div>\n                    <AccountBalance\n                      cost={invoice.total}\n                      count={count}\n                      username={purchase.student.username}\n                    />\n                  </div>\n                </div>\n              </Grid>\n\n              <Grid item xs={12} md={6}>\n                <div className={classes.panel}>\n                  <Typography variant='h6'>Status</Typography>\n\n                  <ButtonGroup\n                    fullWidth\n                    size='large'\n                    className={classes.buttonGroup}\n                  >\n                    <Tooltip arrow enterTouchDelay={0} title='Approve'>\n                      <Button\n                        className={`${classes.statusButton} ${\n                          status === 'approved' && classes.selected\n                        }`}\n                        onClick={() => handleStatusButtonClick('approved')}\n                      >\n                        <ThumbUp />\n                      </Button>\n                    </Tooltip>\n                    <Tooltip arrow enterTouchDelay={0} title='Decline'>\n                      <Button\n                        className={`${classes.statusButton} ${\n                          status === 'declined' && classes.selected\n                        }`}\n                        onClick={() => handleStatusButtonClick('declined')}\n                      >\n                        <ThumbDown />\n                      </Button>\n                    </Tooltip>\n                  </ButtonGroup>\n                  <div className={classes.inputBox}>\n                    <InputBox\n                      label='Notes (optional)'\n                      name='purchaseNote'\n                      onChange={setPurchaseNote}\n                      value={purchaseNote}\n                    />\n                  </div>\n                </div>\n              </Grid>\n            </Grid>\n          ) : (\n            <Alert severity='info'>\n              <AlertTitle>All caught up!</AlertTitle>\n              There are no purchases to process at this time\n            </Alert>\n          )}\n        </DialogContent>\n\n        <DialogActions>\n          {purchase && (\n            <>\n              <Typography\n                style={{ marginRight: 'auto' }}\n                variant='subtitle2'\n              >{`Purchase ${count} of ${totalCount}`}</Typography>\n              <Button\n                color='primary'\n                disabled={inProgress || !status}\n                onClick={handleSaveButtonClick}\n                variant='contained'\n              >\n                {inProgress ? 'Saving...' : 'Save & Continue'}\n              </Button>\n              <Button\n                disabled={inProgress}\n                onClick={handleSkip}\n                variant='contained'\n              >\n                Skip\n              </Button>\n            </>\n          )}\n          <Button\n            disabled={inProgress}\n            onClick={handleClose}\n            variant='contained'\n          >\n            {purchase ? 'Cancel' : 'Close'}\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ProcessPurchasesDialog)\n","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { Button } from '@material-ui/core'\n\nimport ManagePurchasesTable from './ManagePurchasesTable'\nimport PageHeader from '../PageHeader'\nimport ProcessPurchasesDialog from './ProcessPurchasesDialog'\nimport agent from '../../agent'\n\nimport {\n  NAV_TAB_CHANGE,\n  TEACHER_PURCHASES_LOADED,\n  TEACHER_PURCHASES_UNLOADED,\n} from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  ...state.common.currentUser,\n  ...state.purchases,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onLoad: () =>\n    dispatch({\n      type: TEACHER_PURCHASES_LOADED,\n      payload: agent.Purchases.forTeacher(),\n    }),\n  onPageChange: (value, redirectTo) =>\n    dispatch({ type: NAV_TAB_CHANGE, value, redirectTo }),\n  onUnload: () => dispatch({ type: TEACHER_PURCHASES_UNLOADED }),\n})\n\nconst ManagePurchases = ({ onLoad, onPageChange, onUnload, role }) => {\n  const handlePageChange = () => onPageChange('store', `/${role}/products`)\n\n  useEffect(() => {\n    onLoad()\n\n    return () => {\n      onUnload()\n    }\n  }, [])\n\n  return (\n    <>\n      <PageHeader title='Manage Purchases'>\n        <Button onClick={handlePageChange} size='small'>\n          Manage Products\n        </Button>\n        <ProcessPurchasesDialog />\n      </PageHeader>\n      <ManagePurchasesTable />\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ManagePurchases)\n","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  makeStyles,\n} from '@material-ui/core'\n\nimport agent from '../../agent'\n\nimport { WHATS_NEW_FLAGS_RESET } from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  button: {\n    marginRight: theme.spacing(2),\n  },\n}))\n\nconst mapDispatchToProps = (dispatch) => ({\n  onReset: (role) =>\n    dispatch({\n      type: WHATS_NEW_FLAGS_RESET,\n      payload: agent.Teachers.resetFlags(role),\n      snackbar: {\n        message: `${role.charAt(0).toUpperCase() + role.slice(1)} flags reset`,\n        variant: 'success',\n      },\n    }),\n})\n\nconst ResetWhatsNewAlert = ({ onReset }) => {\n  const [open, setOpen] = useState(false)\n\n  const classes = useStyles()\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmit = (role) => {\n    setOpen(false)\n    onReset(role)\n  }\n\n  return (\n    <>\n      <Button className={classes.button} onClick={handleClickOpen} size='small'>\n        Reset Viewed Changes\n      </Button>\n      <Dialog\n        open={open}\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onFocus={(ev) => ev.stopPropagation()}\n      >\n        <DialogTitle>Reset Viewed Changes</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Reset viewed changes flag for all student or teacher accounts?\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button\n            onClick={() => handleSubmit('student')}\n            color='secondary'\n            variant='contained'\n            autoFocus\n          >\n            Reset Students\n          </Button>\n          <Button\n            onClick={() => handleSubmit('teacher')}\n            color='secondary'\n            variant='contained'\n            autoFocus\n          >\n            Reset Teachers\n          </Button>\n          <Button onClick={handleClose} variant='contained'>\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(() => ({}), mapDispatchToProps)(ResetWhatsNewAlert)\n","import React, { useState, useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Form, Field } from 'formik'\nimport { Switch, TextField } from 'formik-material-ui'\nimport * as Yup from 'yup'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Fab,\n  Grid,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport { Add, Edit } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport ListErrors from '../ListErrors'\nimport agent from '../../agent'\n\nimport {\n  ADD_TEACHER,\n  TEACHER_DIALOG_UNLOADED,\n  UPDATE_TEACHER,\n} from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  icon: {\n    marginRight: theme.spacing(1),\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.teachers,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onAdd: (user) =>\n    dispatch({\n      type: ADD_TEACHER,\n      payload: agent.Auth.register(user),\n      snackbar: { message: 'Teacher added', variant: 'success' },\n    }),\n  onExit: () => dispatch({ type: TEACHER_DIALOG_UNLOADED }),\n  onUpdate: (user) =>\n    dispatch({\n      type: UPDATE_TEACHER,\n      payload: agent.Teachers.update(user),\n      snackbar: { message: 'Teacher updated', variant: 'success' },\n    }),\n})\n\nconst TeacherDialog = ({\n  errors,\n  inProgress,\n  onAdd,\n  onExit,\n  onUpdate,\n  teacher,\n}) => {\n  const [open, setOpen] = useState(false)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n  const classes = useStyles()\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmitAdd = (values) => {\n    onAdd({\n      ...values,\n      permissions: { jukebox: values.permissionsJukebox },\n      role: 'teacher',\n    })\n  }\n\n  const handleSubmitUpdate = (values) => {\n    onUpdate({\n      ...teacher,\n      ...values,\n      permissions: { jukebox: values.permissionsJukebox },\n    })\n  }\n\n  useEffect(() => {\n    // Close the dialog only if there are no errors\n    if (!inProgress && !errors) setOpen(false)\n  }, [inProgress])\n\n  return (\n    <>\n      {teacher ? (\n        <ActionButton action='Update teacher' onClick={handleClickOpen}>\n          <Edit />\n        </ActionButton>\n      ) : (\n        <Fab color='primary' onClick={handleClickOpen} variant='extended'>\n          <Add className={classes.icon} />\n          Add teacher\n        </Fab>\n      )}\n      <Dialog\n        fullScreen={fullScreen}\n        open={open}\n        onClose={handleClose}\n        onClick={(ev) => ev.stopPropagation()}\n        onExit={onExit}\n        onFocus={(ev) => ev.stopPropagation()}\n      >\n        <Formik\n          initialValues={{\n            firstName: teacher?.firstName || '',\n            lastName: teacher?.lastName || '',\n            username: teacher?.username || '',\n            password: '',\n            permissionsJukebox: teacher?.permissions?.jukebox || false,\n          }}\n          validationSchema={Yup.object({\n            firstName: Yup.string().required('Required'),\n            lastName: Yup.string().required('Required'),\n            username: Yup.string().required('Required'),\n            password: Yup.string().required(!teacher ? 'Required' : ''),\n            permissionsJukebox: Yup.boolean(),\n          })}\n          onSubmit={async (values) => {\n            teacher ? handleSubmitUpdate(values) : handleSubmitAdd(values)\n          }}\n        >\n          {(formik) => (\n            <Form>\n              <DialogTitle>\n                {teacher ? 'Edit Teacher' : 'Add Teacher'}\n              </DialogTitle>\n              <DialogContent>\n                <ListErrors errors={errors} />\n                <Grid container spacing={2}>\n                  <Grid item xs={12} md={6}>\n                    <Field\n                      autoFocus={teacher ? false : true}\n                      color='primary'\n                      component={TextField}\n                      disabled={inProgress}\n                      label='First Name'\n                      name='firstName'\n                      type='text'\n                      fullWidth\n                    />\n                  </Grid>\n                  <Grid item xs={12} md={6}>\n                    <Field\n                      color='primary'\n                      component={TextField}\n                      disabled={inProgress}\n                      label='Last Name'\n                      name='lastName'\n                      type='text'\n                      fullWidth\n                    />\n                  </Grid>\n                  <Grid item xs={12} md={6}>\n                    <Field\n                      color='primary'\n                      component={TextField}\n                      disabled={!!teacher || inProgress}\n                      label='Username'\n                      name='username'\n                      type='text'\n                      fullWidth\n                    />\n                  </Grid>\n                  <Grid item xs={12} md={6}>\n                    <Field\n                      color='primary'\n                      component={TextField}\n                      disabled={inProgress}\n                      label='Password'\n                      name='password'\n                      type='text'\n                      fullWidth\n                    />\n                  </Grid>\n                  <Grid item xs={12} md={6}>\n                    <label>\n                      <Field\n                        component={Switch}\n                        disabled={inProgress}\n                        label='Jukebox'\n                        name='permissionsJukebox'\n                        type='checkbox'\n                      />\n                      Jukebox is{' '}\n                      {formik.values.permissionsJukebox\n                        ? 'enabled'\n                        : 'disabled'}\n                    </label>\n                  </Grid>\n                </Grid>\n              </DialogContent>\n              <DialogActions>\n                <Button\n                  color='primary'\n                  disabled={inProgress}\n                  type='submit'\n                  variant='contained'\n                >\n                  {teacher\n                    ? inProgress\n                      ? 'Updating...'\n                      : 'Update'\n                    : inProgress\n                    ? 'Adding...'\n                    : 'Add'}\n                </Button>\n                <Button\n                  disabled={inProgress}\n                  onClick={handleClose}\n                  variant='contained'\n                >\n                  Cancel\n                </Button>\n              </DialogActions>\n            </Form>\n          )}\n        </Formik>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TeacherDialog)\n","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n} from '@material-ui/core'\nimport { Delete } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport agent from '../../agent'\n\nimport { DELETE_TEACHER } from '../../constants/actionTypes'\n\nconst mapDispatchToProps = (dispatch) => ({\n  onDelete: (user) =>\n    dispatch({\n      type: DELETE_TEACHER,\n      payload: agent.Teachers.delete(user),\n      snackbar: { message: 'Teacher deleted', variant: 'success' },\n    }),\n})\n\nconst DeleteTeacherAlert = ({ onDelete, teacher }) => {\n  const [open, setOpen] = useState(false)\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmit = () => {\n    setOpen(false)\n    onDelete(teacher)\n  }\n\n  return (\n    <>\n      <ActionButton action='Delete teacher' onClick={handleClickOpen}>\n        <Delete />\n      </ActionButton>\n      <Dialog\n        open={open}\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onFocus={(ev) => ev.stopPropagation()}\n      >\n        <DialogTitle>Delete Teacher</DialogTitle>\n        <DialogContent>\n          <DialogContentText component='div'>\n            Are you sure you want to delete{' '}\n            <b>\n              {teacher.firstName} {teacher.lastName}\n            </b>\n            ? This action will permanently delete:\n            <ul>\n              <li>all student accounts</li>\n              <li>all song requests</li>\n              <li>all notifications</li>\n              <li>all transactions</li>\n              <li>all hallpasses</li>\n              <li>all purchases</li>\n              <li>all products</li>\n              <li>all bonuses</li>\n              <li>all scores</li>\n            </ul>\n            associated with this teacher. This action <b>cannot be undone</b>.\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button\n            onClick={handleSubmit}\n            color='secondary'\n            variant='contained'\n            autoFocus\n          >\n            Delete\n          </Button>\n          <Button onClick={handleClose} variant='contained'>\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(() => ({}), mapDispatchToProps)(DeleteTeacherAlert)\n","import React, { useState } from 'react'\nimport {\n  Avatar,\n  Card,\n  CardContent,\n  Chip,\n  ExpansionPanel,\n  ExpansionPanelDetails,\n  ExpansionPanelSummary,\n  Grid,\n  List,\n  ListItem,\n  ListItemText,\n  ListItemAvatar,\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableRow,\n  Typography,\n  makeStyles,\n} from '@material-ui/core'\nimport {\n  Assignment,\n  ExpandMore,\n  Gavel,\n  Group,\n  LocalAtm,\n  Money,\n  PlaylistAddCheck,\n  ShoppingCart,\n  Store,\n  Wc,\n} from '@material-ui/icons'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport {\n  faCircleHalfStroke,\n  faFlask,\n  faPersonBooth,\n  faUserLargeSlash,\n} from '@fortawesome/free-solid-svg-icons'\nimport { faTurntable } from '@fortawesome/pro-solid-svg-icons'\n\nimport DeleteTeacherAlert from './DeleteTeacherAlert'\nimport JukeboxBadge from '../Jukebox/JukeboxBadge'\nimport StatCard from '../StatCard'\nimport TeacherDialog from './TeacherDialog'\n\nconst useStyles = makeStyles((theme) => ({\n  teacherDetails: {\n    display: 'block',\n  },\n  teacherHeader: {\n    alignItems: 'center',\n    display: 'flex',\n    justifyContent: 'space-between',\n    width: '100%',\n  },\n  teacherUsername: {\n    marginRight: theme.spacing(2),\n    minWidth: theme.spacing(12),\n  },\n  teacherName: {\n    alignItems: 'center',\n    display: 'flex',\n    flexGrow: '1',\n  },\n}))\n\nconst TeacherStats = ({ teacher }) => {\n  const addItems = (items) => (items ? Object.values(items).flat().length : 0)\n\n  const countStudentSetting = (setting, students) =>\n    students\n      ? Object.values(students)\n          .flat()\n          .reduce((prev, cur) => prev + cur[setting], 0)\n      : 0\n\n  return (\n    <div>\n      <Typography variant='h6' gutterBottom>\n        Teacher Stats\n      </Typography>\n      <Grid container spacing={2}>\n        <StatCard\n          icon={<Assignment fontSize='large' />}\n          title='Assignments'\n          value={addItems(teacher.tasks)}\n          round\n        />\n        <StatCard\n          icon={<FontAwesomeIcon icon={faCircleHalfStroke} size='lg' />}\n          title='Dark Mode'\n          value={countStudentSetting('darkMode', teacher.students)}\n          round\n        />\n        <StatCard\n          icon={<FontAwesomeIcon icon={faUserLargeSlash} size='lg' />}\n          title='Dropped'\n          value={countStudentSetting('dropped', teacher.students)}\n          round\n        />\n        <StatCard\n          icon={<Gavel fontSize='large' />}\n          title='Fines'\n          value={addItems(teacher.fines)}\n          round\n        />\n        <StatCard\n          icon={<Wc fontSize='large' />}\n          title='Hallpasses'\n          value={addItems(teacher.passes)}\n          round\n        />\n        <StatCard\n          icon={<FontAwesomeIcon icon={faTurntable} size='lg' />}\n          title='Jukebox'\n          value={addItems(teacher.jukebox)}\n          round\n        />\n        <StatCard\n          icon={<ShoppingCart fontSize='large' />}\n          title='Online Purchases'\n          value={addItems(teacher.purchases)}\n          round\n        />\n        <StatCard\n          icon={<FontAwesomeIcon icon={faFlask} size='lg' />}\n          title='Prime Members'\n          value={countStudentSetting('hasPrime', teacher.students)}\n          round\n        />\n        <StatCard\n          icon={<Store fontSize='large' />}\n          title='Products'\n          value={teacher.products ? teacher.products.length : 0}\n          round\n        />\n        <StatCard\n          icon={<Money fontSize='large' />}\n          title='Scores'\n          value={addItems(teacher.scores)}\n          round\n        />\n        <StatCard\n          icon={<PlaylistAddCheck fontSize='large' />}\n          title='Songs'\n          value={addItems(teacher.songs)}\n          round\n        />\n        <StatCard\n          icon={<Group fontSize='large' />}\n          title='Students'\n          value={addItems(teacher.students)}\n          round\n        />\n        <StatCard\n          icon={<LocalAtm fontSize='large' />}\n          title='Transactions'\n          value={addItems(teacher.transactions)}\n          round\n        />\n        <StatCard\n          icon={<FontAwesomeIcon icon={faPersonBooth} size='lg' />}\n          title='Viewed Changes'\n          value={countStudentSetting('viewedChanges', teacher.students)}\n          round\n        />\n      </Grid>\n    </div>\n  )\n}\n\nconst TeacherCourses = ({ teacher }) => {\n  const countSetting = (setting, students) =>\n    students.reduce((prev, cur) => prev + cur[setting], 0)\n\n  const StatListItem = ({ icon, primary, secondary }) => (\n    <ListItem alignItems='flex-start'>\n      <ListItemAvatar>\n        <Avatar>{icon}</Avatar>\n      </ListItemAvatar>\n      <ListItemText primary={primary} secondary={secondary} />\n    </ListItem>\n  )\n\n  return (\n    <div>\n      <Typography variant='h6' gutterBottom>\n        Courses\n      </Typography>\n      <Grid container spacing={2}>\n        {teacher.courses && teacher.courses.length > 0 ? (\n          teacher.courses.map((course, index) => {\n            return (\n              <Grid item xs={12} md={6} lg={4} key={index}>\n                <Card variant='outlined'>\n                  <CardContent>\n                    <Typography gutterBottom variant='h5'>\n                      {course.name}\n                    </Typography>\n                    <Chip\n                      color='secondary'\n                      label={`Period ${course.period}`}\n                      size='small'\n                      style={{ color: 'white', marginRight: '8px' }}\n                    />\n                    <Chip\n                      color='primary'\n                      label={`${course.students.length} student${\n                        course.students.length === 1 ? '' : 's'\n                      }`}\n                      size='small'\n                      variant='outlined'\n                    />\n                    <List>\n                      <StatListItem\n                        icon={<Assignment />}\n                        primary='Assignments'\n                        secondary={teacher.tasks[course._id].length}\n                      />\n                      <StatListItem\n                        icon={<FontAwesomeIcon icon={faCircleHalfStroke} />}\n                        primary='Dark Mode'\n                        secondary={countSetting(\n                          'darkMode',\n                          teacher.students[course._id]\n                        )}\n                      />\n                      <StatListItem\n                        icon={<FontAwesomeIcon icon={faUserLargeSlash} />}\n                        primary='Dropped'\n                        secondary={countSetting(\n                          'dropped',\n                          teacher.students[course._id]\n                        )}\n                      />\n                      <StatListItem\n                        icon={<Gavel />}\n                        primary='Fines'\n                        secondary={teacher.fines[course._id].length}\n                      />\n                      <StatListItem\n                        icon={<Wc />}\n                        primary='Hallpasses'\n                        secondary={teacher.passes[course._id].length}\n                      />\n                      <StatListItem\n                        icon={<FontAwesomeIcon icon={faTurntable} />}\n                        primary='Jukebox'\n                        secondary={teacher.jukebox[course._id].length}\n                      />\n                      <StatListItem\n                        icon={<ShoppingCart />}\n                        primary='Online Purchases'\n                        secondary={teacher.purchases[course._id].length}\n                      />\n                      <StatListItem\n                        icon={<FontAwesomeIcon icon={faFlask} />}\n                        primary='Prime Members'\n                        secondary={countSetting(\n                          'hasPrime',\n                          teacher.students[course._id]\n                        )}\n                      />\n                      <StatListItem\n                        icon={<Money />}\n                        primary='Scores'\n                        secondary={teacher.scores[course._id].length}\n                      />\n                      <StatListItem\n                        icon={<PlaylistAddCheck />}\n                        primary='Song Requests'\n                        secondary={teacher.songs[course._id].length}\n                      />\n                      <StatListItem\n                        icon={<LocalAtm />}\n                        primary='Transactions'\n                        secondary={teacher.transactions[course._id].length}\n                      />\n                      <StatListItem\n                        icon={<FontAwesomeIcon icon={faPersonBooth} />}\n                        primary='Viewed Changes'\n                        secondary={countSetting(\n                          'viewedChanges',\n                          teacher.students[course._id]\n                        )}\n                      />\n                    </List>\n                  </CardContent>\n                </Card>\n              </Grid>\n            )\n          })\n        ) : (\n          <Grid item xs={12}>\n            <Typography>No courses have been created</Typography>\n          </Grid>\n        )}\n      </Grid>\n    </div>\n  )\n}\n\nconst TeacherSettings = ({ settings }) => {\n  const SettingValue = ({ value }) => {\n    const type = typeof value\n    const valueString = JSON.stringify(value)\n    if (type === 'boolean')\n      return (\n        <Chip\n          color={value ? 'primary' : 'secondary'}\n          label={valueString}\n          style={{ color: 'white' }}\n        />\n      )\n    if (type === 'object' && value.hasOwnProperty('_id')) return value._id\n    return valueString\n  }\n\n  return (\n    <div>\n      <Typography variant='h6' gutterBottom>\n        Settings\n      </Typography>\n      <Table>\n        <TableHead>\n          <TableRow>\n            <TableCell>Setting</TableCell>\n            <TableCell>Value</TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {Object.keys(settings).map((setting, index) => (\n            <TableRow key={index}>\n              <TableCell>{setting}</TableCell>\n              <TableCell>\n                <SettingValue value={settings[setting]} />\n              </TableCell>\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n    </div>\n  )\n}\n\nconst TeacherList = ({ teachers }) => {\n  const [expanded, setExpanded] = useState(false)\n\n  const classes = useStyles()\n\n  const handleChange = (panel) => (ev, isExpanded) => {\n    setExpanded(isExpanded ? panel : false)\n  }\n\n  return (\n    <>\n      {teachers?.length > 0 ? (\n        teachers.map((teacher) => {\n          return (\n            <ExpansionPanel\n              expanded={expanded === teacher.username}\n              key={teacher.username}\n              onChange={handleChange(teacher.username)}\n            >\n              <ExpansionPanelSummary expandIcon={<ExpandMore />}>\n                <div className={classes.teacherHeader}>\n                  <Chip\n                    color='secondary'\n                    label={teacher.username}\n                    className={classes.teacherUsername}\n                  />\n                  <Typography className={classes.teacherName} variant='h5'>\n                    {teacher.firstName} {teacher.lastName}\n                    <JukeboxBadge\n                      alwaysShow={true}\n                      enabled={teacher?.permissions?.jukebox || false}\n                    />\n                  </Typography>\n                  <TeacherDialog teacher={teacher} />\n                  <DeleteTeacherAlert teacher={teacher} />\n                </div>\n              </ExpansionPanelSummary>\n              <ExpansionPanelDetails className={classes.teacherDetails}>\n                <Grid container spacing={2}>\n                  <Grid item xs={12}>\n                    <TeacherStats teacher={teacher} />\n                  </Grid>\n                  <Grid item xs={12}>\n                    <TeacherCourses teacher={teacher} />\n                  </Grid>\n                  <Grid item xs={12}>\n                    <TeacherSettings settings={teacher.settings} />\n                  </Grid>\n                  <Grid item xs={12}>\n                    <Typography>\n                      <b>Viewed Changes</b>:{' '}\n                      {teacher.viewedChanges ? 'yes' : 'no'}\n                    </Typography>\n                  </Grid>\n                </Grid>\n              </ExpansionPanelDetails>\n            </ExpansionPanel>\n          )\n        })\n      ) : (\n        <Typography>No teachers found</Typography>\n      )}\n    </>\n  )\n}\n\nexport default TeacherList\n","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\n\nimport PageHeader from './../PageHeader'\nimport ResetWhatsNewAlert from './ResetWhatsNewAlert'\nimport Spinner from '../Spinner'\nimport TeacherDialog from './TeacherDialog'\nimport TeacherList from './TeacherList'\nimport agent from '../../agent'\n\nimport {\n  MANAGE_TEACHERS_PAGE_LOADED,\n  MANAGE_TEACHERS_PAGE_UNLOADED,\n} from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  ...state.teachers,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onLoad: () =>\n    dispatch({\n      type: MANAGE_TEACHERS_PAGE_LOADED,\n      payload: agent.Teachers.getAll(),\n    }),\n  onUnload: () => dispatch({ type: MANAGE_TEACHERS_PAGE_UNLOADED }),\n})\n\nconst ManageTeachers = ({ onLoad, onUnload, pageLoaded, teachers }) => {\n  useEffect(() => {\n    onLoad()\n\n    return () => {\n      onUnload()\n    }\n  }, [])\n\n  return (\n    <>\n      <PageHeader title={'Manage Teachers'}>\n        <ResetWhatsNewAlert />\n        <TeacherDialog />\n      </PageHeader>\n      {pageLoaded ? (\n        <TeacherList teachers={teachers} />\n      ) : (\n        <Spinner message='Loading...' />\n      )}\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ManageTeachers)\n","import React from 'react'\nimport { makeStyles } from '@material-ui/core'\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    backgroundColor: theme.palette.info.main,\n    borderRadius: '100px',\n    color: theme.palette.common.white,\n    cursor: 'pointer',\n    fontFamily: '\"Carter One\", serif',\n    fontSize: theme.typography.h5.fontSize,\n    padding: `${theme.spacing(2)}px ${theme.spacing(4)}px`,\n    textAlign: 'center',\n    textTransform: 'uppercase',\n  },\n}))\n\nconst BigButton = (props) => {\n  const classes = useStyles()\n\n  return (\n    <div className={classes.root} {...props}>\n      {props.children}\n    </div>\n  )\n}\n\nexport default BigButton\n","import React from 'react'\nimport { Typography, makeStyles } from '@material-ui/core'\n\nimport BigButton from '../BigButton'\nimport Logo from '../Logo'\n\nconst getGradient = (theme, angle) =>\n  `linear-gradient(${angle}, ${theme.palette.primary.main} 0%, ${theme.palette.secondary.main} 100%)`\n\nconst useStyles = makeStyles((theme) => ({\n  banner: {\n    alignItems: 'center',\n    background: theme.palette.primary.main,\n    background: getGradient(theme, '180deg'),\n    color: theme.palette.common.white,\n    cursor: 'pointer',\n    display: 'flex',\n    flexFlow: 'column nowrap',\n    height: '500px',\n    justifyContent: 'space-between',\n    marginBottom: theme.spacing(3),\n    padding: theme.spacing(2),\n    [theme.breakpoints.up('md')]: {\n      background: getGradient(theme, '90deg'),\n      flexFlow: 'row nowrap',\n      height: '180px',\n      padding: `${theme.spacing(2)}px ${theme.spacing(4)}px`,\n    },\n  },\n  bannerLogo: {\n    height: '45%',\n    [theme.breakpoints.up('md')]: {\n      height: '100%',\n    },\n  },\n  bannerText: {\n    fontFamily: '\"Carter One\", serif',\n  },\n}))\n\nconst PrimeBanner = (props) => {\n  const classes = useStyles()\n\n  return (\n    <div className={classes.banner} {...props}>\n      <Logo className={classes.bannerLogo} prime={true} />\n      <Typography\n        align='center'\n        className={classes.bannerText}\n        color='inherit'\n        variant='h4'\n      >\n        Get access\n        <br />\n        to exclusive\n        <br />\n        member benefits!\n      </Typography>\n      <BigButton>Click to learn more</BigButton>\n    </div>\n  )\n}\n\nexport default PrimeBanner\n","import React from 'react'\nimport { Grid, Typography, makeStyles } from '@material-ui/core'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport {\n  faCircleHalfStroke,\n  faMoneyBillTrendUp,\n  faMusic,\n  faTag,\n  faTicket,\n  faTruck,\n  faMoneyBillWave,\n  faVolumeXmark,\n} from '@fortawesome/free-solid-svg-icons'\nimport { faTurntable } from '@fortawesome/pro-solid-svg-icons'\nimport Confetti from 'react-confetti'\n\nimport Logo from '../Logo'\n\nconst useStyles = makeStyles((theme) => ({\n  logo: {\n    'display': 'flex',\n    'justifyContent': 'center',\n    '& > img': {\n      width: '75%',\n      [theme.breakpoints.up('md')]: {\n        width: '100%',\n      },\n    },\n  },\n  section: {\n    background: `linear-gradient(90deg, ${theme.palette.primary.main} 0%, ${theme.palette.secondary.main} 100%)`,\n    color: theme.palette.common.white,\n    fontFamily: '\"Carter One\", serif',\n    overflow: 'hidden',\n    padding: `${theme.spacing(6)}px ${theme.spacing(2)}px`,\n    [theme.breakpoints.up('md')]: {\n      padding: theme.spacing(8),\n    },\n  },\n  text: {\n    fontFamily: 'inherit',\n  },\n}))\n\nconst PrimeConfirmation = ({ celebrate, enabled, prime }) => {\n  const classes = useStyles()\n\n  return (\n    <Grid container alignItems='center' className={classes.section} spacing={2}>\n      {celebrate && <Confetti numberOfPieces={750} recycle={false} />}\n      <Grid item xs={12} md={4} className={classes.logo}>\n        <Logo className={classes.logo} prime={true} />\n      </Grid>\n      {enabled.any && (\n        <Grid item xs={12} md={8}>\n          <Typography\n            className={classes.text}\n            color='inherit'\n            variant='h2'\n            gutterBottom\n          >\n            Welcome to Prime!\n          </Typography>\n          <Typography variant='h5'>\n            You now have instant access to...\n          </Typography>\n          <Typography color='inherit' variant='h6'>\n            <ul className='fa-ul'>\n              {enabled.darkMode && (\n                <li>\n                  <FontAwesomeIcon icon={faCircleHalfStroke} listItem />\n                  both light and dark modes in Settings\n                </li>\n              )}\n              {enabled.discounts.songs && (\n                <li>\n                  <FontAwesomeIcon icon={faMusic} listItem />a{' '}\n                  {prime.songRequestPurchaseDiscount}% discount on all song\n                  requests\n                </li>\n              )}\n              {enabled.songRemoval && (\n                <li>\n                  <FontAwesomeIcon icon={faVolumeXmark} listItem />\n                  ability to remove any songs from the class playlist for a fee\n                </li>\n              )}\n              {enabled.songRemoval && (\n                <li>\n                  <FontAwesomeIcon icon={faMoneyBillTrendUp} listItem />\n                  earn bonus points when one of your songs is removed\n                </li>\n              )}\n              {enabled.jukebox && (\n                <li>\n                  <FontAwesomeIcon icon={faTurntable} listItem />\n                  access to Jukebox to preview songs on the class playlist, plus\n                  add songs to the queue to play next for a fee\n                </li>\n              )}\n              {enabled.discounts.store && (\n                <li>\n                  <FontAwesomeIcon icon={faTag} listItem />a{' '}\n                  {prime.storePurchaseDiscount}% discount on all online store\n                  purchases\n                </li>\n              )}\n              {enabled.sameDay && (\n                <li>\n                  <FontAwesomeIcon icon={faTruck} listItem />\n                  same-day pickup for online purchases rather than at the end of\n                  the week\n                </li>\n              )}\n              {enabled.discounts.hallpass && (\n                <li>\n                  <FontAwesomeIcon icon={faTicket} listItem />a{' '}\n                  {prime.hallpassDiscount}% discount on all hallpass purchases\n                </li>\n              )}\n              <li>\n                <FontAwesomeIcon icon={faMoneyBillWave} listItem />\n                your membership is good for the whole school year\n              </li>\n            </ul>\n          </Typography>\n        </Grid>\n      )}\n    </Grid>\n  )\n}\n\nexport default PrimeConfirmation\n","import React from 'react'\nimport {\n  Grid,\n  Typography,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport {\n  faCircleHalfStroke,\n  faFlask,\n  faMoneyBillTrendUp,\n  faMoneyBillWave,\n  faMusic,\n  faTag,\n  faTicket,\n  faTruck,\n  faVolumeXmark,\n} from '@fortawesome/free-solid-svg-icons'\nimport { faTurntable } from '@fortawesome/pro-solid-svg-icons'\n\nimport BigButton from '../BigButton'\nimport Logo from '../Logo'\nimport Points from '../Points'\nimport primeDarkModeAd from '../../images/prime-darkmode.png'\nimport primeJukeboxAd from '../../images/prime-jukebox.png'\nimport primeSameDayAd from '../../images/prime-sameday.png'\nimport primeSongRemovalAd from '../../images/prime-songremoval.png'\nimport primeSongsAd from '../../images/prime-songs.png'\nimport primeStoreAd from '../../images/prime-purchases.png'\n\nconst getGradient = (angle, color1, color2) =>\n  `linear-gradient(${angle}, ${color1} 0%, ${color2} 100%)`\n\nconst useStyles = makeStyles((theme) => ({\n  cost: {\n    border: `8px solid ${theme.palette.common.white}`,\n    borderRadius: theme.spacing(4),\n    marginBottom: theme.spacing(4),\n    padding: theme.spacing(3),\n    [theme.breakpoints.up('md')]: {\n      marginBottom: 0,\n    },\n  },\n  list: {\n    'marginBottom': 0,\n    'marginTop': -theme.spacing(1),\n    '& li': {\n      marginTop: theme.spacing(2),\n    },\n  },\n  logo: {\n    'display': 'flex',\n    'justifyContent': 'center',\n    '& > img': {\n      width: '75%',\n      [theme.breakpoints.up('md')]: {\n        width: '100%',\n      },\n    },\n  },\n  padLeft: {\n    [theme.breakpoints.up('md')]: {\n      paddingLeft: `${theme.spacing(4)}px !important`,\n    },\n  },\n  padRight: {\n    [theme.breakpoints.up('md')]: {\n      paddingRight: `${theme.spacing(4)}px !important`,\n    },\n  },\n  section: {\n    'color': theme.palette.common.white,\n    'fontFamily': '\"Carter One\", serif',\n    'overflow': 'hidden',\n    'padding': `${theme.spacing(6)}px ${theme.spacing(2)}px`,\n    [theme.breakpoints.up('md')]: {\n      padding: theme.spacing(8),\n    },\n    '& h1': {\n      fontSize: theme.typography.h2.fontSize,\n      [theme.breakpoints.up('md')]: {\n        fontSize: theme.typography.h1.fontSize,\n      },\n    },\n    '& h2': {\n      fontSize: theme.typography.h3.fontSize,\n      [theme.breakpoints.up('md')]: {\n        fontSize: theme.typography.h2.fontSize,\n      },\n    },\n    '& h4': {\n      fontSize: theme.typography.h5.fontSize,\n      [theme.breakpoints.up('md')]: {\n        fontSize: theme.typography.h4.fontSize,\n      },\n    },\n    '& svg': {\n      display: 'block',\n      margin: '0 auto',\n      [theme.breakpoints.up('md')]: {\n        display: 'inline-block',\n      },\n    },\n  },\n  sectionImage: {\n    width: '100%',\n  },\n  songRemovalAd: {\n    [theme.breakpoints.up('md')]: {\n      position: 'absolute',\n      right: '-140px',\n      top: '15px',\n      width: '120%',\n    },\n  },\n  songsAd: {\n    [theme.breakpoints.up('md')]: {\n      left: '-100px',\n      position: 'absolute',\n      top: '-10px',\n      width: '120%',\n    },\n  },\n  storeAd: {\n    [theme.breakpoints.up('md')]: {\n      left: '-50px',\n      position: 'absolute',\n      top: '-30px',\n      width: '110%',\n    },\n  },\n  text: {\n    fontFamily: '\"Carter One\", serif',\n  },\n}))\n\nconst PrimeSignup = ({ balance, enabled, onSubmit, prime }) => {\n  const theme = useTheme()\n  const isMobile = useMediaQuery(theme.breakpoints.down('md'))\n  const classes = useStyles()\n\n  return (\n    <>\n      <Grid\n        container\n        alignItems='center'\n        className={classes.section}\n        spacing={2}\n        style={{\n          background: getGradient(\n            '90deg',\n            theme.palette.primary.main,\n            theme.palette.secondary.main\n          ),\n        }}\n      >\n        <Grid item className={classes.logo} xs={12} md={4}>\n          <Logo prime={true} />\n        </Grid>\n        {enabled.any && (\n          <Grid item xs={12} md={8}>\n            <Typography className={classes.text} color='inherit' variant='h5'>\n              With a Chem Cash Prime membership you get...\n              <ul className={`fa-ul ${classes.list}`}>\n                {enabled.darkMode && (\n                  <li>\n                    <FontAwesomeIcon icon={faCircleHalfStroke} listItem />\n                    access to dark mode\n                  </li>\n                )}\n                {enabled.discounts.songs && (\n                  <li>\n                    <FontAwesomeIcon icon={faMusic} listItem />\n                    discounts on songs\n                  </li>\n                )}\n                {enabled.songRemoval && (\n                  <li>\n                    <FontAwesomeIcon icon={faVolumeXmark} listItem />\n                    ability to remove songs\n                  </li>\n                )}\n                {enabled.jukebox && (\n                  <li>\n                    <FontAwesomeIcon icon={faTurntable} listItem />\n                    access to Jukebox to play your songs now\n                  </li>\n                )}\n                {enabled.discounts.store && (\n                  <li>\n                    <FontAwesomeIcon icon={faTag} listItem />\n                    discounts on store purchases\n                  </li>\n                )}\n                {enabled.sameDay && (\n                  <li>\n                    <FontAwesomeIcon icon={faTruck} listItem />\n                    same-day pickup for online purchases\n                  </li>\n                )}\n                {enabled.discounts.hallpass && (\n                  <li>\n                    <FontAwesomeIcon icon={faTicket} listItem />\n                    discounts on hallpasses\n                  </li>\n                )}\n              </ul>\n            </Typography>\n          </Grid>\n        )}\n      </Grid>\n\n      {enabled.darkMode && (\n        <Grid\n          container\n          className={classes.section}\n          spacing={2}\n          style={{ backgroundColor: theme.palette.common.black }}\n        >\n          <Grid item xs={12} md={8} className={classes.padRight}>\n            <Typography align='center' variant='h1' gutterBottom>\n              <FontAwesomeIcon icon={faCircleHalfStroke} /> Dark Mode\n            </Typography>\n            <Typography align='right' variant='h2' gutterBottom>\n              Someone turn on a light, it's dark in here\n            </Typography>\n            <Typography align='right' variant='h4'>\n              As a Prime member <br />\n              you get access to the <br />\n              dark mode toggle <br />\n              on the settings page\n            </Typography>\n          </Grid>\n          <Grid item xs={12} md={4}>\n            <img className={classes.sectionImage} src={primeDarkModeAd} />\n          </Grid>\n        </Grid>\n      )}\n\n      {enabled.discounts.songs && (\n        <Grid\n          container\n          className={classes.section}\n          spacing={2}\n          style={{\n            background: getGradient(\n              '180deg',\n              theme.palette.primary.dark,\n              theme.palette.primary.light\n            ),\n          }}\n        >\n          <Grid item xs={12}>\n            <Typography align='center' variant='h1' gutterBottom>\n              <FontAwesomeIcon icon={faMusic} /> Song Discounts\n            </Typography>\n          </Grid>\n          <Grid\n            container\n            direction={isMobile ? 'column-reverse' : 'row'}\n            spacing={2}\n            wrap='nowrap'\n          >\n            <Grid item xs={12} md={7} style={{ position: 'relative' }}>\n              <img\n                className={`${classes.sectionImage} ${classes.songsAd}`}\n                src={primeSongsAd}\n              />\n            </Grid>\n            <Grid item xs={12} md={5} className={classes.padLeft}>\n              <Typography align='left' variant='h2' gutterBottom>\n                Hear more of the music you love\n              </Typography>\n              <Typography align='left' variant='h4'>\n                With discounts on all song purchases, you can buy more of the\n                music you enjoy\n              </Typography>\n            </Grid>\n          </Grid>\n        </Grid>\n      )}\n\n      {enabled.songRemoval && (\n        <Grid\n          container\n          className={classes.section}\n          spacing={2}\n          style={{\n            background: getGradient(\n              '180deg',\n              theme.palette.error.dark,\n              theme.palette.error.light\n            ),\n          }}\n        >\n          <Grid item xs={12}>\n            <Typography align='center' variant='h1' gutterBottom>\n              <FontAwesomeIcon icon={faVolumeXmark} /> Remove Songs\n            </Typography>\n          </Grid>\n          <Grid item xs={12} md={5} className={classes.padLeft}>\n            <Typography align='right' variant='h2' gutterBottom>\n              Hear less music you don't like\n            </Typography>\n            <Typography align='right' variant='h4'>\n              Prime members have the ability to remove any songs and earn bonus\n              points if their songs get removed\n            </Typography>\n          </Grid>\n          <Grid item xs={12} md={7} style={{ position: 'relative' }}>\n            <img\n              className={`${classes.sectionImage} ${classes.songRemovalAd}`}\n              src={primeSongRemovalAd}\n            />\n          </Grid>\n        </Grid>\n      )}\n\n      {enabled.jukebox && (\n        <Grid\n          container\n          className={classes.section}\n          spacing={2}\n          style={{\n            background: getGradient(\n              '180deg',\n              theme.palette.grey[700],\n              theme.palette.grey[500]\n            ),\n          }}\n        >\n          <Grid item xs={12}>\n            <Typography align='center' variant='h1' gutterBottom>\n              <FontAwesomeIcon icon={faTurntable} /> Jukebox\n            </Typography>\n          </Grid>\n          <Grid\n            container\n            direction={isMobile ? 'column-reverse' : 'row'}\n            spacing={2}\n            wrap='nowrap'\n          >\n            <Grid item xs={12} md={7} style={{ position: 'relative' }}>\n              <img\n                className={`${classes.sectionImage} ${classes.songsAd}`}\n                src={primeJukeboxAd}\n              />\n            </Grid>\n            <Grid item xs={12} md={5} className={classes.padLeft}>\n              <Typography align='left' variant='h2' gutterBottom>\n                Queue your song to play next\n              </Typography>\n              <Typography align='left' variant='h4'>\n                Get acces to Jukebox, which allows you to preview songs on the\n                class playlist and add songs to the queue to play next\n              </Typography>\n            </Grid>\n          </Grid>\n        </Grid>\n      )}\n\n      {enabled.discounts.store && (\n        <Grid\n          container\n          className={classes.section}\n          spacing={2}\n          style={{\n            background: getGradient(\n              '180deg',\n              theme.palette.secondary.dark,\n              theme.palette.secondary.light\n            ),\n          }}\n        >\n          <Grid item xs={12}>\n            <Typography align='center' variant='h1' gutterBottom>\n              <FontAwesomeIcon icon={faTag} /> Store Discounts\n            </Typography>\n          </Grid>\n          <Grid\n            container\n            direction={isMobile ? 'column-reverse' : 'row'}\n            spacing={2}\n            wrap='nowrap'\n          >\n            <Grid item xs={12} md={7} style={{ position: 'relative' }}>\n              <img\n                className={`${classes.sectionImage} ${classes.storeAd}`}\n                src={primeStoreAd}\n              />\n            </Grid>\n            <Grid item xs={12} md={5} className={classes.padLeft}>\n              <Typography align='left' variant='h2' gutterBottom>\n                Get more,\n                <br />\n                spend less\n              </Typography>\n              <Typography align='left' variant='h4'>\n                With discounts on all store purchases, you can buy more of the\n                stuff you want\n              </Typography>\n            </Grid>\n          </Grid>\n        </Grid>\n      )}\n\n      {enabled.sameDay && (\n        <Grid\n          container\n          className={classes.section}\n          spacing={2}\n          style={{\n            background: getGradient(\n              '180deg',\n              theme.palette.info.dark,\n              theme.palette.info.light\n            ),\n          }}\n        >\n          <Grid item xs={12}>\n            <Typography align='center' variant='h1' gutterBottom>\n              <FontAwesomeIcon icon={faTruck} /> Same-Day Pickup\n            </Typography>\n          </Grid>\n          <Grid item xs={12} md={7} className={classes.padLeft}>\n            <Typography align='right' variant='h2' gutterBottom>\n              Get your stuff...\n              <br />\n              now\n            </Typography>\n            <Typography align='right' variant='h4'>\n              Only Prime members can pickup their purchases the same day they\n              ordered them, while non-members will have to wait until the end of\n              the week\n            </Typography>\n          </Grid>\n          <Grid item xs={12} md={5}>\n            <img className={classes.sectionImage} src={primeSameDayAd} />\n          </Grid>\n        </Grid>\n      )}\n\n      <Grid\n        container\n        className={classes.section}\n        spacing={2}\n        style={{\n          background: getGradient(\n            '90deg',\n            theme.palette.secondary.main,\n            theme.palette.primary.main\n          ),\n        }}\n      >\n        <Grid item xs={12}>\n          <Typography align='center' variant='h1' gutterBottom>\n            <FontAwesomeIcon icon={faFlask} /> Join Today\n          </Typography>\n        </Grid>\n        {enabled.any && (\n          <Grid item xs={12} md={6}>\n            <Typography align='center' variant='h5'>\n              Full Membership Benefits\n            </Typography>\n            <Typography color='inherit' variant='h6'>\n              <ul className='fa-ul'>\n                {enabled.darkMode && (\n                  <li>\n                    <FontAwesomeIcon icon={faCircleHalfStroke} listItem />\n                    access to both light and dark modes\n                  </li>\n                )}\n                {enabled.discounts.songs && (\n                  <li>\n                    <FontAwesomeIcon icon={faMusic} listItem />a{' '}\n                    {prime.songRequestPurchaseDiscount}% discount on song\n                    requests\n                  </li>\n                )}\n                {enabled.songRemoval && (\n                  <li>\n                    <FontAwesomeIcon icon={faVolumeXmark} listItem />\n                    ability to remove any songs from the class playlist for a\n                    fee\n                  </li>\n                )}\n                {enabled.songRemoval && (\n                  <li>\n                    <FontAwesomeIcon icon={faMoneyBillTrendUp} listItem />\n                    earn bonus points when one of your songs is removed\n                  </li>\n                )}\n                {enabled.jukebox && (\n                  <li>\n                    <FontAwesomeIcon icon={faTurntable} listItem />\n                    access to Jukebox to preview songs on the class playlist,\n                    plus add songs to the queue to play next for a fee\n                  </li>\n                )}\n                {enabled.discounts.store && (\n                  <li>\n                    <FontAwesomeIcon icon={faTag} listItem />a{' '}\n                    {prime.storePurchaseDiscount}% discount on all store\n                    purchases\n                  </li>\n                )}\n                {enabled.sameDay && (\n                  <li>\n                    <FontAwesomeIcon icon={faTruck} listItem />\n                    same-day pickup for online purchases rather than at the end\n                    of the week\n                  </li>\n                )}\n                {enabled.discounts.hallpass && (\n                  <li>\n                    <FontAwesomeIcon icon={faTicket} listItem />a{' '}\n                    {prime.hallpassDiscount}% discount on all hallpass purchases\n                  </li>\n                )}\n                <li>\n                  <FontAwesomeIcon icon={faMoneyBillWave} listItem />\n                  one-time fee for the whole school year\n                </li>\n              </ul>\n            </Typography>\n          </Grid>\n        )}\n        <Grid container item alignItems='center' xs={12} md={6}>\n          <Grid item xs={12} className={classes.cost}>\n            <Typography align='center' variant='h4'>\n              Cost\n            </Typography>\n            <Typography align='center' className={classes.text} variant='h3'>\n              <Points value={prime.purchaseAmount} />\n            </Typography>\n          </Grid>\n          <Grid item xs={12}>\n            {balance >= prime.purchaseAmount ? (\n              <BigButton onClick={onSubmit}>Click here to buy Prime</BigButton>\n            ) : (\n              <BigButton>Insufficient balance</BigButton>\n            )}\n          </Grid>\n        </Grid>\n      </Grid>\n    </>\n  )\n}\n\nexport default PrimeSignup\n","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\n\nimport ConfirmationDialog from '../ConfirmationDialog'\nimport ListErrors from '../ListErrors'\nimport PrimeBanner from './PrimeBanner'\nimport PrimeConfirmation from './PrimeConfirmation'\nimport PrimeSignup from './PrimeSignup'\nimport agent from '../../agent'\n\nimport {\n  PRIME_PURCHASE_DIALOG_UNLOADED,\n  SUBMIT_PRIME_PURCHASE,\n} from '../../constants/actionTypes'\n\nconst useStyles = makeStyles({\n  paper: {\n    overflow: 'hidden',\n  },\n})\n\nconst mapStateToProps = (state) => ({\n  currentUser: state.common.currentUser,\n  errors: state.purchases.errors,\n  inProgress: state.purchases.inProgress,\n  prime: state.common.settings.prime,\n  scores: state.scores,\n  settings: state.common.settings,\n  songRemovalRequestEnabled: state.common.settings.songRemovalRequestEnabled,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onExit: () => dispatch({ type: PRIME_PURCHASE_DIALOG_UNLOADED }),\n  onSubmit: (transaction) =>\n    dispatch({\n      type: SUBMIT_PRIME_PURCHASE,\n      payload: agent.Transactions.add(transaction),\n      snackbar: { message: 'Now Enrolled in Prime', variant: 'success' },\n    }),\n})\n\nconst PrimeBannerDialog = ({\n  currentUser,\n  errors,\n  inProgress,\n  onExit,\n  onSubmit,\n  prime,\n  scores,\n  settings,\n  songRemovalRequestEnabled,\n  trigger,\n}) => {\n  const [confirm, setConfirm] = useState(false)\n  const [open, setOpen] = useState(false)\n  const [testPrime, setTestPrime] = useState(false)\n\n  const theme = useTheme()\n  const isMobile = useMediaQuery(theme.breakpoints.down('md'))\n  const classes = useStyles()\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n    setTestPrime(false)\n  }\n\n  const handleConfirm = () => {\n    setConfirm(true)\n  }\n\n  const handleCancelConfirm = () => {\n    setConfirm(false)\n  }\n\n  const handleSubmit = () => {\n    setConfirm(false)\n    if (currentUser.role === 'student') {\n      onSubmit({\n        amount: prime.purchaseAmount,\n        description: 'Chem Cash Prime Membership',\n        type: 'purchase',\n        student: { _id: currentUser._id },\n      })\n    } else {\n      setTestPrime(true)\n    }\n  }\n\n  const enabled = {\n    any:\n      prime.darkModeEnabled ||\n      prime.songRequestPurchaseDiscount > 0 ||\n      prime.storePurchaseDiscount > 0 ||\n      prime.sameDayDeliveryEnabled,\n    darkMode: prime.darkModeEnabled,\n    discounts: {\n      hallpass: prime.hallpassDiscount > 0,\n      songs: prime.songRequestPurchaseDiscount > 0,\n      store: prime.storePurchaseDiscount > 0,\n    },\n    jukebox:\n      prime.jukeboxEnabled &&\n      settings.user.permissions?.jukebox &&\n      settings.enableBetaFeatures &&\n      settings?.jukebox?.enabled &&\n      settings.spotifyTokens,\n    sameDay: prime.sameDayDeliveryEnabled,\n    songRemoval: prime.songRemovalEnabled && songRemovalRequestEnabled,\n  }\n\n  const showBanner = prime.enabled && !currentUser.hasPrime\n  const showButton = prime.enabled && currentUser.hasPrime\n\n  return (\n    <>\n      {showBanner && trigger === 'banner' && (\n        <PrimeBanner onClick={handleClickOpen} />\n      )}\n      {showButton && trigger === 'button' && (\n        <Button onClick={handleClickOpen} size='small'>\n          View Prime Benefits\n        </Button>\n      )}\n      <Dialog\n        fullWidth\n        classes={{ paper: classes.paper }} // needed due to overflow/scroll when showing <PrimeConfirmation /> (due to confetti)\n        fullScreen={isMobile}\n        maxWidth='lg'\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onExit={onExit}\n        onFocus={(ev) => ev.stopPropagation()}\n        open={open}\n      >\n        <DialogContent\n          style={{\n            overflowX: 'hidden',\n            overflowY:\n              (currentUser.hasPrime || testPrime) && !isMobile ? 'hidden' : '', // needed due to slight overflow/scroll when showing <PrimeConfirmation />\n            padding: 0,\n          }}\n        >\n          <ListErrors errors={errors} />\n          {currentUser.hasPrime || testPrime ? (\n            <PrimeConfirmation\n              celebrate={trigger === 'banner'}\n              enabled={enabled}\n              prime={prime}\n            />\n          ) : (\n            <PrimeSignup\n              balance={scores.total?.balance}\n              enabled={enabled}\n              onSubmit={handleConfirm}\n              prime={prime}\n            />\n          )}\n        </DialogContent>\n        <DialogActions>\n          {!currentUser.hasPrime && !testPrime && (\n            <Button\n              color='primary'\n              disabled={\n                inProgress || scores.total?.balance < prime.purchaseAmount\n              }\n              onClick={handleConfirm}\n              type='submit'\n              variant='contained'\n            >\n              {inProgress ? 'Purchasing...' : 'Purchase Prime'}\n            </Button>\n          )}\n          <Button\n            disabled={inProgress}\n            onClick={handleClose}\n            variant='contained'\n          >\n            {currentUser.hasPrime || testPrime ? 'Close' : 'Cancel'}\n          </Button>\n        </DialogActions>\n      </Dialog>\n      <ConfirmationDialog\n        isOpen={confirm}\n        label='Purchase'\n        message={`Your account will be charged ${prime.purchaseAmount} pts and you will have instant access to Prime benefits`}\n        onCancel={handleCancelConfirm}\n        onSubmit={handleSubmit}\n        title='Purchase a Prime membership?'\n      />\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PrimeBannerDialog)\n","import React from 'react'\nimport { Typography, makeStyles } from '@material-ui/core'\n\nimport { convertGoogleLink } from '../converter'\n\nconst useStyles = makeStyles((theme) => ({\n  header: {\n    backgroundColor: theme.palette.background.paper,\n    paddingLeft: theme.spacing(1),\n    paddingRight: theme.spacing(1),\n    position: 'absolute',\n    top: '-18px',\n  },\n  img: {\n    maxHeight: '100%',\n    maxWidth: '100%',\n    minWidth: '20px',\n  },\n  window: {\n    alignItems: 'center',\n    display: 'flex',\n    borderColor: theme.palette.secondary.main,\n    borderStyle: 'solid',\n    borderWidth: '4px',\n    height: '300px',\n    justifyContent: 'center',\n    padding: theme.spacing(2),\n    position: 'relative',\n  },\n}))\n\nconst ImagePreview = ({ src }) => {\n  const classes = useStyles()\n\n  return (\n    <div className={classes.window}>\n      <Typography variant='h6' className={classes.header}>\n        Image Preview\n      </Typography>\n      {src ? (\n        <img className={classes.img} src={convertGoogleLink(src)} />\n      ) : (\n        <Typography>No photo url provided</Typography>\n      )}\n    </div>\n  )\n}\n\nexport default ImagePreview\n","import React from 'react'\nimport { TextField } from '@material-ui/core'\n\nconst TextFieldLimit = (props) => {\n  return (\n    <TextField\n      error={Boolean(props.errors)}\n      inputProps={{ maxLength: props.limit }}\n      helperText={\n        props.errors\n          ? `${props.errors} | ${props.value.length}/${props.limit}`\n          : `${props.value.length}/${props.limit}`\n      }\n      {...props}\n    />\n  )\n}\n\nexport default TextFieldLimit\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Form, Field } from 'formik'\nimport { TextField } from 'formik-material-ui'\nimport * as Yup from 'yup'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Fab,\n  Grid,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport { Add, Edit } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport ImagePreview from '../ImagePreview'\nimport ListErrors from '../ListErrors'\nimport TextFieldLimit from '../TextFieldLimit'\nimport agent from '../../agent'\n\nimport {\n  ADD_PRODUCT,\n  PRODUCT_DIALOG_UNLOADED,\n  UPDATE_PRODUCT,\n} from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  addIcon: {\n    marginRight: theme.spacing(1),\n  },\n  updateIcon: {\n    color: theme.palette.text.primary,\n  },\n  updateIconBrightHover: {\n    'color': 'rgba(255, 255, 255, 0.7)',\n    '&:hover': { backgroundColor: 'rgba(255, 255, 255, 0.3)', color: 'white' },\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.products,\n  currentUser: state.common.currentUser,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onAdd: (product) =>\n    dispatch({\n      type: ADD_PRODUCT,\n      payload: agent.Products.add(product),\n      snackbar: { message: 'Product added', variant: 'success' },\n    }),\n  onExit: () => dispatch({ type: PRODUCT_DIALOG_UNLOADED }),\n  onUpdate: (product) =>\n    dispatch({\n      type: UPDATE_PRODUCT,\n      payload: agent.Products.update(product),\n      snackbar: { message: 'Product updated', variant: 'success' },\n    }),\n})\n\nconst ProductDialog = ({\n  brightHover,\n  currentUser,\n  product,\n  errors,\n  inProgress,\n  onAdd,\n  onExit,\n  onUpdate,\n}) => {\n  const CHAR_LIMITS = { name: 60, description: 140 }\n\n  const [open, setOpen] = useState(false)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n  const classes = useStyles()\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmitAdd = (values) => {\n    onAdd({ ...values })\n  }\n\n  const handleSubmitUpdate = (values) => {\n    onUpdate({ ...product, ...values })\n  }\n\n  useEffect(() => {\n    // Close the dialog only if there are no errors\n    if (!inProgress && !errors) setOpen(false)\n  }, [inProgress])\n\n  return (\n    <>\n      {product ? (\n        currentUser.role === 'teacher' && (\n          <ActionButton\n            action='Edit product'\n            className={\n              brightHover ? classes.updateIconBrightHover : classes.updateIcon\n            }\n            onClick={handleClickOpen}\n          >\n            <Edit />\n          </ActionButton>\n        )\n      ) : (\n        <Fab color='primary' onClick={handleClickOpen} variant='extended'>\n          <Add className={classes.addIcon} />\n          Add product\n        </Fab>\n      )}\n\n      <Dialog\n        fullScreen={fullScreen}\n        maxWidth='lg'\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onExit={onExit}\n        onFocus={(ev) => ev.stopPropagation()}\n        open={open}\n      >\n        <Formik\n          initialValues={{\n            name: product?.name || '',\n            description: product?.description || '',\n            photoUrl: product?.photoUrl || '',\n            cost: product?.cost || 0,\n            maxPurchaseQuantity: product?.maxPurchaseQuantity || 0,\n            quantity: product?.quantity || 0,\n          }}\n          validationSchema={Yup.object({\n            name: Yup.string()\n              .max(\n                CHAR_LIMITS.name,\n                `Cannot be longer than ${CHAR_LIMITS.name} characters`\n              )\n              .required('Required'),\n            description: Yup.string().max(\n              CHAR_LIMITS.description,\n              `Cannot be longer than ${CHAR_LIMITS.description} characters`\n            ),\n            photoUrl: Yup.string().url('Not a valid url').required('Required'),\n            cost: Yup.number().typeError('Numbers only').required('Required'),\n            maxPurchaseQuantity: Yup.number()\n              .typeError('Numbers only')\n              .required('Required'),\n            quantity: Yup.number()\n              .typeError('Numbers only')\n              .required('Required'),\n          })}\n          onSubmit={async (values) => {\n            product ? handleSubmitUpdate(values) : handleSubmitAdd(values)\n          }}\n        >\n          {(formik) => (\n            <Form>\n              <DialogTitle>\n                {product ? 'Edit product' : 'Add product'}\n              </DialogTitle>\n              <DialogContent>\n                <ListErrors errors={errors} />\n                <Grid container spacing={2}>\n                  <Grid item xs={12}>\n                    <Field\n                      as={TextFieldLimit}\n                      autoFocus={product ? false : true}\n                      color='primary'\n                      disabled={inProgress}\n                      label='Product Name'\n                      name='name'\n                      type='text'\n                      limit={CHAR_LIMITS.name}\n                      errors={formik.errors.name}\n                      fullWidth\n                    />\n                  </Grid>\n                  <Grid item xs={12}>\n                    <Field\n                      as={TextFieldLimit}\n                      color='primary'\n                      disabled={inProgress}\n                      label='Product Description'\n                      name='description'\n                      type='text'\n                      limit={CHAR_LIMITS.description}\n                      errors={formik.errors.description}\n                      fullWidth\n                    />\n                  </Grid>\n                  <Grid item xs={12}>\n                    <Field\n                      color='primary'\n                      component={TextField}\n                      disabled={inProgress}\n                      label='Photo Url'\n                      name='photoUrl'\n                      type='url'\n                      fullWidth\n                    />\n                  </Grid>\n                  <Grid item xs={12} md={4}>\n                    <Field\n                      color='primary'\n                      component={TextField}\n                      disabled={inProgress}\n                      label='Cost'\n                      name='cost'\n                      type='number'\n                      fullWidth\n                    />\n                  </Grid>\n                  <Grid item xs={12} md={4}>\n                    <Field\n                      color='primary'\n                      component={TextField}\n                      disabled={inProgress}\n                      label='Quantity'\n                      name='quantity'\n                      type='number'\n                      fullWidth\n                    />\n                  </Grid>\n                  <Grid item xs={12} md={4}>\n                    <Field\n                      color='primary'\n                      component={TextField}\n                      disabled={inProgress}\n                      label='Max purchase quantity'\n                      name='maxPurchaseQuantity'\n                      type='number'\n                      fullWidth\n                    />\n                  </Grid>\n                  <Grid item xs={12} md={6}>\n                    <ImagePreview src={formik.values.photoUrl} />\n                  </Grid>\n                </Grid>\n              </DialogContent>\n              <DialogActions>\n                <Button\n                  disabled={inProgress}\n                  color='primary'\n                  type='submit'\n                  variant='contained'\n                >\n                  {product\n                    ? inProgress\n                      ? 'Updating...'\n                      : 'Update'\n                    : inProgress\n                    ? 'Adding...'\n                    : 'Add'}\n                </Button>\n                <Button\n                  disabled={inProgress}\n                  onClick={handleClose}\n                  variant='contained'\n                >\n                  Cancel\n                </Button>\n              </DialogActions>\n            </Form>\n          )}\n        </Formik>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductDialog)\n","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  makeStyles,\n} from '@material-ui/core'\nimport { Delete } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport agent from '../../agent'\n\nimport { DELETE_PRODUCT } from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  icon: {\n    'color': 'rgba(255, 255, 255, 0.7)',\n    '&:hover': { backgroundColor: 'rgba(255, 255, 255, 0.3)', color: 'white' },\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  currentUser: state.common.currentUser,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onDelete: (slug) =>\n    dispatch({\n      type: DELETE_PRODUCT,\n      payload: agent.Products.delete(slug),\n      snackbar: { message: 'Product deleted', variant: 'success' },\n    }),\n})\n\nconst DeleteProductAlert = ({ currentUser, product, onDelete }) => {\n  const classes = useStyles()\n\n  const [open, setOpen] = useState(false)\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmit = () => {\n    setOpen(false)\n    onDelete(product.slug)\n  }\n\n  return (\n    <>\n      {currentUser.role === 'teacher' && (\n        <ActionButton\n          action='Delete product'\n          onClick={handleClickOpen}\n          className={classes.icon}\n        >\n          <Delete />\n        </ActionButton>\n      )}\n\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        onClick={(ev) => ev.stopPropagation()}\n        onFocus={(ev) => ev.stopPropagation()}\n      >\n        <DialogTitle>Delete Product</DialogTitle>\n        <DialogContent>\n          <DialogContentText component='div'>\n            Are you sure you want to delete <b>{product.name}</b>? This action{' '}\n            <b>cannot be undone</b>.\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button\n            onClick={handleSubmit}\n            color='secondary'\n            variant='contained'\n            autoFocus\n          >\n            Delete\n          </Button>\n          <Button onClick={handleClose} variant='contained'>\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DeleteProductAlert)\n","import React from 'react'\nimport {\n  Card,\n  InputAdornment,\n  IconButton,\n  OutlinedInput,\n  makeStyles,\n} from '@material-ui/core'\nimport { Close } from '@material-ui/icons'\n\nconst useStyles = makeStyles((theme) => ({\n  card: {\n    marginLeft: 'auto',\n    marginRight: 'auto',\n    padding: theme.spacing(1),\n    width: '100%',\n    [theme.breakpoints.up('md')]: {\n      width: '80%',\n    },\n  },\n  input: {\n    textAlign: 'center',\n  },\n}))\n\nconst ProductsToolbar = ({ onChange, value }) => {\n  const classes = useStyles()\n\n  const handleChange = (ev) => {\n    onChange(ev.target.value)\n  }\n\n  const handleClearClick = () => {\n    onChange('')\n  }\n\n  return (\n    <Card className={classes.card}>\n      <OutlinedInput\n        classes={{ input: classes.input }}\n        color='secondary'\n        endAdornment={\n          <InputAdornment position='end'>\n            <IconButton\n              aria-label='clear search text'\n              onClick={handleClearClick}\n            >\n              <Close />\n            </IconButton>\n          </InputAdornment>\n        }\n        onChange={handleChange}\n        placeholder='Search for products'\n        value={value}\n        variant='outlined'\n        fullWidth\n      />\n    </Card>\n  )\n}\n\nexport default ProductsToolbar\n","import React, { useEffect, useState } from 'react'\nimport {\n  Badge,\n  Chip,\n  Grid,\n  GridList,\n  GridListTile,\n  GridListTileBar,\n  Tooltip,\n  Typography,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport { Add, AddShoppingCart, Remove } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport DeleteProductDialog from './DeleteProductDialog'\nimport Points from '../Points'\nimport ProductDialog from './ProductDialog'\nimport ProductsToolbar from './ProductsToolbar'\nimport { convertGoogleLink } from '../../converter'\n\nconst useStyles = makeStyles((theme) => ({\n  actionIcon: { display: 'flex' },\n  cost: {\n    color: 'white',\n  },\n  description: {\n    marginBottom: '-1.5rem',\n    opacity: 0,\n    transition: 'opacity 0s ease-in-out',\n  },\n  icon: {\n    'color': 'rgba(255, 255, 255, 0.7)',\n    '&:hover': { backgroundColor: 'rgba(255, 255, 255, 0.3)', color: 'white' },\n  },\n  name: {\n    color: theme.palette.secondary.main,\n    fontSize: theme.typography.h5.fontSize,\n    marginBottom: theme.spacing(0.5),\n    whiteSpace: 'nowrap',\n  },\n  quantity: {\n    marginLeft: theme.spacing(2),\n  },\n  tile: {\n    '&:hover .MuiGridListTileBar-root': {\n      'height': '100%',\n      '& #description': {\n        marginBottom: 0,\n        opacity: 1,\n        transition: 'margin-bottom 0.35s ease-in-out, opacity 0.5s ease-in-out',\n      },\n    },\n  },\n  tileBar: {\n    alignItems: 'flex-end',\n    paddingBottom: theme.spacing(1),\n    paddingRight: theme.spacing(1),\n    transition: 'height 0.35s ease-in-out',\n  },\n  title: {\n    whiteSpace: 'normal',\n  },\n}))\n\nconst ProductsGallery = ({\n  onAddToCart,\n  onInventoryChange,\n  cart,\n  products,\n  storeEnabled,\n  userRole,\n}) => {\n  const classes = useStyles()\n\n  const theme = useTheme()\n  const isSmall = useMediaQuery(theme.breakpoints.down('sm'))\n  const isMedium = useMediaQuery(theme.breakpoints.down('md'))\n  const cols = isSmall ? 1 : isMedium || userRole === 'teacher' ? 2 : 3\n\n  const handleAddToCartClick = (product) => onAddToCart(product)\n\n  const handleInventoryChangeClick = (product, type) =>\n    onInventoryChange({\n      ...product,\n      quantity: type === 'add' ? product.quantity + 1 : product.quantity - 1,\n    })\n\n  // Search feature\n  const [data, setData] = useState(products)\n  const [search, setSearch] = useState('')\n  const handleSearchChange = (value) => {\n    setSearch(value)\n  }\n  useEffect(() => {\n    setData(\n      products.filter((product) =>\n        product.name.toLowerCase().includes(search.toLowerCase())\n      )\n    )\n  }, [search])\n  // END Search Feature\n\n  return (\n    <Grid container spacing={4}>\n      <Grid item xs={12}>\n        <ProductsToolbar onChange={handleSearchChange} value={search} />\n      </Grid>\n      <Grid item xs={12}>\n        <GridList cols={cols} spacing={8}>\n          {data?.length > 0 ? (\n            data.map((product) => {\n              const max =\n                product.maxPurchaseQuantity < product.quantity &&\n                product.maxPurchaseQuantity !== 0\n                  ? product.maxPurchaseQuantity\n                  : product.quantity\n              const maxQuantityReached =\n                max > 0 && cart?.quantities[product._id] >= max\n              return (\n                <GridListTile key={product.slug} className={classes.tile}>\n                  <img\n                    src={convertGoogleLink(product.photoUrl)}\n                    alt={product.name}\n                  />\n\n                  <GridListTileBar\n                    classes={{\n                      actionIcon: classes.actionIcon,\n                      title: classes.title,\n                    }}\n                    className={classes.tileBar}\n                    title={\n                      <div>\n                        <div className={classes.description} id='description'>\n                          {product.description}{' '}\n                          {product.maxPurchaseQuantity > 0 && (\n                            <em>(Limit {product.maxPurchaseQuantity})</em>\n                          )}\n                        </div>\n                        <Tooltip\n                          arrow\n                          enterTouchDelay={0}\n                          placement='bottom-start'\n                          title={product.name}\n                        >\n                          <div className={classes.name}>{product.name}</div>\n                        </Tooltip>\n                      </div>\n                    }\n                    subtitle={\n                      <div>\n                        <Chip\n                          className={classes.cost}\n                          color='primary'\n                          label={<Points value={product.cost} />}\n                          size='small'\n                        />\n                        {(userRole === 'teacher' || product.quantity < 5) && (\n                          <Chip\n                            className={classes.quantity}\n                            color='secondary'\n                            label={\n                              userRole === 'teacher'\n                                ? `${product.quantity} available`\n                                : `only ${product.quantity} left`\n                            }\n                            size='small'\n                            variant='outlined'\n                          />\n                        )}\n                      </div>\n                    }\n                    actionIcon={\n                      userRole === 'teacher' ? (\n                        <>\n                          <ActionButton\n                            action='Remove inventory'\n                            className={classes.icon}\n                            onClick={() =>\n                              handleInventoryChangeClick(product, 'remove')\n                            }\n                          >\n                            <Remove />\n                          </ActionButton>\n                          <ActionButton\n                            action='Add inventory'\n                            className={classes.icon}\n                            onClick={() =>\n                              handleInventoryChangeClick(product, 'add')\n                            }\n                          >\n                            <Add />\n                          </ActionButton>\n                          <ProductDialog product={product} brightHover />\n                          <DeleteProductDialog product={product} />\n                        </>\n                      ) : (\n                        storeEnabled && (\n                          <ActionButton\n                            action={\n                              !maxQuantityReached\n                                ? 'Add to cart'\n                                : 'Max limit reached'\n                            }\n                            disabled={maxQuantityReached}\n                            onClick={() => handleAddToCartClick(product)}\n                            className={classes.icon}\n                          >\n                            <Badge\n                              badgeContent={cart.quantities[product._id]}\n                              color='secondary'\n                            >\n                              <AddShoppingCart />\n                            </Badge>\n                          </ActionButton>\n                        )\n                      )\n                    }\n                  />\n                </GridListTile>\n              )\n            })\n          ) : (\n            <Typography>\n              {search !== ''\n                ? 'No products matched your search'\n                : userRole === 'teacher'\n                ? 'You have no products'\n                : 'Your teacher has not added any products'}\n            </Typography>\n          )}\n        </GridList>\n      </Grid>\n    </Grid>\n  )\n}\n\nexport default ProductsGallery\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport MaterialTable, { MTableAction } from 'material-table'\nimport { EditAttributes } from '@material-ui/icons'\n\nimport Points from '../Points'\nimport ProductDialog from './ProductDialog'\nimport agent from '../../agent'\n\nimport { DELETE_PRODUCT, UPDATE_PRODUCT } from '../../constants/actionTypes'\n\nconst mapDispatchToProps = (dispatch) => ({\n  onDelete: (product) =>\n    dispatch({\n      type: DELETE_PRODUCT,\n      payload: agent.Products.delete(product.slug),\n      snackbar: { message: 'Product deleted', variant: 'success' },\n    }),\n  onUpdate: (product) =>\n    dispatch({ type: UPDATE_PRODUCT, payload: agent.Products.update(product) }),\n})\n\nconst ProductsTable = ({ onDelete, onUpdate, products }) => {\n  const [data, setData] = useState([])\n\n  const [columns] = useState([\n    { title: 'Product Name', field: 'name' },\n    {\n      title: 'Cost',\n      field: 'cost',\n      render: (rowData) => <Points value={rowData.cost} />,\n    },\n    { title: 'Max Purchase Quantity', field: 'maxPurchaseQuantity' },\n    { title: 'On-hand Quantity', field: 'quantity' },\n  ])\n\n  const handleInventoryChangeClick = (product, type) =>\n    onUpdate({\n      ...product,\n      quantity: type === 'add' ? product.quantity + 1 : product.quantity - 1,\n    })\n\n  useEffect(() => {\n    setData(products)\n  }, [products])\n\n  return (\n    <MaterialTable\n      actions={[\n        {\n          icon: 'add',\n          onClick: (e, data) => handleInventoryChangeClick(data, 'add'),\n          position: 'row',\n          tooltip: 'Add inventory',\n        },\n        {\n          icon: 'remove',\n          onClick: (e, data) => handleInventoryChangeClick(data, 'remove'),\n          position: 'row',\n          tooltip: 'Remove inventory',\n        },\n        {\n          component: 'ProductDialog',\n          icon: 'edit',\n          position: 'row',\n          tooltip: 'Edit product',\n        },\n      ]}\n      columns={columns}\n      components={{\n        Action: (props) => {\n          if (props.action.component === 'ProductDialog')\n            return <ProductDialog product={props.data} />\n          return <MTableAction {...props} />\n        },\n      }}\n      data={data}\n      editable={{\n        onRowDelete: (oldData) =>\n          new Promise((resolve, reject) => {\n            const newData = [...data]\n            const index = oldData.tableData.id\n            newData.splice(index, 1)\n            setData([...newData])\n            onDelete(oldData)\n            resolve()\n          }),\n        onRowUpdate: (newData, oldData) =>\n          new Promise((resolve, reject) => {\n            const dataUpdate = [...data]\n            const index = oldData.tableData.id\n            dataUpdate[index] = { ...newData }\n            setData([...dataUpdate])\n            onUpdate(newData)\n            resolve()\n          }),\n      }}\n      icons={{ Edit: () => <EditAttributes /> }}\n      localization={{\n        body: {\n          deleteTooltip: 'Delete product',\n          editTooltip: 'Quick edit product',\n          editRow: {\n            deleteText: 'Delete product?',\n            saveTooltip: 'Confirm',\n          },\n          emptyDataSourceMessage: 'No products to display',\n        },\n      }}\n      options={{ actionsColumnIndex: -1, paging: false, showTitle: false }}\n      style={{\n        boxShadow: 'none',\n        width: '100%',\n      }}\n    />\n  )\n}\n\nexport default connect(() => ({}), mapDispatchToProps)(ProductsTable)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Container, Dialog, Fab, makeStyles } from '@material-ui/core'\nimport ShoppingBasketIcon from '@material-ui/icons/ShoppingBasket'\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart'\nimport { numericFormatter } from 'react-number-format'\n\nimport Alert from '../Alert'\nimport FabBadge from '../FabBadge'\nimport DialogAppBar from '../DialogAppBar'\nimport ListErrors from '../ListErrors'\nimport PageHeader from '../PageHeader'\nimport PageWrapper from '../PageWrapper'\nimport Points from '../Points'\nimport PurchaseDetailsList from './PurchaseDetailsList'\nimport Spinner from '../Spinner'\n\nimport agent from '../../agent'\nimport emailer from '../../emailer'\nimport { convertGoogleLink } from '../../converter'\nimport { SlideUpTransition } from '../../transitions'\n\nimport {\n  DELETE_CART_PRODUCT,\n  STUDENT_CART_LOADED,\n  STUDENT_CART_UNLOADED,\n  SUBMIT_PURCHASE,\n  UPDATE_CART_PRODUCT_QUANTITY,\n} from '../../constants/actionTypes'\nimport { useGetInvoice } from '../../hooks'\n\nconst useStyles = makeStyles((theme) => ({\n  cartIcon: {\n    marginRight: theme.spacing(1),\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.common.currentUser,\n  ...state.common.settings,\n  ...state.purchases,\n  ...state.scores.total,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onDelete: (productId) => dispatch({ type: DELETE_CART_PRODUCT, productId }),\n  onLoad: (username) =>\n    dispatch({\n      type: STUDENT_CART_LOADED,\n      payload: agent.Scores.getStudentScores(username),\n    }),\n  onSubmit: (purchase) =>\n    dispatch({\n      type: SUBMIT_PURCHASE,\n      payload: agent.Purchases.add(purchase),\n      snackbar: { message: 'Order submitted', variant: 'success' },\n    }),\n  onUnload: () => dispatch({ type: STUDENT_CART_UNLOADED }),\n  onUpdate: (productId, qty) =>\n    dispatch({ type: UPDATE_CART_PRODUCT_QUANTITY, productId, qty }),\n})\n\nconst ShoppingCart = ({\n  allowPurchasesWithInsufficientFunds,\n  balance,\n  cart,\n  errors,\n  firstName,\n  hasPrime,\n  inProgress,\n  lastName,\n  notifications,\n  onDelete,\n  onLoad,\n  onSubmit,\n  onUnload,\n  onUpdate,\n  prime,\n  taxRate,\n  username,\n}) => {\n  const [open, setOpen] = useState(false)\n  const { invoice } = useGetInvoice(\n    cart.products,\n    cart.quantities,\n    taxRate,\n    prime.enabled && hasPrime ? prime.storePurchaseDiscount : 0\n  )\n\n  const classes = useStyles()\n\n  const handleClickOpen = () => setOpen(true)\n\n  const handleClose = () => setOpen(false)\n\n  const handleSubmitClick = () => {\n    onSubmit({\n      products: cart.products,\n      quantities: cart.quantities,\n      status: 'pending',\n    })\n\n    const getPoints = (value) => {\n      return numericFormatter(Math.round(value).toString(), {\n        suffix: ' pts',\n        thousandSeparator: true,\n      })\n    }\n\n    // Send an email notification to teacher account\n    if (notifications.enabled.forStore) {\n      const orderDetails = cart.products.map(\n        (product, index) =>\n          `<tr style=\"border-bottom:2px solid rgb(139,195,74);border-top: 2px solid rgb(139,195,74);\"><td style=\"padding:8px 0;\"><img width=\"100px\" src=\"${convertGoogleLink(\n            product.photoUrl\n          )}\" style=\"display:block;margin:0 auto;\"></td><td style=\"text-align:left;\">${\n            product.name\n          }</td><td>${cart.quantities[product._id]}</td><td>${getPoints(\n            cart.quantities[product._id] * product.cost\n          )}</td></tr>`\n      )\n      orderDetails.push(\n        `<tr><td colspan=\"2\" rowspan=\"${\n          prime.enabled && hasPrime ? '4' : '3'\n        }\"></td><td style=\"padding:8px 0;text-align:left;\">Subtotal</td><td style=\"text-align:right;\">${getPoints(\n          invoice.subtotal\n        )}</td></tr>`\n      )\n      if (prime.enabled && hasPrime) {\n        orderDetails.push(\n          `<tr><td style=\"padding:8px 0;text-align:left;\">Prime Discount</td><td style=\"text-align:right;\">-${getPoints(\n            invoice.prime\n          )}</td></tr>`\n        )\n      }\n      orderDetails.push(\n        `<tr><td style=\"padding:8px 0;text-align:left;\">Taxes & Fees</td><td style=\"text-align:right;\">+${getPoints(\n          invoice.taxes\n        )}</td></tr>`,\n        `<tr style=\"border-top:3px solid rgb(255,196,0);color:rgb(139,195,74);\"><td style=\"padding:8px 0;text-align:left;\"><b>Total</b></td><td style=\"text-align:right;\"><b>${getPoints(\n          invoice.total\n        )}</b></td></tr>`\n      )\n\n      emailer(\n        {\n          student_name: `${firstName} ${lastName}`,\n          email: notifications.email,\n          order_details: orderDetails.join(''),\n        },\n        'store'\n      )\n    }\n\n    handleClose()\n  }\n\n  const getTotalItemsInCart = Object.values(cart.quantities).reduce(\n    (prev, cur) => prev + cur,\n    0\n  )\n\n  const hasInsufficientFunds =\n    !allowPurchasesWithInsufficientFunds && invoice.total > balance\n\n  useEffect(() => {\n    onLoad(username)\n\n    return () => {\n      onUnload()\n    }\n  }, [])\n\n  return (\n    <>\n      <Fab\n        color='primary'\n        disabled={cart.products.length === 0}\n        onClick={handleClickOpen}\n        variant='extended'\n      >\n        <FabBadge value={getTotalItemsInCart}>\n          <ShoppingCartIcon className={classes.cartIcon} />\n          Checkout\n        </FabBadge>\n      </Fab>\n      <Dialog\n        fullScreen\n        open={open}\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onFocus={(ev) => ev.stopPropagation()}\n        TransitionComponent={SlideUpTransition}\n      >\n        <DialogAppBar onClose={handleClose} title='Store' />\n        <PageWrapper>\n          <Container>\n            <PageHeader title='Complete Your Order'>\n              <Fab\n                color='primary'\n                disabled={cart.products.length === 0 || hasInsufficientFunds}\n                onClick={handleSubmitClick}\n                variant='extended'\n              >\n                <ShoppingBasketIcon className={classes.cartIcon} />\n                Place Your Order\n              </Fab>\n            </PageHeader>\n            <ListErrors errors={errors} />\n            {(hasInsufficientFunds || invoice.total > balance) && (\n              <Alert disableClose={true} severity='warning'>\n                Insufficient funds! You have {<Points value={balance} />}\n              </Alert>\n            )}\n            {inProgress ? (\n              <Spinner message='Loading...' />\n            ) : (\n              <PurchaseDetailsList\n                actions={{\n                  delete: onDelete,\n                  update: onUpdate,\n                }}\n                products={cart.products}\n                quantities={cart.quantities}\n              />\n            )}\n          </Container>\n        </PageWrapper>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ShoppingCart)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport MaterialTable from 'material-table'\nimport moment from 'moment'\n\nimport Points from '../Points'\nimport PurchaseDetailsList from './PurchaseDetailsList'\nimport agent from '../../agent'\n\nimport { STUDENT_DELETE_PURCHASE } from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  hasPrime: state.common.currentUser.hasPrime,\n  prime: state.common.settings.prime,\n  purchases: state.purchases.purchases,\n  taxRate: state.common.settings.taxRate,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onDelete: (id) =>\n    dispatch({\n      type: STUDENT_DELETE_PURCHASE,\n      payload: agent.Purchases.delete(id),\n      snackbar: { message: 'Purchase deleted', variant: 'success' },\n    }),\n})\n\nconst StudentPurchasesTable = ({\n  hasPrime,\n  onDelete,\n  prime,\n  purchases,\n  taxRate,\n}) => {\n  const [data, setData] = useState([])\n\n  const primeRate = prime.storePurchaseDiscount\n  const isPrime = prime.enabled && primeRate > 0 && hasPrime\n\n  const mappedData = purchases.map((purchase) => ({\n    createdAt: moment(purchase.createdAt),\n    note: purchase.note,\n    quantities: purchase.quantities,\n    products: purchase.products,\n    status: purchase.status,\n    totalCost: purchase.products.reduce(\n      (prev, cur) =>\n        prev +\n        cur.cost *\n          purchase.quantities[cur._id] *\n          (taxRate / 100 + 1) *\n          (isPrime ? 1 - primeRate / 100 : 1),\n      0\n    ),\n    totalItems: Object.values(purchase.quantities).reduce(\n      (prev, cur) => prev + cur,\n      0\n    ),\n    _id: purchase._id,\n  }))\n\n  const [columns] = useState([\n    {\n      title: 'Purchase Date',\n      field: 'createdAt',\n      editable: 'never',\n      render: (rowData, renderType) =>\n        renderType === 'row'\n          ? rowData.createdAt.format('ddd, MMM D, YYYY')\n          : rowData.format('ddd, MMM D, YYYY'),\n    },\n    { title: 'Total Items', field: 'totalItems' },\n    {\n      title: 'Total Cost',\n      field: 'totalCost',\n      render: (rowData) => <Points value={rowData.totalCost} />,\n    },\n    { title: 'Notes', field: 'note' },\n    { title: 'Status', field: 'status' },\n  ])\n\n  useEffect(() => {\n    setData(mappedData)\n  }, [purchases])\n\n  return (\n    <MaterialTable\n      title='Orders'\n      columns={columns}\n      data={data}\n      localization={{\n        body: {\n          emptyDataSourceMessage: 'No purchases have been made',\n          editRow: {\n            deleteText: 'Delete purchase? This will cancel your order',\n            saveTooltip: 'Delete purchase',\n          },\n        },\n      }}\n      options={{ actionsColumnIndex: -1, paging: false, showTitle: false }}\n      detailPanel={(rowData) => {\n        return (\n          <PurchaseDetailsList\n            products={rowData.products}\n            quantities={rowData.quantities}\n          />\n        )\n      }}\n      onRowClick={(event, rowData, togglePanel) => togglePanel()}\n      editable={{\n        isDeletable: (rowData) => rowData.status === 'pending',\n        onRowDelete: (oldData) =>\n          new Promise((resolve, reject) => {\n            const dataDelete = [...data]\n            const index = oldData.tableData.id\n            dataDelete.splice(index, 1)\n            setData([...dataDelete])\n            onDelete(oldData._id)\n            resolve()\n          }),\n      }}\n    />\n  )\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(StudentPurchasesTable)\n","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Button, Container, Dialog } from '@material-ui/core'\n\nimport DialogAppBar from '../DialogAppBar'\nimport ListErrors from '../ListErrors'\nimport PageHeader from '../PageHeader'\nimport PageWrapper from '../PageWrapper'\nimport Spinner from '../Spinner'\nimport StudentPurchasesTable from './StudentPurchasesTable'\nimport { SlideUpTransition } from './../../transitions'\n\nimport agent from '../../agent'\n\nimport {\n  STUDENT_PURCHASES_LOADED,\n  STUDENT_PURCHASES_UNLOADED,\n} from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  ...state.purchases,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onLoad: () =>\n    dispatch({\n      type: STUDENT_PURCHASES_LOADED,\n      payload: agent.Purchases.forStudent(),\n    }),\n  onUnload: () =>\n    dispatch({\n      type: STUDENT_PURCHASES_UNLOADED,\n    }),\n})\n\nconst StudentPurchasesDialog = ({ errors, inProgress, onLoad, onUnload }) => {\n  const [open, setOpen] = useState(false)\n\n  const handleClickOpen = () => {\n    setOpen(true)\n    onLoad()\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n    onUnload()\n  }\n\n  return (\n    <>\n      <Button onClick={handleClickOpen} size='small'>\n        Your orders\n      </Button>\n      <Dialog\n        fullScreen\n        open={open}\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onFocus={(ev) => ev.stopPropagation()}\n        TransitionComponent={SlideUpTransition}\n      >\n        <DialogAppBar onClose={handleClose} title='Store' />\n        <PageWrapper>\n          <Container>\n            <PageHeader title='Your Orders' />\n            <ListErrors errors={errors} />\n            {inProgress ? (\n              <Spinner message='Loading...' />\n            ) : (\n              <StudentPurchasesTable />\n            )}\n          </Container>\n        </PageWrapper>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(StudentPurchasesDialog)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  ExpansionPanel,\n  ExpansionPanelDetails,\n  ExpansionPanelSummary,\n  Button,\n  Grid,\n  Typography,\n} from '@material-ui/core'\nimport { ExpandMore, GridOn, TableChart } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport PageHeader from '../PageHeader'\nimport PrimeBadge from '../Prime/PrimeBadge'\nimport PrimeDialog from '../Prime/PrimeDialog'\nimport ProductDialog from './ProductDialog'\nimport ProductsGallery from './ProductsGallery'\nimport ProductsTable from './ProductsTable'\nimport ShoppingCart from '../Purchases/ShoppingCart'\nimport Spinner from '../Spinner'\nimport StudentPurchasesDialog from '../Purchases/StudentPurchasesDialog'\nimport agent from '../../agent'\n\nimport {\n  ADD_TO_CART,\n  NAV_TAB_CHANGE,\n  PRODUCTS_PAGE_LOADED,\n  PRODUCTS_PAGE_UNLOADED,\n  UPDATE_PRODUCT,\n} from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  settings: state.common.settings,\n  ...state.common.currentUser,\n  ...state.products,\n  ...state.purchases,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onAddToCart: (product) => dispatch({ type: ADD_TO_CART, product }),\n  onLoad: () =>\n    dispatch({ type: PRODUCTS_PAGE_LOADED, payload: agent.Products.getAll() }),\n  onPageChange: (value, redirectTo) =>\n    dispatch({ type: NAV_TAB_CHANGE, value, redirectTo }),\n  onUnload: () => dispatch({ type: PRODUCTS_PAGE_UNLOADED }),\n  onUpdateInventory: (product) =>\n    dispatch({\n      type: UPDATE_PRODUCT,\n      payload: agent.Products.update(product),\n    }),\n})\n\nconst Products = ({\n  cart,\n  onAddToCart,\n  onLoad,\n  onPageChange,\n  onUnload,\n  onUpdateInventory,\n  pageLoaded,\n  products,\n  role,\n  settings,\n}) => {\n  const [expanded, setExpanded] = useState('inStock')\n  const [gridOn, setGridOn] = useState(false)\n\n  const isTeacher = role === 'teacher'\n\n  const inStockProducts = products.filter((product) => product.quantity > 0)\n\n  const outOfStockProducts = products.filter((product) => product.quantity <= 0)\n\n  const handlePageChange = () => onPageChange('store', `/${role}/store`)\n\n  const handleAddToCart = (product) => onAddToCart(product)\n\n  const handleInventoryChange = (product) => onUpdateInventory(product)\n\n  const handleExpandedChange = (panel) => (ev, isExpanded) =>\n    setExpanded(isExpanded ? panel : false)\n\n  const handleViewClick = () => setGridOn(!gridOn)\n\n  const primeMessage =\n    'The banner below is visible to students at the top of this page when Prime is enabled'\n\n  useEffect(() => {\n    onLoad()\n\n    return () => {\n      onUnload()\n    }\n  }, [])\n\n  return (\n    <>\n      <PageHeader title={isTeacher ? 'Manage Products' : 'View Products'}>\n        {isTeacher ? (\n          <>\n            <ActionButton\n              action={`Switch to ${gridOn ? 'Table view' : 'Grid view'}`}\n              onClick={handleViewClick}\n            >\n              {gridOn ? <TableChart /> : <GridOn />}\n            </ActionButton>\n            {settings.storeEnabled && (\n              <Button onClick={handlePageChange} size='small'>\n                Manage purchases\n              </Button>\n            )}\n            <ProductDialog />\n          </>\n        ) : (\n          settings.storeEnabled && (\n            <>\n              <PrimeDialog trigger='button' />\n              <StudentPurchasesDialog />\n              <ShoppingCart />\n            </>\n          )\n        )}\n      </PageHeader>\n      {role === 'student' && <PrimeDialog trigger='banner' />}\n      {pageLoaded ? (\n        isTeacher ? (\n          <Grid container spacing={8}>\n            <Grid item xs={12}>\n              <ExpansionPanel\n                expanded={expanded === 'inStock'}\n                onChange={handleExpandedChange('inStock')}\n              >\n                <ExpansionPanelSummary expandIcon={<ExpandMore />}>\n                  <Typography variant='h5' gutterBottom>\n                    In Stock\n                  </Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails>\n                  {gridOn ? (\n                    <ProductsGallery\n                      onInventoryChange={handleInventoryChange}\n                      products={inStockProducts}\n                      userRole={role}\n                    />\n                  ) : (\n                    <ProductsTable products={inStockProducts} />\n                  )}\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n              <ExpansionPanel\n                expanded={expanded === 'outOfStock'}\n                onChange={handleExpandedChange('outOfStock')}\n              >\n                <ExpansionPanelSummary expandIcon={<ExpandMore />}>\n                  <Typography variant='h5' gutterBottom>\n                    Out of Stock\n                  </Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails>\n                  {gridOn ? (\n                    <ProductsGallery\n                      onInventoryChange={handleInventoryChange}\n                      products={outOfStockProducts}\n                      userRole={role}\n                    />\n                  ) : (\n                    <ProductsTable products={outOfStockProducts} />\n                  )}\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n            </Grid>\n            {settings.prime.enabled && (\n              <Grid item xs={12}>\n                <Typography variant='h5' gutterBottom>\n                  Prime <PrimeBadge title={primeMessage} />\n                </Typography>\n                <PrimeDialog trigger='banner' />\n              </Grid>\n            )}\n          </Grid>\n        ) : (\n          <Grid container spacing={8}>\n            <Grid item xs={12}>\n              <ProductsGallery\n                cart={cart}\n                products={inStockProducts}\n                onAddToCart={handleAddToCart}\n                storeEnabled={settings.storeEnabled}\n                userRole={role}\n              />\n            </Grid>\n          </Grid>\n        )\n      ) : (\n        <Spinner message='Loading...' />\n      )}\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Products)\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Redirect } from 'react-router-dom'\nimport { Route, Switch } from 'react-router-dom'\nimport { Container } from '@material-ui/core'\n\nimport AccountSuspendedDialog from './Student/AccountSuspendedDialog'\nimport Header from './Header'\nimport Navigation from './Navigation'\nimport NotFound from './NotFound'\nimport PageWrapper from './PageWrapper'\nimport ProtectedRoute from './ProtectedRoute'\nimport Settings from './Settings'\nimport StudentAccount from './Student/StudentAccount'\nimport StudentPasses from './Passes/StudentPasses'\nimport StudentSongs from './Student/StudentSongs'\nimport TeacherAccounts from './Teacher/TeacherAccounts'\nimport TeacherCourses from './Teacher/TeacherCourses'\nimport TeacherSongs from './Teacher/TeacherSongs'\nimport ManagePurchases from './Purchases/ManagePurchases'\nimport ManageTeachers from './Admin/ManageTeachers'\nimport Products from './Products/Products'\n\nconst mapStateToProps = (state) => ({\n  currentUser: state.common.currentUser,\n})\n\nconst Home = (props) => {\n  const { currentUser } = props\n\n  if (!currentUser) {\n    return <Redirect to='/login' />\n  }\n\n  return (\n    <>\n      <AccountSuspendedDialog user={currentUser} />\n      <Header />\n      <PageWrapper>\n        <Container>\n          <Switch>\n            <ProtectedRoute\n              path='/student/account'\n              component={StudentAccount}\n            />\n            <ProtectedRoute path='/student/passes' component={StudentPasses} />\n            <ProtectedRoute path='/student/settings' component={Settings} />\n            <ProtectedRoute path='/student/songs' component={StudentSongs} />\n            <ProtectedRoute path='/student/store' component={Products} />\n\n            <ProtectedRoute\n              path='/teacher/accounts'\n              component={TeacherAccounts}\n            />\n            <ProtectedRoute\n              path='/teacher/courses'\n              component={TeacherCourses}\n            />\n            <ProtectedRoute path='/teacher/products' component={Products} />\n            <ProtectedRoute path='/teacher/settings' component={Settings} />\n            <ProtectedRoute path='/teacher/songs' component={TeacherSongs} />\n            <ProtectedRoute path='/teacher/store' component={ManagePurchases} />\n\n            <ProtectedRoute path='/admin/settings' component={Settings} />\n            <ProtectedRoute path='/admin/teachers' component={ManageTeachers} />\n\n            <Route component={NotFound} />\n          </Switch>\n        </Container>\n        <Navigation />\n      </PageWrapper>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, () => ({}))(Home)\n","import React from 'react'\nimport { Paper, Typography, makeStyles } from '@material-ui/core'\nimport Div100vh from 'react-div-100vh'\n\nimport Logo from './Logo'\nimport background from './../images/chemistry-background.jpg'\n\nconst useStyles = makeStyles((theme) => ({\n  background: {\n    alignItems: 'center',\n    backgroundImage: `url(${background})`,\n    backgroundSize: 'cover',\n    display: 'flex',\n    height: '100%',\n    justifyContent: 'center',\n  },\n  logo: {\n    marginBottom: theme.spacing(4),\n    width: 160,\n  },\n  panel: {\n    alignItems: 'center',\n    borderRadius: '1rem',\n    display: 'flex',\n    flexFlow: 'column nowrap',\n    overflowY: 'scroll',\n    padding: '2rem 4rem',\n    position: 'relative',\n  },\n  text: {\n    color: theme.palette.primary.main,\n    fontStyle: 'italic',\n  },\n}))\n\nconst Loading = (props) => {\n  const classes = useStyles()\n\n  return (\n    <Div100vh className={classes.background}>\n      <Paper elevation={12} className={classes.panel}>\n        <Logo className={classes.logo} />\n        <Typography className={classes.text} variant='h4'>\n          Loading...\n        </Typography>\n      </Paper>\n    </Div100vh>\n  )\n}\n\nexport default Loading\n","import React from 'react'\nimport { Grid, Link, Typography, makeStyles } from '@material-ui/core'\n\nimport profile from '../images/doc-may-profile.jpg'\n\nconst useStyles = makeStyles((theme) => ({\n  page: {\n    '& p:not(:last-of-type)': {\n      marginBottom: theme.spacing(2),\n    },\n  },\n  profile: {\n    borderRadius: '100%',\n    boxShadow: theme.shadows[10],\n    float: 'right',\n    marginBottom: theme.spacing(2),\n    marginLeft: theme.spacing(2),\n    width: '120px',\n  },\n}))\n\nconst About = () => {\n  const classes = useStyles()\n\n  return (\n    <Grid className={classes.page} container spacing={2}>\n      <Grid item xs={12}>\n        <Typography align='center' gutterBottom variant='h5'>\n          What is Chem Cash?\n        </Typography>\n        <img className={classes.profile} src={profile} />\n        <Typography variant='body2'>\n          Hi! I'm Joseph May, a high school chemistry teacher from Las Vegas.\n          While I love teaching chemistry, I also love programming for the web,\n          so why not combine the two.\n        </Typography>\n        <Typography variant='body2'>\n          Chem Cash is a points-based rewards system I use in my classroom. The\n          idea for this site came from a colleage who was inspired by one of his\n          own high school science teachers.\n        </Typography>\n        <Typography variant='body2'>\n          Students earn points in two ways: (1) through payouts based on their\n          assessment scores and (2) with bonus points earned for anything I deam\n          worthy of reward such as winning in-class competitions or going above\n          and beyond to help me or a student.\n        </Typography>\n        <Typography variant='body2'>\n          These points can be used to \"purchase\" goods such as school supplies,\n          electronics, and anything I can find for cheap or get for free.\n        </Typography>\n        <Typography variant='body2'>\n          However, the hottest-selling item is song requests. During work time\n          in my class I play music for my students. Each class period has its\n          own playlist and students can only add songs to the playlist by\n          spending their Chem Cash points.\n        </Typography>\n        <Typography variant='body2'>\n          I created this program to help manage all of the logistics behind this\n          system of incentives. While it can support multiple teachers, I am\n          running it on no-cost servers, so it was not intended to be a public\n          program. Although, if you are interested in learning more, please\n          reach out to me <Link href='mailto:support@chem.cash'>here</Link>.\n        </Typography>\n      </Grid>\n    </Grid>\n  )\n}\n\nexport default About\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Form, Field } from 'formik'\nimport { TextField } from 'formik-material-ui'\nimport { Button, Grid } from '@material-ui/core'\nimport * as Yup from 'yup'\n\nimport ListErrors from '../ListErrors'\nimport agent from '../../agent'\n\nimport { LOGIN } from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({ ...state.auth })\n\nconst mapDispatchToProps = (dispatch) => ({\n  onSubmit: (username, password) =>\n    dispatch({ type: LOGIN, payload: agent.Auth.login(username, password) }),\n})\n\nconst LoginForm = (props) => {\n  const submitForm = (username, password) => {\n    props.onSubmit(username, password)\n  }\n\n  return (\n    <Formik\n      initialValues={{\n        username: '',\n        password: '',\n      }}\n      validationSchema={Yup.object({\n        username: Yup.string().required('Required'),\n        // .matches(/^[0-9]+$/, 'Must be numbers only')\n        password: Yup.string().required('Required'),\n        // .matches(/^[0-9]{4}$/, 'Must be exactly 4 numbers')\n      })}\n      onSubmit={(values) => {\n        const { username, password } = values\n        submitForm(username, password)\n      }}\n    >\n      <Form>\n        <Grid container spacing={4}>\n          <Grid item xs={12}>\n            <ListErrors errors={props.errors} />\n            <Field\n              component={TextField}\n              disabled={props.inProgress}\n              fullWidth\n              label='Username'\n              name='username'\n              type='text'\n              variant='outlined'\n            />\n          </Grid>\n          <Grid item xs={12}>\n            <Field\n              component={TextField}\n              disabled={props.inProgress}\n              fullWidth\n              label='Password'\n              name='password'\n              type='password'\n              variant='outlined'\n            />\n          </Grid>\n          <Grid item xs={12}>\n            <Button\n              color='primary'\n              disabled={props.inProgress}\n              size='large'\n              type='submit'\n              variant='contained'\n            >\n              {props.inProgress ? 'Loading...' : 'Login'}\n            </Button>\n          </Grid>\n        </Grid>\n      </Form>\n    </Formik>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LoginForm)\n","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { Link, Redirect } from 'react-router-dom'\nimport Div100vh from 'react-div-100vh'\nimport {\n  Button,\n  Grid,\n  LinearProgress,\n  Paper,\n  Tooltip,\n  makeStyles,\n} from '@material-ui/core'\nimport { ArrowBackIos, InfoOutlined } from '@material-ui/icons'\n\nimport About from '../About'\nimport Logo from '../Logo'\nimport LoginForm from './LoginForm'\nimport background from '../../images/chemistry-background.jpg'\n\nimport { LOGIN_PAGE_UNLOADED } from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  aboutLink: {\n    bottom: theme.spacing(2),\n    position: 'absolute',\n    right: theme.spacing(4),\n  },\n  loginLink: {\n    'marginBottom': theme.spacing(2),\n    '& > a': {\n      textDecoration: 'none',\n    },\n  },\n  logo: {\n    display: 'block',\n    margin: '0 auto',\n    width: 120,\n  },\n  page: {\n    alignItems: 'center',\n    backgroundImage: `url(${background})`,\n    backgroundSize: 'cover',\n    display: 'flex',\n    height: '100%',\n    justifyContent: 'center',\n    [theme.breakpoints.up('lg')]: {\n      backgroundSize: 'initial',\n      justifyContent: 'flex-end',\n    },\n  },\n  panel: {\n    borderRadius: '1rem',\n    maxHeight: '90%',\n    overflowY: 'scroll',\n    padding: '4rem 2rem',\n    position: 'relative',\n    width: '80%',\n    [theme.breakpoints.up('lg')]: {\n      borderRadius: '0',\n      height: '100%',\n      maxHeight: '100%',\n      width: '40%',\n    },\n  },\n  progress: {\n    height: 10,\n    left: '0',\n    position: 'absolute',\n    top: '0',\n    width: '100%',\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.auth,\n  currentUser: state.common.currentUser,\n  pathname: state.router.location.pathname,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onUnload: () => dispatch({ type: LOGIN_PAGE_UNLOADED }),\n})\n\nconst AboutLink = () => {\n  const classes = useStyles()\n  return (\n    <span className={classes.aboutLink}>\n      <Tooltip arrow enterTouchDelay={0} title='Learn more'>\n        <Link to='/about'>\n          <InfoOutlined color='secondary' fontSize='small' />\n        </Link>\n      </Tooltip>\n    </span>\n  )\n}\n\nconst LoginLink = () => {\n  const classes = useStyles()\n  return (\n    <div className={classes.loginLink}>\n      <Link to='/login'>\n        <Button color='secondary' startIcon={<ArrowBackIos />}>\n          Login\n        </Button>\n      </Link>\n    </div>\n  )\n}\n\nconst Login = ({ currentUser, inProgress, onUnload, pathname }) => {\n  const classes = useStyles()\n\n  useEffect(() => {\n    return () => onUnload()\n  }, [])\n\n  if (currentUser) {\n    return <Redirect to='/' />\n  }\n\n  return (\n    <Div100vh>\n      <div className={classes.page}>\n        <Paper elevation={12} className={classes.panel}>\n          {inProgress && <LinearProgress className={classes.progress} />}\n          <Grid container spacing={4}>\n            <Grid item xs={12}>\n              <Logo className={classes.logo} />\n            </Grid>\n            <Grid item xs={12}>\n              {pathname.includes('about') ? (\n                <>\n                  <LoginLink />\n                  <About />\n                </>\n              ) : (\n                <>\n                  <AboutLink />\n                  <LoginForm />\n                </>\n              )}\n            </Grid>\n          </Grid>\n        </Paper>\n      </div>\n    </Div100vh>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login)\n","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { SnackbarProvider, useSnackbar } from 'notistack'\nimport { Button } from '@material-ui/core'\n\nimport { SNACKBAR_CLOSED } from '../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  snackbar: state.notifier.snackbar,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onSnackbarClose: () => dispatch({ type: SNACKBAR_CLOSED }),\n})\n\nconst Notification = (props) => {\n  const { snackbar } = props\n  const { enqueueSnackbar } = useSnackbar()\n\n  useEffect(() => {\n    if (snackbar) {\n      enqueueSnackbar(snackbar.message, { variant: snackbar.variant })\n    }\n  }, [snackbar])\n\n  return props.children\n}\n\nconst Notifier = (props) => {\n  const notistackRef = React.createRef()\n  const onSnackbarDismiss = (key) => () => {\n    notistackRef.current.closeSnackbar(key)\n  }\n\n  return (\n    <SnackbarProvider\n      maxSnack={3}\n      ref={notistackRef}\n      action={(key) => (\n        <Button onClick={onSnackbarDismiss(key)}>Dismiss</Button>\n      )}\n      onClose={() => {\n        props.onSnackbarClose()\n      }}\n    >\n      <Notification snackbar={props.snackbar}>{props.children}</Notification>\n    </SnackbarProvider>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Notifier)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Grid,\n  Typography,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\n\nimport agent from '../agent'\n\nimport { WHATS_NEW_DIALOG_UNLOADED } from '../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  date: {\n    color: theme.palette.secondary.main,\n  },\n  title: {\n    color: theme.palette.primary.main,\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.common,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onExit: () =>\n    dispatch({\n      type: WHATS_NEW_DIALOG_UNLOADED,\n      payload: agent.Auth.save({ viewedChanges: true }),\n    }),\n})\n\nconst WhatsNewDialog = ({ currentUser, onExit }) => {\n  const [open, setOpen] = useState(false)\n\n  const classes = useStyles()\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  useEffect(() => {\n    if (currentUser) setOpen(!currentUser.viewedChanges)\n  }, [currentUser])\n\n  return (\n    <Dialog\n      fullScreen={fullScreen}\n      fullWidth={true}\n      maxWidth={'md'}\n      open={open}\n      onClose={handleClose}\n      onClick={(ev) => ev.stopPropagation()}\n      onExit={onExit}\n      onFocus={(ev) => ev.stopPropagation()}\n    >\n      <DialogTitle>What's New in Chem Cash!</DialogTitle>\n      <DialogContent>\n        {currentUser?.role === 'student'\n          ? StudentWhatsNewContent()\n          : TeacherWhatsNewContent()}\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={handleClose} variant='contained'>\n          Close\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n\nconst NewDate = ({ date }) => {\n  const classes = useStyles()\n  return (\n    <Grid item xs={12}>\n      <Typography variant='body1' className={classes.date}>\n        <em>{date}</em>\n      </Typography>\n    </Grid>\n  )\n}\n\nconst NewItem = ({ children, title }) => {\n  const classes = useStyles()\n  return (\n    <Grid item xs={12}>\n      <Typography variant='subtitle2' className={classes.title}>\n        {title}\n      </Typography>\n      <Typography variant='body2'>{children}</Typography>\n    </Grid>\n  )\n}\n\nconst StudentWhatsNewContent = () => (\n  <Grid container spacing={4}>\n    <Grid item xs={12} container spacing={2}>\n      <Grid item xs={12}>\n        <Typography variant='h6'>Latest Updates</Typography>\n      </Grid>\n      <NewDate date='September 1, 2024' />\n      <NewItem title='See Total Fines'>\n        You can now see a breakdown of the total amount of fines you have\n        incurred on the <em>Account</em> page.\n      </NewItem>\n    </Grid>\n    <Grid item xs={12} container spacing={2}>\n      <Grid item xs={12}>\n        <Typography variant='h6'>Previous Updates</Typography>\n      </Grid>\n      <NewDate date='April 28, 2024' />\n      <NewItem title='Search for Products'>\n        A new search bar has been added to the <em>Products</em> page that will\n        allow you to filter the list of products based on search terms related\n        to the product's title.\n      </NewItem>\n      <NewDate date='September 4, 2023' />\n      <NewItem title='Hallpass Usage'>\n        You can now view your hallpass usage and see how many passes you have\n        left from the new <em>Passes</em> tab found along the bottom navigation.\n        This is only available if your teacher has enabled hallpasses in Chem\n        Cash.\n      </NewItem>\n      <NewDate date='August 1, 2023' />\n      <NewItem title='Chem Cash Prime'>\n        If enabled by your teacher, Chem Cash Prime may give you access to Chem\n        Cash features and discounts for a one-time membership fee depending on\n        your teacher's settings. To see if your teacher has enabled Chem Cash\n        Prime, go to the <em>Store</em> tab and look for the Chem Cash Prime\n        banner at the top of the page.\n      </NewItem>\n      <NewDate date='October 14, 2022' />\n      <NewItem title='Dark Mode'>\n        Like things dark? Chem Cash now has a dark mode that you can activate by\n        going to the Settings tab and switching on dark mode under Appearance.\n        Be sure to save your changes in order for the dark mode to activate.\n      </NewItem>\n      <NewDate date='October 10, 2022' />\n      <NewItem title='Hallpasses'>\n        If enabled by your teacher, you can now create a digital hallpass for\n        using the restroom. Your teacher can choose to set a point value for\n        hallpasses, which will be deducted from your account. You can only\n        generate one hallpass per day and only if there is not already an active\n        hallpass for another student. You can create a hallpass by clicking the\n        restroom icon on the Account page.\n      </NewItem>\n      <NewItem title='Sorting by Dates'>\n        Sorting by dates in all tables (transactions, songs, and purchases) now\n        works as expected, sorting by date and not alphabetically.\n      </NewItem>\n      <NewDate date='August 22, 2022' />\n      <NewItem title='Score and Transaction Notifications'>\n        You will now receive notifications when new or updated assessment scores\n        post to your account and when new bonuses and quick purchases post to\n        your account.\n      </NewItem>\n      <NewDate date='August 1, 2022' />\n      <NewItem title='Notification Center'>\n        You will now see notifications when you first login if there are updates\n        to your song and online purchase requests. You will see if your requests\n        were approved or denied and will see any notes associted with your\n        request.\n      </NewItem>\n      <NewItem title='Online Purchases'>\n        If your teacher has enabled the feature, you can now make purchases\n        online! You can add items to your cart on the Store page, manage your\n        cart, submit your order, and view your previous orders.\n      </NewItem>\n      <NewItem title='Product Quantities'>\n        You can now see when there are fewer than five items of any given\n        product with a new badge shown on the Products or Store page.\n      </NewItem>\n      <NewDate date='Dec 30, 2021' />\n      <NewItem title='Delete Songs'>\n        You can now request songs to be removed from your class playlist by\n        going to the 'Songs' tab and clicking the trash can icon next to the\n        song you want removed. This feature is only available if your teacher\n        has activated it.\n      </NewItem>\n      <NewItem title=\"What's New Notifications\">\n        This notification is a new feature! When new Chem Cash udpates are\n        released this notification will appear once on the first time you access\n        the website after the update is released.\n      </NewItem>\n    </Grid>\n  </Grid>\n)\n\nconst TeacherWhatsNewContent = () => (\n  <Grid container spacing={4}>\n    <Grid item xs={12} container spacing={2}>\n      <Grid item xs={12}>\n        <Typography variant='h6'>Latest Updates</Typography>\n      </Grid>\n      <NewDate date='September 1, 2024' />\n      <NewItem title='Student Fines'>\n        You can now add fines to student accounts. To use, enable <em>Fines</em>{' '}\n        on the <em>Settings</em> page, which will add new menu options to the{' '}\n        <em>Update Accounts</em> button on the <em>Accounts</em> page. Use the{' '}\n        <em>Manage Fines</em> feature to add set fines you can lookup quickly\n        when adding a fine. Fines can be added to individual student accounts or\n        to multiple students at once, just select <em>Add Fines</em> from the{' '}\n        <em>Update Accounts</em> menu.\n      </NewItem>\n    </Grid>\n    <Grid item xs={12} container spacing={2}>\n      <Grid item xs={12}>\n        <Typography variant='h6'>Previous Updates</Typography>\n      </Grid>\n      <NewDate date='August 1, 2024' />\n      <NewItem title='Jukebox (beta)'>\n        With Jukebox, you can connect a Spotify account with Chem Cash so that\n        students can pay points to add approved songs from their class playlist\n        to the Spotify queue to play next. Jukebox also allows students to see\n        the song currently playing on the connected Spotify account and a list\n        of upcoming songs. Jukebox can be enabled as a feature of Chem Cash\n        Prime or left for all users to access. (As a beta feature, you must have\n        beta features enabled in <em>Settings</em> to access Jukebox.)\n      </NewItem>\n      <NewDate date='April 28, 2024' />\n      <NewItem title='Search for Products in Gallery View'>\n        A new search bar has been added to the <em>Products</em> page gallery\n        view that will allow teachers and students to filter the list of\n        products based on search terms related to the product's title.\n      </NewItem>\n      <NewDate date='January 25, 2024' />\n      <NewItem title='Custom Notes For Approval or Rejection of Song Requests'>\n        You can now provide a custom message when approving or rejecting song\n        requests. Just select the <em>Other</em> option when processing songs to\n        reveal the input box for your custom message.\n      </NewItem>\n      <NewDate date='November 25, 2023' />\n      <NewItem title='Email Notifications'>\n        You can now choose to receive email notifications whenever a song\n        request or a store purchase is submitted. Options are available in the{' '}\n        <b>Notifications</b> section of the <em>Settings</em> page to\n        individually control these notifications and to provide an email address\n        where the notifications will be delivered.\n      </NewItem>\n      <NewDate date='October 28, 2023' />\n      <NewItem title='Assignment Data Viewer'>\n        You can now view statistical data for individual assignments including\n        average, pass/fail rates, grade breakdowns, a histogram of student\n        scores, and a list of student scores. Just go to the <em>Courses</em>{' '}\n        page, then click the <em>Manage assignments</em> button for a course.\n        From the dialog that opens, click on the <em>View data</em> button for\n        any assignment.\n      </NewItem>\n      <NewDate date='October 8, 2023' />\n      <NewItem title='Random Group Generator'>\n        You can now create 2 to 20 random groups of students in a given course\n        using the Random Group Generator found on the Courses page.\n      </NewItem>\n      <NewDate date='September 4, 2023' />\n      <NewItem title='Student Pass Usage'>\n        Students can view their hallpass usage and see how many passes they have\n        left from a new <em>Passes</em> tab found along the bottom naviagation\n        bar for student accounts only.\n      </NewItem>\n      <NewDate date='August 1, 2023' />\n      <NewItem title='Chem Cash Prime'>\n        When enabled, Chem Cash Prime allows you to charge students a one-time\n        membership fee for access to various features and discounts of your\n        choice including access to dark mode, the ability to remove songs,\n        same-day delivery, and discounts on songs, purchases, and hallpasses. Go\n        to the <em>Settings</em> page to enable Prime as this is a great way for\n        students to spend their points. To see the Prime banner and purchase\n        experience that students will have, go to the bottom of the{' '}\n        <em>Products</em> page when Prime is enabled.\n      </NewItem>\n      <NewItem title='Suspend Student Accounts'>\n        A new toggle on the 'Edit Student' dialog allows students to be dropped\n        which suspends their account. Students will not be able to create\n        hallpasses, make song requests, or submit online purchases while thier\n        account is dropped/suspended. Dropped/suspended students will not appear\n        in the bulk bonus or bulk purchase table and they will not affect the\n        data in the economy view.\n      </NewItem>\n      <NewItem title='New Hallpass Limitations'>\n        While students can only generate one hallpass per day, you can now limit\n        the total number of hallpasses a student can generate. You can also now\n        prevent students from purchasing a hallpass if they do not have enough\n        points. You can enable these new limitations in the Hallpasses section\n        of the <em>Settings</em> page. Once students reach this limit, they will\n        not be able to generate their own hallpasses (if this feature is\n        enabled) but you will still be able to generate a pass for them if\n        needed, which is also true for students with insufficient points for a\n        hallpass.\n      </NewItem>\n      <NewItem title='Table View for Managing Products'>\n        A new table view is the default for managing products. The table quickly\n        shows you each product's name, cost, max purchase quantity, and on-hand\n        quantity each of which you can sort by. You can still quickly update\n        inventory, edit products, and delete products from this new table view.\n        You can also search for products. Of course, the original grid view,\n        similar to what students see, is still available via a toggle switch at\n        the top of the Manage Products page.\n      </NewItem>\n      <NewItem title='Product Inventory Updates When Purchases are Submitted'>\n        Product inventory in the Store is updated once a purchase is submitted\n        rather than approved. This ensures that when a purchase is submitted for\n        an item that would then be out of stock, no other student can also\n        submit an order for it.\n      </NewItem>\n      <NewItem title='New Sorting When Processing Online Orders and Song Requests'>\n        When processing online purchases and song requests, you will see that\n        they are now sorted oldest to newest rather than the other way around.\n        This makes it more first-come-first served.\n      </NewItem>\n      <NewItem title='Hallpasses Out of Beta'>\n        Hallpasses are now ready for primetime and are out of beta!\n      </NewItem>\n      <NewDate date='October 14, 2022' />\n      <NewItem title='Dark Mode'>\n        Chem Cash now has a dark mode that you or students can activate by going\n        to the Settings tab and switching on dark mode under Appearance. Be sure\n        to save your changes in order for the dark mode to activate.\n      </NewItem>\n      <NewDate date='October 10, 2022' />\n      <NewItem title='Hallpasses (beta)'>\n        If you have beta features enabled, you can now enalbe hallpasses. This\n        allows teachers and students to create digital hallpasses for students\n        to leave the classroom. You can choose to set a point value for\n        hallpasses, which will automatically be deducted from student's\n        accounts. Students can only generate one hallpass per day and only if\n        there is not already an active hallpass for another student. You can\n        create a hallpass for a student anytime by clicking the restroom icon on\n        the Account page when you have a student account open. To view, edit,\n        and delete active and expired hallpasses, go to the Accounts page and\n        click the Update Accounts button. Then select Manage Hallpasses.\n      </NewItem>\n      <NewItem title='Sorting by Dates'>\n        Sorting by dates in all tables (transactions, songs, and purchases) now\n        works as expected, sorting by date and not alphabetically.\n      </NewItem>\n      <NewDate date='August 28, 2022' />\n      <NewItem title='Create and Manage Pre-set Bonuses'>\n        You can now create and manage pre-set bonuses for quickly adding bonus\n        points to a student's account. In the 'Update Accounts' menu on the\n        'Accounts' page, you can now select 'Manage Bonuses' to create, edit,\n        and delete pre-set bonuses that can be added to student's accounts. When\n        adding a bonus to a single student or to many students in a class\n        period, you will now see a dropdown menu of any pre-set bonuses you have\n        created that will auto-populate the amount field as well. Of course,\n        free-form bonuses can still be added.\n      </NewItem>\n      <NewItem title='Bonus and Product Selectors Available for Bulk Purchases'>\n        When adding a bulk bonus or bulk quick purchase to multiple students in\n        a class period, a dropdown of bonuses or products is now available.\n        Selecting a bonus or product from this dropdown will auto-populate the\n        amount field with the amount of the bonus or the cost of the item\n        including tax.\n      </NewItem>\n      <NewItem title='Support for Evergreen School District'>\n        Bock can now import students from the Evergreen School District into the\n        app when creating courses :) Support for importing scores is coming\n        soon!\n      </NewItem>\n      <NewDate date='August 22, 2022' />\n      <NewItem title='Score and Transaction Notifications for Students'>\n        Students will now receive notifications when new or updated assessment\n        scores post to their account and when new bonuses and quick purchases\n        post to their account.\n      </NewItem>\n      <NewDate date='August 1, 2022' />\n      <NewItem title='Online Purchases'>\n        Students can now submit online orders for products! New settings in the{' '}\n        <em>Products and Online Purchases</em> section allow you to control\n        whether students can submit online purchases or not, whether students\n        can submit online purchases if they do not have sufficient points, and a\n        tax rate to be applied to all online purchases of products (does not\n        apply to song requests or removal requests; can be set to zero if you do\n        not want to charge a tax). You can also add purchases to a student's\n        account from the <em>Accounts</em> tab.\n      </NewItem>\n      <NewItem title='Processing Purchases'>\n        If you have enabled online purchases, a new <em>Process Purchases</em>{' '}\n        dialog is available to approve or reject online purchases submitted by\n        students in a manner similar to the song request processing feature.\n        When processing purchases, you will have the option to update the order\n        quantity of each item, add items to the order, remove items from the\n        order, add a note to the order, and approve or reject the order. Upon\n        approval of the order, the on-hand quantity of each product will be\n        automaticaly adjusted.\n      </NewItem>\n      <NewItem title='Notification Center for Student Accounts'>\n        Students will now see notifications when they first login if there are\n        any updates to their song and online store purchase requests. Approval\n        or rejection notes will also be included with the notification.\n      </NewItem>\n      <NewItem title='Inventory Control Buttons and Quantity Display for Products'>\n        On the <em>Products</em> page, two new inventory control buttons are now\n        available to quickly increase or decrease the amount of on-hand product.\n        The quantity of each product is also now visible directly on each\n        product image. Students will only see the on-hand quantity when there\n        are fewer then five items remaining in stock.\n      </NewItem>\n      <NewItem title='Max Purchase Quantity for Products'>\n        A new field is now available for products that sets the maximum purchase\n        quantity limit for each product. When combined with the online store,\n        this will limit the quantity of items a student can add to their cart\n        for each product.\n      </NewItem>\n      <NewItem title='Add Quick Purchases with Automatic Inventory Mangement'>\n        Quick purchases allow you to add a deduction to a student's account for\n        the purchase of a single product from the store or you can enter a\n        custom description. When products from the store are purchased, the\n        inventory is automatically reduced by one.\n      </NewItem>\n      <NewItem title='Points Multiplier for Assignments'>\n        Assignments can now be weighted with a multiplier to increase or\n        decrease their point value. By default, all assignments are imported\n        with a multiplier of 1. To change the multiplier for an assignment in a\n        course go to <em>Courses</em> and click the <em>Manage Assignments</em>{' '}\n        button for that course. Then click the Edit button for the assignment\n        whose multiplier you want to change. The multiplier applies to the\n        points and not to the score.\n      </NewItem>\n      <NewItem title='Google Drive Hosted Images Now Easier to Use'>\n        You can now directly use the link generated by the <em>Get link</em>{' '}\n        feature on Google Drive to add custom product images to your store.\n        Images hosted on Google Drive must have their share permissions set to{' '}\n        <em>Anyone with the link</em> to properly display for all users.\n      </NewItem>\n      <NewItem title='Song Requests Badge'>\n        A badge now appears on the <em>Process Songs</em> button to indicate the\n        number of song requests that are pending approval. A similar badge also\n        appears on the <em>Process Purchases</em> button.\n      </NewItem>\n      <NewItem title='Improved Settings'>\n        The settings page has been improved to make clear which features are\n        enabled and disabled. A new school district setting has been added\n        because <em>somebody</em> had to go and leave CCSD :) so this will\n        ensure that there are no username conflicts with student accounts.\n      </NewItem>\n      <NewDate date='Jan 31, 2022' />\n      <NewItem title='In Stock and Out of Stock Products'>\n        Products with a quantity of zero will no longer be visible to students.\n        Teachers will see these products in an \"Out of Stock\" section on the\n        Products page. Once the product's quantity is greater than zero, the\n        product will appear in the \"In Stock\" section for teachers and will be\n        visible to students.\n      </NewItem>\n      <NewDate date='Jan 23, 2022' />\n      <NewItem title='Student Account Balances Visible When Processing Song Requests'>\n        Student account balances are now visible in the song request processing\n        dialog so you can quickly identify with a red/green color indicator if a\n        student has enough points to buy a song request or a song removal\n        request.\n      </NewItem>\n      <NewItem title='Song Totals Visible When Processing Song Requests'>\n        The total number of song requests to process is now visible in the song\n        request processing dialog along with a running count of requests\n        remaining to process.\n      </NewItem>\n      <NewDate date='Jan 17, 2022' />\n      <NewItem title='Economy View'>\n        You can now view a summary of details about the account balances for\n        students in your courses including the total number of points available\n        in your economy and an interactive table containing the account balances\n        of all students in all of your courses.\n      </NewItem>\n      <NewItem title='Beta Features Flag'>\n        A new flag that enables beta features when they are available can now be\n        found in the Account Details section of the Settings page.\n      </NewItem>\n      <NewDate date='Dec 30, 2021' />\n      <NewItem title='Delete Songs'>\n        Students can now request songs to be removed from thier class playlist\n        by going to the 'Songs' tab and clicking the trash can icon, once you\n        have activated the feature in the Settings.\n      </NewItem>\n      <NewItem title='Delete Songs Settings'>\n        New settings have been added to control student ability to request songs\n        for deletion as well as settings for the amount of points charged for a\n        song removal and the amount of points refunded to the person whose song\n        was removed.\n      </NewItem>\n      <NewItem title='Search for Products'>\n        You can now search for products in a dropdown menu when entering\n        purchases on the accounts page and the cost of the product will\n        automatically populate in the amount field.\n      </NewItem>\n      <NewItem title=\"What's New Notifications\">\n        This notification is a new feature! When new Chem Cash udpates are\n        released this notification will appear once on the first time you access\n        the website after the update is released.\n      </NewItem>\n    </Grid>\n  </Grid>\n)\n\nexport default connect(mapStateToProps, mapDispatchToProps)(WhatsNewDialog)\n","import {\n  ASYNC_START,\n  LOGIN,\n  LOGIN_PAGE_UNLOADED,\n  REGISTER,\n  REGISTER_PAGE_UNLOADED,\n} from '../constants/actionTypes'\n\nexport default (state = {}, action) => {\n  switch (action.type) {\n    case ASYNC_START:\n      if (action.subtype === LOGIN || action.subtype === REGISTER) {\n        return { ...state, inProgress: true }\n      }\n      break\n    case LOGIN:\n    case REGISTER:\n      return {\n        ...state,\n        inProgress: false,\n        errors: action.error ? action.payload.errors : null,\n      }\n    case LOGIN_PAGE_UNLOADED:\n    case REGISTER_PAGE_UNLOADED:\n      return {}\n    default:\n      return state\n  }\n\n  return state\n}\n","import {\n  ADD_BONUS,\n  DELETE_BONUS,\n  LOAD_BONUSES,\n  UNLOAD_BONUSES,\n  UPDATE_BONUS,\n} from '../constants/actionTypes'\n\nconst defaultState = {\n  bonuses: [],\n  errors: null,\n}\n\nconst sortByDescription = (a, b) => a.description.localeCompare(b.description)\n\nexport default (state = defaultState, action) => {\n  switch (action.type) {\n    case ADD_BONUS:\n      return {\n        ...state,\n        bonuses: action.error\n          ? state.bonuses\n          : [...state.bonuses, action.payload.bonus].sort((a, b) =>\n              sortByDescription(a, b)\n            ),\n        errors: action.error ? action.payload.errors : null,\n      }\n    case DELETE_BONUS:\n      return {\n        ...state,\n        bonuses: action.error\n          ? state.bonuses\n          : state.bonuses.filter(\n              (bonus) => bonus._id !== action.payload.bonus._id\n            ),\n        errors: action.error ? action.payload.errors : null,\n      }\n    case LOAD_BONUSES:\n      return {\n        ...state,\n        bonuses: action.error ? state.bonuses : action.payload.bonuses,\n        errors: action.error ? action.payload.errors : null,\n      }\n    case UNLOAD_BONUSES:\n      return defaultState\n    case UPDATE_BONUS:\n      return {\n        ...state,\n        bonuses: action.error\n          ? state.bonuses\n          : state.bonuses\n              .map((bonus) =>\n                bonus._id === action.payload.bonus._id\n                  ? action.payload.bonus\n                  : bonus\n              )\n              .sort((a, b) => sortByDescription(a, b)),\n        errors: action.error ? action.payload.errors : null,\n      }\n    default:\n      return state\n  }\n}\n","import {\n  APP_LOAD,\n  JUKEBOX_REQUEST_SUBMIT,\n  LOGIN,\n  LOGIN_PAGE_UNLOADED,\n  LOGOUT,\n  REDIRECT,\n  REGISTER,\n  REGISTER_PAGE_UNLOADED,\n  SETTINGS_SAVED,\n  SETTINGS_PAGE_UNLOADED,\n  SPOTIFY_REMOVE_AUTH,\n  SUBMIT_PRIME_PURCHASE,\n  NAV_LOADED,\n  NAV_TAB_CHANGE,\n  WHATS_NEW_DIALOG_LOADED,\n  WHATS_NEW_DIALOG_UNLOADED,\n} from '../constants/actionTypes'\n\nconst defaultState = {\n  appName: 'Chem Cash',\n  token: null,\n  viewChangeCounter: 0,\n}\n\nexport default (state = defaultState, action) => {\n  switch (action.type) {\n    case APP_LOAD:\n      return {\n        ...state,\n        token: action.token || null,\n        appLoaded: true,\n        currentUser: action.payload ? action.payload.user : null,\n        settings: action.payload ? action.payload.settings : null,\n      }\n    case JUKEBOX_REQUEST_SUBMIT:\n      return {\n        ...state,\n        settings: action.error ? state.settings : action.payload.settings,\n      }\n    case LOGOUT:\n      return { ...state, redirectTo: '/login', token: null, currentUser: null }\n    case LOGIN:\n    case REGISTER:\n      return {\n        ...state,\n        redirectTo: action.error ? null : '/',\n        token: action.error ? null : action.payload.user.token,\n        currentUser: action.error ? null : action.payload.user,\n        settings: action.error ? null : action.payload.settings,\n      }\n    case LOGIN_PAGE_UNLOADED:\n    case REGISTER_PAGE_UNLOADED:\n    case SETTINGS_PAGE_UNLOADED:\n      return { ...state, viewChangeCounter: state.viewChangeCounter + 1 }\n    case NAV_LOADED:\n    case NAV_TAB_CHANGE:\n      return { ...state, redirectTo: action.redirectTo }\n    case REDIRECT:\n      return { ...state, redirectTo: null }\n    case SETTINGS_SAVED:\n      return {\n        ...state,\n        currentUser: action.error ? state.currentUser : action.payload[0].user,\n        // settings: action.error ? state.settings : action.payload[1].settings,\n        // @todo: the sharing of teacher settings with student accounts needs some cleanup to avoid messes like this\n        settings:\n          action.error || state.currentUser.role === 'student'\n            ? state.settings\n            : action.payload[1].settings,\n      }\n    case SPOTIFY_REMOVE_AUTH:\n      return {\n        ...state,\n        settings: action.error\n          ? state.settings\n          : { ...state.settings, spotifyTokens: undefined },\n      }\n    case SUBMIT_PRIME_PURCHASE:\n      return {\n        ...state,\n        currentUser: action.error\n          ? state.currentUser\n          : { ...state.currentUser, hasPrime: true },\n      }\n    case WHATS_NEW_DIALOG_LOADED:\n    case WHATS_NEW_DIALOG_UNLOADED:\n      return {\n        ...state,\n        currentUser: action.payload ? action.payload.user : null,\n      }\n    default:\n      return state\n  }\n}\n","import {\n  ADD_COURSE,\n  ADD_STUDENT,\n  ALERT_CLOSED,\n  ASYNC_START,\n  COURSE_DIALOG_UNLOADED,\n  COURSES_PAGE_LOADED,\n  COURSES_PAGE_UNLOADED,\n  CREATE_PLAYLIST,\n  DELETE_COURSE,\n  DELETE_STUDENT,\n  IMPORT_STUDENTS,\n  MOVE_STUDENT,\n  PLAYLIST_MANAGER_DIALOG_LOADED,\n  PLAYLIST_MANAGER_DIALOG_UNLOADED,\n  REMOVE_PLAYLIST,\n  RESET_STUDENT_PASSWORD,\n  STUDENT_DIALOG_UNLOADED,\n  STUDENT_SEARCH_LOADED,\n  STUDENT_SEARCH_UNLOADED,\n  UPDATE_COURSE,\n  UPDATE_STUDENT,\n} from '../constants/actionTypes'\n\nconst defaultState = {\n  courses: [],\n  errors: null,\n  importCount: null,\n  importFailed: null,\n  inProgress: false,\n  pageLoaded: false,\n}\n\nconst sortByLastName = (a, b) => a.lastName.localeCompare(b.lastName)\nconst sortByPeriod = (a, b) => a.period - b.period\n\nexport default (state = defaultState, action) => {\n  let courses = []\n  switch (action.type) {\n    case ADD_COURSE:\n      return {\n        ...state,\n        courses: action.error\n          ? state.courses\n          : [...state.courses, action.payload.course].sort((a, b) =>\n              sortByPeriod(a, b)\n            ),\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n      }\n    case ADD_STUDENT:\n      // Changing a deep-nested array requires deep-copying\n      // to avoid altering the previous state\n      courses = []\n      state.courses.forEach((course) => {\n        const courseCopy = { ...course }\n        if (course._id.toString() === action.courseId) {\n          courseCopy.students = [...course.students, action.payload.user].sort(\n            (a, b) => sortByLastName(a, b)\n          )\n        }\n        courses.push(courseCopy)\n      })\n      return {\n        ...state,\n        courses: action.error ? state.courses : courses,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n      }\n    case ALERT_CLOSED:\n      return { ...state, importCount: null, importFailed: null }\n    case ASYNC_START:\n      if (\n        action.subtype === ADD_STUDENT ||\n        action.subtype === ADD_COURSE ||\n        action.subtype === MOVE_STUDENT ||\n        action.subtype === UPDATE_COURSE ||\n        action.subtype === UPDATE_STUDENT\n      ) {\n        return { ...state, errors: null, inProgress: true }\n      } else if (action.subtype === COURSES_PAGE_LOADED) {\n        return { ...state, errors: null, pageLoaded: true }\n      } else if (action.subtype === IMPORT_STUDENTS) {\n        return {\n          ...state,\n          errors: null,\n          importCount: null,\n          importFailed: null,\n          inProgress: true,\n        }\n      }\n      break\n    case COURSE_DIALOG_UNLOADED:\n    case STUDENT_DIALOG_UNLOADED:\n      return { ...state, errors: null }\n    case COURSES_PAGE_LOADED:\n    case PLAYLIST_MANAGER_DIALOG_LOADED:\n    case STUDENT_SEARCH_LOADED:\n      return {\n        ...state,\n        courses: action.error ? state.courses : action.payload.courses,\n        errors: action.error ? action.payload.errors : null,\n        pageLoaded: false,\n      }\n    case COURSES_PAGE_UNLOADED:\n    case PLAYLIST_MANAGER_DIALOG_UNLOADED:\n    case STUDENT_SEARCH_UNLOADED:\n      return defaultState\n    case DELETE_COURSE:\n      return {\n        ...state,\n        courses: action.error\n          ? state.courses\n          : state.courses.filter(\n              (course) => course.slug !== action.payload.course.slug\n            ),\n      }\n    case DELETE_STUDENT:\n      // Changing a deep-nested array requires deep-copying\n      // to avoid altering the previous state\n      courses = []\n      state.courses.forEach((course) => {\n        const courseCopy = { ...course }\n        if (course._id.toString() === action.payload.course._id.toString()) {\n          courseCopy.students = course.students.filter(\n            (student) => student.username !== action.payload.user.username\n          )\n        }\n        courses.push(courseCopy)\n      })\n      return {\n        ...state,\n        courses: action.error ? state.courses : courses,\n      }\n    case IMPORT_STUDENTS:\n      // Students are not sorted when returned from server (@todo: fix this?)\n      !action.error &&\n        action.payload.course.students.sort((a, b) => sortByLastName(a, b))\n      return {\n        ...state,\n        courses: action.error\n          ? state.courses\n          : state.courses.map((course) =>\n              course._id === action.payload.course._id\n                ? action.payload.course\n                : course\n            ),\n        errors: action.error ? action.payload.errors : null,\n        importCount: action.error ? null : action.payload.count,\n        importFailed: action.error ? null : action.payload.failed,\n        inProgress: false,\n      }\n    case MOVE_STUDENT:\n      // Students are not sorted when returned from server (@todo: fix this?)\n      !action.error &&\n        action.payload[0].course.students.sort((a, b) => sortByLastName(a, b))\n      !action.error &&\n        action.payload[1].course.students.sort((a, b) => sortByLastName(a, b))\n      return {\n        ...state,\n        courses: action.error\n          ? state.courses\n          : state.courses.map((course) => {\n              if (course._id === action.payload[0].course._id) {\n                return action.payload[0].course\n              } else if (course._id === action.payload[1].course._id) {\n                return action.payload[1].course\n              } else {\n                return course\n              }\n            }),\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n      }\n    case RESET_STUDENT_PASSWORD:\n      return { ...state }\n    case CREATE_PLAYLIST:\n    case UPDATE_COURSE:\n    case REMOVE_PLAYLIST:\n      return {\n        ...state,\n        courses: action.error\n          ? state.courses\n          : state.courses\n              .map((course) =>\n                course._id === action.payload.course._id\n                  ? action.payload.course\n                  : course\n              )\n              .sort((a, b) => sortByPeriod(a, b)),\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n      }\n    case UPDATE_STUDENT:\n      // Changing a deep-nested array requires deep-copying\n      // to avoid altering the previous state\n      courses = []\n      const updatedUser = action.payload.user\n      state.courses.forEach((course) => {\n        const courseCopy = { ...course }\n        if (course._id.toString() === action.courseId.toString()) {\n          courseCopy.students = course.students\n            .map((student) =>\n              student._id.toString() === updatedUser._id.toString()\n                ? updatedUser\n                : student\n            )\n            .sort((a, b) => sortByLastName(a, b))\n        }\n        courses.push(courseCopy)\n      })\n      return {\n        ...state,\n        courses: action.error ? state.courses : courses,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n      }\n    default:\n      return state\n  }\n\n  return state\n}\n","import {\n  ASYNC_START,\n  ECONOMY_DIALOG_LOADED,\n  ECONOMY_DIALOG_UNLOADED,\n} from '../constants/actionTypes'\n\nconst defaultState = {\n  errors: null,\n  inProgress: false,\n  students: [],\n}\n\nexport default (state = defaultState, action) => {\n  switch (action.type) {\n    case ASYNC_START:\n      if (action.subtype === ECONOMY_DIALOG_LOADED) {\n        return {\n          ...state,\n          errors: null,\n          inProgress: true,\n        }\n      }\n      break\n    case ECONOMY_DIALOG_LOADED:\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n        students: action.error ? state.students : action.payload.students,\n      }\n    case ECONOMY_DIALOG_UNLOADED:\n      return { ...defaultState }\n    default:\n      return state\n  }\n\n  return state\n}\n","import {\n  ADD_FINE,\n  DELETE_FINE,\n  LOAD_FINES,\n  UNLOAD_FINES,\n  UPDATE_FINE,\n} from '../constants/actionTypes'\n\nconst defaultState = {\n  fines: [],\n  errors: null,\n}\n\nconst sortByDescription = (a, b) => a.description.localeCompare(b.description)\n\nexport default (state = defaultState, action) => {\n  switch (action.type) {\n    case ADD_FINE:\n      return {\n        ...state,\n        fines: action.error\n          ? state.fines\n          : [...state.fines, action.payload.fine].sort((a, b) =>\n              sortByDescription(a, b)\n            ),\n        errors: action.error ? action.payload.errors : null,\n      }\n    case DELETE_FINE:\n      return {\n        ...state,\n        fines: action.error\n          ? state.fines\n          : state.fines.filter((fine) => fine._id !== action.payload.fine._id),\n        errors: action.error ? action.payload.errors : null,\n      }\n    case LOAD_FINES:\n      return {\n        ...state,\n        fines: action.error ? state.fines : action.payload.fines,\n        errors: action.error ? action.payload.errors : null,\n      }\n    case UNLOAD_FINES:\n      return defaultState\n    case UPDATE_FINE:\n      return {\n        ...state,\n        fines: action.error\n          ? state.fines\n          : state.fines\n              .map((fine) =>\n                fine._id === action.payload.fine._id\n                  ? action.payload.fine\n                  : fine\n              )\n              .sort((a, b) => sortByDescription(a, b)),\n        errors: action.error ? action.payload.errors : null,\n      }\n    default:\n      return state\n  }\n}\n","import {\n  ADD_TO_QUEUE,\n  ALERT_CLOSED,\n  ASYNC_START,\n  CREATE_PLAYLIST,\n  GET_PLAYLIST,\n  GET_QUEUE,\n  JUKEBOX_DIALOG_UNLOADED,\n  JUKEBOX_STUDENT_DIALOG_LOADED,\n  JUKEBOX_TEACHER_DIALOG_LOADED,\n  PLAYLIST_MANAGER_DIALOG_UNLOADED,\n  REMOVE_PLAYLIST,\n} from '../constants/actionTypes'\n\nconst defaultState = {\n  errors: null,\n  inProgress: false,\n  playlists: [],\n  queue: { currently_playing: null, queue: null },\n}\n\nexport default (state = defaultState, action) => {\n  switch (action.type) {\n    case ADD_TO_QUEUE:\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n      }\n    case ALERT_CLOSED:\n      return { ...state, errors: null }\n    case ASYNC_START:\n      if (\n        action.subtype === GET_PLAYLIST ||\n        action.subtype === GET_QUEUE ||\n        action.subtype === JUKEBOX_STUDENT_DIALOG_LOADED ||\n        action.subtype === JUKEBOX_TEACHER_DIALOG_LOADED\n      ) {\n        return { ...state, errors: null, inProgress: true }\n      } else if (action.subtype === ADD_TO_QUEUE) {\n        return { ...state, errors: null }\n      }\n      break\n    case CREATE_PLAYLIST:\n    case GET_PLAYLIST:\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n        playlists: action.error\n          ? state.playlists\n          : [...state.playlists, action.payload.playlist],\n      }\n    case GET_QUEUE:\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n        queue: action.error ? state.queue : action.payload.queue,\n      }\n    case JUKEBOX_DIALOG_UNLOADED:\n    case PLAYLIST_MANAGER_DIALOG_UNLOADED:\n      return defaultState\n    case JUKEBOX_STUDENT_DIALOG_LOADED:\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n        playlists: action.error\n          ? state.playlists\n          : [action.payload[0].playlist],\n      }\n    case JUKEBOX_TEACHER_DIALOG_LOADED:\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n        playlists: action.error ? state.playlists : [action.payload.playlist],\n      }\n    case REMOVE_PLAYLIST:\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        playlists: action.error\n          ? state.playlists\n          : state.playlists.filter(\n              (playlist) => playlist.id !== action.payload.playlistId\n            ),\n      }\n    default:\n      return state\n  }\n\n  return state\n}\n","import {\n  NAV_LOADED,\n  NAV_UNLOADED,\n  NAV_TAB_CHANGE,\n} from '../constants/actionTypes'\n\nexport default (state = {}, action) => {\n  switch (action.type) {\n    case NAV_LOADED:\n    case NAV_TAB_CHANGE:\n      return {\n        ...state,\n        navTabValue: action.value,\n      }\n    case NAV_UNLOADED:\n      return {}\n    default:\n      return state\n  }\n}\n","import {\n  NOTIFICATION_DIALOG_LOADED,\n  NOTIFICATION_DIALOG_UNLOADED,\n} from '../constants/actionTypes'\n\nconst defaultState = {\n  errors: null,\n  notifications: [],\n}\n\nexport default (state = defaultState, action) => {\n  switch (action.type) {\n    case NOTIFICATION_DIALOG_LOADED:\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        notifications: action.error\n          ? state.notifications\n          : action.payload.notifications,\n      }\n    case NOTIFICATION_DIALOG_UNLOADED:\n      return defaultState\n    default:\n      return state\n  }\n}\n","import {\n  ADD_BONUS,\n  ADD_COURSE,\n  ADD_FINE,\n  ADD_PASS,\n  ADD_PRODUCT,\n  ADD_STUDENT,\n  ADD_TEACHER,\n  ADD_TO_QUEUE,\n  ADD_TRANSACTION,\n  ADD_TRANSACTIONS,\n  CREATE_PLAYLIST,\n  DELETE_BONUS,\n  DELETE_COURSE,\n  DELETE_FINE,\n  DELETE_PASS,\n  DELETE_PRODUCT,\n  DELETE_PURCHASE,\n  DELETE_SONG_REQUEST,\n  DELETE_STUDENT,\n  DELETE_TASK,\n  DELETE_TEACHER,\n  DELETE_TRANSACTION,\n  IMPORT_SCORES,\n  IMPORT_STUDENTS,\n  JUKEBOX_REQUEST_SUBMIT,\n  MOVE_STUDENT,\n  REMOVE_PLAYLIST,\n  RESET_STUDENT_PASSWORD,\n  SETTINGS_SAVED,\n  SNACKBAR_CLOSED,\n  STUDENT_DELETE_PURCHASE,\n  SUBMIT_PURCHASE,\n  SUBMIT_PRIME_PURCHASE,\n  SUBMIT_SONG_REQUEST,\n  SUBMIT_SONG_REMOVAL_REQUEST,\n  UPDATE_BONUS,\n  UPDATE_COURSE,\n  UPDATE_FINE,\n  UPDATE_PASS,\n  UPDATE_PRODUCT,\n  UPDATE_STUDENT,\n  UPDATE_TASK,\n  UPDATE_TEACHER,\n  UPDATE_TRANSACTION,\n  WHATS_NEW_FLAGS_RESET,\n} from '../constants/actionTypes'\n\nexport default (state = {}, action) => {\n  switch (action.type) {\n    case ADD_BONUS:\n    case ADD_COURSE:\n    case ADD_FINE:\n    case ADD_PASS:\n    case ADD_PRODUCT:\n    case ADD_STUDENT:\n    case ADD_TEACHER:\n    case ADD_TO_QUEUE:\n    case ADD_TRANSACTION:\n    case ADD_TRANSACTIONS:\n    case CREATE_PLAYLIST:\n    case DELETE_BONUS:\n    case DELETE_COURSE:\n    case DELETE_FINE:\n    case DELETE_PASS:\n    case DELETE_PRODUCT:\n    case DELETE_PURCHASE:\n    case DELETE_SONG_REQUEST:\n    case DELETE_STUDENT:\n    case DELETE_TASK:\n    case DELETE_TEACHER:\n    case DELETE_TRANSACTION:\n    case IMPORT_SCORES:\n    case IMPORT_STUDENTS:\n    case JUKEBOX_REQUEST_SUBMIT:\n    case MOVE_STUDENT:\n    case REMOVE_PLAYLIST:\n    case RESET_STUDENT_PASSWORD:\n    case SETTINGS_SAVED:\n    case STUDENT_DELETE_PURCHASE:\n    case SUBMIT_PURCHASE:\n    case SUBMIT_PRIME_PURCHASE:\n    case SUBMIT_SONG_REQUEST:\n    case SUBMIT_SONG_REMOVAL_REQUEST:\n    case UPDATE_BONUS:\n    case UPDATE_COURSE:\n    case UPDATE_FINE:\n    case UPDATE_PASS:\n    case UPDATE_PRODUCT:\n    case UPDATE_STUDENT:\n    case UPDATE_TASK:\n    case UPDATE_TEACHER:\n    case UPDATE_TRANSACTION:\n    case WHATS_NEW_FLAGS_RESET:\n      return {\n        ...state,\n        snackbar: action.error\n          ? null //{ message: 'An error occurred', variant: 'error' }\n          : action.snackbar,\n      }\n    case SNACKBAR_CLOSED:\n      return { ...state, snackbar: null }\n    default:\n      return state\n  }\n}\n","import {\n  ASYNC_START,\n  ADD_PASS,\n  DELETE_PASS,\n  GET_LAST_PASS,\n  LOAD_STUDENT_PASSES,\n  LOAD_TEACHER_PASSES,\n  LOAD_TEACHER_PASS_DIALOG,\n  UNLOAD_MANAGE_PASSES,\n  UPDATE_PASS,\n} from '../constants/actionTypes'\n\nconst defaultState = {\n  courses: [],\n  errors: null,\n  inProgress: false,\n  lastPass: null,\n  pageLoaded: false,\n  passes: [],\n}\n\nexport default (state = defaultState, action) => {\n  let courses = []\n  switch (action.type) {\n    case ADD_PASS:\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n        passes: action.error\n          ? state.passes\n          : [action.payload.pass, ...state.passes],\n      }\n    case ASYNC_START:\n      if (\n        action.subtype === ADD_PASS ||\n        action.subtype === LOAD_STUDENT_PASSES ||\n        action.subtype === LOAD_TEACHER_PASSES\n      ) {\n        return { ...state, errors: null, inProgress: true }\n      }\n      break\n    case DELETE_PASS:\n      // Changing a deep-nested array requires deep-copying\n      // to avoid altering the previous state\n      state.courses.forEach((course) => {\n        const courseCopy = { ...course }\n        courseCopy.passes = courseCopy.passes.filter(\n          (pass) => pass._id.toString() !== action.payload.pass._id.toString()\n        )\n        courses.push(courseCopy)\n      })\n      return {\n        ...state,\n        courses: action.error ? state.courses : courses,\n      }\n    case GET_LAST_PASS:\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        lastPass: action.error ? state.lastPass : action.payload.pass,\n      }\n    case LOAD_STUDENT_PASSES:\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n        pageLoaded: true,\n        passes: action.error ? state.passes : action.payload.passes,\n      }\n    case LOAD_TEACHER_PASSES:\n      return {\n        ...state,\n        courses: action.error ? state.courses : action.payload.courses,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n        pageLoaded: true,\n      }\n    case LOAD_TEACHER_PASS_DIALOG:\n      return {\n        ...state,\n        passes: action.error ? state.passes : action.payload.passes,\n        pageLoaded: true,\n      }\n    case UNLOAD_MANAGE_PASSES:\n      return defaultState\n    case UPDATE_PASS:\n      // Changing a deep-nested array requires deep-copying\n      // to avoid altering the previous state\n      !action.error &&\n        state.courses.forEach((course) => {\n          const courseCopy = { ...course }\n          courseCopy.passes = courseCopy.passes.map((pass) =>\n            pass._id.toString() === action.payload.pass._id.toString()\n              ? action.payload.pass\n              : pass\n          )\n          courses.push(courseCopy)\n        })\n      return {\n        ...state,\n        courses: action.error ? state.courses : courses,\n      }\n    default:\n      return state\n  }\n\n  return state\n}\n","import {\n  ADD_PRODUCT,\n  ASYNC_START,\n  PRODUCT_DIALOG_UNLOADED,\n  PRODUCT_SELECTOR_LOADED,\n  PRODUCT_SELECTOR_UNLOADED,\n  PRODUCTS_PAGE_LOADED,\n  PRODUCTS_PAGE_UNLOADED,\n  DELETE_PRODUCT,\n  UPDATE_PRODUCT,\n} from '../constants/actionTypes'\n\nconst defaultState = {\n  products: [],\n  errors: null,\n  inProgress: false,\n  pageLoaded: false,\n}\n\nconst sortByCost = (a, b) => a.cost - b.cost\n\nexport default (state = defaultState, action) => {\n  switch (action.type) {\n    case ADD_PRODUCT:\n      return {\n        ...state,\n        products: action.error\n          ? state.products\n          : [...state.products, action.payload.product].sort((a, b) =>\n              sortByCost(a, b)\n            ),\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n      }\n    case ASYNC_START:\n      if (action.subtype === ADD_PRODUCT || action.subtype === UPDATE_PRODUCT) {\n        return { ...state, errors: null, inProgress: true }\n      } else if (\n        action.subtype === PRODUCT_SELECTOR_LOADED ||\n        action.subtype === PRODUCTS_PAGE_LOADED\n      ) {\n        return { ...state, errors: null, inProgress: true, pageLoaded: false }\n      }\n      break\n    case DELETE_PRODUCT:\n      return {\n        ...state,\n        products: action.error\n          ? state.products\n          : state.products.filter(\n              (product) => product.slug !== action.payload.product.slug\n            ),\n      }\n    case PRODUCT_DIALOG_UNLOADED:\n      return { ...state, errors: null }\n    case PRODUCT_SELECTOR_LOADED:\n    case PRODUCTS_PAGE_LOADED:\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n        pageLoaded: true,\n        products: action.error ? state.products : action.payload.products,\n      }\n    case PRODUCT_SELECTOR_UNLOADED:\n    case PRODUCTS_PAGE_UNLOADED:\n      return defaultState\n    case UPDATE_PRODUCT:\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n        products: action.error\n          ? state.products\n          : state.products\n              .map((product) =>\n                product._id === action.payload.product._id\n                  ? action.payload.product\n                  : product\n              )\n              .sort((a, b) => sortByCost(a, b)),\n      }\n    default:\n      return state\n  }\n\n  return state\n}\n","import {\n  ADD_PURCHASE,\n  ADD_PURCHASE_DIALOG_UNLOADED,\n  ADD_TO_CART,\n  ASYNC_START,\n  DELETE_CART_PRODUCT,\n  DELETE_PURCHASE,\n  PRIME_PURCHASE_DIALOG_UNLOADED,\n  PURCHASES_DIALOG_UNLOADED,\n  STUDENT_DELETE_PURCHASE,\n  STUDENT_PURCHASES_LOADED,\n  STUDENT_PURCHASES_UNLOADED,\n  SUBMIT_PURCHASE,\n  SUBMIT_PRIME_PURCHASE,\n  TEACHER_PURCHASES_LOADED,\n  TEACHER_PURCHASES_UNLOADED,\n  UPDATE_CART_PRODUCT_QUANTITY,\n  UPDATE_PURCHASE,\n} from '../constants/actionTypes'\n\nconst defaultState = {\n  cart: { products: [], quantities: {} },\n  courses: [],\n  errors: null,\n  inProgress: false,\n  isLoaded: false,\n  purchases: [],\n}\n\nexport default (state = defaultState, action) => {\n  let courses = []\n  switch (action.type) {\n    case ADD_PURCHASE:\n    case SUBMIT_PURCHASE:\n    case SUBMIT_PRIME_PURCHASE:\n      return {\n        ...state,\n        cart: action.error ? state.cart : defaultState.cart,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n      }\n    case ADD_PURCHASE_DIALOG_UNLOADED:\n    case PRIME_PURCHASE_DIALOG_UNLOADED:\n      return defaultState\n    case ADD_TO_CART:\n      const productIndex = state.cart.products.findIndex(\n        (product) => product._id === action.product._id\n      )\n      const isAdded = productIndex > -1\n      const updatedQuantity = isAdded\n        ? state.cart.quantities[action.product._id] + 1\n        : 1\n      const allowed = action.product.maxPurchaseQuantity\n      const onHand = action.product.quantity\n      const max = allowed !== 0 ? Math.min(allowed, onHand) : onHand\n      return {\n        ...state,\n        cart: {\n          products: isAdded\n            ? state.cart.products\n            : [...state.cart.products, action.product],\n          quantities: {\n            ...state.cart.quantities,\n            [action.product._id]:\n              updatedQuantity <= max ? updatedQuantity : max,\n          },\n        },\n      }\n    case ASYNC_START:\n      if (\n        action.subtype === STUDENT_PURCHASES_LOADED ||\n        action.subtype === TEACHER_PURCHASES_LOADED ||\n        action.subtype === SUBMIT_PURCHASE ||\n        action.subtype === SUBMIT_PRIME_PURCHASE\n      ) {\n        return { ...state, errors: null, inProgress: true }\n      }\n      break\n    case DELETE_CART_PRODUCT:\n      const { [action.productId]: value, ...withoutDeleted } =\n        state.cart.quantities\n      return {\n        ...state,\n        cart: {\n          products: state.cart.products.filter(\n            (product) => product._id !== action.productId\n          ),\n          quantities: withoutDeleted,\n        },\n      }\n    case DELETE_PURCHASE:\n      // Changing a deep-nested array requires deep-copying\n      // to avoid altering the previous state\n      state.courses.forEach((course) => {\n        const courseCopy = { ...course }\n        courseCopy.purchases = courseCopy.purchases.filter(\n          (purchase) =>\n            purchase._id.toString() !== action.payload.purchase._id.toString()\n        )\n        courses.push(courseCopy)\n      })\n      return {\n        ...state,\n        courses: action.error ? state.courses : courses,\n      }\n    case PURCHASES_DIALOG_UNLOADED:\n      return { ...state, errors: null }\n    case STUDENT_DELETE_PURCHASE:\n      return {\n        ...state,\n        purchases: action.error\n          ? state.purchases\n          : state.purchases.filter(\n              (purchase) => purchase._id !== action.payload.purchase._id\n            ),\n      }\n    case STUDENT_PURCHASES_LOADED:\n      return {\n        ...state,\n        purchases: action.error ? state.purchases : action.payload.purchases,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n      }\n    case STUDENT_PURCHASES_UNLOADED:\n      return { ...defaultState, cart: state.cart }\n    case TEACHER_PURCHASES_LOADED:\n      return {\n        ...state,\n        courses: action.error ? state.courses : action.payload.courses,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n        isLoaded: true,\n      }\n    case TEACHER_PURCHASES_UNLOADED:\n      return { ...defaultState }\n    case UPDATE_CART_PRODUCT_QUANTITY:\n      return {\n        ...state,\n        cart: {\n          ...state.cart,\n          quantities: {\n            ...state.cart.quantities,\n            [action.productId]: action.qty,\n          },\n        },\n      }\n    case UPDATE_PURCHASE:\n      // Changing a deep-nested array requires deep-copying\n      // to avoid altering the previous state\n      !action.error &&\n        state.courses.forEach((course) => {\n          const courseCopy = { ...course }\n          courseCopy.purchases = courseCopy.purchases.map((purchase) =>\n            purchase._id.toString() === action.payload.purchase._id.toString()\n              ? action.payload.purchase\n              : purchase\n          )\n          courses.push(courseCopy)\n        })\n      return {\n        ...state,\n        courses: action.error ? state.courses : courses,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n      }\n    default:\n      return state\n  }\n\n  return state\n}\n","import { unionBy } from 'lodash'\nimport {\n  ACCOUNT_BALANCE_LOADED,\n  ACCOUNT_BALANCE_UNLOADED,\n  ACCOUNT_VIEW_LOADED,\n  ACCOUNT_VIEW_UNLOADED,\n  ACCOUNTS_PAGE_UNLOADED,\n  ADD_PASS,\n  ADD_PURCHASE,\n  ADD_TO_QUEUE,\n  ADD_TRANSACTION,\n  ADD_TRANSACTIONS,\n  ALERT_CLOSED,\n  ASYNC_START,\n  DELETE_PASS,\n  DELETE_TRANSACTION,\n  JUKEBOX_DIALOG_UNLOADED,\n  JUKEBOX_STUDENT_DIALOG_LOADED,\n  STUDENT_CART_LOADED,\n  STUDENT_CART_UNLOADED,\n  STUDENT_PASSES_LOADED,\n  STUDENT_PASSES_UNLOADED,\n  IMPORT_SCORES,\n  IMPORT_SCORES_DIALOG_UNLOADED,\n  TRANSACTION_DIALOG_UNLOADED,\n  TRANSACTIONS_DIALOG_UNLOADED,\n  UNLOAD_MANAGE_PASSES,\n  UPDATE_PASS,\n  UPDATE_TRANSACTION,\n} from '../constants/actionTypes'\nimport { convertScore } from '../converter'\n\nconst defaultState = {\n  balance: null,\n  conversions: null,\n  errors: null,\n  importSummary: null,\n  inProgress: false,\n  total: null,\n  transactions: null,\n}\n\nconst getTotals = (transactions, conversions) => {\n  const sumTransactions = (total, transaction) => total + transaction.amount\n  const sumScores = (total, score) => total + convertScore(score, conversions)\n\n  const bonuses = transactions.bonuses.reduce(sumTransactions, 0)\n  const fines = transactions.fines.reduce(sumTransactions, 0)\n  const purchases = transactions.purchases.reduce(sumTransactions, 0)\n  const scores = transactions.scores.reduce(sumScores, 0)\n\n  const balance = bonuses + fines + purchases + scores\n\n  return { balance, bonuses, fines, purchases, scores }\n}\n\nconst addScores = (added, transactions, curUser) => {\n  if (curUser) {\n    const curUserId = curUser._id.toString()\n    const usersAdded = added.filter(\n      (score) => score.student._id.toString() === curUserId\n    )\n\n    if (usersAdded) {\n      transactions.scores = unionBy(usersAdded, [...transactions.scores], '_id')\n    }\n\n    return transactions\n  }\n\n  return null\n}\n\nconst addTransaction = (added, transactions) => {\n  const types = Object.keys(transactions)\n  for (const type of types) {\n    if (type.startsWith(added.type)) {\n      transactions[type] = [added, ...transactions[type]]\n    }\n  }\n  return transactions\n}\n\nconst addBulkTransaction = (added, transactions, curUser) => {\n  if (curUser) {\n    const curUserId = curUser._id.toString()\n    const usersAdded = added.find(\n      (transaction) => transaction.student._id.toString() === curUserId\n    )\n\n    if (usersAdded) return addTransaction(usersAdded, transactions)\n  }\n\n  return null\n}\n\nconst deleteTransaction = (deleted, transactions) => {\n  const types = Object.keys(transactions)\n  for (const type of types) {\n    if (type.startsWith(deleted.type)) {\n      transactions[type] = transactions[type].filter(\n        (transaction) => transaction._id !== deleted._id\n      )\n    }\n  }\n  return transactions\n}\n\nconst updateTransaction = (updated, transactions) => {\n  const types = Object.keys(transactions)\n  for (const type of types) {\n    if (type.startsWith(updated.type)) {\n      transactions[type] = transactions[type].map((transaction) =>\n        transaction._id === updated._id ? updated : transaction\n      )\n    }\n  }\n  return transactions\n}\n\nexport default (state = defaultState, action) => {\n  switch (action.type) {\n    case ACCOUNT_BALANCE_LOADED:\n      return {\n        ...state,\n        balance: action.error\n          ? null\n          : getTotals(\n              action.payload.transactions,\n              action.payload.scoreConverter\n            ),\n      }\n    case ACCOUNT_BALANCE_UNLOADED:\n    case JUKEBOX_DIALOG_UNLOADED:\n      return { ...state, balance: null }\n    case ADD_TO_QUEUE:\n      return {\n        ...state,\n        balance: action.error\n          ? state.balance\n          : state.balance !== null\n          ? {\n              ...state.balance,\n              balance:\n                state.balance.balance + action.payload.transaction.amount,\n            }\n          : null,\n      }\n    case JUKEBOX_STUDENT_DIALOG_LOADED:\n      return {\n        ...state,\n        balance: action.error\n          ? null\n          : getTotals(\n              action.payload[1].transactions,\n              action.payload[1].scoreConverter\n            ),\n      }\n    case STUDENT_CART_LOADED:\n      return {\n        ...state,\n        total: action.error\n          ? null\n          : getTotals(\n              action.payload.transactions,\n              action.payload.scoreConverter\n            ),\n      }\n    case STUDENT_CART_UNLOADED:\n      return { ...state, total: null }\n    case ACCOUNT_VIEW_LOADED:\n    case STUDENT_PASSES_LOADED:\n      return {\n        ...state,\n        conversions: action.error ? null : action.payload.scoreConverter,\n        total: action.error\n          ? null\n          : getTotals(\n              action.payload.transactions,\n              action.payload.scoreConverter\n            ),\n        transactions: action.error ? null : action.payload.transactions,\n      }\n    case ACCOUNT_VIEW_UNLOADED:\n      return { ...state, conversions: null, total: null, transactions: null }\n    case ACCOUNTS_PAGE_UNLOADED:\n    case ALERT_CLOSED:\n      return { ...state, importSummary: null }\n    case ADD_PASS:\n    case ADD_TRANSACTION:\n      const addedTransactions = !action.error\n        ? addTransaction(action.payload.transaction, {\n            ...state.transactions,\n          })\n        : {}\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n        transactions: action.error ? state.transactions : addedTransactions,\n        total: action.error\n          ? state.total\n          : getTotals(addedTransactions, state.conversions),\n      }\n    case ADD_PURCHASE:\n      const addedTranasctions = !action.error\n        ? addTransaction(action.payload.purchase.purchaseTransaction, {\n            ...state.transactions,\n          })\n        : {}\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n        transactions: action.error ? state.transactions : addedTranasctions,\n        total: action.error\n          ? state.total\n          : getTotals(addedTranasctions, state.conversions),\n      }\n    case ADD_TRANSACTIONS:\n      const addedBulkTransactions = !action.error\n        ? addBulkTransaction(\n            action.payload.transactions,\n            { ...state.transactions },\n            action.curStudent\n          )\n        : null\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n        transactions:\n          action.error || !state.transactions\n            ? state.transactions\n            : addedBulkTransactions,\n        total:\n          action.error || !state.transactions\n            ? state.total\n            : getTotals(addedBulkTransactions, state.conversions),\n      }\n    case ASYNC_START:\n      if (\n        action.subtype === ADD_TRANSACTION ||\n        action.subtype === ADD_TRANSACTIONS ||\n        action.subtype === DELETE_TRANSACTION ||\n        action.subtype === UPDATE_TRANSACTION\n      ) {\n        return { ...state, errors: null, inProgress: true }\n      } else if (action.subtype === IMPORT_SCORES) {\n        return { ...state, errors: null, importSummary: null, inProgress: true }\n      }\n      break\n    case DELETE_PASS:\n    case DELETE_TRANSACTION:\n      const deletedTransactions = !action.error\n        ? deleteTransaction(action.payload.transaction, {\n            ...state.transactions,\n          })\n        : {}\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n        transactions:\n          action.error || !state.transactions\n            ? state.transactions\n            : deletedTransactions,\n        total:\n          action.error || !state.transactions\n            ? state.total\n            : getTotals(deletedTransactions, state.conversions),\n      }\n    case IMPORT_SCORES:\n      const addedScores = !action.error\n        ? addScores(\n            action.payload.scores,\n            { ...state.transactions },\n            action.curStudent\n          )\n        : null\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        importSummary: action.error ? null : action.payload.results,\n        inProgress: false,\n        transactions: action.error ? state.transactions : addedScores,\n        total:\n          action.error || !state.transactions\n            ? state.total\n            : getTotals(addedScores, state.conversions),\n      }\n    case IMPORT_SCORES_DIALOG_UNLOADED:\n    case TRANSACTION_DIALOG_UNLOADED:\n    case TRANSACTIONS_DIALOG_UNLOADED:\n      return { ...state, errors: null }\n    case UPDATE_PASS:\n    case UPDATE_TRANSACTION:\n      const updatedTransactions = !action.error\n        ? updateTransaction(action.payload.transaction, {\n            ...state.transactions,\n          })\n        : {}\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n        transactions:\n          action.error || !state.transactions\n            ? state.transactions\n            : updatedTransactions,\n        total:\n          action.error || !state.transactions\n            ? state.total\n            : getTotals(updatedTransactions, state.conversions),\n      }\n    default:\n      return state\n  }\n\n  return state\n}\n","import {\n  ASYNC_START,\n  JUKEBOX_REQUEST_SUBMIT,\n  SETTINGS_PAGE_UNLOADED,\n  SETTINGS_SAVED,\n  SPOTIFY_LINKER_LOADED,\n  SPOTIFY_LINKER_UNLOADED,\n} from '../constants/actionTypes'\n\nconst defaultState = {\n  errors: null,\n  inProgress: false,\n  spotifyAuthUrl: null,\n}\n\nexport default (state = defaultState, action) => {\n  switch (action.type) {\n    case ASYNC_START:\n      if (\n        action.subtype === JUKEBOX_REQUEST_SUBMIT ||\n        action.subtype === SETTINGS_SAVED\n      ) {\n        return {\n          ...state,\n          inProgress: true,\n        }\n      }\n      break\n    case JUKEBOX_REQUEST_SUBMIT:\n    case SETTINGS_SAVED:\n      return {\n        ...state,\n        inProgress: false,\n        errors: action.error ? action.payload.errors : null,\n      }\n    case SPOTIFY_LINKER_LOADED:\n      return { ...state, spotifyAuthUrl: action.payload.spotifyAuthUrl }\n    case SETTINGS_PAGE_UNLOADED:\n    case SPOTIFY_LINKER_UNLOADED:\n      return defaultState\n    default:\n      return state\n  }\n\n  return state\n}\n","import {\n  ASYNC_START,\n  DELETE_TASK,\n  LOAD_TASK_SCORES,\n  TASKS_DIALOG_LOADED,\n  TASKS_DIALOG_UNLOADED,\n  UNLOAD_TASK_SCORES,\n  UPDATE_TASK,\n} from '../constants/actionTypes'\n\nconst defaultState = {\n  errors: null,\n  inProgress: false,\n  scores: [],\n  tasks: [],\n}\n\nexport default (state = defaultState, action) => {\n  switch (action.type) {\n    case ASYNC_START:\n      if (\n        action.subtype === TASKS_DIALOG_LOADED ||\n        action.subtype === LOAD_TASK_SCORES\n      ) {\n        return { ...state, inProgress: true }\n      }\n      break\n    case DELETE_TASK:\n      return {\n        ...state,\n        tasks: action.error\n          ? state.tasks\n          : state.tasks.filter(\n              (task) => task.slug !== action.payload.task.slug\n            ),\n      }\n    case LOAD_TASK_SCORES:\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n        scores: action.error ? [] : action.payload.scores,\n      }\n    case TASKS_DIALOG_LOADED:\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n        tasks: action.error ? [] : action.payload.tasks,\n      }\n    case TASKS_DIALOG_UNLOADED:\n      return defaultState\n    case UNLOAD_TASK_SCORES:\n      return { ...state, scores: [] }\n    case UPDATE_TASK:\n      return {\n        ...state,\n        tasks: action.error\n          ? state.tasks\n          : state.tasks.map((task) =>\n              task.slug === action.payload.task.slug\n                ? action.payload.task\n                : task\n            ),\n      }\n    default:\n      return state\n  }\n\n  return state\n}\n","import {\n  ADD_TEACHER,\n  ASYNC_START,\n  DELETE_TEACHER,\n  MANAGE_TEACHERS_PAGE_LOADED,\n  MANAGE_TEACHERS_PAGE_UNLOADED,\n  TEACHER_DIALOG_UNLOADED,\n  UPDATE_TEACHER,\n} from '../constants/actionTypes'\n\nconst defaultState = {\n  errors: null,\n  inProgress: false,\n  pageLoaded: false,\n  teachers: [],\n}\n\nconst sortByLastName = (a, b) => a.lastName.localeCompare(b.lastName)\n\nexport default (state = defaultState, action) => {\n  switch (action.type) {\n    case ADD_TEACHER:\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n        teachers: action.error\n          ? state.teachers\n          : [\n              ...state.teachers,\n              { ...action.payload.user, settings: action.payload.settings },\n            ].sort((a, b) => sortByLastName(a, b)),\n      }\n    case ASYNC_START:\n      if (action.subtype === ADD_TEACHER || action.subtype === UPDATE_TEACHER) {\n        return { ...state, inProgress: true, errors: null }\n      } else if (action.subtype === MANAGE_TEACHERS_PAGE_LOADED) {\n        return { ...state, errors: null, inProgress: true, pageLoaded: false }\n      }\n      break\n    case DELETE_TEACHER:\n      return {\n        ...state,\n        teachers: action.error\n          ? state.teachers\n          : state.teachers.filter(\n              (teacher) => teacher.username !== action.payload.user.username\n            ),\n      }\n    case MANAGE_TEACHERS_PAGE_LOADED:\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n        pageLoaded: true,\n        teachers: action.payload.users,\n      }\n    case MANAGE_TEACHERS_PAGE_UNLOADED:\n      return defaultState\n    case TEACHER_DIALOG_UNLOADED:\n      return { ...state, errors: null }\n    case UPDATE_TEACHER:\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n        teachers: action.error\n          ? state.teachers\n          : state.teachers\n              .map((user) =>\n                user.username === action.payload.user.username\n                  ? { ...user, ...action.payload.user }\n                  : user\n              )\n              .sort((a, b) => sortByLastName(a, b)),\n      }\n    default:\n      return state\n  }\n\n  return state\n}\n","import {\n  ASYNC_START,\n  DELETE_SONG_REQUEST,\n  SONG_REQUESTS_DIALOG_UNLOADED,\n  SONGS_PAGE_UNLOADED,\n  STUDENT_SONGS_PAGE_LOADED,\n  SUBMIT_SONG_REQUEST,\n  SUBMIT_SONG_REMOVAL_REQUEST,\n  TEACHER_SONGS_PAGE_LOADED,\n  UPDATE_SONG_REQUEST,\n} from '../constants/actionTypes'\n\nconst defaultState = {\n  course: null,\n  courses: [],\n  courseSongs: [],\n  errors: null,\n  inProgress: false,\n  isLoaded: false,\n  userSongs: [],\n}\n\nexport default (state = defaultState, action) => {\n  let courses = []\n  switch (action.type) {\n    case ASYNC_START:\n      if (action.subtype === UPDATE_SONG_REQUEST) {\n        return { ...state, inProgress: true, errors: null }\n      }\n      break\n    case DELETE_SONG_REQUEST:\n      // Changing a deep-nested array requires deep-copying\n      // to avoid altering the previous state\n      state.courses.forEach((course) => {\n        const courseCopy = { ...course }\n        courseCopy.songs = courseCopy.songs.filter(\n          (song) => song._id.toString() !== action.payload.song._id.toString()\n        )\n        courses.push(courseCopy)\n      })\n      return {\n        ...state,\n        courses: action.error ? state.courses : courses,\n      }\n    case SONG_REQUESTS_DIALOG_UNLOADED:\n      return { ...state, errors: null }\n    case SONGS_PAGE_UNLOADED:\n      return defaultState\n    case STUDENT_SONGS_PAGE_LOADED:\n      return {\n        ...state,\n        userSongs: action.payload.songsByUser,\n        courseSongs: action.payload.songsByCourse,\n        course: action.payload.course,\n      }\n    case SUBMIT_SONG_REQUEST:\n      return {\n        ...state,\n        userSongs: [action.payload.song, ...state.userSongs],\n        courseSongs: [action.payload.song, ...state.courseSongs],\n      }\n    case SUBMIT_SONG_REMOVAL_REQUEST:\n      return {\n        ...state,\n        userSongs: state.userSongs.map((song) =>\n          action.payload.song._id === song._id ? action.payload.song : song\n        ),\n        courseSongs: state.courseSongs.map((song) =>\n          action.payload.song._id === song._id ? action.payload.song : song\n        ),\n      }\n    case TEACHER_SONGS_PAGE_LOADED:\n      return { ...state, courses: action.payload.courses, isLoaded: true }\n    case UPDATE_SONG_REQUEST:\n      // Changing a deep-nested array requires deep-copying\n      // to avoid altering the previous state\n      !action.error &&\n        state.courses.forEach((course) => {\n          const courseCopy = { ...course }\n          courseCopy.songs = courseCopy.songs.map((song) =>\n            song._id.toString() === action.payload.song._id.toString()\n              ? action.payload.song\n              : song\n          )\n          courses.push(courseCopy)\n        })\n      return {\n        ...state,\n        courses: action.error ? state.courses : courses,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n      }\n    default:\n      return state\n  }\n\n  return state\n}\n","import agent from './agent'\nimport {\n  ASYNC_START,\n  ASYNC_END,\n  LOGIN,\n  LOGOUT,\n  REGISTER,\n} from './constants/actionTypes'\n\nconst promiseMiddleware = (store) => (next) => (action) => {\n  if (isPromise(action.payload)) {\n    store.dispatch({ type: ASYNC_START, subtype: action.type })\n\n    const currentView = store.getState().viewChangeCounter\n    const skipTracking = action.skipTracking\n\n    action.payload.then(\n      (res) => {\n        const currentState = store.getState()\n        if (!skipTracking && currentState.viewChangeCounter !== currentView) {\n          return\n        }\n        action.payload = res\n        store.dispatch({ type: ASYNC_END, promise: action.payload })\n        store.dispatch(action)\n      },\n      (error) => {\n        const currentState = store.getState()\n        if (!skipTracking && currentState.viewChangeCounter !== currentView) {\n          return\n        }\n        action.error = true\n        action.payload = error.response.body\n        if (!action.skipTracking) {\n          store.dispatch({ type: ASYNC_END, promise: action.payload })\n        }\n        store.dispatch(action)\n      }\n    )\n\n    return\n  }\n\n  next(action)\n}\n\nconst localStorageMiddleware = (store) => (next) => (action) => {\n  if (action.type === REGISTER || action.type === LOGIN) {\n    if (!action.error) {\n      window.localStorage.setItem('jwt', action.payload.user.token)\n      agent.setToken(action.payload.user.token)\n    }\n  } else if (action.type === LOGOUT) {\n    window.localStorage.setItem('jwt', '')\n    agent.setToken(null)\n  }\n\n  next(action)\n}\n\nfunction isPromise(v) {\n  return v && typeof v.then === 'function'\n}\n\nexport { promiseMiddleware, localStorageMiddleware }\n","import { applyMiddleware, createStore } from 'redux'\nimport { composeWithDevTools } from 'redux-devtools-extension/developmentOnly'\nimport { createBrowserHistory } from 'history'\nimport { createLogger } from 'redux-logger'\nimport { routerMiddleware } from 'connected-react-router'\n\nimport createRootReducer from './reducer'\nimport { promiseMiddleware, localStorageMiddleware } from './middleware'\n\nexport const history = createBrowserHistory()\n\n// Build the middleware for intercepting and dispatching navigation actions\nconst myRouterMiddleware = routerMiddleware(history)\n\nconst getMiddleware = () => {\n  if (process.env.NODE_ENV === 'production') {\n    return applyMiddleware(\n      myRouterMiddleware,\n      promiseMiddleware,\n      localStorageMiddleware\n    )\n  } else {\n    // Enable additional logging in non-production environments\n    return applyMiddleware(\n      myRouterMiddleware,\n      promiseMiddleware,\n      localStorageMiddleware,\n      createLogger()\n    )\n  }\n}\n\nexport const store = createStore(\n  createRootReducer(history),\n  composeWithDevTools(getMiddleware())\n)\n","import { combineReducers } from 'redux'\nimport { connectRouter } from 'connected-react-router'\n\nimport auth from './reducers/auth'\nimport bonuses from './reducers/bonuses'\nimport common from './reducers/common'\nimport courses from './reducers/courses'\nimport economy from './reducers/economy'\nimport fines from './reducers/fines'\nimport jukebox from './reducers/jukebox'\nimport nav from './reducers/nav'\nimport notifications from './reducers/notifications'\nimport notifier from './reducers/notifier'\nimport passes from './reducers/passes'\nimport products from './reducers/products'\nimport purchases from './reducers/purchases'\nimport scores from './reducers/scores'\nimport settings from './reducers/settings'\nimport tasks from './reducers/tasks'\nimport teachers from './reducers/teachers'\nimport songs from './reducers/songs'\n\nexport default (history) =>\n  combineReducers({\n    auth,\n    bonuses,\n    common,\n    courses,\n    economy,\n    fines,\n    jukebox,\n    nav,\n    notifications,\n    notifier,\n    passes,\n    products,\n    purchases,\n    scores,\n    settings,\n    tasks,\n    teachers,\n    songs,\n    router: connectRouter(history),\n  })\n","import React, { Suspense, useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { Route, Switch } from 'react-router-dom'\nimport { push } from 'connected-react-router'\nimport { CssBaseline, ThemeProvider } from '@material-ui/core'\n\nimport { ChemCashDarkTheme, ChemCashLightTheme } from './Theme'\nimport Home from './Home'\nimport Loading from './Loading'\nimport Login from './Login'\nimport Notifier from './Notifier'\nimport WhatsNewDialog from './WhatsNewDialog'\nimport agent from '../agent'\nimport { store } from '../store'\n\nimport { APP_LOAD, REDIRECT } from '../constants/actionTypes'\n\nconst mapStateToProps = (state) => {\n  return {\n    appLoaded: state.common.appLoaded,\n    redirectTo: state.common.redirectTo,\n    darkMode: state.common?.currentUser?.darkMode,\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => ({\n  onLoad: (payload, token) =>\n    dispatch({ type: APP_LOAD, payload, token, skipTracking: true }),\n  onRedirect: () => dispatch({ type: REDIRECT }),\n})\n\nconst App = (props) => {\n  const { appLoaded, redirectTo, darkMode } = props\n\n  useEffect(() => {\n    if (redirectTo) {\n      store.dispatch(push(redirectTo))\n      props.onRedirect()\n    }\n  }, [redirectTo])\n\n  useEffect(() => {\n    const token = window.localStorage.getItem('jwt')\n    if (token) {\n      agent.setToken(token)\n    }\n\n    props.onLoad(token ? agent.Auth.current() : null, token)\n  }, [])\n\n  if (appLoaded) {\n    return (\n      <ThemeProvider theme={darkMode ? ChemCashDarkTheme : ChemCashLightTheme}>\n        <CssBaseline />\n        <Notifier>\n          <Suspense fallback={<p>Loading...</p>}>\n            <Switch>\n              <Route exact path='/login' component={Login} />\n              <Route exact path='/about' component={Login} />\n              <Route path='/' component={Home} />\n            </Switch>\n          </Suspense>\n        </Notifier>\n        <WhatsNewDialog />\n      </ThemeProvider>\n    )\n  }\n\n  return (\n    <ThemeProvider theme={darkMode ? ChemCashDarkTheme : ChemCashLightTheme}>\n      <CssBaseline />\n      <Loading />\n    </ThemeProvider>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App)\n","import { ConnectedRouter } from 'connected-react-router'\nimport { Provider } from 'react-redux'\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Route, Switch } from 'react-router-dom'\n\nimport App from './components/App'\nimport { store, history } from './store'\nimport { AudioProvider } from './contexts/AudioContext'\n\nReactDOM.render(\n  <Provider store={store}>\n    <AudioProvider>\n      <ConnectedRouter history={history}>\n        <Switch>\n          <Route path='/' component={App} />\n        </Switch>\n      </ConnectedRouter>\n    </AudioProvider>\n  </Provider>,\n\n  document.getElementById('root')\n)\n","import superagentPromise from 'superagent-promise'\nimport _superagent from 'superagent'\n\nconst superagent = superagentPromise(_superagent, global.Promise)\n\nconst API_ROOT =\n  process.env.NODE_ENV === 'production'\n    ? 'https://chem-cash.herokuapp.com/api'\n    : 'http://localhost:4000/api'\n\nconst encode = encodeURIComponent\nconst responseBody = (res) => res.body\n\nlet token = null\nlet tokenPlugin = (req) => {\n  if (token) {\n    req.set('authorization', `Token ${token}`)\n  }\n}\n\nconst requests = {\n  // @todo update superagent-promise from v1.1.0 when available\n  // superagent-promise does not allow for body to pass, so it has been manually added to the package file\n  // This is a known issue, see: https://github.com/lightsofapollo/superagent-promise/issues/28\n  del: (url, body) =>\n    superagent\n      .del(`${API_ROOT}${url}`, body)\n      .use(tokenPlugin)\n      .then(responseBody),\n  get: (url) =>\n    superagent.get(`${API_ROOT}${url}`).use(tokenPlugin).then(responseBody),\n  post: (url, body) =>\n    superagent\n      .post(`${API_ROOT}${url}`, body)\n      .use(tokenPlugin)\n      .then(responseBody),\n  put: (url, body) =>\n    superagent\n      .put(`${API_ROOT}${url}`, body)\n      .use(tokenPlugin)\n      .then(responseBody),\n}\n\nconst Auth = {\n  current: () => requests.get('/user'),\n  login: (username, password) =>\n    requests.post('/users/login', { user: { username, password } }),\n  register: (user) => requests.post('/users', { user }),\n  save: (user) => requests.put('/user', { user }),\n}\n\nconst Bonuses = {\n  add: (bonus) => requests.post('/bonuses', { bonus }),\n  delete: (bonus) => requests.del(`/bonuses/${bonus._id}`),\n  getAll: () => requests.get('/bonuses'),\n  update: (bonus) => requests.put(`/bonuses/${bonus._id}`, { bonus }),\n}\n\nconst Courses = {\n  add: (course) => requests.post('/courses', { course }),\n  delete: (slug) => requests.del(`/courses/${slug}`),\n  enroll: (course) =>\n    requests.post(`/courses/${course.slug}/enroll`, { course }),\n  getAll: () => requests.get('/courses'),\n  unenroll: (course) =>\n    requests.del(`/courses/${course.slug}/enroll`, { course }),\n  update: (course) => requests.put(`/courses/${course.slug}`, { course }),\n}\n\nconst Fines = {\n  add: (fine) => requests.post('/fines', { fine }),\n  delete: (fine) => requests.del(`/fines/${fine._id}`),\n  getAll: () => requests.get('/fines'),\n  update: (fine) => requests.put(`/fines/${fine._id}`, { fine }),\n}\n\nconst Notifications = {\n  clearAll: () => requests.del('/notifications'),\n  getAll: () => requests.get('/notifications'),\n}\n\nconst Passes = {\n  add: (pass) => requests.post('/passes', { pass }),\n  delete: (id) => requests.del(`/passes/${id}`),\n  getAll: () => requests.get('/passes'),\n  getLastPass: () => requests.get('/passes/last'),\n  getStudentPasses: (studentId) => requests.get(`/passes/student/${studentId}`),\n  update: (pass) => requests.put(`/passes/${pass._id}`, { pass }),\n}\n\nconst Products = {\n  add: (product) => requests.post('/products', { product }),\n  delete: (slug) => requests.del(`/products/${slug}`),\n  getAll: () => requests.get('/products'),\n  update: (product) => requests.put(`/products/${product.slug}`, { product }),\n}\n\nconst Purchases = {\n  add: (purchase) => requests.post('/purchases', { purchase }),\n  delete: (id) => requests.del(`/purchases/${id}`),\n  forStudent: () => requests.get('/purchases/student'),\n  forTeacher: () => requests.get('/purchases/teacher'),\n  update: (purchase) => requests.put(`/purchases/${purchase.id}`, { purchase }),\n}\n\nconst Scores = {\n  getAll: () => requests.get('/scores/all'),\n  getStudentScores: (username) => requests.get(`/scores?username=${username}`),\n  getTaskScores: (taskId) => requests.get(`/scores/task?taskId=${taskId}`),\n  import: (data) => requests.post('/scores/import', { data }),\n}\n\nconst Settings = {\n  // get: () => requests.get('/user/settings'),\n  jukebox: (values) => requests.put('/user/settings/jukebox', { values }),\n  update: (settings) => requests.put('/user/settings', { settings }),\n}\n\nconst Songs = {\n  delete: (id) => requests.del(`/songs/${id}`),\n  forStudent: () => requests.get('/songs/student'),\n  forTeacher: () => requests.get('/songs/teacher'),\n  request: (song) => requests.post('/songs', { song }),\n  update: (song) => requests.put(`/songs/${song.id}`, { song }),\n}\n\nconst Spotify = {\n  addToQueue: (cost, track, tokens) =>\n    requests.post('/spotify/queue/add', { cost, track, tokens }),\n  createPlaylist: (name, slug, tokens) =>\n    requests.post('/spotify/playlist/create', { name, slug, tokens }),\n  getAuthUrl: () => requests.get('/spotify/auth'),\n  getPlaylist: (id, tokens) =>\n    requests.post('/spotify/playlist', { id, tokens }),\n  getQueue: (tokens) => requests.post('/spotify/queue', { tokens }),\n  removeAuth: () => requests.del('/spotify/auth'),\n  removePlaylist: (slug) => requests.del('/spotify/playlist/remove', { slug }),\n  // test: (tokens) => requests.put('/spotify/test', { tokens }),\n}\n\nconst Students = {\n  add: (user, courseId) =>\n    requests.post(`/users?courseId=${encode(courseId)}`, { user }),\n  delete: (user) => requests.del(`/users/student/${user.username}`),\n  import: (users, courseId) =>\n    requests.post(`/users/import?courseId=${encode(courseId)}`, { users }),\n  update: (user) => requests.put(`/users/${user.username}`, { user }),\n}\n\nconst Tasks = {\n  getAll: (courseId) => requests.get(`/tasks?courseId=${courseId}`),\n  delete: (task) => requests.del(`/tasks/${task.slug}`),\n  update: (task) => requests.put(`/tasks/${task.slug}`, { task }),\n}\n\nconst Teachers = {\n  getAll: () => requests.get('/users?role=teacher'),\n  delete: (user) => requests.del(`/users/teacher/${user.username}`),\n  resetFlags: (role) => requests.put(`/users/reset?role=${role}`),\n  update: (user) => requests.put(`/users/${user.username}`, { user }),\n}\n\nconst Transactions = {\n  add: (transaction) => requests.post('/transactions', { transaction }),\n  addMany: (transactions) =>\n    requests.post('/transactions/bulk', { transactions }),\n  delete: (transaction) => requests.del(`/transactions/${transaction._id}`),\n  update: (transaction) =>\n    requests.put(`/transactions/${transaction._id}`, { transaction }),\n}\n\nexport default {\n  Auth,\n  Bonuses,\n  Courses,\n  Fines,\n  Notifications,\n  Passes,\n  Products,\n  Purchases,\n  Scores,\n  Settings,\n  Songs,\n  Spotify,\n  Students,\n  Tasks,\n  Teachers,\n  Transactions,\n  setToken: (_token) => {\n    token = _token\n  },\n}\n"],"sourceRoot":""}