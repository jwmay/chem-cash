{"version":3,"sources":["agent.js","images/chemistry-background.jpg","images/chem-cash-logo.png","images/songs-background.jpg","images/doc-may-profile.jpg","components/Theme.js","components/Logo.js","constants/actionTypes.js","components/Header.js","components/Navigation.js","components/PageWrapper.js","components/NotFound.js","components/ProtectedRoute.js","components/ListErrors.js","components/PageHeader.js","components/Settings.js","components/ActionButton.js","components/Teacher/ResetStudentPasswordAlert.js","components/Teacher/ProductSelector.js","components/Teacher/TransactionDialog.js","converter.js","components/AccountView.js","components/Student/StudentAccount.js","components/Student/SongRequestDialog.js","components/Student/StudentSongs.js","components/Alert.js","components/Teacher/StudentSearch.js","components/Teacher/CourseSelector.js","components/Teacher/StudentsTable.js","components/Teacher/BulkTransactionsDialog.js","components/Filedrop.js","components/Spinner.js","components/Teacher/ImportScoresDialog.js","components/Teacher/UpdateAccountsMenu.js","components/Teacher/TeacherAccounts.js","components/Teacher/CourseDialog.js","components/Teacher/DeleteStudentAlert.js","components/Teacher/StudentDialog.js","components/Teacher/StudentTransferDialog.js","components/Teacher/CourseStudentList.js","components/Teacher/DeleteCourseAlert.js","components/Teacher/ImportStudentsDialog.js","components/Teacher/TasksTable.js","components/Teacher/TasksDialog.js","components/Teacher/CourseList.js","components/Teacher/TeacherCourses.js","components/Teacher/ProcessSongRequestsDialog.js","components/Teacher/TeacherSongs.js","components/Admin/ResetWhatsNewAlert.js","components/Admin/TeacherDialog.js","components/Admin/DeleteTeacherAlert.js","components/Admin/TeacherList.js","components/Admin/ManageTeachers.js","components/ImagePreview.js","components/TextFieldLimit.js","components/Products/ProductDialog.js","components/Products/DeleteProductDialog.js","components/Products/ProductsGallery.js","components/Products/Products.js","components/Home.js","components/Loading.js","components/About.js","components/Login/LoginForm.js","components/Login/index.js","components/Notifier.js","components/WhatsNewDialog.js","reducers/auth.js","reducers/common.js","reducers/courses.js","reducers/nav.js","reducers/notifier.js","reducers/products.js","reducers/scores.js","reducers/settings.js","reducers/tasks.js","reducers/teachers.js","reducers/songs.js","middleware.js","store.js","reducer.js","components/App.js","index.js"],"names":["superagent","superagentPromise","_superagent","global","Promise","API_ROOT","encode","encodeURIComponent","responseBody","res","body","token","tokenPlugin","req","set","requests","url","del","use","then","get","post","put","Auth","current","login","username","password","user","register","save","Courses","add","course","delete","slug","enroll","getAll","unenroll","update","Products","product","Scores","import","data","Settings","settings","Songs","id","forStudent","forTeacher","request","song","Spotify","getAuthUrl","removeAuth","Students","courseId","users","Tasks","task","Teachers","resetFlags","role","Transactions","transaction","addMany","transactions","_id","setToken","_token","module","exports","ChemCashTheme","createMuiTheme","breakpoints","values","md","lg","palette","primary","lightGreen","secondary","amber","overrides","MuiDialogActions","root","padding","Logo","props","alt","src","logo","ASYNC_START","LOGIN","useStyles","makeStyles","theme","title","color","flexGrow","height","marginTop","spacing","marginRight","marginBottom","connect","state","navTabValue","nav","dispatch","onClickLogout","type","classes","currentUser","AppBar","position","Container","Toolbar","className","Typography","variant","align","charAt","toUpperCase","slice","Button","onClick","bottom","width","zIndex","path","router","location","pathname","common","onTabChange","tabValue","redirectTo","value","onLoad","onUnload","userRole","enabled","products","productsEnabled","songs","songRequestEnabled","handleTabChange","useEffect","tabFromPath","split","BottomNavigation","onChange","event","newValue","showLabels","BottomNavigationAction","label","icon","LocalAtm","QueueMusic","Store","SupervisorAccount","People","wrapper","PageWrapper","children","NotFound","exact","component","to","alert","alertList","ListErrors","errors","Object","keys","map","key","readableKey","replace","toLowerCase","severity","headerLeft","alignItems","display","headerRight","justifyContent","pageHeader","PageHeader","Grid","container","item","xs","paper","onSubmitForm","payload","all","agent","snackbar","message","inProgress","enableReinitialize","initialValues","defaultStudentPassword","enableBetaFeatures","firstName","lastName","score100","scoreConverter","score90","score80","score70","score60","score50","songRemovalPurchaseAmount","songRemovalRequestEnabled","songRemovalRefundAmount","songRequestPurchaseAmount","validationSchema","Yup","typeError","onSubmit","form","a","userSettings","100","90","80","70","60","50","40","30","20","10","0","resetForm","Fab","disabled","SaveAlt","Paper","gutterBottom","Switch","name","TextField","fullWidth","actionButton","text","ActionButton","passedClasses","Tooltip","arrow","enterTouchDelay","action","IconButton","aria-label","ev","stopPropagation","onFocus","size","btnSize","student","useState","open","setOpen","handleClose","LockOpen","fontSize","Dialog","onClose","DialogTitle","DialogContent","DialogContentText","DialogActions","autoFocus","ProductSelector","Autocomplete","autoHighlight","freeSolo","getOptionLabel","noOptionsText","onInputChange","options","renderInput","params","placeholder","required","renderOption","option","inputValue","matches","match","parts","parse","part","index","style","fontWeight","highlight","scores","onAdd","typeTitle","onExit","useTheme","fullScreen","useMediaQuery","down","handleSubmitAdd","Grade","ShoppingCart","maxWidth","amount","description","formik","setFieldValue","cost","convertScore","score","conversions","total","totalPoints","nonZeroTotal","percent","Math","round","floor","actions","balance","borderTop","fontStyle","textTransform","edit","backgroundColor","main","subtotal","typography","pxToRem","unit","AccountHeader","canEdit","doEdit","onEditClick","period","bonuses","purchases","Close","Edit","TransactionList","onDelete","onUpdate","setData","mapTransaction","createdAt","Date","toDateString","mappedData","mapped","bonus","purchase","mapScore","field","editable","defaultSort","columns","localization","emptyDataSourceMessage","editRow","deleteText","actionsColumnIndex","paging","toolbar","onRowUpdate","newData","oldData","resolve","reject","dataUpdate","tableData","onRowDelete","splice","setDoEdit","button","dialog","backgroundImage","background","backgroundPosition","backgroundSize","input","inputLabel","handleSubmit","Add","artist","InputLabelProps","marginLeft","paddingLeft","status","courseSongs","userSongs","mySongsOnly","setMySongsOnly","setColumns","lookup","approved","pending","pendingApproval","pendingRemoval","rejected","removed","render","rowData","renderType","statusDescription","InfoOutlined","purchasedBy","grid","FormControlLabel","control","Checkbox","checked","target","isDeletable","isDeleteHidden","Collapse","in","search","courses","setMappedData","students","flat","groupBy","shadows","boxShadow","light","onSelect","length","tabIndex","StudentsTable","fullName","nRowsSelected","onSelectionChange","rows","selection","up","curStudent","isClosed","isOpen","setCourse","setStudents","filedrop","grey","borderRadius","flexDirection","outline","transition","filedropActive","contrastText","filedropReject","Filedrop","onFiledrop","onDrop","useCallback","acceptedFiles","forEach","file","reader","FileReader","onabort","console","log","onerror","onload","parsedFile","result","skip_empty_lines","readAsBinaryString","useDropzone","accept","multiple","onDropAccepted","getRootProps","getInputProps","isDragActive","isDragReject","minWidth","spinner","Spinner","CircularProgress","ScoreImportStepper","onDataChange","onShowImport","setFile","tasks","setTasks","handleTaskChange","tasksSelected","some","el","FormControl","FormGroup","onImport","ready","setReady","importData","selected","usernames","pop","filter","parsed","taskName","find","row","endsWith","push","UpdateAccountsMenu","menuAnchorEl","setMenuAnchorEl","menuSelection","setMenuSelection","handleMenuSelect","currentTarget","dataset","handleDialogClose","Money","Menu","anchorEl","Boolean","MenuItem","data-type","ListItemIcon","Publish","ListItemText","importSummary","setStudent","plural","qty","tasksCreated","scoresImported","scoresUpdated","handleClickOpen","handleSubmitUpdate","Delete","PersonAdd","courseOut","courseIn","Loop","ds","select","borderBottomColor","rowHeader","studentUsername","StudentListRow","Chip","CourseStudentList","column","trim","element","minHeight","Assignment","courseDetails","courseHeader","coursePeriod","courseTitle","CourseList","expanded","setExpanded","ExpansionPanel","panel","isExpanded","ExpansionPanelSummary","expandIcon","ExpandMore","Avatar","ExpansionPanelDetails","importCount","pageLoaded","removalAlert","error","border","dark","white","h6","textAlign","songInfo","statusButton","studentInfo","borderTopColor","borderTopStyle","borderTopWidth","paddingTop","setSong","setStatus","setStatusDescription","skippedSongs","setSkippedSongs","getNextSong","nextSong","startsWith","includes","handleStatusButtonClick","handleStatusDescriptionChange","handleSubmitApproval","handleSubmitRemoval","purchaseAmount","refundAmount","removedBy","PlaylistAddCheck","ButtonGroup","href","getSpotifySearchUrl","ThumbUp","ThumbDown","RadioGroup","Radio","AlertTitle","grouping","dataDelete","onReset","teachers","teacher","teacherDetails","teacherHeader","teacherUsername","teacherName","TeacherList","header","paddingRight","top","img","maxHeight","window","borderColor","borderStyle","borderWidth","ImagePreview","TextFieldLimit","inputProps","maxLength","limit","helperText","addIcon","updateIcon","CHAR_LIMITS","photoUrl","quantity","max","as","actionIcon","lineHeight","opacity","h5","whiteSpace","tile","tileBar","paddingBottom","ProductsGallery","isSmall","isMedium","cols","GridList","GridListTile","GridListTileBar","placement","subtitle","displayType","thousandSeparator","suffix","DeleteProductDialog","StudentAccount","StudentSongs","TeacherAccounts","TeacherCourses","TeacherSongs","ManageTeachers","flexFlow","overflowY","Loading","elevation","page","profile","float","About","Link","auth","submitForm","aboutLink","right","loginLink","textDecoration","margin","progress","left","AboutLink","LoginLink","startIcon","ArrowBackIos","LinearProgress","Notification","enqueueSnackbar","useSnackbar","notifier","onSnackbarClose","notistackRef","React","createRef","onSnackbarDismiss","closeSnackbar","maxSnack","ref","StudentWhatsNewContent","TeacherWhatsNewContent","viewedChanges","subtype","defaultState","appName","viewChangeCounter","appLoaded","spotifyTokens","undefined","sortByLastName","b","localeCompare","sortByPeriod","sort","courseCopy","toString","count","updatedUser","sortByCost","getTotals","sumTransactions","reduce","addScores","added","curUser","curUserId","usersAdded","unionBy","addTransaction","addBulkTransaction","deleteTransaction","deleted","updateTransaction","updated","addedTransactions","addedBulkTransactions","deletedTransactions","addedScores","results","updatedTransactions","spotifyAuthUrl","songsByUser","songsByCourse","promiseMiddleware","store","next","v","currentView","getState","skipTracking","currentState","promise","response","localStorageMiddleware","localStorage","setItem","history","createBrowserHistory","myRouterMiddleware","routerMiddleware","createStore","combineReducers","connectRouter","composeWithDevTools","applyMiddleware","onRedirect","getItem","ThemeProvider","CssBaseline","fallback","Login","Home","ReactDOM","App","document","getElementById"],"mappings":"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","file":"static/js/main.f963580c.chunk.js","sourcesContent":["import superagentPromise from 'superagent-promise'\nimport _superagent from 'superagent'\n\nconst superagent = superagentPromise(_superagent, global.Promise)\n\nconst API_ROOT =\n  process.env.NODE_ENV === 'production'\n    ? 'https://chem-cash.herokuapp.com/api'\n    : 'http://localhost:4000/api'\n\nconst encode = encodeURIComponent\nconst responseBody = (res) => res.body\n\nlet token = null\nlet tokenPlugin = (req) => {\n  if (token) {\n    req.set('authorization', `Token ${token}`)\n  }\n}\n\nconst requests = {\n  // @todo update superagent-promise from v1.1.0 when available\n  // superagent-promise does not allow for body to pass, so it has been manually added to the package file\n  // This is a known issue, see: https://github.com/lightsofapollo/superagent-promise/issues/28\n  del: (url, body) =>\n    superagent\n      .del(`${API_ROOT}${url}`, body)\n      .use(tokenPlugin)\n      .then(responseBody),\n  get: (url) =>\n    superagent.get(`${API_ROOT}${url}`).use(tokenPlugin).then(responseBody),\n  post: (url, body) =>\n    superagent\n      .post(`${API_ROOT}${url}`, body)\n      .use(tokenPlugin)\n      .then(responseBody),\n  put: (url, body) =>\n    superagent\n      .put(`${API_ROOT}${url}`, body)\n      .use(tokenPlugin)\n      .then(responseBody),\n}\n\nconst Auth = {\n  current: () => requests.get('/user'),\n  login: (username, password) =>\n    requests.post('/users/login', { user: { username, password } }),\n  register: (user) => requests.post('/users', { user }),\n  save: (user) => requests.put('/user', { user }),\n}\n\nconst Courses = {\n  add: (course) => requests.post('/courses', { course }),\n  delete: (slug) => requests.del(`/courses/${slug}`),\n  enroll: (course) =>\n    requests.post(`/courses/${course.slug}/enroll`, { course }),\n  getAll: () => requests.get('/courses'),\n  unenroll: (course) =>\n    requests.del(`/courses/${course.slug}/enroll`, { course }),\n  update: (course) => requests.put(`/courses/${course.slug}`, { course }),\n}\n\nconst Products = {\n  add: (product) => requests.post('/products', { product }),\n  delete: (slug) => requests.del(`/products/${slug}`),\n  getAll: () => requests.get('/products'),\n  update: (product) => requests.put(`/products/${product.slug}`, { product }),\n}\n\nconst Scores = {\n  getAll: (username) => requests.get(`/scores?username=${username}`),\n  import: (data) => requests.post('/scores/import', { data }),\n}\n\nconst Settings = {\n  // get: () => requests.get('/user/settings'),\n  update: (settings) => requests.put('/user/settings', { settings }),\n}\n\nconst Songs = {\n  delete: (id) => requests.del(`/songs/${id}`),\n  forStudent: () => requests.get('/songs/student'),\n  forTeacher: () => requests.get('/songs/teacher'),\n  request: (song) => requests.post('/songs', { song }),\n  update: (song) => requests.put(`/songs/${song.id}`, { song }),\n}\n\nconst Spotify = {\n  getAuthUrl: () => requests.get('/spotify/auth'),\n  removeAuth: () => requests.del('/spotify/auth'),\n}\n\nconst Students = {\n  add: (user, courseId) =>\n    requests.post(`/users?courseId=${encode(courseId)}`, { user }),\n  delete: (user) => requests.del(`/users/student/${user.username}`),\n  import: (users, courseId) =>\n    requests.post(`/users/import?courseId=${encode(courseId)}`, { users }),\n  update: (user) => requests.put(`/users/${user.username}`, { user }),\n}\n\nconst Tasks = {\n  getAll: (courseId) => requests.get(`/tasks?courseId=${courseId}`),\n  delete: (task) => requests.del(`/tasks/${task.slug}`),\n  update: (task) => requests.put(`/tasks/${task.slug}`, { task }),\n}\n\nconst Teachers = {\n  getAll: () => requests.get('/users?role=teacher'),\n  delete: (user) => requests.del(`/users/teacher/${user.username}`),\n  resetFlags: (role) => requests.put(`/users/reset?role=${role}`),\n  update: (user) => requests.put(`/users/${user.username}`, { user }),\n}\n\nconst Transactions = {\n  add: (transaction) => requests.post('/transactions', { transaction }),\n  addMany: (transactions) =>\n    requests.post('/transactions/bulk', { transactions }),\n  delete: (transaction) => requests.del(`/transactions/${transaction._id}`),\n  update: (transaction) =>\n    requests.put(`/transactions/${transaction._id}`, { transaction }),\n}\n\nexport default {\n  Auth,\n  Courses,\n  Products,\n  Scores,\n  Settings,\n  Songs,\n  Spotify,\n  Students,\n  Tasks,\n  Teachers,\n  Transactions,\n  setToken: (_token) => {\n    token = _token\n  },\n}\n","module.exports = __webpack_public_path__ + \"static/media/chemistry-background.11d1d297.jpg\";","module.exports = __webpack_public_path__ + \"static/media/chem-cash-logo.30174016.png\";","module.exports = __webpack_public_path__ + \"static/media/songs-background.cfcd4ce6.jpg\";","module.exports = __webpack_public_path__ + \"static/media/doc-may-profile.f927335d.jpg\";","import { createMuiTheme } from '@material-ui/core/styles'\nimport lightGreen from '@material-ui/core/colors/lightGreen'\nimport amber from '@material-ui/core/colors/amber'\n\nconst ChemCashTheme = createMuiTheme({\n  breakpoints: {\n    values: {\n      md: 768,\n      lg: 1024,\n    },\n  },\n  palette: {\n    primary: lightGreen,\n    secondary: amber,\n  },\n  overrides: {\n    MuiDialogActions: {\n      root: {\n        padding: '16px 24px',\n      },\n    },\n  },\n})\n\nexport default ChemCashTheme\n","import React from 'react'\nimport logo from '../images/chem-cash-logo.png'\n\nconst Logo = (props) => {\n  return <img alt='Chem Cash Logo' src={logo} {...props} />\n}\n\nexport default Logo\n","export const APP_LOAD = 'APP_LOAD'\nexport const REDIRECT = 'REDIRECT'\n\nexport const ASYNC_START = 'ASYNC_START'\nexport const ASYNC_END = 'ASYNC_END'\n\nexport const LOGIN = 'LOGIN'\nexport const LOGIN_PAGE_UNLOADED = 'LOGIN_PAGE_UNLOADED'\nexport const LOGOUT = 'LOGOUT'\n\nexport const REGISTER = 'REGISTER'\nexport const REGISTER_PAGE_UNLOADED = 'REGISTER_PAGE_UNLOADED'\n\nexport const SETTINGS_PAGE_UNLOADED = 'SETTINGS_PAGE_UNLOADED'\nexport const SETTINGS_SAVED = 'SETTINGS_SAVED'\n\nexport const NAV_LOADED = 'NAV_LOADED'\nexport const NAV_UNLOADED = 'NAV_UNLOADED'\nexport const NAV_TAB_CHANGE = 'NAV_TAB_CHANGE'\n\nexport const ALERT_CLOSED = 'ALERT_CLOSED'\nexport const SNACKBAR_CLOSED = 'SNACKBAR_CLOSED'\n\nexport const DELETE_SONG_REQUEST = 'DELETE_SONG_REQUEST'\nexport const SONG_REQUESTS_DIALOG_UNLOADED = 'SONG_REQUESTS_DIALOG_UNLOADED'\nexport const SONGS_PAGE_UNLOADED = 'SONGS_PAGE_UNLOADED'\nexport const STUDENT_SONGS_PAGE_LOADED = 'STUDENT_SONGS_PAGE_LOADED'\nexport const SUBMIT_SONG_REQUEST = 'SUBMIT_SONG_REQUEST'\nexport const SUBMIT_SONG_REMOVAL_REQUEST = 'SUBMIT_SONG_REMOVAL_REQUEST'\nexport const TEACHER_SONGS_PAGE_LOADED = 'TEACHER_SONGS_PAGE_LOADED'\nexport const UPDATE_SONG_REQUEST = 'UPDATE_SONG_REQUEST'\n\nexport const ADD_COURSE = 'ADD_COURSE'\nexport const COURSE_DIALOG_UNLOADED = 'COURSE_DIALOG_UNLOADED'\nexport const COURSES_PAGE_LOADED = 'COURSES_PAGE_LOADED'\nexport const COURSES_PAGE_UNLOADED = 'COURSES_PAGE_UNLOADED'\nexport const DELETE_COURSE = 'DELETE_COURSE'\nexport const UPDATE_COURSE = 'UPDATE_COURSE'\n\nexport const ADD_STUDENT = 'ADD_STUDENT'\nexport const DELETE_STUDENT = 'DELETE_STUDENT'\nexport const IMPORT_STUDENTS = 'IMPORT_STUDENTS'\nexport const MOVE_STUDENT = 'MOVE_STUDENT'\nexport const RESET_STUDENT_PASSWORD = 'RESET_STUDENT_PASSWORD'\nexport const STUDENT_DIALOG_UNLOADED = 'STUDENT_DIALOG_UNLOADED'\nexport const UPDATE_STUDENT = 'UPDATE_STUDENT'\n\nexport const ADD_TEACHER = 'ADD_TEACHER'\nexport const DELETE_TEACHER = 'DELETE_TEACHER'\nexport const MANAGE_TEACHERS_PAGE_LOADED = 'MANAGE_TEACHERS_PAGE_LOADED'\nexport const MANAGE_TEACHERS_PAGE_UNLOADED = 'MANAGE_TEACHERS_PAGE_UNLOADED'\nexport const TEACHER_DIALOG_UNLOADED = 'TEACHER_DIALOG_UNLOADED'\nexport const UPDATE_TEACHER = 'UPDATE_TEACHER'\n\nexport const SPOTIFY_REMOVE_AUTH = 'SPOTIFY_REMOVE_AUTH'\nexport const SPOTIFY_LINKER_LOADED = 'SPOTIFY_LINKER_LOADED'\nexport const SPOTIFY_LINKER_UNLOADED = 'SPOTIFY_LINKER_UNLOADED'\n\nexport const IMPORT_SCORES = 'IMPORT_SCORES'\nexport const IMPORT_SCORES_DIALOG_UNLOADED = 'IMPORT_SCORES_DIALOG_UNLOADED'\n\nexport const DELETE_TASK = 'DELETE_TASK'\nexport const TASKS_DIALOG_LOADED = 'TASKS_DIALOG_LOADED'\nexport const TASKS_DIALOG_UNLOADED = 'TASKS_DIALOG_UNLOADED'\nexport const UPDATE_TASK = 'UPDATE_TASK'\n\nexport const ACCOUNT_VIEW_LOADED = 'ACCOUNT_VIEW_LOADED'\nexport const ACCOUNT_VIEW_UNLOADED = 'ACCOUNT_VIEW_UNLOADED'\nexport const ACCOUNTS_PAGE_UNLOADED = 'ACCOUNTS_PAGE_UNLOADED'\nexport const ADD_TRANSACTION = 'ADD_TRANSACTION'\nexport const ADD_TRANSACTIONS = 'ADD_TRANSACTIONS'\nexport const DELETE_TRANSACTION = 'DELETE_TRANSACTION'\nexport const UPDATE_TRANSACTION = 'UPDATE_TRANSACTION'\nexport const TRANSACTION_DIALOG_UNLOADED = 'TRANSACTION_DIALOG_UNLOADED'\nexport const TRANSACTIONS_DIALOG_UNLOADED = 'TRANSACTIONS_DIALOG_UNLOADED'\n\nexport const STUDENT_SEARCH_LOADED = 'STUDENT_SEARCH_LOADED'\nexport const STUDENT_SEARCH_UNLOADED = 'STUDENT_SEARCH_UNLOADED'\n\nexport const PRODUCTS_PAGE_LOADED = 'PRODUCTS_PAGE_LOADED'\nexport const PRODUCTS_PAGE_UNLOADED = 'PRODUCTS_PAGE_UNLOADED'\nexport const PRODUCT_DIALOG_UNLOADED = 'PRODUCT_DIALOG_UNLOADED'\nexport const ADD_PRODUCT = 'ADD_PRODUCT'\nexport const DELETE_PRODUCT = 'DELETE_PRODUCT'\nexport const UPDATE_PRODUCT = 'UPDATE_PRODUCT'\n\nexport const WHATS_NEW_DIALOG_UNLOADED = 'WHATS_NEW_DIALOG_UNLOADED'\nexport const WHATS_NEW_FLAGS_RESET = 'WHATS_NEW_FLAGS_RESET'\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport {\n  AppBar,\n  Button,\n  Container,\n  Toolbar,\n  Typography,\n  makeStyles,\n} from '@material-ui/core'\n\nimport Logo from '../components/Logo'\n\nimport { LOGOUT } from '../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  title: {\n    color: 'white',\n    flexGrow: 1,\n  },\n  logo: {\n    height: 65,\n    marginTop: theme.spacing(2),\n    marginRight: theme.spacing(3),\n    marginBottom: theme.spacing(2),\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  navTabValue: state.nav.navTabValue,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onClickLogout: () => dispatch({ type: LOGOUT }),\n})\n\nconst Header = (props) => {\n  const classes = useStyles()\n  const title = props.navTabValue\n\n  if (props.currentUser) {\n    return (\n      <AppBar position='static'>\n        <Container>\n          <Toolbar>\n            <Logo className={classes.logo} />\n            <Typography variant='h5' align='center' className={classes.title}>\n              {title && title.charAt(0).toUpperCase() + title.slice(1)}\n            </Typography>\n            <Button color='inherit' onClick={props.onClickLogout}>\n              Logout\n            </Button>\n          </Toolbar>\n        </Container>\n      </AppBar>\n    )\n  } else {\n    return null\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Header)\n","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  BottomNavigation,\n  BottomNavigationAction,\n  makeStyles,\n} from '@material-ui/core'\nimport {\n  LocalAtm,\n  People,\n  QueueMusic,\n  Settings,\n  Store,\n  SupervisorAccount,\n} from '@material-ui/icons'\n\nimport {\n  NAV_TAB_CHANGE,\n  NAV_LOADED,\n  NAV_UNLOADED,\n} from '../constants/actionTypes'\n\nconst useStyles = makeStyles({\n  nav: {\n    position: 'fixed',\n    bottom: 0,\n    width: '100%',\n    zIndex: '1000',\n  },\n})\n\nconst mapStateToProps = (state) => ({\n  path: state.router.location.pathname,\n  currentUser: state.common.currentUser,\n  settings: state.common.settings,\n  navTabValue: state.nav.navTabValue,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onTabChange: (tabValue, redirectTo) =>\n    dispatch({ type: NAV_TAB_CHANGE, value: tabValue, redirectTo: redirectTo }),\n  onLoad: (tabValue, redirectTo) =>\n    dispatch({ type: NAV_LOADED, value: tabValue, redirectTo: redirectTo }),\n  onUnload: () => dispatch({ type: NAV_UNLOADED }),\n})\n\nconst Navigation = (props) => {\n  const classes = useStyles()\n  const userRole = props.currentUser.role\n  const enabled = {\n    products: props.settings.productsEnabled,\n    songs: props.settings.songRequestEnabled,\n  }\n\n  const handleTabChange = (tabValue) => {\n    props.onTabChange(tabValue, `/${userRole}/${tabValue}`)\n  }\n\n  useEffect(() => {\n    const tabFromPath = props.path.split('/')[2]\n    const tabValue =\n      tabFromPath ??\n      (userRole === 'student'\n        ? 'account'\n        : userRole === 'admin'\n        ? 'teachers'\n        : 'accounts')\n    const redirectTo = `/${userRole}/${tabValue}`\n    props.onLoad(tabValue, redirectTo)\n\n    return () => {\n      props.onUnload()\n    }\n  }, [])\n\n  if (userRole === 'student') {\n    return (\n      <BottomNavigation\n        className={classes.nav}\n        onChange={(event, newValue) => {\n          handleTabChange(newValue)\n        }}\n        showLabels\n        value={props.navTabValue}\n      >\n        <BottomNavigationAction\n          label='Account'\n          icon={<LocalAtm />}\n          value='account'\n        />\n        {enabled.songs && (\n          <BottomNavigationAction\n            label='Songs'\n            icon={<QueueMusic />}\n            value='songs'\n          />\n        )}\n        {enabled.products && (\n          <BottomNavigationAction\n            label='Products'\n            icon={<Store />}\n            value='products'\n          />\n        )}\n        <BottomNavigationAction\n          label='Settings'\n          icon={<Settings />}\n          value='settings'\n        />\n      </BottomNavigation>\n    )\n  }\n\n  if (userRole === 'admin') {\n    return (\n      <BottomNavigation\n        className={classes.nav}\n        onChange={(event, newValue) => {\n          handleTabChange(newValue)\n        }}\n        showLabels\n        value={props.navTabValue}\n      >\n        <BottomNavigationAction\n          label='Teachers'\n          icon={<SupervisorAccount />}\n          value='teachers'\n        />\n        <BottomNavigationAction\n          label='Settings'\n          icon={<Settings />}\n          value='settings'\n        />\n      </BottomNavigation>\n    )\n  }\n\n  return (\n    <BottomNavigation\n      className={classes.nav}\n      onChange={(event, newValue) => {\n        handleTabChange(newValue)\n      }}\n      showLabels\n      value={props.navTabValue}\n    >\n      <BottomNavigationAction\n        label='Accounts'\n        icon={<LocalAtm />}\n        value='accounts'\n      />\n      {enabled.songs && (\n        <BottomNavigationAction\n          label='Songs'\n          icon={<QueueMusic />}\n          value='songs'\n        />\n      )}\n      {enabled.products && (\n        <BottomNavigationAction\n          label='Products'\n          icon={<Store />}\n          value='products'\n        />\n      )}\n      <BottomNavigationAction\n        label='Courses'\n        icon={<People />}\n        value='courses'\n      />\n      <BottomNavigationAction\n        label='Settings'\n        icon={<Settings />}\n        value='settings'\n      />\n    </BottomNavigation>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Navigation)\n","import React from 'react'\nimport { makeStyles } from '@material-ui/core/styles'\n\nconst useStyles = makeStyles((theme) => ({\n  wrapper: {\n    marginTop: theme.spacing(4),\n    marginBottom: theme.spacing(11),\n  },\n}))\n\nconst PageWrapper = (props) => {\n  const classes = useStyles()\n\n  return <div className={classes.wrapper}>{props.children}</div>\n}\n\nexport default PageWrapper\n","import React from 'react'\nimport { Container, Typography } from '@material-ui/core'\nimport PageWrapper from './PageWrapper'\n\nconst NotFound = (props) => {\n  return (\n    <PageWrapper>\n      <Container>\n        <Typography variant='h2'>Error 404: Page Not Found</Typography>\n      </Container>\n    </PageWrapper>\n  )\n}\n\nexport default NotFound\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Route, Redirect } from 'react-router-dom'\n\nconst mapStateToProps = (state) => ({ currentUser: state.common.currentUser })\n\nconst ProtectedRoute = (props) => {\n  if (!props.currentUser) {\n    return <Redirect to='/' />\n  }\n\n  return <Route exact path={props.path} component={props.component} />\n}\n\nexport default connect(mapStateToProps, () => ({}))(ProtectedRoute)\n","import React from 'react'\nimport { makeStyles } from '@material-ui/core/styles'\nimport Alert from '@material-ui/lab/Alert'\n\nconst useStyles = makeStyles((theme) => ({\n  alert: {\n    'width': '100%',\n    '&:not(:last-of-type)': {\n      marginBottom: theme.spacing(1),\n    },\n  },\n  alertList: {\n    marginBottom: theme.spacing(2),\n  },\n}))\n\nconst ListErrors = ({ errors }) => {\n  const classes = useStyles()\n\n  if (errors) {\n    return (\n      <div className={classes.alertList}>\n        {Object.keys(errors).map((key) => {\n          const readableKey = key\n            .replace(/([a-z0-9])([A-Z])/g, '$1 $2')\n            .toLowerCase()\n          return (\n            <Alert className={classes.alert} severity='error' key={key}>\n              {readableKey} {errors[key]}\n            </Alert>\n          )\n        })}\n      </div>\n    )\n  }\n\n  return null\n}\n\nexport default ListErrors\n","import React from 'react'\nimport { Grid, Typography, makeStyles } from '@material-ui/core'\n\nconst useStyles = makeStyles((theme) => ({\n  headerLeft: {\n    alignItems: 'center',\n    display: 'flex',\n  },\n  headerRight: {\n    alignItems: 'center',\n    display: 'flex',\n    justifyContent: 'flex-end',\n  },\n  pageHeader: {\n    marginBottom: theme.spacing(4),\n  },\n}))\n\nconst PageHeader = ({ children, title }) => {\n  const classes = useStyles()\n\n  return (\n    <Grid container spacing={2} className={classes.pageHeader}>\n      <Grid item xs={12} md={6} className={classes.headerLeft}>\n        <Typography variant='h4'>{title}</Typography>\n      </Grid>\n      <Grid item xs={12} md={6} className={classes.headerRight}>\n        {children}\n      </Grid>\n    </Grid>\n  )\n}\n\nexport default PageHeader\n","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Form, Field } from 'formik'\nimport { Switch, TextField } from 'formik-material-ui'\nimport * as Yup from 'yup'\nimport { Fab, Grid, Paper, Typography, makeStyles } from '@material-ui/core'\nimport { SaveAlt } from '@material-ui/icons'\n\nimport ListErrors from './ListErrors'\nimport PageHeader from './PageHeader'\n// import SpotifyLinker from './Teacher/SpotifyLinker'\nimport agent from '../agent'\n\nimport {\n  SETTINGS_PAGE_UNLOADED,\n  SETTINGS_SAVED,\n} from '../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  icon: {\n    marginRight: theme.spacing(1),\n  },\n  paper: {\n    padding: theme.spacing(2),\n    marginBottom: theme.spacing(4),\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.settings,\n  currentUser: state.common.currentUser,\n  settings: state.common.settings,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onSubmitForm: (settings) =>\n    dispatch({\n      type: SETTINGS_SAVED,\n      payload: Promise.all([\n        agent.Auth.save(settings),\n        agent.Settings.update(settings),\n      ]),\n      snackbar: { message: 'Settings saved', variant: 'success' },\n    }),\n  onUnload: () => dispatch({ type: SETTINGS_PAGE_UNLOADED }),\n})\n\nconst Settings = ({\n  currentUser,\n  errors,\n  inProgress,\n  onSubmitForm,\n  onUnload,\n  settings,\n}) => {\n  const classes = useStyles()\n\n  useEffect(() => {\n    return () => {\n      onUnload()\n    }\n  }, [])\n\n  return (\n    <Formik\n      enableReinitialize={true}\n      initialValues={{\n        defaultStudentPassword: settings?.defaultStudentPassword || '',\n        enableBetaFeatures: settings?.enableBetaFeatures || false,\n        firstName: currentUser.firstName,\n        lastName: currentUser.lastName,\n        password: '',\n        productsEnabled: settings?.productsEnabled || false,\n        score100: settings?.scoreConverter?.[100] || 1200,\n        score90: settings?.scoreConverter?.[90] || 1000,\n        score80: settings?.scoreConverter?.[80] || 800,\n        score70: settings?.scoreConverter?.[70] || 600,\n        score60: settings?.scoreConverter?.[60] || 0,\n        score50: settings?.scoreConverter?.[50] || 0,\n        songRemovalPurchaseAmount: settings?.songRemovalPurchaseAmount || 0,\n        songRemovalRequestEnabled: settings?.songRemovalRequestEnabled || false,\n        songRemovalRefundAmount: settings?.songRemovalRefundAmount || 0,\n        songRequestEnabled: settings?.songRequestEnabled || false,\n        songRequestPurchaseAmount: settings?.songRequestPurchaseAmount || 0,\n      }}\n      validationSchema={Yup.object({\n        defaultStudentPassword: Yup.string(),\n        enableBetaFeatures: Yup.boolean(),\n        firstName: Yup.string(),\n        lastName: Yup.string(),\n        password: Yup.string(),\n        productsEnabled: Yup.boolean(),\n        score100: Yup.number().typeError('Numbers only'),\n        score90: Yup.number().typeError('Numbers only'),\n        score80: Yup.number().typeError('Numbers only'),\n        score70: Yup.number().typeError('Numbers only'),\n        score60: Yup.number().typeError('Numbers only'),\n        score50: Yup.number().typeError('Numbers only'),\n        songRemovalPurchaseAmount: Yup.number().typeError('Numbers only'),\n        songRemovalRequestEnabled: Yup.boolean(),\n        songRemovalRefundAmount: Yup.number().typeError('Numbers only'),\n        songRequestEnabled: Yup.boolean(),\n        songRequestPurchaseAmount: Yup.number().typeError('Numbers only'),\n      })}\n      onSubmit={async (values, form) => {\n        const userSettings = { ...values }\n\n        if (!userSettings.password && currentUser.role !== 'student')\n          delete userSettings.password\n\n        if (currentUser.role !== 'student')\n          userSettings.scoreConverter = {\n            100: values.score100,\n            90: values.score90,\n            80: values.score80,\n            70: values.score70,\n            60: values.score60,\n            50: values.score50,\n            40: 0,\n            30: 0,\n            20: 0,\n            10: 0,\n            0: 0,\n          }\n\n        onSubmitForm(userSettings)\n\n        form.resetForm({\n          values: { ...userSettings, password: '' },\n        })\n      }}\n    >\n      <Form>\n        <PageHeader title='Manage Account'>\n          <Fab\n            color='primary'\n            disabled={inProgress}\n            type='sumbit'\n            variant='extended'\n          >\n            <SaveAlt className={classes.icon} />\n            {inProgress ? 'Saving...' : 'Save settings'}\n          </Fab>\n        </PageHeader>\n        <ListErrors errors={errors} />\n\n        {currentUser.role !== 'student' && (\n          <Paper className={classes.paper}>\n            <Grid container spacing={2}>\n              <Grid item xs={12}>\n                <Typography variant='h5' gutterBottom>\n                  Song Requests\n                </Typography>\n              </Grid>\n              <Grid item xs={12} md={6}>\n                <label>\n                  <Field\n                    component={Switch}\n                    label='Display the Songs page'\n                    name='songRequestEnabled'\n                    type='checkbox'\n                  />\n                  Display the Songs page\n                </label>\n              </Grid>\n              <Grid item xs={12} md={6}>\n                <Field\n                  component={TextField}\n                  label='Song request purchase amount'\n                  name='songRequestPurchaseAmount'\n                  type='text'\n                  variant='outlined'\n                  fullWidth\n                />\n              </Grid>\n              <Grid item xs={12}>\n                <Typography variant='h6' gutterBottom>\n                  Song Removal Requests\n                </Typography>\n              </Grid>\n              <Grid item xs={12} md={4}>\n                <label>\n                  <Field\n                    component={Switch}\n                    label='Allow students to request song removals'\n                    name='songRemovalRequestEnabled'\n                    type='checkbox'\n                  />\n                  Allow song removal requests\n                </label>\n              </Grid>\n              <Grid item xs={12} md={4}>\n                <Field\n                  component={TextField}\n                  label='Song removal purchase amount'\n                  name='songRemovalPurchaseAmount'\n                  type='text'\n                  variant='outlined'\n                  fullWidth\n                />\n              </Grid>\n              <Grid item xs={12} md={4}>\n                <Field\n                  component={TextField}\n                  label='Song removal refund amount'\n                  name='songRemovalRefundAmount'\n                  type='text'\n                  variant='outlined'\n                  fullWidth\n                />\n              </Grid>\n              {/* <Grid item xs={12} md={6}>\n                <SpotifyLinker />\n              </Grid> */}\n            </Grid>\n          </Paper>\n        )}\n\n        {currentUser.role !== 'student' && (\n          <Paper className={classes.paper}>\n            <Grid container spacing={2}>\n              <Grid item xs={12}>\n                <Typography variant='h5' gutterBottom>\n                  Products\n                </Typography>\n              </Grid>\n              <Grid item xs={12} md={6}>\n                <label>\n                  <Field\n                    component={Switch}\n                    label='Display the Products page'\n                    name='productsEnabled'\n                    type='checkbox'\n                  />\n                  Display the Products page\n                </label>\n              </Grid>\n            </Grid>\n          </Paper>\n        )}\n\n        {currentUser.role !== 'student' && (\n          <Paper className={classes.paper}>\n            <Grid container spacing={2}>\n              <Grid item xs={12}>\n                <Typography variant='h5' gutterBottom>\n                  Student Accounts\n                </Typography>\n              </Grid>\n              <Grid item xs={12} md={6}>\n                <Field\n                  component={TextField}\n                  label='Default student password'\n                  name='defaultStudentPassword'\n                  type='text'\n                  variant='outlined'\n                  fullWidth\n                />\n              </Grid>\n            </Grid>\n          </Paper>\n        )}\n\n        {currentUser.role !== 'student' && (\n          <Paper className={classes.paper}>\n            <Grid container spacing={2}>\n              <Grid item xs={12}>\n                <Typography variant='h5' gutterBottom>\n                  Score Conversions\n                </Typography>\n              </Grid>\n              <Grid item xs={12} md={2}>\n                <Field\n                  component={TextField}\n                  label='100% and up'\n                  name='score100'\n                  type='number'\n                  variant='outlined'\n                  fullWidth\n                />\n              </Grid>\n              <Grid item xs={12} md={2}>\n                <Field\n                  component={TextField}\n                  label='90% and up'\n                  name='score90'\n                  type='number'\n                  variant='outlined'\n                  fullWidth\n                />\n              </Grid>\n              <Grid item xs={12} md={2}>\n                <Field\n                  component={TextField}\n                  label='80% and up'\n                  name='score80'\n                  type='number'\n                  variant='outlined'\n                  fullWidth\n                />\n              </Grid>\n              <Grid item xs={12} md={2}>\n                <Field\n                  component={TextField}\n                  label='70% and up'\n                  name='score70'\n                  type='number'\n                  variant='outlined'\n                  fullWidth\n                />\n              </Grid>\n              <Grid item xs={12} md={2}>\n                <Field\n                  component={TextField}\n                  label='60% and up'\n                  name='score60'\n                  type='number'\n                  variant='outlined'\n                  fullWidth\n                />\n              </Grid>\n              <Grid item xs={12} md={2}>\n                <Field\n                  component={TextField}\n                  label='50% and up'\n                  name='score50'\n                  type='number'\n                  variant='outlined'\n                  fullWidth\n                />\n              </Grid>\n            </Grid>\n          </Paper>\n        )}\n\n        {currentUser.role !== 'student' && (\n          <Paper className={classes.paper}>\n            <Grid container spacing={2}>\n              <Grid item xs={12}>\n                <Typography variant='h5' gutterBottom>\n                  Account Details\n                </Typography>\n              </Grid>\n              <Grid item xs={12} md={6}>\n                <Field\n                  component={TextField}\n                  label='First name'\n                  name='firstName'\n                  type='text'\n                  variant='outlined'\n                  fullWidth\n                />\n              </Grid>\n              <Grid item xs={12} md={6}>\n                <Field\n                  component={TextField}\n                  label='Last name'\n                  name='lastName'\n                  type='text'\n                  variant='outlined'\n                  fullWidth\n                />\n              </Grid>\n              <Grid item xs={12} md={4}>\n                <label>\n                  <Field\n                    component={Switch}\n                    label='Enable beta features'\n                    name='enableBetaFeatures'\n                    type='checkbox'\n                  />\n                  Enable beta features\n                </label>\n              </Grid>\n            </Grid>\n          </Paper>\n        )}\n\n        <Paper className={classes.paper}>\n          <Grid container spacing={2}>\n            <Grid item xs={12}>\n              <Typography variant='h5' gutterBottom>\n                Account Security\n              </Typography>\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <Field\n                component={TextField}\n                label='New password'\n                name='password'\n                type='password'\n                variant='outlined'\n                fullWidth\n              />\n            </Grid>\n          </Grid>\n        </Paper>\n      </Form>\n    </Formik>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Settings)\n","import React from 'react'\nimport { IconButton, Tooltip, makeStyles } from '@material-ui/core'\n\nconst useStyles = makeStyles((theme) => ({\n  actionButton: {\n    color: theme.palette.text.disabled,\n  },\n}))\n\nconst ActionButton = (props) => {\n  const classes = useStyles()\n\n  const passedClasses = props.className || ''\n\n  const handleClick = (ev) => {\n    ev.stopPropagation()\n    props.onClick()\n  }\n\n  return (\n    <Tooltip arrow enterTouchDelay={0} title={props.action}>\n      <IconButton\n        aria-label={props.action}\n        className={`${classes.actionButton} ${passedClasses}`}\n        onClick={handleClick}\n        onFocus={(ev) => ev.stopPropagation()}\n        size={props.size}\n      >\n        {props.children}\n      </IconButton>\n    </Tooltip>\n  )\n}\n\nexport default ActionButton\n","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n} from '@material-ui/core'\nimport { LockOpen } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport agent from '../../agent'\n\nimport { RESET_STUDENT_PASSWORD } from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  defaultStudentPassword: state.common.settings.defaultStudentPassword,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onSubmit: (user) =>\n    dispatch({\n      type: RESET_STUDENT_PASSWORD,\n      payload: agent.Students.update(user),\n      snackbar: { message: 'Password reset', variant: 'success' },\n    }),\n})\n\nconst ResetStudentPasswordAlert = ({\n  btnSize,\n  defaultStudentPassword,\n  onSubmit,\n  student,\n}) => {\n  const [open, setOpen] = useState(false)\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmit = () => {\n    const user = { ...student, password: defaultStudentPassword }\n    onSubmit(user)\n    setOpen(false)\n  }\n\n  return (\n    <>\n      <ActionButton\n        action='Reset password'\n        onClick={handleClickOpen}\n        size={btnSize ?? 'small'}\n      >\n        <LockOpen fontSize='inherit' />\n      </ActionButton>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        onClick={(ev) => ev.stopPropagation()}\n        onFocus={(ev) => ev.stopPropagation()}\n      >\n        <DialogTitle>Reset Password</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Do you want to reset{' '}\n            <b>\n              {student.firstName} {student.lastName}\n            </b>\n            's password to <strong>{defaultStudentPassword}</strong>?\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button\n            onClick={handleSubmit}\n            color='primary'\n            variant='contained'\n            autoFocus\n          >\n            Reset\n          </Button>\n          <Button onClick={handleClose} variant='contained'>\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ResetStudentPasswordAlert)\n","import React from 'react'\nimport { TextField } from '@material-ui/core'\nimport { Autocomplete } from '@material-ui/lab'\nimport parse from 'autosuggest-highlight/parse'\nimport match from 'autosuggest-highlight/match'\n\nconst ProductSelector = ({ onChange, products }) => {\n  return (\n    <Autocomplete\n      autoHighlight\n      freeSolo\n      getOptionLabel={(product) => product.name}\n      noOptionsText='No products have been added'\n      onInputChange={(ev, value) => {\n        onChange(value)\n      }}\n      onChange={(ev, value) => {\n        onChange(value)\n      }}\n      options={products}\n      renderInput={(params) => (\n        <TextField\n          {...params}\n          label='Description'\n          placeholder='Type or select a product'\n          required\n        />\n      )}\n      renderOption={(option, { inputValue }) => {\n        const matches = match(option.name, inputValue)\n        const parts = parse(option.name, matches)\n\n        return (\n          <div>\n            {parts.map((part, index) => (\n              <span\n                key={index}\n                style={{\n                  fontWeight: part.highlight ? 700 : 400,\n                }}\n              >\n                {part.text}\n              </span>\n            ))}\n          </div>\n        )\n      }}\n    />\n  )\n}\n\nexport default ProductSelector\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Form, Field } from 'formik'\nimport { TextField } from 'formik-material-ui'\nimport * as Yup from 'yup'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Grid,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport { Grade, ShoppingCart } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport ListErrors from '../ListErrors'\nimport ProductSelector from './ProductSelector'\nimport agent from '../../agent'\n\nimport {\n  ADD_TRANSACTION,\n  TRANSACTION_DIALOG_UNLOADED,\n} from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  ...state.scores,\n  products: state.products.products,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onAdd: (transaction) =>\n    dispatch({\n      type: ADD_TRANSACTION,\n      payload: agent.Transactions.add(transaction),\n      snackbar: {\n        message: `${transaction.typeTitle} added`,\n        variant: 'success',\n      },\n    }),\n  onExit: () => dispatch({ type: TRANSACTION_DIALOG_UNLOADED }),\n})\n\nconst TransactionDialog = ({\n  errors,\n  inProgress,\n  onAdd,\n  onExit,\n  products,\n  student,\n  type,\n}) => {\n  const [open, setOpen] = useState(false)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmitAdd = (values) => {\n    onAdd({ ...values, student, type: type.toLowerCase(), typeTitle: type })\n  }\n\n  useEffect(() => {\n    // Close the dialog only if there are no errors\n    if (!inProgress && !errors) setOpen(false)\n  }, [inProgress])\n\n  return (\n    <>\n      <ActionButton\n        action={`Add ${type.toLowerCase()}`}\n        onClick={handleClickOpen}\n      >\n        {type === 'Bonus' && <Grade />}\n        {type === 'Purchase' && <ShoppingCart />}\n      </ActionButton>\n\n      <Dialog\n        fullScreen={fullScreen}\n        fullWidth={true}\n        maxWidth={'md'}\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onExit={onExit}\n        onFocus={(ev) => ev.stopPropagation()}\n        open={open}\n      >\n        <Formik\n          initialValues={{\n            amount: '',\n            description: '',\n          }}\n          validationSchema={Yup.object({\n            amount: Yup.number().typeError('Numbers only').required('Required'),\n            description: Yup.string().required('Required'),\n          })}\n          onSubmit={async (values) => {\n            handleSubmitAdd(values)\n          }}\n        >\n          {(formik) => (\n            <Form>\n              <DialogTitle>Add {type}</DialogTitle>\n              <DialogContent>\n                <ListErrors errors={errors} />\n                <Grid container spacing={2}>\n                  <Grid item xs={12} md={6}>\n                    {type === 'Bonus' ? (\n                      <Field\n                        autoFocus\n                        color='primary'\n                        component={TextField}\n                        disabled={inProgress}\n                        label='Description'\n                        name='description'\n                        type='text'\n                        fullWidth\n                      />\n                    ) : (\n                      <ProductSelector\n                        products={products}\n                        onChange={(product) => {\n                          if (typeof product === 'string') {\n                            formik.setFieldValue('description', product)\n                          } else if (product && typeof product === 'object') {\n                            formik.setFieldValue('amount', product.cost)\n                            formik.setFieldValue('description', product.name)\n                          } else {\n                            formik.setFieldValue('amount', '')\n                            formik.setFieldValue('description', '')\n                          }\n                        }}\n                      />\n                    )}\n                  </Grid>\n                  <Grid item xs={12} md={6}>\n                    <Field\n                      color='primary'\n                      component={TextField}\n                      disabled={inProgress}\n                      label='Amount'\n                      name='amount'\n                      type='text'\n                      fullWidth\n                    />\n                  </Grid>\n                </Grid>\n              </DialogContent>\n              <DialogActions>\n                <Button\n                  disabled={inProgress}\n                  color='primary'\n                  type='submit'\n                  variant='contained'\n                >\n                  {inProgress ? 'Adding...' : 'Add'}\n                </Button>\n                <Button\n                  disabled={inProgress}\n                  onClick={handleClose}\n                  variant='contained'\n                >\n                  Cancel\n                </Button>\n              </DialogActions>\n            </Form>\n          )}\n        </Formik>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TransactionDialog)\n","// Convert the given score to points using the given conversions\nconst convertScore = (score, conversions) => {\n  const total = score.task.totalPoints\n  const nonZeroTotal = total === 0 ? 1 : total\n  const percent = Math.round((score.value / nonZeroTotal) * 100)\n  const conversionKey = Math.floor((percent > 100 ? 100 : percent) / 10) * 10\n  return conversions[conversionKey]\n}\n\nexport default convertScore\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport MaterialTable from 'material-table'\nimport { Grid, Paper, Typography, makeStyles } from '@material-ui/core'\nimport { Close, Edit } from '@material-ui/icons'\n\nimport ActionButton from '../components/ActionButton'\nimport ResetStudentPasswordAlert from './Teacher/ResetStudentPasswordAlert'\nimport TransactionDialog from './Teacher/TransactionDialog'\nimport agent from '../agent'\nimport convertScore from '../converter'\n\nimport {\n  ACCOUNT_VIEW_LOADED,\n  ACCOUNT_VIEW_UNLOADED,\n  DELETE_TRANSACTION,\n  UPDATE_TRANSACTION,\n} from '../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  actions: {\n    alignItems: 'flex-start',\n    display: 'flex',\n    justifyContent: 'flex-end',\n  },\n  balance: {\n    'textAlign': 'center',\n    '& > h6': {\n      borderTop: '1px solid #ccc',\n      fontStyle: 'italic',\n      textTransform: 'lowercase',\n    },\n  },\n  edit: {\n    backgroundColor: theme.palette.primary.main,\n  },\n  paper: {\n    padding: theme.spacing(2),\n  },\n  subtotal: {\n    'position': 'relative',\n    'textAlign': 'center',\n    '& > p': {\n      position: 'relative',\n      bottom: -theme.spacing(1),\n    },\n    '& > h6': {\n      fontSize: theme.typography.pxToRem(12),\n      fontStyle: 'italic',\n      textTransform: 'lowercase',\n    },\n  },\n  unit: {\n    fontSize: theme.typography.pxToRem(12),\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  conversions: state.scores.conversions,\n  total: state.scores.total,\n  transactions: state.scores.transactions,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onDelete: (transaction) =>\n    dispatch({\n      type: DELETE_TRANSACTION,\n      payload: agent.Transactions.delete(transaction),\n      snackbar: { message: 'Transaction deleted', variant: 'success' },\n    }),\n  onLoad: (username) =>\n    dispatch({\n      type: ACCOUNT_VIEW_LOADED,\n      payload: Promise.all([\n        agent.Scores.getAll(username),\n        agent.Products.getAll(),\n      ]),\n    }),\n  onUnload: () => dispatch({ type: ACCOUNT_VIEW_UNLOADED }),\n  onUpdate: (transaction) =>\n    dispatch({\n      type: UPDATE_TRANSACTION,\n      payload: agent.Transactions.update(transaction),\n      snackbar: { message: 'Transaction updated', variant: 'success' },\n    }),\n})\n\nconst AccountHeader = ({ canEdit, doEdit, onEditClick, student, total }) => {\n  const classes = useStyles()\n\n  return (\n    <Paper className={classes.paper}>\n      <Grid container spacing={2}>\n        <Grid item xs={12} md={4}>\n          <Typography gutterBottom variant='h5'>\n            {student.firstName} {student.lastName}\n          </Typography>\n          {student.course && (\n            <Typography color='textSecondary' variant='subtitle1'>\n              {student.course} &middot; Period {student.period}\n            </Typography>\n          )}\n        </Grid>\n        <Grid item xs={12} md={4} container>\n          <Grid item xs={12} className={classes.balance}>\n            <Typography\n              color={total?.balance >= 0 ? 'primary' : 'secondary'}\n              variant='h4'\n            >\n              {total?.balance} <span className={classes.unit}>pts</span>\n            </Typography>\n            <Typography color='textSecondary' variant='subtitle2'>\n              Balance\n            </Typography>\n          </Grid>\n          <Grid item xs={4} className={classes.subtotal}>\n            <Typography color='primary' variant='body1'>\n              {total?.bonuses} <span className={classes.unit}>pts</span>\n            </Typography>\n            <Typography color='primary' variant='subtitle2'>\n              Bonuses\n            </Typography>\n          </Grid>\n          <Grid item xs={4} className={classes.subtotal}>\n            <Typography color='secondary' variant='body1'>\n              {total?.purchases} <span className={classes.unit}>pts</span>\n            </Typography>\n            <Typography color='secondary' variant='subtitle2'>\n              Purchases\n            </Typography>\n          </Grid>\n          <Grid item xs={4} className={classes.subtotal}>\n            <Typography color='primary' variant='body1'>\n              {total?.scores} <span className={classes.unit}>pts</span>\n            </Typography>\n            <Typography color='primary' variant='subtitle2'>\n              Assessments\n            </Typography>\n          </Grid>\n        </Grid>\n        {canEdit && (\n          <Grid item xs={12} md={4} className={classes.actions}>\n            <TransactionDialog student={student} type='Bonus' />\n            <TransactionDialog student={student} type='Purchase' />\n            <ActionButton\n              action={doEdit ? 'Finish editing' : 'Edit transactions'}\n              className={doEdit && classes.edit}\n              onClick={onEditClick}\n            >\n              {doEdit ? <Close /> : <Edit />}\n            </ActionButton>\n            <ResetStudentPasswordAlert btnSize='medium' student={student} />\n          </Grid>\n        )}\n      </Grid>\n    </Paper>\n  )\n}\n\nconst TransactionList = ({\n  conversions,\n  doEdit,\n  onDelete,\n  onUpdate,\n  transactions,\n}) => {\n  const [data, setData] = useState([])\n\n  const mapTransaction = (transaction) => ({\n    amount: transaction.amount,\n    createdAt: new Date(transaction.createdAt).toDateString(),\n    description: transaction.description,\n    type: transaction.type,\n    _id: transaction._id,\n  })\n\n  const mapScore = (score) => ({\n    amount: convertScore(score, conversions),\n    createdAt: new Date(score.createdAt).toDateString(),\n    description: score.task.title,\n    type: 'assessment',\n  })\n\n  // @todo: sort by date?\n  const mappedData = (transactions) => {\n    const { bonuses, purchases, scores } = transactions\n    const mapped = [\n      ...bonuses.map((bonus) => mapTransaction(bonus)),\n      ...purchases.map((purchase) => mapTransaction(purchase)),\n    ]\n    if (doEdit) {\n      return mapped\n    } else {\n      return [...mapped, ...scores.map((score) => mapScore(score))]\n    }\n  }\n\n  const [columns] = useState([\n    {\n      title: 'Date',\n      field: 'createdAt',\n      editable: 'never',\n      defaultSort: 'desc',\n    },\n    { title: 'Description', field: 'description' },\n    { title: 'Amount', field: 'amount' },\n    { title: 'Type', field: 'type', editable: 'never' },\n  ])\n\n  useEffect(() => {\n    transactions && setData(mappedData(transactions))\n  }, [doEdit, transactions])\n\n  return (\n    <MaterialTable\n      columns={columns}\n      data={data}\n      localization={{\n        body: {\n          emptyDataSourceMessage: 'No activity to report',\n          editRow: {\n            deleteText: 'Delete this transaction?',\n          },\n        },\n      }}\n      options={{ actionsColumnIndex: -1, paging: false, toolbar: false }}\n      editable={\n        doEdit\n          ? {\n              onRowUpdate: (newData, oldData) =>\n                new Promise((resolve, reject) => {\n                  const dataUpdate = [...data]\n                  const index = oldData.tableData.id\n                  dataUpdate[index] = newData\n                  setData([...dataUpdate])\n                  onUpdate(newData)\n                  resolve()\n                }),\n              onRowDelete: (oldData) =>\n                new Promise((resolve, reject) => {\n                  const newData = [...data]\n                  const index = oldData.tableData.id\n                  newData.splice(index, 1)\n                  setData([...newData])\n                  onDelete(oldData)\n                  resolve()\n                }),\n            }\n          : {}\n      }\n    />\n  )\n}\n\nconst AccountView = ({\n  canEdit,\n  conversions,\n  onDelete,\n  onLoad,\n  onUnload,\n  onUpdate,\n  student,\n  total,\n  transactions,\n}) => {\n  const [doEdit, setDoEdit] = useState(false)\n\n  const handleEditClick = () => {\n    setDoEdit(!doEdit)\n  }\n\n  useEffect(() => {\n    return () => {\n      onUnload()\n    }\n  }, [])\n\n  useEffect(() => {\n    onLoad(student.username)\n  }, [student])\n\n  return (\n    <>\n      {transactions && (\n        <Grid container spacing={2}>\n          <Grid item xs={12}>\n            <AccountHeader\n              canEdit={canEdit}\n              doEdit={doEdit}\n              onEditClick={handleEditClick}\n              student={student}\n              total={total}\n            />\n          </Grid>\n          <Grid item xs={12}>\n            <TransactionList\n              conversions={conversions}\n              doEdit={doEdit}\n              onDelete={onDelete}\n              onUpdate={onUpdate}\n              transactions={transactions}\n            />\n          </Grid>\n        </Grid>\n      )}\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AccountView)\n","import React from 'react'\nimport { connect } from 'react-redux'\n\nimport AccountView from '../AccountView'\n\nconst mapStateToProps = (state) => ({\n  currentUser: state.common.currentUser,\n})\n\nconst StudentAccount = ({ currentUser }) => {\n  return <AccountView student={currentUser} />\n}\n\nexport default connect(mapStateToProps, () => ({}))(StudentAccount)\n","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Form, Field } from 'formik'\nimport { TextField } from 'formik-material-ui'\nimport * as Yup from 'yup'\nimport {\n  Button,\n  Dialog,\n  Fab,\n  Grid,\n  Typography,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport { Add } from '@material-ui/icons'\n\nimport agent from '../../agent'\nimport background from './../../images/songs-background.jpg'\n\nimport { SUBMIT_SONG_REQUEST } from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  button: {\n    marginBottom: theme.spacing(2),\n    marginRight: theme.spacing(2),\n  },\n  dialog: {\n    backgroundImage: `url(${background})`,\n    backgroundPosition: 'center bottom',\n    backgroundSize: 'cover',\n    color: 'white',\n    padding: theme.spacing(4),\n  },\n  icon: {\n    marginRight: theme.spacing(1),\n  },\n  input: {\n    'backgroundColor': 'rgba(0,65,91,0.8)',\n    'borderRadius': theme.spacing(1),\n    'height': 78,\n    '& input': {\n      color: theme.palette.secondary.main,\n    },\n  },\n  inputLabel: {\n    color: 'white',\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  settings: state.common.settings,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onSubmit: (song) =>\n    dispatch({\n      type: SUBMIT_SONG_REQUEST,\n      payload: agent.Songs.request(song),\n      snackbar: { message: 'Song requested', variant: 'success' },\n    }),\n})\n\nconst SongRequestDialog = ({ onSubmit, settings }) => {\n  const [open, setOpen] = useState(false)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n  const classes = useStyles()\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmit = (values) => {\n    onSubmit(values)\n    setOpen(false)\n  }\n\n  return (\n    <>\n      <Fab color='primary' onClick={handleClickOpen} variant='extended'>\n        <Add className={classes.icon} />\n        Buy a song\n      </Fab>\n      <Dialog\n        classes={{\n          paper: classes.dialog,\n        }}\n        fullScreen={fullScreen}\n        open={open}\n        onClose={handleClose}\n      >\n        <Typography variant='h3' align='center' color='secondary' gutterBottom>\n          Purchase a Song\n        </Typography>\n        <Typography variant='body1' gutterBottom>\n          Please provide the song and artist title for your request. If\n          approved, {settings.songRequestPurchaseAmount} points will be charged\n          to your account.\n        </Typography>\n        <Formik\n          initialValues={{\n            artist: '',\n            title: '',\n          }}\n          validationSchema={Yup.object({\n            artist: Yup.string().required('Required'),\n            title: Yup.string().required('Required'),\n          })}\n          onSubmit={async (values) => {\n            handleSubmit(values)\n          }}\n        >\n          <Form>\n            <Grid container spacing={4}>\n              <Grid item xs={12} md={6}>\n                <Field\n                  autoFocus\n                  className={classes.input}\n                  color='primary'\n                  component={TextField}\n                  InputLabelProps={{\n                    classes: {\n                      root: classes.inputLabel,\n                    },\n                  }}\n                  label='Song Title'\n                  name='title'\n                  type='text'\n                  variant='filled'\n                  fullWidth\n                />\n              </Grid>\n              <Grid item xs={12} md={6}>\n                <Field\n                  className={classes.input}\n                  color='primary'\n                  component={TextField}\n                  InputLabelProps={{\n                    classes: {\n                      root: classes.inputLabel,\n                    },\n                  }}\n                  label='Artist'\n                  name='artist'\n                  type='text'\n                  variant='filled'\n                  fullWidth\n                />\n              </Grid>\n              <Grid item xs={12}>\n                <Button\n                  className={classes.button}\n                  color='primary'\n                  type='submit'\n                  variant='contained'\n                >\n                  Buy\n                </Button>\n                <Button\n                  className={classes.button}\n                  onClick={handleClose}\n                  variant='contained'\n                >\n                  Cancel\n                </Button>\n              </Grid>\n            </Grid>\n          </Form>\n        </Formik>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SongRequestDialog)\n","import React, { useState, useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Checkbox,\n  Grid,\n  FormControlLabel,\n  Paper,\n  Tooltip,\n  makeStyles,\n} from '@material-ui/core'\nimport { InfoOutlined } from '@material-ui/icons'\n\nimport PageHeader from '../PageHeader'\nimport SongRequestDialog from './SongRequestDialog'\nimport agent from '../../agent'\n\nimport MaterialTable from 'material-table'\n\nimport {\n  SONGS_PAGE_UNLOADED,\n  STUDENT_SONGS_PAGE_LOADED,\n  SUBMIT_SONG_REMOVAL_REQUEST,\n} from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  icon: {\n    marginLeft: theme.spacing(1),\n  },\n  paper: {\n    paddingLeft: theme.spacing(2),\n    marginBottom: theme.spacing(4),\n  },\n  status: {\n    alignItems: 'center',\n    display: 'flex',\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.songs,\n  currentUser: state.common.currentUser,\n  settings: state.common.settings,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onDelete: (song) =>\n    dispatch({\n      type: SUBMIT_SONG_REMOVAL_REQUEST,\n      payload: agent.Songs.update(song),\n      snackbar: {\n        message: 'Song removal request submitted',\n        variant: 'success',\n      },\n    }),\n  onLoad: () =>\n    dispatch({\n      type: STUDENT_SONGS_PAGE_LOADED,\n      payload: agent.Songs.forStudent(),\n    }),\n  onUnload: () => dispatch({ type: SONGS_PAGE_UNLOADED }),\n})\n\nconst StudentSongs = ({\n  course,\n  courseSongs,\n  currentUser,\n  onDelete,\n  onLoad,\n  onUnload,\n  settings,\n  userSongs,\n}) => {\n  const [mySongsOnly, setMySongsOnly] = useState(true)\n  const [data, setData] = useState([])\n  const [columns, setColumns] = useState([])\n\n  const classes = useStyles()\n\n  const handleMySongsOnlyClick = (event) => {\n    setMySongsOnly(event.target.checked)\n  }\n\n  const getColumns = () => [\n    { title: 'Request Date', field: 'createdAt', editable: 'never' },\n    { title: 'Song Title', field: 'title' },\n    { title: 'Song Artist', field: 'artist' },\n    ...(!mySongsOnly\n      ? [\n          {\n            title: 'Purchased by',\n            field: 'purchasedBy',\n            editable: 'never',\n          },\n        ]\n      : []),\n    {\n      title: 'Status',\n      field: 'status',\n      lookup: {\n        approved: 'approved',\n        pending: 'pending', // @todo: remove [for backwards compatibility]\n        pendingApproval: 'pending approval',\n        pendingRemoval: 'pending removal',\n        rejected: 'rejected',\n        removed: 'removed',\n      },\n      render: (rowData, renderType) =>\n        renderType === 'row' ? (\n          <span style={{ alignItems: 'center', display: 'flex' }}>\n            {rowData.statusDescription ? (\n              <>\n                {rowData.status}\n                <Tooltip\n                  arrow\n                  color='primary'\n                  enterTouchDelay={0}\n                  title={rowData.statusDescription}\n                >\n                  <InfoOutlined style={{ marginLeft: '8px' }} />\n                </Tooltip>\n              </>\n            ) : (\n              rowData.status\n            )}\n          </span>\n        ) : (\n          <span>{rowData}</span>\n        ),\n    },\n  ]\n\n  const getMappedData = (source) =>\n    source.map((song) => ({\n      createdAt: new Date(song.createdAt).toDateString(),\n      title: song.title,\n      artist: song.artist,\n      purchasedBy: `${song.student.firstName} ${song.student.lastName}`,\n      status: song.status,\n      statusDescription: song.statusDescription,\n      _id: song._id,\n    }))\n\n  useEffect(() => {\n    onLoad()\n\n    return () => {\n      return onUnload()\n    }\n  }, [])\n\n  useEffect(() => {\n    setColumns(getColumns())\n    setData(getMappedData(mySongsOnly ? userSongs : courseSongs))\n  }, [courseSongs, mySongsOnly, userSongs])\n\n  return (\n    <>\n      <PageHeader\n        title={\n          'Songs for ' +\n          (mySongsOnly ? currentUser.firstName : 'Period ' + course.period)\n        }\n      >\n        <SongRequestDialog />\n      </PageHeader>\n\n      <Paper className={classes.paper}>\n        <Grid container spacing={2} className={classes.grid}>\n          <Grid item xs={12} className={classes.grid}>\n            <FormControlLabel\n              control={\n                <Checkbox\n                  checked={mySongsOnly}\n                  onChange={handleMySongsOnlyClick}\n                  name='mySongsOnly'\n                />\n              }\n              label='show only my songs'\n            />\n          </Grid>\n        </Grid>\n      </Paper>\n\n      <MaterialTable\n        title='Class Playlist'\n        columns={columns}\n        data={data}\n        localization={{\n          body: {\n            emptyDataSourceMessage:\n              'No songs have been added to this class playlist',\n            editRow: {\n              deleteText: `Delete this song for ${settings.songRemovalPurchaseAmount} points?`,\n            },\n          },\n        }}\n        options={{ actionsColumnIndex: -1, paging: false, toolbar: false }}\n        editable={{\n          isDeletable: (rowData) => rowData.status === 'approved',\n          isDeleteHidden: () => !settings.songRemovalRequestEnabled,\n          onRowDelete: (song) =>\n            new Promise((resolve) => {\n              onDelete({\n                id: song._id,\n                status: 'pending removal',\n                statusDescription: '',\n              })\n              resolve()\n            }),\n        }}\n      />\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StudentSongs)\n","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Collapse, IconButton, makeStyles } from '@material-ui/core'\nimport { Alert as MuiAlert } from '@material-ui/lab'\nimport { Close } from '@material-ui/icons'\n\nimport { ALERT_CLOSED } from '../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  alert: {\n    marginBottom: theme.spacing(2),\n  },\n}))\n\nconst mapDispatchToProps = (dispatch) => ({\n  onClose: () => dispatch({ type: ALERT_CLOSED }),\n})\n\nconst Alert = ({ children, onClose, severity, variant }) => {\n  const classes = useStyles()\n  const [open, setOpen] = useState(true)\n\n  return (\n    <div className={classes.alert}>\n      <Collapse in={open}>\n        <MuiAlert\n          action={\n            <IconButton\n              aria-label='close'\n              color='inherit'\n              size='small'\n              onClick={() => {\n                setOpen(false)\n                onClose()\n              }}\n            >\n              <Close fontSize='inherit' />\n            </IconButton>\n          }\n          severity={severity || 'info'}\n          variant={variant || 'outlined'}\n        >\n          {children}\n        </MuiAlert>\n      </Collapse>\n    </div>\n  )\n}\n\nexport default connect(() => ({}), mapDispatchToProps)(Alert)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Paper, TextField, makeStyles } from '@material-ui/core'\nimport { Autocomplete } from '@material-ui/lab'\nimport parse from 'autosuggest-highlight/parse'\nimport match from 'autosuggest-highlight/match'\n\nimport agent from '../../agent'\n\nimport {\n  STUDENT_SEARCH_LOADED,\n  STUDENT_SEARCH_UNLOADED,\n} from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  search: {\n    padding: theme.spacing(2),\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  courses: state.courses.courses,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onLoad: () =>\n    dispatch({ type: STUDENT_SEARCH_LOADED, payload: agent.Courses.getAll() }),\n  onUnload: () => dispatch({ type: STUDENT_SEARCH_UNLOADED }),\n})\n\nconst StudentSearch = ({ courses, onChange, onLoad, onUnload }) => {\n  const [mappedData, setMappedData] = useState([])\n\n  const classes = useStyles()\n\n  useEffect(() => {\n    onLoad()\n\n    return () => {\n      onUnload()\n    }\n  }, [])\n\n  useEffect(() => {\n    const mapped = courses\n      .map((course) =>\n        course.students.map((student) => ({\n          ...student,\n          course: course.name,\n          period: course.period,\n          name: `${student.firstName} ${student.lastName}`,\n        }))\n      )\n      .flat()\n    setMappedData(mapped)\n  }, [courses])\n\n  return (\n    <Paper className={classes.search}>\n      <Autocomplete\n        autoHighlight\n        getOptionLabel={(option) => option.name}\n        groupBy={(option) => `Period ${option.period} | ${option.course}`}\n        noOptionsText='No students have been added'\n        onChange={(ev, value) => onChange(value)}\n        options={mappedData}\n        renderInput={(params) => (\n          <TextField\n            {...params}\n            label='Student'\n            placeholder='Type or select a name'\n          />\n        )}\n        renderOption={(option, { inputValue }) => {\n          const matches = match(option.name, inputValue)\n          const parts = parse(option.name, matches)\n\n          return (\n            <div>\n              {parts.map((part, index) => (\n                <span\n                  key={index}\n                  style={{ fontWeight: part.highlight ? 700 : 400 }}\n                >\n                  {part.text}\n                </span>\n              ))}\n            </div>\n          )\n        }}\n      />\n    </Paper>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StudentSearch)\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Typography, makeStyles } from '@material-ui/core'\nimport { Alert } from '@material-ui/lab'\n\nconst useStyles = makeStyles((theme) => ({\n  courses: {\n    '& div': {\n      'boxShadow': theme.shadows[4],\n      'cursor': 'pointer',\n      'marginBottom': theme.spacing(1),\n      'padding': `${theme.spacing(3)}px ${theme.spacing(4)}px`,\n      'transition': 'all 0.15s ease-in-out',\n      '&:focus': {\n        backgroundColor: theme.palette.primary.main,\n        boxShadow: theme.shadows[1],\n      },\n      '&:hover': {\n        backgroundColor: theme.palette.primary.light,\n        boxShadow: theme.shadows[1],\n      },\n    },\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  courses: state.courses.courses,\n})\n\nconst CourseSelector = ({ courses, onSelect }) => {\n  const classes = useStyles()\n\n  return (\n    <div>\n      <Typography gutterBottom variant='h6'>\n        Select a course\n      </Typography>\n      {courses.length > 0 ? (\n        <div className={classes.courses}>\n          {courses.map((course) => (\n            <div\n              key={course.slug}\n              onClick={() => {\n                onSelect(course)\n              }}\n              tabIndex='0'\n            >\n              <Typography variant='body1'>\n                <b>{course.name}</b> &middot; Period {course.period}\n              </Typography>\n            </div>\n          ))}\n        </div>\n      ) : (\n        <Alert severity='info'>\n          You must create a course before continuing\n        </Alert>\n      )}\n    </div>\n  )\n}\n\nexport default connect(mapStateToProps, () => ({}))(CourseSelector)\n","import React, { useEffect, useState } from 'react'\nimport MaterialTable from 'material-table'\n\nconst StudentsTable = ({ course, onSelect }) => {\n  const [data, setData] = useState([])\n\n  const mappedData = course.students.map((student) => ({\n    username: student.username,\n    firstName: student.firstName,\n    lastName: student.lastName,\n    fullName: `${student.firstName} ${student.lastName}`,\n    role: student.role,\n    _id: student._id,\n  }))\n\n  const [columns] = useState([{ title: 'Students', field: 'fullName' }])\n\n  useEffect(() => {\n    setData(mappedData)\n  }, [course])\n\n  return (\n    <MaterialTable\n      columns={columns}\n      data={data}\n      localization={{\n        body: {\n          emptyDataSourceMessage: 'No students found for this course',\n        },\n        toolbar: {\n          nRowsSelected: '{0} student(s) selected',\n        },\n      }}\n      onSelectionChange={(rows) => onSelect(rows)}\n      options={{ paging: false, selection: true, toolbar: true }}\n      title={`${course.name} | Period ${course.period}`}\n    />\n  )\n}\n\nexport default StudentsTable\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Form, Field } from 'formik'\nimport { TextField } from 'formik-material-ui'\nimport * as Yup from 'yup'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Grid,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\n\nimport CourseSelector from './CourseSelector'\nimport ListErrors from '../ListErrors'\nimport StudentsTable from './StudentsTable'\nimport agent from '../../agent'\n\nimport {\n  ADD_TRANSACTIONS,\n  TRANSACTIONS_DIALOG_UNLOADED,\n} from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  dialog: {\n    '& > .MuiDialog-container > .MuiPaper-root': {\n      [theme.breakpoints.up('lg')]: {\n        width: theme.spacing(80),\n      },\n    },\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.scores,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onAdd: (transactions, curStudent) =>\n    dispatch({\n      type: ADD_TRANSACTIONS,\n      payload: agent.Transactions.addMany(transactions),\n      curStudent,\n      snackbar: {\n        message: `${transactions.typeTitle} added`,\n        variant: 'success',\n      },\n    }),\n  onExit: () => dispatch({ type: TRANSACTIONS_DIALOG_UNLOADED }),\n})\n\nconst BulkTransactionsDialog = ({\n  curStudent,\n  errors,\n  inProgress,\n  isClosed,\n  isOpen,\n  onAdd,\n  onExit,\n  type,\n}) => {\n  const [open, setOpen] = useState(false)\n  const [course, setCourse] = useState(null)\n  const [students, setStudents] = useState([])\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n  const classes = useStyles()\n\n  const handleClose = () => {\n    setOpen(false)\n    setCourse(null)\n    isClosed()\n  }\n\n  const handleSubmitAdd = (values) => {\n    onAdd(\n      {\n        ...values,\n        students: students.map((student) => student._id),\n        type: type === 'Bonuses' ? 'bonus' : 'purchase',\n        typeTitle: type,\n      },\n      curStudent\n    )\n  }\n\n  const handleCourseSelect = (slug) => {\n    setCourse(slug)\n  }\n\n  const handleStudentSelect = (rows) => {\n    setStudents(rows)\n  }\n\n  useEffect(() => {\n    // Close the dialog only if there are no errors\n    if (!inProgress && !errors) handleClose()\n  }, [inProgress])\n\n  // Allow for external component control of displaying the dialog\n  useEffect(() => {\n    setOpen(isOpen)\n  }, [isOpen])\n\n  return (\n    <Dialog\n      className={classes.dialog}\n      fullScreen={fullScreen}\n      onClick={(ev) => ev.stopPropagation()}\n      onClose={handleClose}\n      onExit={onExit}\n      onFocus={(ev) => ev.stopPropagation()}\n      open={open}\n    >\n      <Formik\n        initialValues={{\n          amount: '',\n          description: '',\n        }}\n        validationSchema={Yup.object({\n          amount: Yup.number().typeError('Numbers only').required('Required'),\n          description: Yup.string().required('Required'),\n        })}\n        onSubmit={async (values) => {\n          handleSubmitAdd(values)\n        }}\n      >\n        <Form>\n          <DialogTitle>Add {type}</DialogTitle>\n          <DialogContent>\n            <ListErrors errors={errors} />\n            {!course && <CourseSelector onSelect={handleCourseSelect} />}\n            {course && (\n              <Grid container spacing={2}>\n                <Grid item xs={12} md={6}>\n                  <Field\n                    autoFocus\n                    color='primary'\n                    component={TextField}\n                    disabled={inProgress}\n                    label='Description'\n                    name='description'\n                    type='text'\n                    fullWidth\n                  />\n                </Grid>\n                <Grid item xs={12} md={6}>\n                  <Field\n                    color='primary'\n                    component={TextField}\n                    disabled={inProgress}\n                    label='Amount'\n                    name='amount'\n                    type='text'\n                    fullWidth\n                  />\n                </Grid>\n                <Grid item xs={12}>\n                  <StudentsTable\n                    course={course}\n                    onSelect={handleStudentSelect}\n                  />\n                </Grid>\n              </Grid>\n            )}\n          </DialogContent>\n          <DialogActions>\n            <Button\n              disabled={inProgress || students.length === 0}\n              color='primary'\n              type='submit'\n              variant='contained'\n            >\n              {inProgress ? 'Adding...' : 'Add'}\n            </Button>\n            <Button\n              disabled={inProgress}\n              onClick={handleClose}\n              variant='contained'\n            >\n              Cancel\n            </Button>\n          </DialogActions>\n        </Form>\n      </Formik>\n    </Dialog>\n  )\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(BulkTransactionsDialog)\n","import React, { useCallback } from 'react'\nimport { useDropzone } from 'react-dropzone'\nimport parse from 'csv-parse/lib/sync'\nimport { Typography, makeStyles } from '@material-ui/core'\n\nconst useStyles = makeStyles((theme) => ({\n  filedrop: {\n    alignItems: 'center',\n    backgroundColor: theme.palette.grey[300],\n    borderRadius: theme.spacing(1),\n    color: theme.palette.grey[600],\n    display: 'flex',\n    flexDirection: 'column',\n    outline: 'none',\n    padding: '20px',\n    transition: 'all 0.25s ease-in-out',\n  },\n  filedropActive: {\n    backgroundColor: theme.palette.primary.light,\n    color: theme.palette.primary.contrastText,\n  },\n  filedropReject: {\n    backgroundColor: theme.palette.secondary.light,\n    color: theme.palette.secondary.contrastText,\n  },\n}))\n\nfunction Filedrop({ onFiledrop }) {\n  const classes = useStyles()\n\n  const onDrop = useCallback((acceptedFiles) => {\n    // Due to {multiple: false} in useDropzone(), only one file will be received\n    acceptedFiles.forEach((file) => {\n      const reader = new FileReader()\n      reader.onabort = () => console.log('file reading was aborted')\n      reader.onerror = () => console.log('file reading has failed')\n      reader.onload = () => {\n        const parsedFile = parse(reader.result, {\n          columns: true,\n          skip_empty_lines: true,\n        })\n        onFiledrop(parsedFile)\n      }\n      reader.readAsBinaryString(file)\n    })\n  }, [])\n\n  const {\n    getRootProps,\n    getInputProps,\n    isDragActive,\n    isDragReject,\n  } = useDropzone({\n    accept: 'text/csv, text/plain',\n    multiple: false,\n    onDropAccepted: onDrop,\n  })\n\n  return (\n    <div\n      {...getRootProps({\n        className: `${classes.filedrop} ${\n          isDragActive ? classes.filedropActive : ''\n        } ${isDragReject ? classes.filedropReject : ''}`,\n      })}\n    >\n      <input {...getInputProps()} />\n      {!isDragActive && (\n        <Typography>\n          Drop a .csv file here or click to select a .csv file\n        </Typography>\n      )}\n      {isDragActive && !isDragReject && (\n        <Typography>Drop .csv file here</Typography>\n      )}\n      {isDragReject && <Typography>File type not accepted</Typography>}\n    </div>\n  )\n}\n\nexport default Filedrop\n","import React from 'react'\nimport { CircularProgress, Typography, makeStyles } from '@material-ui/core'\n\nconst useStyles = makeStyles((theme) => ({\n  message: {\n    fontStyle: 'italic',\n  },\n  root: {\n    alignItems: 'center',\n    display: 'flex',\n    justifyContent: 'center',\n    minWidth: theme.spacing(40),\n  },\n  spinner: {\n    marginRight: theme.spacing(2),\n  },\n}))\n\nconst Spinner = ({ message }) => {\n  const classes = useStyles()\n\n  return (\n    <div className={classes.root}>\n      <CircularProgress className={classes.spinner} />\n      <Typography className={classes.message}>\n        {message || 'Working...'}\n      </Typography>\n    </div>\n  )\n}\n\nexport default Spinner\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Checkbox,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  FormControl,\n  FormControlLabel,\n  FormGroup,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n  Typography,\n} from '@material-ui/core'\n\nimport CourseSelector from './CourseSelector'\nimport Filedrop from '../Filedrop'\nimport ListErrors from '../ListErrors'\nimport Spinner from '../Spinner'\nimport agent from '../../agent'\n\nimport {\n  IMPORT_SCORES,\n  IMPORT_SCORES_DIALOG_UNLOADED,\n} from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  dialog: {\n    '& > .MuiDialog-container > .MuiPaper-root': {\n      [theme.breakpoints.up('lg')]: {\n        width: theme.spacing(100),\n      },\n    },\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.scores,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onImport: (data, curStudent) =>\n    dispatch({\n      type: IMPORT_SCORES,\n      payload: agent.Scores.import(data),\n      curStudent,\n      snackbar: { message: 'Scores imported', variant: 'success' },\n    }),\n  onExit: () => dispatch({ type: IMPORT_SCORES_DIALOG_UNLOADED }),\n})\n\nconst ScoreImportStepper = ({ onDataChange, onShowImport }) => {\n  const [file, setFile] = useState(null)\n  const [course, setCourse] = useState(null)\n  const [tasks, setTasks] = useState(null)\n\n  const handleCourseSelect = (course) => {\n    setCourse(course)\n  }\n\n  const handleFiledrop = (file) => {\n    const tasks = {}\n    Object.keys(file[0])\n      .slice(1)\n      .forEach((task) => {\n        tasks[task] = false\n      })\n    setFile(file)\n    setTasks(tasks)\n  }\n\n  const handleTaskChange = (ev) => {\n    setTasks({ ...tasks, [ev.target.name]: ev.target.checked })\n  }\n\n  // Determine if any tasks have been checked/selected\n  useEffect(() => {\n    const tasksSelected = tasks\n      ? Object.values(tasks).some((el) => el === true)\n      : false\n    onShowImport(tasksSelected)\n  }, [tasks])\n\n  // Keep the imported data object current\n  useEffect(() => {\n    onDataChange({ file, course, tasks })\n  }, [file, course, tasks])\n\n  return (\n    <>\n      {!file && !course && !tasks && (\n        <CourseSelector onSelect={handleCourseSelect} />\n      )}\n\n      {!file && course && !tasks && (\n        <div>\n          <Typography gutterBottom>\n            Scores must be imported from a .csv file exported from Infinite\n            Campus\n          </Typography>\n          <Filedrop onFiledrop={handleFiledrop} />\n        </div>\n      )}\n\n      {file &&\n      course &&\n      tasks && ( // @todo: use material-table here?\n          <FormControl component='fieldset'>\n            <Typography gutterBottom variant='body1'>\n              Select the assignments to import\n            </Typography>\n            <FormGroup>\n              {Object.keys(tasks).map((task) => (\n                <FormControlLabel\n                  control={\n                    <Checkbox\n                      checked={tasks[task]}\n                      onChange={handleTaskChange}\n                      name={task}\n                    />\n                  }\n                  key={task}\n                  label={task}\n                />\n              ))}\n            </FormGroup>\n          </FormControl>\n        )}\n    </>\n  )\n}\n\nconst ImportScoresDialog = ({\n  curStudent,\n  errors,\n  inProgress,\n  isClosed,\n  isOpen,\n  onExit,\n  onImport,\n}) => {\n  const [open, setOpen] = useState(false)\n  const [ready, setReady] = useState(false)\n  const [data, setData] = useState(null)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n  const classes = useStyles()\n\n  const handleClose = () => {\n    setOpen(false)\n    isClosed()\n  }\n\n  const handleDataChange = (importData) => {\n    setData(importData)\n  }\n\n  const handleShowImport = (selected) => {\n    setReady(selected)\n  }\n\n  const handleClickImport = () => {\n    // Get student usernames (student numbers)\n    const usernames = data.file\n      .map(\n        (student, index) =>\n          index > 1 && student['Assignment Name'].split('#').pop()\n      )\n      .filter((username) => username !== false)\n\n    // Prepare data to send to server\n    const parsed = { course: data.course, tasks: [] }\n    for (const taskName in data.tasks) {\n      const selected = data.tasks[taskName]\n      if (selected) {\n        const task = {\n          title: taskName,\n          totalPoints: data.file[1][taskName],\n          scores: {},\n        }\n\n        for (const username of usernames) {\n          const student = data.file.find((row) =>\n            row['Assignment Name'].endsWith(username)\n          )\n          if (student) task.scores[username] = student[taskName]\n        }\n\n        parsed.tasks.push(task)\n      }\n    }\n\n    onImport(parsed, curStudent)\n  }\n\n  useEffect(() => {\n    // Close the dialog only if there are no errors\n    if (!inProgress && !errors) handleClose()\n  }, [inProgress])\n\n  // Allow for external component control of displaying the dialog\n  useEffect(() => {\n    setOpen(isOpen)\n  }, [isOpen])\n\n  return (\n    <Dialog\n      className={classes.dialog}\n      fullScreen={fullScreen}\n      onClick={(ev) => ev.stopPropagation()}\n      onClose={handleClose}\n      onExit={onExit}\n      onFocus={(ev) => ev.stopPropagation()}\n      open={open}\n    >\n      <DialogTitle>Import Scores</DialogTitle>\n      <DialogContent>\n        <ListErrors errors={errors} />\n        {inProgress ? (\n          <Spinner message='Importing...' />\n        ) : (\n          <ScoreImportStepper\n            onDataChange={handleDataChange}\n            onShowImport={handleShowImport}\n          />\n        )}\n      </DialogContent>\n      <DialogActions>\n        {ready && (\n          <Button\n            color='primary'\n            disabled={inProgress}\n            onClick={handleClickImport}\n            variant='contained'\n          >\n            {inProgress ? 'Importing...' : 'Import'}\n          </Button>\n        )}\n        <Button disabled={inProgress} onClick={handleClose} variant='contained'>\n          Cancel\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ImportScoresDialog)\n","import React, { useState } from 'react'\nimport {\n  Fab,\n  ListItemIcon,\n  ListItemText,\n  Menu,\n  MenuItem,\n  makeStyles,\n} from '@material-ui/core'\nimport { Grade, Money, Publish, ShoppingCart } from '@material-ui/icons'\n\nimport BulkTransactionsDialog from './BulkTransactionsDialog'\nimport ImportScoresDialog from '../Teacher/ImportScoresDialog'\n\nconst useStyles = makeStyles((theme) => ({\n  icon: {\n    marginRight: theme.spacing(1),\n  },\n}))\n\nconst UpdateAccountsMenu = ({ curStudent }) => {\n  const [menuAnchorEl, setMenuAnchorEl] = useState(null)\n  const [menuSelection, setMenuSelection] = useState(null)\n\n  const classes = useStyles()\n\n  const handleMenuOpen = (ev) => {\n    setMenuAnchorEl(ev.currentTarget)\n  }\n\n  const handleMenuClose = () => {\n    setMenuAnchorEl(null)\n  }\n\n  const handleMenuSelect = (ev) => {\n    setMenuSelection(ev.currentTarget.dataset.type)\n    setMenuAnchorEl(null)\n  }\n\n  const handleDialogClose = () => {\n    setMenuSelection(null)\n  }\n\n  return (\n    <>\n      <Fab color='primary' onClick={handleMenuOpen} variant='extended'>\n        <Money className={classes.icon} />\n        Update Accounts\n      </Fab>\n      <Menu\n        anchorEl={menuAnchorEl}\n        open={Boolean(menuAnchorEl)}\n        onClose={handleMenuClose}\n      >\n        <MenuItem data-type='scores' onClick={handleMenuSelect}>\n          <ListItemIcon>\n            <Publish />\n          </ListItemIcon>\n          <ListItemText>Import scores</ListItemText>\n        </MenuItem>\n        <MenuItem data-type='bonuses' onClick={handleMenuSelect}>\n          <ListItemIcon>\n            <Grade />\n          </ListItemIcon>\n          <ListItemText>Add Bonuses</ListItemText>\n        </MenuItem>\n        <MenuItem data-type='purchases' onClick={handleMenuSelect}>\n          <ListItemIcon>\n            <ShoppingCart />\n          </ListItemIcon>\n          <ListItemText>Add Purchases</ListItemText>\n        </MenuItem>\n      </Menu>\n      <ImportScoresDialog\n        curStudent={curStudent}\n        isClosed={handleDialogClose}\n        isOpen={menuSelection === 'scores'}\n      />\n      <BulkTransactionsDialog\n        curStudent={curStudent}\n        isClosed={handleDialogClose}\n        isOpen={menuSelection === 'bonuses'}\n        type='Bonuses'\n      />\n      <BulkTransactionsDialog\n        curStudent={curStudent}\n        isClosed={handleDialogClose}\n        isOpen={menuSelection === 'purchases'}\n        type='Purchases'\n      />\n    </>\n  )\n}\n\nexport default UpdateAccountsMenu\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Grid } from '@material-ui/core'\n\nimport AccountView from '../AccountView'\nimport Alert from '../Alert'\nimport PageHeader from '../PageHeader'\nimport StudentSearch from './StudentSearch'\nimport UpdateAccountsMenu from './UpdateAccountsMenu'\n\nimport { ACCOUNTS_PAGE_UNLOADED } from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  importSummary: state.scores.importSummary,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onUnload: () => dispatch({ type: ACCOUNTS_PAGE_UNLOADED }),\n})\n\nconst TeacherAccounts = ({ importSummary, onUnload }) => {\n  const [student, setStudent] = useState(null)\n\n  const plural = (qty, unit) => `${qty} ${unit}${qty !== 1 ? 's' : ''}`\n\n  const handleStudentSelect = (student) => {\n    setStudent(student)\n  }\n\n  useEffect(() => {\n    return () => {\n      onUnload()\n    }\n  }, [])\n\n  return (\n    <>\n      <PageHeader title='Manage Accounts'>\n        <UpdateAccountsMenu curStudent={student} />\n      </PageHeader>\n\n      {importSummary && (\n        <Alert>\n          Created {plural(importSummary.tasksCreated, 'assignment')}, imported{' '}\n          {plural(importSummary.scoresImported, 'score')}, and updated{' '}\n          {plural(importSummary.scoresUpdated, 'score')}\n        </Alert>\n      )}\n\n      <Grid container spacing={4}>\n        <Grid item xs={12}>\n          <StudentSearch onChange={handleStudentSelect} />\n        </Grid>\n        <Grid item xs={12}>\n          {student && <AccountView canEdit={true} student={student} />}\n        </Grid>\n      </Grid>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TeacherAccounts)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Form, Field } from 'formik'\nimport { TextField } from 'formik-material-ui'\nimport * as Yup from 'yup'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Fab,\n  Grid,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport { Add, Edit } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport ListErrors from '../ListErrors'\nimport agent from '../../agent'\n\nimport {\n  ADD_COURSE,\n  COURSE_DIALOG_UNLOADED,\n  UPDATE_COURSE,\n} from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  icon: {\n    marginRight: theme.spacing(1),\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.courses,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onAdd: (course) =>\n    dispatch({\n      type: ADD_COURSE,\n      payload: agent.Courses.add(course),\n      snackbar: { message: 'Course added', variant: 'success' },\n    }),\n  onExit: () => dispatch({ type: COURSE_DIALOG_UNLOADED }),\n  onUpdate: (course) =>\n    dispatch({\n      type: UPDATE_COURSE,\n      payload: agent.Courses.update(course),\n      snackbar: { message: 'Course updated', variant: 'success' },\n    }),\n})\n\nconst CourseDialog = ({\n  course,\n  errors,\n  inProgress,\n  onAdd,\n  onExit,\n  onUpdate,\n}) => {\n  const [open, setOpen] = useState(false)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n  const classes = useStyles()\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmitAdd = (values) => {\n    onAdd({ ...values })\n  }\n\n  const handleSubmitUpdate = (values) => {\n    onUpdate({ ...course, ...values })\n  }\n\n  useEffect(() => {\n    // Close the dialog only if there are no errors\n    if (!inProgress && !errors) setOpen(false)\n  }, [inProgress])\n\n  return (\n    <>\n      {course ? (\n        <ActionButton action='Edit course' onClick={handleClickOpen}>\n          <Edit />\n        </ActionButton>\n      ) : (\n        <Fab color='primary' onClick={handleClickOpen} variant='extended'>\n          <Add className={classes.icon} />\n          Create course\n        </Fab>\n      )}\n\n      <Dialog\n        fullScreen={fullScreen}\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onExit={onExit}\n        onFocus={(ev) => ev.stopPropagation()}\n        open={open}\n      >\n        <Formik\n          initialValues={{\n            name: course?.name || '',\n            period: course?.period || '',\n          }}\n          validationSchema={Yup.object({\n            name: Yup.string().required('Required'),\n            period: Yup.number().typeError('Numbers only').required('Required'),\n          })}\n          onSubmit={async (values) => {\n            course ? handleSubmitUpdate(values) : handleSubmitAdd(values)\n          }}\n        >\n          <Form>\n            <DialogTitle>\n              {course ? 'Edit Course' : 'Create Course'}\n            </DialogTitle>\n            <DialogContent>\n              <ListErrors errors={errors} />\n              <Grid container spacing={2}>\n                <Grid item xs={12} md={6}>\n                  <Field\n                    autoFocus={course ? false : true}\n                    color='primary'\n                    component={TextField}\n                    disabled={inProgress}\n                    label='Course Name'\n                    name='name'\n                    type='text'\n                    fullWidth\n                  />\n                </Grid>\n                <Grid item xs={12} md={6}>\n                  <Field\n                    color='primary'\n                    component={TextField}\n                    disabled={inProgress}\n                    label='Period'\n                    name='period'\n                    type='text'\n                    fullWidth\n                  />\n                </Grid>\n              </Grid>\n            </DialogContent>\n            <DialogActions>\n              <Button\n                disabled={inProgress}\n                color='primary'\n                type='submit'\n                variant='contained'\n              >\n                {course\n                  ? inProgress\n                    ? 'Updating...'\n                    : 'Update'\n                  : inProgress\n                  ? 'Adding...'\n                  : 'Add'}\n              </Button>\n              <Button\n                disabled={inProgress}\n                onClick={handleClose}\n                variant='contained'\n              >\n                Cancel\n              </Button>\n            </DialogActions>\n          </Form>\n        </Formik>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CourseDialog)\n","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n} from '@material-ui/core'\nimport { Delete } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport agent from '../../agent'\n\nimport { DELETE_STUDENT } from '../../constants/actionTypes'\n\nconst mapDispatchToProps = (dispatch) => ({\n  onDelete: (user) =>\n    dispatch({\n      type: DELETE_STUDENT,\n      payload: agent.Students.delete(user),\n      snackbar: { message: 'Student deleted', variant: 'success' },\n    }),\n})\n\nconst DeleteStudentAlert = ({ course, onDelete, student }) => {\n  const [open, setOpen] = useState(false)\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmit = () => {\n    setOpen(false)\n    onDelete(student)\n  }\n\n  return (\n    <>\n      <ActionButton\n        action='Delete student'\n        onClick={handleClickOpen}\n        size='small'\n      >\n        <Delete fontSize='inherit' />\n      </ActionButton>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        onClick={(ev) => ev.stopPropagation()}\n        onFocus={(ev) => ev.stopPropagation()}\n      >\n        <DialogTitle>Delete Student</DialogTitle>\n        <DialogContent>\n          <DialogContentText component='div'>\n            Are you sure you want to delete{' '}\n            <b>\n              {student.firstName} {student.lastName}\n            </b>\n            ? This action will permanently delete:\n            <ul>\n              <li>the student's account, and</li>\n              <li>all song requests</li>\n              <li>all transactions</li>\n              <li>all scores</li>\n            </ul>\n            associated with this student. This action <b>cannot be undone</b>.\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button\n            onClick={handleSubmit}\n            color='secondary'\n            variant='contained'\n            autoFocus\n          >\n            Delete\n          </Button>\n          <Button onClick={handleClose} variant='contained'>\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(() => ({}), mapDispatchToProps)(DeleteStudentAlert)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Form, Field } from 'formik'\nimport { TextField } from 'formik-material-ui'\nimport * as Yup from 'yup'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Grid,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport { Edit, PersonAdd } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport ListErrors from '../ListErrors'\nimport agent from '../../agent'\n\nimport {\n  ADD_STUDENT,\n  STUDENT_DIALOG_UNLOADED,\n  UPDATE_STUDENT,\n} from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  ...state.common.settings,\n  ...state.courses,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onAdd: (user, courseId) =>\n    dispatch({\n      type: ADD_STUDENT,\n      payload: agent.Students.add(user, courseId),\n      courseId,\n      snackbar: { message: 'Student added', variant: 'success' },\n    }),\n  onExit: () => dispatch({ type: STUDENT_DIALOG_UNLOADED }),\n  onUpdate: (user, courseId) =>\n    dispatch({\n      type: UPDATE_STUDENT,\n      payload: agent.Students.update(user),\n      courseId,\n      snackbar: { message: 'Student updated', variant: 'success' },\n    }),\n})\n\nconst StudentDialog = ({\n  course,\n  defaultStudentPassword,\n  errors,\n  inProgress,\n  onAdd,\n  onExit,\n  onUpdate,\n  student,\n}) => {\n  const [open, setOpen] = useState(false)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmitAdd = (values) => {\n    const user = { ...values }\n    const courseId = course._id\n    user.role = 'student'\n    onAdd(user, courseId)\n  }\n\n  const handleSubmitUpdate = (values) => {\n    const user = { ...student, ...values }\n    const courseId = course._id\n    onUpdate(user, courseId)\n  }\n\n  useEffect(() => {\n    // Close the dialog only if there are no errors\n    if (!inProgress && !errors) setOpen(false)\n  }, [inProgress])\n\n  return (\n    <>\n      {student ? (\n        <ActionButton\n          action='Edit student'\n          onClick={handleClickOpen}\n          size='small'\n        >\n          <Edit fontSize='inherit' />\n        </ActionButton>\n      ) : (\n        <ActionButton action='Add student' onClick={handleClickOpen}>\n          <PersonAdd />\n        </ActionButton>\n      )}\n\n      <Dialog\n        fullScreen={fullScreen}\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onExit={onExit}\n        onFocus={(ev) => ev.stopPropagation()}\n        open={open}\n      >\n        <Formik\n          initialValues={{\n            firstName: student?.firstName || '',\n            lastName: student?.lastName || '',\n            username: student?.username || '',\n            password: !student ? defaultStudentPassword : '',\n          }}\n          validationSchema={Yup.object({\n            firstName: Yup.string().required('Required'),\n            lastName: Yup.string().required('Required'),\n            username: Yup.number()\n              .typeError('Numbers only')\n              .required('Required'),\n            password: Yup.string().required(!student ? 'Required' : ''),\n          })}\n          onSubmit={async (values) => {\n            student ? handleSubmitUpdate(values) : handleSubmitAdd(values)\n          }}\n        >\n          <Form>\n            <DialogTitle>\n              {student ? 'Edit Student' : 'Add Student'}\n            </DialogTitle>\n            <DialogContent>\n              <ListErrors errors={errors} />\n              <Grid container spacing={2}>\n                <Grid item xs={12} md={6}>\n                  <Field\n                    autoFocus={student ? false : true}\n                    color='primary'\n                    component={TextField}\n                    disabled={inProgress}\n                    label='First Name'\n                    name='firstName'\n                    type='text'\n                    fullWidth\n                  />\n                </Grid>\n                <Grid item xs={12} md={6}>\n                  <Field\n                    color='primary'\n                    component={TextField}\n                    disabled={inProgress}\n                    label='Last Name'\n                    name='lastName'\n                    type='text'\n                    fullWidth\n                  />\n                </Grid>\n                <Grid item xs={12} md={6}>\n                  <Field\n                    color='primary'\n                    component={TextField}\n                    disabled={!!student || inProgress}\n                    label='Student Number'\n                    name='username'\n                    type='text'\n                    fullWidth\n                  />\n                </Grid>\n                <Grid item xs={12} md={6}>\n                  <Field\n                    color='primary'\n                    component={TextField}\n                    disabled={inProgress}\n                    label='Password'\n                    name='password'\n                    type='text'\n                    fullWidth\n                  />\n                </Grid>\n              </Grid>\n            </DialogContent>\n            <DialogActions>\n              <Button\n                color='primary'\n                disabled={inProgress}\n                type='submit'\n                variant='contained'\n              >\n                {student\n                  ? inProgress\n                    ? 'Updating...'\n                    : 'Update'\n                  : inProgress\n                  ? 'Adding...'\n                  : 'Add'}\n              </Button>\n              <Button\n                disabled={inProgress}\n                onClick={handleClose}\n                variant='contained'\n              >\n                Cancel\n              </Button>\n            </DialogActions>\n          </Form>\n        </Formik>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StudentDialog)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Form, Field } from 'formik'\nimport { TextField } from 'formik-material-ui'\nimport * as Yup from 'yup'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Grid,\n  MenuItem,\n} from '@material-ui/core'\nimport { Loop } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport ListErrors from '../ListErrors'\nimport agent from '../../agent'\n\nimport { MOVE_STUDENT } from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  ...state.courses,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onSubmit: (courseOut, courseIn) =>\n    dispatch({\n      type: MOVE_STUDENT,\n      payload: Promise.all([\n        agent.Courses.unenroll(courseOut),\n        agent.Courses.enroll(courseIn),\n      ]),\n      snackbar: { message: 'Student moved', variant: 'success' },\n    }),\n})\n\nconst StudentTransferDialog = ({\n  course,\n  courses,\n  errors,\n  inProgress,\n  onSubmit,\n  student,\n}) => {\n  const [open, setOpen] = useState(false)\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmit = (values) => {\n    if (course.slug !== values.course) {\n      const courseOut = { usernames: [student.username], slug: course.slug }\n      const courseIn = { usernames: [student.username], slug: values.course }\n      onSubmit(courseOut, courseIn)\n    }\n  }\n\n  useEffect(() => {\n    // Close the dialog only if there are no errors\n    if (!inProgress && !errors) setOpen(false)\n  }, [inProgress])\n\n  return (\n    <>\n      <ActionButton\n        action='Move student'\n        onClick={handleClickOpen}\n        size='small'\n      >\n        <Loop fontSize='inherit' />\n      </ActionButton>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        onClick={(ev) => ev.stopPropagation()}\n        onFocus={(ev) => ev.stopPropagation()}\n      >\n        <Formik\n          initialValues={{\n            course: course.slug || '',\n          }}\n          validationSchema={Yup.object({\n            course: Yup.string().required('Required'),\n          })}\n          onSubmit={async (values) => {\n            handleSubmit(values)\n          }}\n        >\n          {(formik) => (\n            <Form>\n              <DialogTitle>Move Student</DialogTitle>\n              <DialogContent>\n                <ListErrors errors={errors} />\n                <Grid container spacing={2}>\n                  <Grid item ds={12}>\n                    Move{' '}\n                    <b>\n                      {student.firstName} {student.lastName}\n                    </b>{' '}\n                    to...\n                  </Grid>\n                  <Grid item xs={12}>\n                    <Field\n                      color='primary'\n                      component={TextField}\n                      disabled={inProgress}\n                      id='course'\n                      label='Course'\n                      name='course'\n                      type='select'\n                      select\n                      fullWidth\n                    >\n                      {courses.map((course) => (\n                        <MenuItem key={course.slug} value={course.slug}>\n                          {`Period ${course.period} | ${course.name}`}\n                        </MenuItem>\n                      ))}\n                    </Field>\n                  </Grid>\n                </Grid>\n              </DialogContent>\n              <DialogActions>\n                <Button\n                  color='primary'\n                  disabled={inProgress || formik.values.course === course.slug}\n                  type='submit'\n                  variant='contained'\n                >\n                  {inProgress ? 'Moving...' : 'Move'}\n                </Button>\n                <Button onClick={handleClose} variant='contained'>\n                  Cancel\n                </Button>\n              </DialogActions>\n            </Form>\n          )}\n        </Formik>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(StudentTransferDialog)\n","import React from 'react'\nimport { Chip, Typography, makeStyles } from '@material-ui/core'\n\nimport DeleteStudentAlert from './DeleteStudentAlert'\nimport ResetStudentPasswordAlert from './ResetStudentPasswordAlert'\nimport StudentDialog from './StudentDialog'\nimport StudentTransferDialog from './StudentTransferDialog'\n\nconst useStyles = makeStyles((theme) => ({\n  row: {\n    'alignItems': 'center',\n    'borderBottom': 'solid 2px white',\n    'display': 'flex',\n    'height': theme.spacing(5),\n    'justifyContent': 'space-between',\n    'padding': theme.spacing(1),\n    '&:hover': {\n      borderBottomColor: theme.palette.secondary.main,\n    },\n  },\n  rowHeader: {\n    alignItems: 'center',\n    display: 'flex',\n  },\n  studentUsername: {\n    marginRight: theme.spacing(2),\n    minWidth: theme.spacing(12),\n  },\n}))\n\nconst StudentListRow = ({ course, student }) => {\n  const classes = useStyles()\n\n  return (\n    <div className={classes.row}>\n      <div className={classes.rowHeader}>\n        <Chip\n          color='primary'\n          label={student.username}\n          className={classes.studentUsername}\n        />\n        <Typography>\n          {student.lastName}, {student.firstName}\n        </Typography>\n      </div>\n      <div>\n        <ResetStudentPasswordAlert student={student} />\n        <StudentTransferDialog course={course} student={student} />\n        <StudentDialog course={course} student={student} />\n        <DeleteStudentAlert course={course} student={student} />\n      </div>\n    </div>\n  )\n}\n\nconst CourseStudentList = ({ course }) => {\n  return (\n    <>\n      <Typography variant='h6'>Students</Typography>{' '}\n      {course.students && course.students.length > 0 ? (\n        course.students.map((student) => {\n          return (\n            <StudentListRow\n              key={student._id}\n              course={course}\n              student={student}\n            />\n          )\n        })\n      ) : (\n        <div>\n          <Typography>No students have been added to this course</Typography>\n        </div>\n      )}\n    </>\n  )\n}\n\nexport default CourseStudentList\n","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n} from '@material-ui/core'\nimport { Delete } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport agent from '../../agent'\n\nimport { DELETE_COURSE } from '../../constants/actionTypes'\n\nconst mapDispatchToProps = (dispatch) => ({\n  onDelete: (slug) =>\n    dispatch({\n      type: DELETE_COURSE,\n      payload: agent.Courses.delete(slug),\n      snackbar: { message: 'Course deleted', variant: 'success' },\n    }),\n})\n\nconst DeleteCourseAlert = ({ course, onDelete }) => {\n  const [open, setOpen] = useState(false)\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmit = () => {\n    setOpen(false)\n    onDelete(course.slug)\n  }\n\n  return (\n    <>\n      <ActionButton action='Delete course' onClick={handleClickOpen}>\n        <Delete />\n      </ActionButton>\n\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        onClick={(ev) => ev.stopPropagation()}\n        onFocus={(ev) => ev.stopPropagation()}\n      >\n        <DialogTitle>Delete Course</DialogTitle>\n        <DialogContent>\n          <DialogContentText component='div'>\n            Are you sure you want to delete{' '}\n            <b>\n              {course.name} Period {course.period}\n            </b>\n            ? This action will permanently delete:\n            <ul>\n              <li>all student accounts</li>\n              <li>all song requests</li>\n              <li>all transactions</li>\n              <li>all scores</li>\n            </ul>\n            associated with this course. This action <b>cannot be undone</b>.\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button\n            onClick={handleSubmit}\n            color='secondary'\n            variant='contained'\n            autoFocus\n          >\n            Delete\n          </Button>\n          <Button onClick={handleClose} variant='contained'>\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(() => ({}), mapDispatchToProps)(DeleteCourseAlert)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  useMediaQuery,\n  useTheme,\n  Typography,\n} from '@material-ui/core'\nimport { Publish } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport Filedrop from '../Filedrop'\nimport Spinner from '../Spinner'\nimport agent from '../../agent'\n\nimport {\n  IMPORT_STUDENTS,\n  STUDENT_DIALOG_UNLOADED,\n} from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  ...state.common.settings,\n  ...state.courses,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onDrop: (users, courseId) =>\n    dispatch({\n      type: IMPORT_STUDENTS,\n      payload: agent.Students.import(users, courseId),\n      snackbar: { message: 'Students imported', variant: 'success' },\n    }),\n  onExit: () => dispatch({ type: STUDENT_DIALOG_UNLOADED }),\n})\n\nconst ImportStudentsDialog = ({\n  course,\n  defaultStudentPassword,\n  errors,\n  inProgress,\n  onDrop,\n  onExit,\n}) => {\n  const [open, setOpen] = useState(false)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleFiledrop = (file) => {\n    const column = Object.keys(file[0])\n    const users = file\n      .map((row, index) => {\n        // Parse csv data for Infinite Campus grade book export\n        if (index < 2) return null\n        const student = row[column[0]]\n        const user = {\n          firstName: student\n            .split(',')[1]\n            .split(/(\\s\\w)*\\s#/)[0]\n            .trim(),\n          lastName: student.split(',')[0],\n          username: student.split('#')[1],\n          password: defaultStudentPassword,\n          role: 'student',\n        }\n        return user\n      })\n      .filter((element) => element !== null)\n    onDrop(users, course._id)\n  }\n\n  useEffect(() => {\n    // Close the dialog only if there are no errors\n    if (!inProgress && !errors) setOpen(false)\n  }, [inProgress])\n\n  return (\n    <>\n      <ActionButton action='Import students' onClick={handleClickOpen}>\n        <Publish />\n      </ActionButton>\n\n      <Dialog\n        fullScreen={fullScreen}\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onExit={onExit}\n        onFocus={(ev) => ev.stopPropagation()}\n        open={open}\n      >\n        <DialogTitle>Import Students</DialogTitle>\n        <DialogContent>\n          {inProgress ? (\n            <Spinner message='Importing...' />\n          ) : (\n            <>\n              <Typography gutterBottom>\n                Students can be imported from a .csv file exported from Infinite\n                Campus\n              </Typography>\n              <Filedrop onFiledrop={handleFiledrop} />\n            </>\n          )}\n        </DialogContent>\n        <DialogActions>\n          <Button\n            disabled={inProgress}\n            onClick={handleClose}\n            variant='contained'\n          >\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ImportStudentsDialog)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport MaterialTable from 'material-table'\n\nimport agent from '../../agent'\n\nimport {\n  DELETE_TASK,\n  TASKS_DIALOG_LOADED,\n  UPDATE_TASK,\n} from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  tasks: state.tasks.tasks,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onDelete: (task) =>\n    dispatch({\n      type: DELETE_TASK,\n      payload: agent.Tasks.delete(task),\n      snackbar: { message: 'Assignment removed', variant: 'success' },\n    }),\n  onLoad: (courseId) =>\n    dispatch({\n      type: TASKS_DIALOG_LOADED,\n      payload: agent.Tasks.getAll(courseId),\n    }),\n  onUpdate: (task) =>\n    dispatch({\n      type: UPDATE_TASK,\n      payload: agent.Tasks.update(task),\n      snackbar: { message: 'Assignment updated', variant: 'success' },\n    }),\n})\n\nconst TasksTable = ({ course, onDelete, onLoad, onUpdate, tasks }) => {\n  const [data, setData] = useState([])\n\n  const mappedData = tasks.map((task) => ({\n    createdAt: new Date(task.createdAt).toDateString(),\n    title: task.title,\n    totalPoints: task.totalPoints,\n    slug: task.slug,\n  }))\n\n  const [columns] = useState([\n    { title: 'Date', field: 'createdAt', editable: 'never' },\n    { title: 'Title', field: 'title', editable: 'never' },\n    { title: 'Total Points', field: 'totalPoints' },\n  ])\n\n  useEffect(() => {\n    onLoad(course._id)\n  }, [])\n\n  useEffect(() => {\n    setData(mappedData)\n  }, [tasks])\n\n  return (\n    <MaterialTable\n      columns={columns}\n      data={data}\n      localization={{\n        body: {\n          emptyDataSourceMessage: 'No assignments found for this course',\n          editRow: {\n            deleteText:\n              'Delete assignment? This will delete all scores for this assignment.',\n          },\n        },\n      }}\n      options={{ actionsColumnIndex: -1, paging: false, toolbar: false }}\n      editable={{\n        onRowUpdate: (newData, oldData) =>\n          new Promise((resolve, reject) => {\n            const dataUpdate = [...data]\n            const index = oldData.tableData.id\n            dataUpdate[index] = newData\n            setData([...dataUpdate])\n            onUpdate(newData)\n            resolve()\n          }),\n        onRowDelete: (oldData) =>\n          new Promise((resolve, reject) => {\n            const newData = [...data]\n            const index = oldData.tableData.id\n            newData.splice(index, 1)\n            setData([...newData])\n            onDelete(oldData)\n            resolve()\n          }),\n      }}\n    />\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TasksTable)\n","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport { Assignment } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport ListErrors from '../ListErrors'\nimport TasksTable from './TasksTable'\n\nimport { TASKS_DIALOG_UNLOADED } from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  dialog: {\n    '& > .MuiDialog-container > .MuiPaper-root': {\n      [theme.breakpoints.up('lg')]: {\n        minHeight: theme.spacing(54),\n        width: theme.spacing(100),\n      },\n    },\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.tasks,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onExit: () => dispatch({ type: TASKS_DIALOG_UNLOADED }),\n})\n\nconst TasksDialog = ({ course, errors, inProgress, onExit }) => {\n  const [open, setOpen] = useState(false)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n  const classes = useStyles()\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  return (\n    <>\n      <ActionButton action='Manage assignments' onClick={handleClickOpen}>\n        <Assignment />\n      </ActionButton>\n\n      <Dialog\n        className={classes.dialog}\n        fullScreen={fullScreen}\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onExit={onExit}\n        onFocus={(ev) => ev.stopPropagation()}\n        open={open}\n      >\n        <DialogTitle>Manage Assignments</DialogTitle>\n        <DialogContent>\n          <ListErrors errors={errors} />\n          <TasksTable course={course} />\n        </DialogContent>\n        <DialogActions>\n          <Button\n            disabled={inProgress}\n            onClick={handleClose}\n            variant='contained'\n          >\n            Close\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TasksDialog)\n","import React, { useState } from 'react'\nimport {\n  Avatar,\n  ExpansionPanel,\n  ExpansionPanelDetails,\n  ExpansionPanelSummary,\n  Typography,\n  makeStyles,\n} from '@material-ui/core'\nimport { ExpandMore } from '@material-ui/icons'\n\nimport CourseDialog from './CourseDialog'\nimport CourseStudentList from './CourseStudentList'\nimport DeleteCourseAlert from './DeleteCourseAlert'\nimport ImportStudentsDialog from './ImportStudentsDialog'\nimport StudentDialog from './StudentDialog'\nimport TasksDialog from './TasksDialog'\n\nconst useStyles = makeStyles((theme) => ({\n  courseDetails: {\n    display: 'block',\n  },\n  courseHeader: {\n    alignItems: 'center',\n    display: 'flex',\n    justifyContent: 'space-between',\n    width: '100%',\n  },\n  coursePeriod: {\n    backgroundColor: theme.palette.secondary.main,\n    marginRight: theme.spacing(2),\n  },\n  courseTitle: {\n    flexGrow: '1',\n  },\n}))\n\nconst CourseList = ({ courses }) => {\n  const [expanded, setExpanded] = useState(false)\n\n  const classes = useStyles()\n\n  const handleChange = (panel) => (ev, isExpanded) => {\n    setExpanded(isExpanded ? panel : false)\n  }\n\n  return (\n    <>\n      {courses?.length > 0 ? (\n        courses.map((course) => {\n          return (\n            <ExpansionPanel\n              expanded={expanded === course._id}\n              key={course._id}\n              onChange={handleChange(course._id)}\n            >\n              <ExpansionPanelSummary expandIcon={<ExpandMore />}>\n                <div className={classes.courseHeader}>\n                  <Avatar className={classes.coursePeriod}>\n                    {course.period}\n                  </Avatar>\n                  <Typography className={classes.courseTitle} variant='h5'>\n                    {course.name}\n                  </Typography>\n                  <TasksDialog course={course} />\n                  <StudentDialog course={course} />\n                  <ImportStudentsDialog course={course} />\n                  <CourseDialog course={course} />\n                  <DeleteCourseAlert course={course} />\n                </div>\n              </ExpansionPanelSummary>\n              <ExpansionPanelDetails className={classes.courseDetails}>\n                <CourseStudentList course={course} />\n              </ExpansionPanelDetails>\n            </ExpansionPanel>\n          )\n        })\n      ) : (\n        <Typography>You have no courses</Typography>\n      )}\n    </>\n  )\n}\n\nexport default CourseList\n","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\n\nimport Alert from '../Alert'\nimport CourseDialog from './CourseDialog'\nimport CourseList from './CourseList'\nimport PageHeader from '../PageHeader'\nimport Spinner from '../Spinner'\nimport agent from '../../agent'\n\nimport {\n  COURSES_PAGE_LOADED,\n  COURSES_PAGE_UNLOADED,\n} from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  ...state.courses,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onLoad: () =>\n    dispatch({ type: COURSES_PAGE_LOADED, payload: agent.Courses.getAll() }),\n  onUnload: () => dispatch({ type: COURSES_PAGE_UNLOADED }),\n})\n\nconst TeacherCourses = ({\n  courses,\n  importCount,\n  onLoad,\n  onUnload,\n  pageLoaded,\n}) => {\n  useEffect(() => {\n    onLoad()\n\n    return () => {\n      onUnload()\n    }\n  }, [])\n\n  return (\n    <>\n      <PageHeader title='Manage Courses'>\n        <CourseDialog />\n      </PageHeader>\n      {importCount !== null && <Alert>{importCount} students imported</Alert>}\n      {pageLoaded ? (\n        <Spinner message='Loading...' />\n      ) : (\n        <CourseList courses={courses} />\n      )}\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TeacherCourses)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  ButtonGroup,\n  Chip,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Fab,\n  FormControl,\n  FormControlLabel,\n  Grid,\n  Radio,\n  RadioGroup,\n  Tooltip,\n  Typography,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport { Alert, AlertTitle } from '@material-ui/lab'\nimport { PlaylistAddCheck, ThumbDown, ThumbUp } from '@material-ui/icons'\n\nimport ListErrors from '../ListErrors'\nimport agent from '../../agent'\n\nimport {\n  SONG_REQUESTS_DIALOG_UNLOADED,\n  UPDATE_SONG_REQUEST,\n} from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  dialog: {\n    '& > .MuiDialog-container > .MuiPaper-root': {\n      [theme.breakpoints.up('lg')]: {\n        minHeight: theme.spacing(54),\n        width: theme.spacing(100),\n      },\n    },\n  },\n  icon: {\n    marginRight: theme.spacing(1),\n  },\n  panel: {\n    minWidth: theme.spacing(40),\n    maxWidth: theme.spacing(60),\n  },\n  removalAlert: {\n    backgroundColor: theme.palette.error.light,\n    border: `2px solid ${theme.palette.error.dark}`,\n    borderRadius: theme.spacing(2),\n    color: theme.palette.common.white,\n    fontSize: theme.typography.h6.fontSize,\n    padding: theme.spacing(1),\n    textAlign: 'center',\n    textTransform: 'uppercase',\n  },\n  selected: {\n    backgroundColor: theme.palette.primary.main,\n  },\n  songInfo: {\n    marginBottom: theme.spacing(4),\n  },\n  statusButton: {\n    '&:hover': {\n      backgroundColor: theme.palette.primary.light,\n    },\n  },\n  statusDescription: {\n    backgroundColor: theme.palette.grey[100],\n    borderRadius: theme.spacing(1),\n    marginTop: theme.spacing(2),\n    padding: theme.spacing(2),\n  },\n  studentInfo: {\n    'alignItems': 'center',\n    'display': 'flex',\n    'marginTop': theme.spacing(4),\n    '& > div': {\n      marginRight: theme.spacing(1),\n    },\n    [theme.breakpoints.up('md')]: {\n      borderTopColor: theme.palette.primary.main,\n      borderTopStyle: 'dotted',\n      borderTopWidth: '4px',\n      paddingTop: theme.spacing(2),\n    },\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.songs,\n  songRemovalPurchaseAmount: state.common.settings.songRemovalPurchaseAmount,\n  songRemovalRefundAmount: state.common.settings.songRemovalRefundAmount,\n  songRequestPurchaseAmount: state.common.settings.songRequestPurchaseAmount,\n  // spotifyTokens: state.common.settings.spotifyTokens,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onExit: () => dispatch({ type: SONG_REQUESTS_DIALOG_UNLOADED }),\n  onSubmit: (song) =>\n    dispatch({\n      type: UPDATE_SONG_REQUEST,\n      payload: agent.Songs.update(song),\n    }),\n})\n\nconst ProcessSongRequestsDialog = ({\n  courses,\n  errors,\n  inProgress,\n  onExit,\n  onSubmit,\n  songRemovalPurchaseAmount,\n  songRemovalRefundAmount,\n  songRequestPurchaseAmount,\n  // spotifyTokens,\n}) => {\n  const [open, setOpen] = useState(false)\n  const [song, setSong] = useState(null)\n  const [status, setStatus] = useState(null)\n  const [statusDescription, setStatusDescription] = useState(null)\n  const [skippedSongs, setSkippedSongs] = useState([])\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n  const classes = useStyles()\n\n  const getLyricSearchUrl = (artist, title) => {\n    const url = `http://www.google.com/search?q=${encodeURIComponent(\n      'lyrics: ' + title + ' by ' + artist\n    )}`\n    return url\n  }\n\n  const getSpotifySearchUrl = (artist, title) => {\n    const url = `https://open.spotify.com/search/${encodeURIComponent(\n      title + ' ' + artist\n    )}`\n    return url\n  }\n\n  const getNextSong = () => {\n    setSong(null)\n    if (courses.length > 0) {\n      for (const course of courses) {\n        if (course.songs.length > 0) {\n          const nextSong = course.songs.find(\n            (song) =>\n              song.status.startsWith('pending') &&\n              !skippedSongs.includes(song._id)\n          )\n          if (nextSong) {\n            nextSong.period = course.period\n            setSong(nextSong)\n            break\n          }\n        }\n      }\n    }\n  }\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n    setStatus(null)\n    setStatusDescription(null)\n    setSkippedSongs([])\n  }\n\n  const handleStatusButtonClick = (status) => {\n    setStatus(status)\n  }\n\n  const handleStatusDescriptionChange = (ev) => {\n    setStatusDescription(ev.target.value)\n  }\n\n  const handleSkip = () => {\n    setSkippedSongs([...skippedSongs, song._id])\n  }\n\n  const handleSubmitApproval = async () => {\n    onSubmit({\n      amount: songRequestPurchaseAmount,\n      id: song._id,\n      status,\n      statusDescription,\n    })\n    setStatus(null)\n    setStatusDescription(null)\n  }\n\n  const handleSubmitRemoval = async () => {\n    onSubmit({\n      id: song._id,\n      purchaseAmount: songRemovalPurchaseAmount,\n      refundAmount: songRemovalRefundAmount,\n      status: 'removed',\n      statusDescription: `${song.removedBy.firstName} ${song.removedBy.lastName} paid to remove this song`,\n    })\n  }\n\n  useEffect(() => {\n    getNextSong()\n  }, [courses])\n\n  useEffect(() => {\n    getNextSong()\n  }, [skippedSongs])\n\n  return (\n    <>\n      <Fab color='primary' onClick={handleClickOpen} variant='extended'>\n        <PlaylistAddCheck className={classes.icon} />\n        Process requests\n      </Fab>\n\n      <Dialog\n        className={classes.dialog}\n        fullScreen={fullScreen}\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onExit={onExit}\n        onFocus={(ev) => ev.stopPropagation()}\n        open={open}\n      >\n        <DialogTitle>Process Song Requests</DialogTitle>\n        <DialogContent>\n          <ListErrors errors={errors} />\n          {song ? (\n            song.status !== 'pending removal' ? (\n              <Grid container spacing={2}>\n                <Grid item xs={12} md={6}>\n                  <div className={classes.panel}>\n                    <div className={classes.songInfo}>\n                      <Typography variant='h6'>{song.title}</Typography>\n                      <Typography\n                        color='textSecondary'\n                        variant='body1'\n                        gutterBottom\n                      >\n                        Song\n                      </Typography>\n                      <Typography variant='h6'>{song.artist}</Typography>\n                      <Typography color='textSecondary' variant='body1'>\n                        Artist\n                      </Typography>\n                    </div>\n\n                    <ButtonGroup>\n                      <Button\n                        href={getLyricSearchUrl(song.artist, song.title)}\n                        target='_blank'\n                      >\n                        Search Lyrics\n                      </Button>\n                      <Button\n                        href={getSpotifySearchUrl(song.artist, song.title)}\n                        target='_blank'\n                      >\n                        Search Spotify\n                      </Button>\n                    </ButtonGroup>\n\n                    <div className={classes.studentInfo}>\n                      <Chip color='secondary' label={song.period} />\n                      <Typography>\n                        {song.student.firstName} {song.student.lastName}\n                      </Typography>\n                    </div>\n                  </div>\n                </Grid>\n\n                <Grid item xs={12} md={6}>\n                  <div className={classes.panel}>\n                    <Typography variant='h6'>Status</Typography>\n\n                    <ButtonGroup fullWidth size='large'>\n                      <Tooltip arrow enterTouchDelay={0} title='Approve'>\n                        <Button\n                          className={`${classes.statusButton} ${\n                            status === 'approved' && classes.selected\n                          }`}\n                          onClick={() => handleStatusButtonClick('approved')}\n                        >\n                          <ThumbUp />\n                        </Button>\n                      </Tooltip>\n                      <Tooltip arrow enterTouchDelay={0} title='Reject'>\n                        <Button\n                          className={`${classes.statusButton} ${\n                            status === 'rejected' && classes.selected\n                          }`}\n                          onClick={() => handleStatusButtonClick('rejected')}\n                        >\n                          <ThumbDown />\n                        </Button>\n                      </Tooltip>\n                    </ButtonGroup>\n                    {status === 'approved' && (\n                      <div className={classes.statusDescription}>\n                        <Typography gutterBottom>\n                          <strong>Condition for Approval</strong> (optional)\n                        </Typography>\n                        <FormControl component='fieldset'>\n                          <RadioGroup\n                            name='statusDescription'\n                            value={statusDescription}\n                            onChange={handleStatusDescriptionChange}\n                          >\n                            <FormControlLabel\n                              value='Clean version'\n                              control={<Radio />}\n                              label='Clean version'\n                            />\n                            <FormControlLabel\n                              value='Instrumental version'\n                              control={<Radio />}\n                              label='Instrumental version'\n                            />\n                            <FormControlLabel\n                              value='Picked my best guess'\n                              control={<Radio />}\n                              label='Picked my best guess'\n                            />\n                          </RadioGroup>\n                        </FormControl>\n                      </div>\n                    )}\n                    {status === 'rejected' && (\n                      <div className={classes.statusDescription}>\n                        <Typography gutterBottom>\n                          <strong>Reason for Rejection</strong> (optional)\n                        </Typography>\n                        <FormControl component='fieldset'>\n                          <RadioGroup\n                            name='statusDescription'\n                            value={statusDescription}\n                            onChange={handleStatusDescriptionChange}\n                          >\n                            <FormControlLabel\n                              value='Inappropriate content (language, drugs, sex, and/or violence)'\n                              control={<Radio />}\n                              label='Inappropriate content (language, drugs, sex, and/or violence)'\n                            />\n                            <FormControlLabel\n                              value='Not available on Spotify'\n                              control={<Radio />}\n                              label='Not available on Spotify'\n                            />\n                            <FormControlLabel\n                              value='other'\n                              control={<Radio />}\n                              label='Other'\n                            />\n                          </RadioGroup>\n                        </FormControl>\n                      </div>\n                    )}\n                  </div>\n                </Grid>\n              </Grid>\n            ) : (\n              <Grid container spacing={2}>\n                <Grid item xs={12}>\n                  <div className={classes.panel}>\n                    <div className={classes.songInfo}>\n                      <Typography variant='h6'>{song.title}</Typography>\n                      <Typography\n                        color='textSecondary'\n                        variant='body1'\n                        gutterBottom\n                      >\n                        Song\n                      </Typography>\n                      <Typography variant='h6'>{song.artist}</Typography>\n                      <Typography color='textSecondary' variant='body1'>\n                        Artist\n                      </Typography>\n                    </div>\n\n                    <div className={classes.removalAlert}>\n                      Removal Requested by{' '}\n                      {`${song.removedBy.firstName} ${song.removedBy.lastName}`}\n                    </div>\n\n                    <div className={classes.studentInfo}>\n                      <Chip color='secondary' label={song.period} />\n                      <Typography>\n                        {song.student.firstName} {song.student.lastName}\n                      </Typography>\n                    </div>\n                  </div>\n                </Grid>\n              </Grid>\n            )\n          ) : (\n            <Alert severity='info'>\n              <AlertTitle>All caught up!</AlertTitle>\n              There are no songs to process at this time\n            </Alert>\n          )}\n        </DialogContent>\n\n        <DialogActions>\n          {song &&\n            (song.status !== 'pending removal' ? (\n              <Button\n                color='primary'\n                disabled={inProgress}\n                onClick={handleSubmitApproval}\n                variant='contained'\n              >\n                {inProgress ? 'Saving...' : 'Save & Continue'}\n              </Button>\n            ) : (\n              <Button\n                color='secondary'\n                disabled={inProgress}\n                onClick={handleSubmitRemoval}\n                variant='contained'\n              >\n                {inProgress ? 'Removing...' : 'Remove & Continue'}\n              </Button>\n            ))}\n          {song && (\n            <Button\n              disabled={inProgress}\n              onClick={handleSkip}\n              variant='contained'\n            >\n              Skip\n            </Button>\n          )}\n          <Button\n            disabled={inProgress}\n            onClick={handleClose}\n            variant='contained'\n          >\n            {song ? 'Cancel' : 'Close'}\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ProcessSongRequestsDialog)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport MaterialTable from 'material-table'\nimport { Chip, Tooltip } from '@material-ui/core'\nimport { InfoOutlined } from '@material-ui/icons'\n\nimport PageHeader from '../PageHeader'\nimport ProcessSongRequestsDialog from './ProcessSongRequestsDialog'\nimport agent from '../../agent'\n\nimport {\n  DELETE_SONG_REQUEST,\n  SONGS_PAGE_UNLOADED,\n  TEACHER_SONGS_PAGE_LOADED,\n} from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({ ...state.songs })\n\nconst mapDispatchToProps = (dispatch) => ({\n  onDelete: (id) =>\n    dispatch({\n      type: DELETE_SONG_REQUEST,\n      payload: agent.Songs.delete(id),\n      snackbar: { message: 'Song request removed', variant: 'success' },\n    }),\n  onLoad: () =>\n    dispatch({\n      type: TEACHER_SONGS_PAGE_LOADED,\n      payload: agent.Songs.forTeacher(),\n    }),\n  onUnload: () => dispatch({ type: SONGS_PAGE_UNLOADED }),\n})\n\nconst TeacherSongs = ({ courses, onDelete, onLoad, onUnload }) => {\n  const [data, setData] = useState([])\n\n  const mappedData = courses\n    .map((course) =>\n      course.songs.map((song) => ({\n        createdAt: new Date(song.createdAt).toDateString(),\n        title: song.title,\n        artist: song.artist,\n        purchasedBy: `${song.student.firstName} ${song.student.lastName}`,\n        period: course.period,\n        status: song.status,\n        statusDescription: song.statusDescription,\n        _id: song._id,\n      }))\n    )\n    .flat()\n\n  const [columns] = useState([\n    { title: 'Request Date', field: 'createdAt', editable: 'never' },\n    { title: 'Song Title', field: 'title' },\n    { title: 'Song Artist', field: 'artist' },\n    { title: 'Purchased by', field: 'purchasedBy', editable: 'never' },\n    {\n      title: 'Period',\n      field: 'period',\n      editable: 'never',\n      render: (rowData, renderType) =>\n        renderType === 'row' ? (\n          <Chip label={rowData.period} color='secondary' />\n        ) : (\n          <Chip label={rowData} color='secondary' />\n        ),\n    },\n    {\n      title: 'Status',\n      field: 'status',\n      lookup: {\n        'approved': 'approved',\n        'pending': 'pending', // @todo: remove [for backwards compatibility]\n        'pending approval': 'pending approval',\n        'pending removal': 'pending removal',\n        'rejected': 'rejected',\n        'removed': 'removed',\n      },\n      render: (rowData, renderType) =>\n        renderType === 'row' ? (\n          <span style={{ alignItems: 'center', display: 'flex' }}>\n            {rowData.statusDescription ? (\n              <>\n                {rowData.status}\n                <Tooltip\n                  arrow\n                  color='primary'\n                  enterTouchDelay={0}\n                  title={rowData.statusDescription}\n                >\n                  <InfoOutlined style={{ marginLeft: '8px' }} />\n                </Tooltip>\n              </>\n            ) : (\n              rowData.status\n            )}\n          </span>\n        ) : (\n          <span>{rowData}</span>\n        ),\n    },\n  ])\n\n  useEffect(() => {\n    onLoad()\n\n    return () => {\n      return onUnload()\n    }\n  }, [])\n\n  useEffect(() => {\n    setData(mappedData)\n  }, [courses])\n\n  return (\n    <>\n      <PageHeader title='Manage Song Requests'>\n        <ProcessSongRequestsDialog />\n      </PageHeader>\n\n      <MaterialTable\n        title='Song Requests'\n        columns={columns}\n        data={data}\n        localization={{\n          body: {\n            emptyDataSourceMessage: 'No song requests have been submitted',\n            editRow: {\n              deleteText: 'Delete song request?',\n            },\n          },\n        }}\n        options={{ actionsColumnIndex: -1, paging: false, grouping: true }}\n        editable={{\n          onRowDelete: (oldData) =>\n            new Promise((resolve, reject) => {\n              const dataDelete = [...data]\n              const index = oldData.tableData.id\n              dataDelete.splice(index, 1)\n              setData([...dataDelete])\n              onDelete(oldData._id)\n              resolve()\n            }),\n        }}\n      />\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TeacherSongs)\n","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  makeStyles,\n} from '@material-ui/core'\n\nimport agent from '../../agent'\n\nimport { WHATS_NEW_FLAGS_RESET } from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  button: {\n    marginRight: theme.spacing(2),\n  },\n}))\n\nconst mapDispatchToProps = (dispatch) => ({\n  onReset: (role) =>\n    dispatch({\n      type: WHATS_NEW_FLAGS_RESET,\n      payload: agent.Teachers.resetFlags(role),\n      snackbar: {\n        message: `${role.charAt(0).toUpperCase() + role.slice(1)} flags reset`,\n        variant: 'success',\n      },\n    }),\n})\n\nconst ResetWhatsNewAlert = ({ onReset }) => {\n  const [open, setOpen] = useState(false)\n\n  const classes = useStyles()\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmit = (role) => {\n    setOpen(false)\n    onReset(role)\n  }\n\n  return (\n    <>\n      <Button className={classes.button} onClick={handleClickOpen} size='small'>\n        Reset Viewed Changes\n      </Button>\n      <Dialog\n        open={open}\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onFocus={(ev) => ev.stopPropagation()}\n      >\n        <DialogTitle>Reset Viewed Changes</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Reset viewed changes flag for all student or teacher accounts?\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button\n            onClick={() => handleSubmit('student')}\n            color='secondary'\n            variant='contained'\n            autoFocus\n          >\n            Reset Students\n          </Button>\n          <Button\n            onClick={() => handleSubmit('teacher')}\n            color='secondary'\n            variant='contained'\n            autoFocus\n          >\n            Reset Teachers\n          </Button>\n          <Button onClick={handleClose} variant='contained'>\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(() => ({}), mapDispatchToProps)(ResetWhatsNewAlert)\n","import React, { useState, useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Form, Field } from 'formik'\nimport { TextField } from 'formik-material-ui'\nimport * as Yup from 'yup'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Fab,\n  Grid,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport { Add, Edit } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport ListErrors from '../ListErrors'\nimport agent from '../../agent'\n\nimport {\n  ADD_TEACHER,\n  TEACHER_DIALOG_UNLOADED,\n  UPDATE_TEACHER,\n} from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  icon: {\n    marginRight: theme.spacing(1),\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.teachers,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onAdd: (user) =>\n    dispatch({\n      type: ADD_TEACHER,\n      payload: agent.Auth.register(user),\n      snackbar: { message: 'Teacher added', variant: 'success' },\n    }),\n  onExit: () => dispatch({ type: TEACHER_DIALOG_UNLOADED }),\n  onUpdate: (user) =>\n    dispatch({\n      type: UPDATE_TEACHER,\n      payload: agent.Teachers.update(user),\n      snackbar: { message: 'Teacher updated', variant: 'success' },\n    }),\n})\n\nconst TeacherDialog = ({\n  errors,\n  inProgress,\n  onAdd,\n  onExit,\n  onUpdate,\n  teacher,\n}) => {\n  const [open, setOpen] = useState(false)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n  const classes = useStyles()\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmitAdd = (values) => {\n    onAdd({ ...values, role: 'teacher' })\n  }\n\n  const handleSubmitUpdate = (values) => {\n    onUpdate({ ...teacher, ...values })\n  }\n\n  useEffect(() => {\n    // Close the dialog only if there are no errors\n    if (!inProgress && !errors) setOpen(false)\n  }, [inProgress])\n\n  return (\n    <>\n      {teacher ? (\n        <ActionButton action='Update teacher' onClick={handleClickOpen}>\n          <Edit />\n        </ActionButton>\n      ) : (\n        <Fab color='primary' onClick={handleClickOpen} variant='extended'>\n          <Add className={classes.icon} />\n          Add teacher\n        </Fab>\n      )}\n      <Dialog\n        fullScreen={fullScreen}\n        open={open}\n        onClose={handleClose}\n        onClick={(ev) => ev.stopPropagation()}\n        onExit={onExit}\n        onFocus={(ev) => ev.stopPropagation()}\n      >\n        <Formik\n          initialValues={{\n            firstName: teacher?.firstName || '',\n            lastName: teacher?.lastName || '',\n            username: teacher?.username || '',\n            password: '',\n          }}\n          validationSchema={Yup.object({\n            firstName: Yup.string().required('Required'),\n            lastName: Yup.string().required('Required'),\n            username: Yup.string().required('Required'),\n            password: Yup.string().required(!teacher ? 'Required' : ''),\n          })}\n          onSubmit={async (values) => {\n            teacher ? handleSubmitUpdate(values) : handleSubmitAdd(values)\n          }}\n        >\n          <Form>\n            <DialogTitle>\n              {teacher ? 'Edit Teacher' : 'Add Teacher'}\n            </DialogTitle>\n            <DialogContent>\n              <ListErrors errors={errors} />\n              <Grid container spacing={2}>\n                <Grid item xs={12} md={6}>\n                  <Field\n                    autoFocus={teacher ? false : true}\n                    color='primary'\n                    component={TextField}\n                    disabled={inProgress}\n                    label='First Name'\n                    name='firstName'\n                    type='text'\n                    fullWidth\n                  />\n                </Grid>\n                <Grid item xs={12} md={6}>\n                  <Field\n                    color='primary'\n                    component={TextField}\n                    disabled={inProgress}\n                    label='Last Name'\n                    name='lastName'\n                    type='text'\n                    fullWidth\n                  />\n                </Grid>\n                <Grid item xs={12} md={6}>\n                  <Field\n                    color='primary'\n                    component={TextField}\n                    disabled={!!teacher || inProgress}\n                    label='Username'\n                    name='username'\n                    type='text'\n                    fullWidth\n                  />\n                </Grid>\n                <Grid item xs={12} md={6}>\n                  <Field\n                    color='primary'\n                    component={TextField}\n                    disabled={inProgress}\n                    label='Password'\n                    name='password'\n                    type='text'\n                    fullWidth\n                  />\n                </Grid>\n              </Grid>\n            </DialogContent>\n            <DialogActions>\n              <Button\n                color='primary'\n                disabled={inProgress}\n                type='submit'\n                variant='contained'\n              >\n                {teacher\n                  ? inProgress\n                    ? 'Updating...'\n                    : 'Update'\n                  : inProgress\n                  ? 'Adding...'\n                  : 'Add'}\n              </Button>\n              <Button\n                disabled={inProgress}\n                onClick={handleClose}\n                variant='contained'\n              >\n                Cancel\n              </Button>\n            </DialogActions>\n          </Form>\n        </Formik>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TeacherDialog)\n","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n} from '@material-ui/core'\nimport { Delete } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport agent from '../../agent'\n\nimport { DELETE_TEACHER } from '../../constants/actionTypes'\n\nconst mapDispatchToProps = (dispatch) => ({\n  onDelete: (user) =>\n    dispatch({\n      type: DELETE_TEACHER,\n      payload: agent.Teachers.delete(user),\n      snackbar: { message: 'Teacher deleted', variant: 'success' },\n    }),\n})\n\nconst DeleteTeacherAlert = ({ onDelete, teacher }) => {\n  const [open, setOpen] = useState(false)\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmit = () => {\n    setOpen(false)\n    onDelete(teacher)\n  }\n\n  return (\n    <>\n      <ActionButton action='Delete teacher' onClick={handleClickOpen}>\n        <Delete />\n      </ActionButton>\n      <Dialog\n        open={open}\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onFocus={(ev) => ev.stopPropagation()}\n      >\n        <DialogTitle>Delete Teacher</DialogTitle>\n        <DialogContent>\n          <DialogContentText component='div'>\n            Are you sure you want to delete{' '}\n            <b>\n              {teacher.firstName} {teacher.lastName}\n            </b>\n            ? This action will permanently delete:\n            <ul>\n              <li>all student accounts</li>\n              <li>all song requests</li>\n              <li>all transactions</li>\n              <li>all products</li>\n              <li>all scores</li>\n            </ul>\n            associated with this teacher. This action <b>cannot be undone</b>.\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button\n            onClick={handleSubmit}\n            color='secondary'\n            variant='contained'\n            autoFocus\n          >\n            Delete\n          </Button>\n          <Button onClick={handleClose} variant='contained'>\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(() => ({}), mapDispatchToProps)(DeleteTeacherAlert)\n","import React, { useState } from 'react'\nimport {\n  Chip,\n  ExpansionPanel,\n  ExpansionPanelDetails,\n  ExpansionPanelSummary,\n  Typography,\n  makeStyles,\n} from '@material-ui/core'\nimport { ExpandMore } from '@material-ui/icons'\n\nimport TeacherDialog from './TeacherDialog'\nimport DeleteTeacherAlert from './DeleteTeacherAlert'\n\nconst useStyles = makeStyles((theme) => ({\n  teacherDetails: {\n    display: 'block',\n  },\n  teacherHeader: {\n    alignItems: 'center',\n    display: 'flex',\n    justifyContent: 'space-between',\n    width: '100%',\n  },\n  teacherUsername: {\n    marginRight: theme.spacing(2),\n    minWidth: theme.spacing(12),\n  },\n  teacherName: {\n    flexGrow: '1',\n  },\n}))\n\nconst TeacherList = ({ teachers }) => {\n  const [expanded, setExpanded] = useState(false)\n\n  const classes = useStyles()\n\n  const handleChange = (panel) => (ev, isExpanded) => {\n    setExpanded(isExpanded ? panel : false)\n  }\n\n  return (\n    <>\n      {teachers?.length > 0 ? (\n        teachers.map((teacher) => {\n          return (\n            <ExpansionPanel\n              expanded={expanded === teacher.username}\n              key={teacher.username}\n              onChange={handleChange(teacher.username)}\n            >\n              <ExpansionPanelSummary expandIcon={<ExpandMore />}>\n                <div className={classes.teacherHeader}>\n                  <Chip\n                    color='secondary'\n                    label={teacher.username}\n                    className={classes.teacherUsername}\n                  />\n                  <Typography className={classes.teacherName} variant='h5'>\n                    {teacher.firstName} {teacher.lastName}\n                  </Typography>\n                  <TeacherDialog teacher={teacher} />\n                  <DeleteTeacherAlert teacher={teacher} />\n                </div>\n              </ExpansionPanelSummary>\n              <ExpansionPanelDetails className={classes.teacherDetails}>\n                <Typography variant='h6'>Courses</Typography>\n                {teacher.courses && teacher.courses.length > 0 ? (\n                  teacher.courses.map((course) => {\n                    return (\n                      <div key={course._id}>\n                        <Typography>\n                          Period {course.period} | {course.name} |{' '}\n                          {course.students.length} students\n                        </Typography>\n                      </div>\n                    )\n                  })\n                ) : (\n                  <div>\n                    <Typography>No courses have been created</Typography>\n                  </div>\n                )}\n              </ExpansionPanelDetails>\n            </ExpansionPanel>\n          )\n        })\n      ) : (\n        <Typography>No teachers found</Typography>\n      )}\n    </>\n  )\n}\n\nexport default TeacherList\n","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\n\nimport PageHeader from './../PageHeader'\nimport ResetWhatsNewAlert from './ResetWhatsNewAlert'\nimport TeacherDialog from './TeacherDialog'\nimport TeacherList from './TeacherList'\nimport agent from '../../agent'\n\nimport {\n  MANAGE_TEACHERS_PAGE_LOADED,\n  MANAGE_TEACHERS_PAGE_UNLOADED,\n} from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  ...state.teachers,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onLoad: () =>\n    dispatch({\n      type: MANAGE_TEACHERS_PAGE_LOADED,\n      payload: agent.Teachers.getAll(),\n    }),\n  onUnload: () => dispatch({ type: MANAGE_TEACHERS_PAGE_UNLOADED }),\n})\n\nconst ManageTeachers = ({ onLoad, onUnload, teachers }) => {\n  useEffect(() => {\n    onLoad()\n\n    return () => {\n      onUnload()\n    }\n  }, [])\n\n  return (\n    <>\n      <PageHeader title={'Manage Teachers'}>\n        <ResetWhatsNewAlert />\n        <TeacherDialog />\n      </PageHeader>\n      <TeacherList teachers={teachers} />\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ManageTeachers)\n","import React from 'react'\nimport { Typography, makeStyles } from '@material-ui/core'\n\nconst useStyles = makeStyles((theme) => ({\n  header: {\n    backgroundColor: 'white',\n    paddingLeft: theme.spacing(1),\n    paddingRight: theme.spacing(1),\n    position: 'absolute',\n    top: '-18px',\n  },\n  img: {\n    maxHeight: '100%',\n    maxWidth: '100%',\n    minWidth: '20px',\n  },\n  window: {\n    alignItems: 'center',\n    display: 'flex',\n    borderColor: theme.palette.secondary.main,\n    borderStyle: 'solid',\n    borderWidth: '4px',\n    height: '300px',\n    justifyContent: 'center',\n    padding: theme.spacing(2),\n    position: 'relative',\n  },\n}))\n\nconst ImagePreview = ({ src }) => {\n  const classes = useStyles()\n\n  return (\n    <div className={classes.window}>\n      <Typography variant='h6' className={classes.header}>\n        Image Preview\n      </Typography>\n      {src ? (\n        <img className={classes.img} src={src} />\n      ) : (\n        <Typography>No photo url provided</Typography>\n      )}\n    </div>\n  )\n}\n\nexport default ImagePreview\n","import React from 'react'\nimport { TextField } from '@material-ui/core'\n\nconst TextFieldLimit = (props) => {\n  return (\n    <TextField\n      error={Boolean(props.errors)}\n      inputProps={{ maxLength: props.limit }}\n      helperText={\n        props.errors\n          ? `${props.errors} | ${props.value.length}/${props.limit}`\n          : `${props.value.length}/${props.limit}`\n      }\n      {...props}\n    />\n  )\n}\n\nexport default TextFieldLimit\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Form, Field } from 'formik'\nimport { TextField } from 'formik-material-ui'\nimport * as Yup from 'yup'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Fab,\n  Grid,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport { Add, Edit } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport ImagePreview from '../ImagePreview'\nimport ListErrors from '../ListErrors'\nimport TextFieldLimit from '../TextFieldLimit'\nimport agent from '../../agent'\n\nimport {\n  ADD_PRODUCT,\n  PRODUCT_DIALOG_UNLOADED,\n  UPDATE_PRODUCT,\n} from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  addIcon: {\n    marginRight: theme.spacing(1),\n  },\n  updateIcon: {\n    'color': 'rgba(255, 255, 255, 0.7)',\n    '&:hover': { backgroundColor: 'rgba(255, 255, 255, 0.3)', color: 'white' },\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.products,\n  currentUser: state.common.currentUser,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onAdd: (product) =>\n    dispatch({\n      type: ADD_PRODUCT,\n      payload: agent.Products.add(product),\n      snackbar: { message: 'Product added', variant: 'success' },\n    }),\n  onExit: () => dispatch({ type: PRODUCT_DIALOG_UNLOADED }),\n  onUpdate: (product) =>\n    dispatch({\n      type: UPDATE_PRODUCT,\n      payload: agent.Products.update(product),\n      snackbar: { message: 'Product updated', variant: 'success' },\n    }),\n})\n\nconst ProductDialog = ({\n  currentUser,\n  product,\n  errors,\n  inProgress,\n  onAdd,\n  onExit,\n  onUpdate,\n}) => {\n  const CHAR_LIMITS = { name: 60, description: 140 }\n\n  const [open, setOpen] = useState(false)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n  const classes = useStyles()\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmitAdd = (values) => {\n    onAdd({ ...values })\n  }\n\n  const handleSubmitUpdate = (values) => {\n    onUpdate({ ...product, ...values })\n  }\n\n  useEffect(() => {\n    // Close the dialog only if there are no errors\n    if (!inProgress && !errors) setOpen(false)\n  }, [inProgress])\n\n  return (\n    <>\n      {product ? (\n        currentUser.role === 'teacher' && (\n          <ActionButton\n            action='Edit product'\n            onClick={handleClickOpen}\n            className={classes.updateIcon}\n          >\n            <Edit />\n          </ActionButton>\n        )\n      ) : (\n        <Fab color='primary' onClick={handleClickOpen} variant='extended'>\n          <Add className={classes.addIcon} />\n          Add product\n        </Fab>\n      )}\n\n      <Dialog\n        fullScreen={fullScreen}\n        maxWidth='lg'\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onExit={onExit}\n        onFocus={(ev) => ev.stopPropagation()}\n        open={open}\n      >\n        <Formik\n          initialValues={{\n            name: product?.name || '',\n            description: product?.description || '',\n            photoUrl: product?.photoUrl || '',\n            cost: product?.cost || '',\n            quantity: product?.quantity || '',\n          }}\n          validationSchema={Yup.object({\n            name: Yup.string()\n              .max(\n                CHAR_LIMITS.name,\n                `Cannot be longer than ${CHAR_LIMITS.name} characters`\n              )\n              .required('Required'),\n            description: Yup.string().max(\n              CHAR_LIMITS.description,\n              `Cannot be longer than ${CHAR_LIMITS.description} characters`\n            ),\n            photoUrl: Yup.string().url('Not a valid url').required('Required'),\n            cost: Yup.number().typeError('Numbers only').required('Required'),\n            quantity: Yup.number()\n              .typeError('Numbers only')\n              .required('Required'),\n          })}\n          onSubmit={async (values) => {\n            product ? handleSubmitUpdate(values) : handleSubmitAdd(values)\n          }}\n        >\n          {(formik) => (\n            <Form>\n              <DialogTitle>\n                {product ? 'Edit product' : 'Add product'}\n              </DialogTitle>\n              <DialogContent>\n                <ListErrors errors={errors} />\n                <Grid container spacing={2}>\n                  <Grid item xs={12}>\n                    <Field\n                      as={TextFieldLimit}\n                      autoFocus={product ? false : true}\n                      color='primary'\n                      disabled={inProgress}\n                      label='Product Name'\n                      name='name'\n                      type='text'\n                      limit={CHAR_LIMITS.name}\n                      errors={formik.errors.name}\n                      fullWidth\n                    />\n                  </Grid>\n                  <Grid item xs={12}>\n                    <Field\n                      as={TextFieldLimit}\n                      color='primary'\n                      disabled={inProgress}\n                      label='Product Description'\n                      name='description'\n                      type='text'\n                      limit={CHAR_LIMITS.description}\n                      errors={formik.errors.description}\n                      fullWidth\n                    />\n                  </Grid>\n                  <Grid item xs={12}>\n                    <Field\n                      color='primary'\n                      component={TextField}\n                      disabled={inProgress}\n                      label='Photo Url'\n                      name='photoUrl'\n                      type='url'\n                      fullWidth\n                    />\n                  </Grid>\n                  <Grid item xs={12} md={6}>\n                    <Field\n                      color='primary'\n                      component={TextField}\n                      disabled={inProgress}\n                      label='Cost'\n                      name='cost'\n                      type='number'\n                      fullWidth\n                    />\n                  </Grid>\n                  <Grid item xs={12} md={6}>\n                    <Field\n                      color='primary'\n                      component={TextField}\n                      disabled={inProgress}\n                      label='Quantity'\n                      name='quantity'\n                      type='number'\n                      fullWidth\n                    />\n                  </Grid>\n                  <Grid item xs={12} md={6}>\n                    <ImagePreview src={formik.values.photoUrl} />\n                  </Grid>\n                </Grid>\n              </DialogContent>\n              <DialogActions>\n                <Button\n                  disabled={inProgress}\n                  color='primary'\n                  type='submit'\n                  variant='contained'\n                >\n                  {product\n                    ? inProgress\n                      ? 'Updating...'\n                      : 'Update'\n                    : inProgress\n                    ? 'Adding...'\n                    : 'Add'}\n                </Button>\n                <Button\n                  disabled={inProgress}\n                  onClick={handleClose}\n                  variant='contained'\n                >\n                  Cancel\n                </Button>\n              </DialogActions>\n            </Form>\n          )}\n        </Formik>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductDialog)\n","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  makeStyles,\n} from '@material-ui/core'\nimport { Delete } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport agent from '../../agent'\n\nimport { DELETE_PRODUCT } from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  icon: {\n    'color': 'rgba(255, 255, 255, 0.7)',\n    '&:hover': { backgroundColor: 'rgba(255, 255, 255, 0.3)', color: 'white' },\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  currentUser: state.common.currentUser,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onDelete: (slug) =>\n    dispatch({\n      type: DELETE_PRODUCT,\n      payload: agent.Products.delete(slug),\n      snackbar: { message: 'Product deleted', variant: 'success' },\n    }),\n})\n\nconst DeleteProductAlert = ({ currentUser, product, onDelete }) => {\n  const classes = useStyles()\n\n  const [open, setOpen] = useState(false)\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmit = () => {\n    setOpen(false)\n    onDelete(product.slug)\n  }\n\n  return (\n    <>\n      {currentUser.role === 'teacher' && (\n        <ActionButton\n          action='Delete product'\n          onClick={handleClickOpen}\n          className={classes.icon}\n        >\n          <Delete />\n        </ActionButton>\n      )}\n\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        onClick={(ev) => ev.stopPropagation()}\n        onFocus={(ev) => ev.stopPropagation()}\n      >\n        <DialogTitle>Delete Product</DialogTitle>\n        <DialogContent>\n          <DialogContentText component='div'>\n            Are you sure you want to delete <b>{product.name}</b>? This action{' '}\n            <b>cannot be undone</b>.\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button\n            onClick={handleSubmit}\n            color='secondary'\n            variant='contained'\n            autoFocus\n          >\n            Delete\n          </Button>\n          <Button onClick={handleClose} variant='contained'>\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DeleteProductAlert)\n","import React from 'react'\nimport {\n  GridList,\n  GridListTile,\n  GridListTileBar,\n  Tooltip,\n  Typography,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport CurrencyFormat from 'react-currency-format'\n\nimport DeleteProductDialog from './DeleteProductDialog'\nimport ProductDialog from './ProductDialog'\n\nconst useStyles = makeStyles((theme) => ({\n  actionIcon: { display: 'flex' },\n  cost: {\n    backgroundColor: theme.palette.primary.main,\n    color: 'white',\n    fontSize: '1rem',\n    lineHeight: '1.5rem',\n    padding: theme.spacing(1),\n  },\n  description: {\n    marginBottom: '-1.5rem',\n    opacity: 0,\n    transition: 'opacity 0s ease-in-out',\n  },\n  name: {\n    color: theme.palette.secondary.main,\n    fontSize: theme.typography.h5.fontSize,\n    whiteSpace: 'nowrap',\n  },\n  tile: {\n    '&:hover .MuiGridListTileBar-root': {\n      'height': '100%',\n      '& #description': {\n        marginBottom: 0,\n        opacity: 1,\n        transition: 'margin-bottom 0.35s ease-in-out, opacity 0.5s ease-in-out',\n      },\n    },\n  },\n  tileBar: {\n    alignItems: 'flex-end',\n    paddingBottom: theme.spacing(1),\n    transition: 'height 0.35s ease-in-out',\n  },\n  title: {\n    whiteSpace: 'normal',\n  },\n}))\n\nconst ProductsGallery = ({ products, userRole }) => {\n  const classes = useStyles()\n\n  const theme = useTheme()\n  const isSmall = useMediaQuery(theme.breakpoints.down('sm'))\n  const isMedium = useMediaQuery(theme.breakpoints.down('md'))\n  const cols = isSmall ? 1 : isMedium ? 2 : 3\n\n  return (\n    <div>\n      <GridList cols={cols} spacing={8}>\n        {products?.length > 0 ? (\n          products.map((product) => {\n            return (\n              <GridListTile key={product.slug} className={classes.tile}>\n                <img src={product.photoUrl} alt={product.name} />\n\n                <GridListTileBar\n                  classes={{\n                    actionIcon: classes.actionIcon,\n                    title: classes.title,\n                  }}\n                  className={classes.tileBar}\n                  title={\n                    <div>\n                      <div className={classes.description} id='description'>\n                        {product.description}\n                      </div>\n                      <Tooltip\n                        arrow\n                        enterTouchDelay={0}\n                        placement='bottom-start'\n                        title={product.name}\n                      >\n                        <div className={classes.name}>{product.name}</div>\n                      </Tooltip>\n                    </div>\n                  }\n                  subtitle={\n                    <span className={classes.cost}>\n                      <CurrencyFormat\n                        value={product.cost}\n                        displayType={'text'}\n                        thousandSeparator={true}\n                        suffix={' pts'}\n                      />\n                    </span>\n                  }\n                  actionIcon={\n                    userRole === 'teacher' && (\n                      <>\n                        <ProductDialog product={product} />\n                        <DeleteProductDialog product={product} />\n                      </>\n                    )\n                  }\n                />\n              </GridListTile>\n            )\n          })\n        ) : (\n          <Typography>You have no products</Typography>\n        )}\n      </GridList>\n    </div>\n  )\n}\n\nexport default ProductsGallery\n","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\n\nimport PageHeader from '../PageHeader'\nimport ProductDialog from './ProductDialog'\nimport ProductsGallery from './ProductsGallery'\nimport Spinner from '../Spinner'\nimport agent from '../../agent'\n\nimport {\n  PRODUCTS_PAGE_LOADED,\n  PRODUCTS_PAGE_UNLOADED,\n} from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  ...state.products,\n  currentUser: state.common.currentUser,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onLoad: () =>\n    dispatch({ type: PRODUCTS_PAGE_LOADED, payload: agent.Products.getAll() }),\n  onUnload: () => dispatch({ type: PRODUCTS_PAGE_UNLOADED }),\n})\n\nconst Products = ({ currentUser, products, onLoad, onUnload, pageLoaded }) => {\n  useEffect(() => {\n    onLoad()\n\n    return () => {\n      onUnload()\n    }\n  }, [])\n\n  return (\n    <>\n      <PageHeader\n        title={\n          currentUser.role === 'teacher' ? 'Manage Products' : 'View Products'\n        }\n      >\n        {currentUser.role === 'teacher' && <ProductDialog />}\n      </PageHeader>\n      {pageLoaded ? (\n        <Spinner message='Loading...' />\n      ) : (\n        <ProductsGallery products={products} userRole={currentUser.role} />\n      )}\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Products)\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Redirect } from 'react-router-dom'\nimport { Route, Switch } from 'react-router-dom'\nimport { Container } from '@material-ui/core'\n\nimport Header from './Header'\nimport Navigation from './Navigation'\nimport NotFound from './NotFound'\nimport PageWrapper from './PageWrapper'\nimport ProtectedRoute from './ProtectedRoute'\nimport Settings from './Settings'\nimport StudentAccount from './Student/StudentAccount'\nimport StudentSongs from './Student/StudentSongs'\nimport TeacherAccounts from './Teacher/TeacherAccounts'\nimport TeacherCourses from './Teacher/TeacherCourses'\nimport TeacherSongs from './Teacher/TeacherSongs'\nimport ManageTeachers from './Admin/ManageTeachers'\nimport Products from './Products/Products'\n\nconst mapStateToProps = (state) => ({\n  currentUser: state.common.currentUser,\n})\n\nconst Home = (props) => {\n  const { currentUser } = props\n\n  if (!currentUser) {\n    return <Redirect to='/login' />\n  }\n\n  return (\n    <>\n      <Header currentUser={currentUser} />\n      <PageWrapper>\n        <Container>\n          <Switch>\n            <ProtectedRoute\n              path='/student/account'\n              component={StudentAccount}\n            />\n            <ProtectedRoute path='/student/settings' component={Settings} />\n            <ProtectedRoute path='/student/songs' component={StudentSongs} />\n            <ProtectedRoute path='/student/products' component={Products} />\n\n            <ProtectedRoute\n              path='/teacher/accounts'\n              component={TeacherAccounts}\n            />\n            <ProtectedRoute\n              path='/teacher/courses'\n              component={TeacherCourses}\n            />\n            <ProtectedRoute path='/teacher/settings' component={Settings} />\n            <ProtectedRoute path='/teacher/songs' component={TeacherSongs} />\n            <ProtectedRoute path='/teacher/products' component={Products} />\n\n            <ProtectedRoute path='/admin/settings' component={Settings} />\n            <ProtectedRoute path='/admin/teachers' component={ManageTeachers} />\n\n            <Route component={NotFound} />\n          </Switch>\n        </Container>\n        <Navigation />\n      </PageWrapper>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, () => ({}))(Home)\n","import React from 'react'\nimport { Paper, Typography, makeStyles } from '@material-ui/core'\nimport Div100vh from 'react-div-100vh'\n\nimport Logo from './Logo'\nimport background from './../images/chemistry-background.jpg'\n\nconst useStyles = makeStyles((theme) => ({\n  background: {\n    alignItems: 'center',\n    backgroundImage: `url(${background})`,\n    backgroundSize: 'cover',\n    display: 'flex',\n    height: '100%',\n    justifyContent: 'center',\n  },\n  logo: {\n    marginBottom: theme.spacing(4),\n    width: 160,\n  },\n  panel: {\n    alignItems: 'center',\n    borderRadius: '1rem',\n    display: 'flex',\n    flexFlow: 'column nowrap',\n    overflowY: 'scroll',\n    padding: '2rem 4rem',\n    position: 'relative',\n  },\n  text: {\n    color: theme.palette.primary.main,\n    fontStyle: 'italic',\n  },\n}))\n\nconst Loading = (props) => {\n  const classes = useStyles()\n\n  return (\n    <Div100vh className={classes.background}>\n      <Paper elevation={12} className={classes.panel}>\n        <Logo className={classes.logo} />\n        <Typography className={classes.text} variant='h4'>\n          Loading...\n        </Typography>\n      </Paper>\n    </Div100vh>\n  )\n}\n\nexport default Loading\n","import React from 'react'\nimport { Grid, Link, Typography, makeStyles } from '@material-ui/core'\n\nimport profile from '../images/doc-may-profile.jpg'\n\nconst useStyles = makeStyles((theme) => ({\n  page: {\n    '& p:not(:last-of-type)': {\n      marginBottom: theme.spacing(2),\n    },\n  },\n  profile: {\n    borderRadius: '100%',\n    boxShadow: theme.shadows[10],\n    float: 'right',\n    marginBottom: theme.spacing(2),\n    marginLeft: theme.spacing(2),\n    width: '120px',\n  },\n}))\n\nconst About = () => {\n  const classes = useStyles()\n\n  return (\n    <Grid className={classes.page} container spacing={2}>\n      <Grid item xs={12}>\n        <Typography align='center' gutterBottom variant='h5'>\n          What is Chem Cash?\n        </Typography>\n        <img className={classes.profile} src={profile} />\n        <Typography variant='body2'>\n          Hi! I'm Joseph May, a high school chemistry teacher from Las Vegas.\n          While I love teaching chemistry, I also love programming for the web,\n          so why not combine the two.\n        </Typography>\n        <Typography variant='body2'>\n          Chem Cash is a points-based rewards system I use in my classroom. The\n          idea for this site came from a colleage who was inspired by one of his\n          own high school science teachers.\n        </Typography>\n        <Typography variant='body2'>\n          Students earn points in two ways: (1) through payouts based on their\n          assessment scores and (2) with bonus points earned for anything I deam\n          worthy of reward such as winning in-class competitions or going above\n          and beyond to help me or a student.\n        </Typography>\n        <Typography variant='body2'>\n          These points can be used to \"purchase\" goods such as school supplies,\n          electronics, and anything I can find for cheap or get for free.\n        </Typography>\n        <Typography variant='body2'>\n          However, the hottest-selling item is song requests. During work time\n          in my class I play music for my students. Each class period has its\n          own playlist and students can only add songs to the playlist by\n          spending their Chem Cash points.\n        </Typography>\n        <Typography variant='body2'>\n          I created this program to help manage all of the logistics behind this\n          system of incentives. While it can support multiple teachers, I am\n          running it on no-cost servers, so it was not intended to be a public\n          program. Although, if you are interested in learning more, please\n          reach out to me{' '}\n          <Link href='mailto:jwmay87+chemcash@gmail.com'>here</Link>.\n        </Typography>\n      </Grid>\n    </Grid>\n  )\n}\n\nexport default About\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Form, Field } from 'formik'\nimport { TextField } from 'formik-material-ui'\nimport { Button, Grid } from '@material-ui/core'\nimport * as Yup from 'yup'\n\nimport ListErrors from '../ListErrors'\nimport agent from '../../agent'\n\nimport { LOGIN } from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({ ...state.auth })\n\nconst mapDispatchToProps = (dispatch) => ({\n  onSubmit: (username, password) =>\n    dispatch({ type: LOGIN, payload: agent.Auth.login(username, password) }),\n})\n\nconst LoginForm = (props) => {\n  const submitForm = (username, password) => {\n    props.onSubmit(username, password)\n  }\n\n  return (\n    <Formik\n      initialValues={{\n        username: '',\n        password: '',\n      }}\n      validationSchema={Yup.object({\n        username: Yup.string().required('Required'),\n        // .matches(/^[0-9]+$/, 'Must be numbers only')\n        password: Yup.string().required('Required'),\n        // .matches(/^[0-9]{4}$/, 'Must be exactly 4 numbers')\n      })}\n      onSubmit={(values) => {\n        const { username, password } = values\n        submitForm(username, password)\n      }}\n    >\n      <Form>\n        <Grid container spacing={4}>\n          <Grid item xs={12}>\n            <ListErrors errors={props.errors} />\n            <Field\n              component={TextField}\n              disabled={props.inProgress}\n              fullWidth\n              label='Username'\n              name='username'\n              type='text'\n              variant='outlined'\n            />\n          </Grid>\n          <Grid item xs={12}>\n            <Field\n              component={TextField}\n              disabled={props.inProgress}\n              fullWidth\n              label='Password'\n              name='password'\n              type='password'\n              variant='outlined'\n            />\n          </Grid>\n          <Grid item xs={12}>\n            <Button\n              color='primary'\n              disabled={props.inProgress}\n              size='large'\n              type='submit'\n              variant='contained'\n            >\n              {props.inProgress ? 'Loading...' : 'Login'}\n            </Button>\n          </Grid>\n        </Grid>\n      </Form>\n    </Formik>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LoginForm)\n","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { Link, Redirect } from 'react-router-dom'\nimport Div100vh from 'react-div-100vh'\nimport {\n  Button,\n  Grid,\n  LinearProgress,\n  Paper,\n  Tooltip,\n  makeStyles,\n} from '@material-ui/core'\nimport { ArrowBackIos, InfoOutlined } from '@material-ui/icons'\n\nimport About from '../About'\nimport Logo from '../Logo'\nimport LoginForm from './LoginForm'\nimport background from '../../images/chemistry-background.jpg'\n\nimport { LOGIN_PAGE_UNLOADED } from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  aboutLink: {\n    bottom: theme.spacing(2),\n    position: 'absolute',\n    right: theme.spacing(4),\n  },\n  loginLink: {\n    'marginBottom': theme.spacing(2),\n    '& > a': {\n      textDecoration: 'none',\n    },\n  },\n  logo: {\n    display: 'block',\n    margin: '0 auto',\n    width: 120,\n  },\n  page: {\n    alignItems: 'center',\n    backgroundImage: `url(${background})`,\n    backgroundSize: 'cover',\n    display: 'flex',\n    height: '100%',\n    justifyContent: 'center',\n    [theme.breakpoints.up('lg')]: {\n      backgroundSize: 'initial',\n      justifyContent: 'flex-end',\n    },\n  },\n  panel: {\n    borderRadius: '1rem',\n    maxHeight: '90%',\n    overflowY: 'scroll',\n    padding: '4rem 2rem',\n    position: 'relative',\n    width: '80%',\n    [theme.breakpoints.up('lg')]: {\n      borderRadius: '0',\n      height: '100%',\n      maxHeight: '100%',\n      width: '40%',\n    },\n  },\n  progress: {\n    height: 10,\n    left: '0',\n    position: 'absolute',\n    top: '0',\n    width: '100%',\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.auth,\n  currentUser: state.common.currentUser,\n  pathname: state.router.location.pathname,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onUnload: () => dispatch({ type: LOGIN_PAGE_UNLOADED }),\n})\n\nconst AboutLink = () => {\n  const classes = useStyles()\n  return (\n    <span className={classes.aboutLink}>\n      <Tooltip arrow enterTouchDelay={0} title='Learn more'>\n        <Link to='/about'>\n          <InfoOutlined color='secondary' fontSize='small' />\n        </Link>\n      </Tooltip>\n    </span>\n  )\n}\n\nconst LoginLink = () => {\n  const classes = useStyles()\n  return (\n    <div className={classes.loginLink}>\n      <Link to='/login'>\n        <Button color='secondary' startIcon={<ArrowBackIos />}>\n          Login\n        </Button>\n      </Link>\n    </div>\n  )\n}\n\nconst Login = ({ currentUser, inProgress, onUnload, pathname }) => {\n  const classes = useStyles()\n\n  useEffect(() => {\n    return () => onUnload()\n  }, [])\n\n  if (currentUser) {\n    return <Redirect to='/' />\n  }\n\n  return (\n    <Div100vh>\n      <div className={classes.page}>\n        <Paper elevation={12} className={classes.panel}>\n          {inProgress && <LinearProgress className={classes.progress} />}\n          <Grid container spacing={4}>\n            <Grid item xs={12}>\n              <Logo className={classes.logo} />\n            </Grid>\n            <Grid item xs={12}>\n              {pathname.includes('about') ? (\n                <>\n                  <LoginLink />\n                  <About />\n                </>\n              ) : (\n                <>\n                  <AboutLink />\n                  <LoginForm />\n                </>\n              )}\n            </Grid>\n          </Grid>\n        </Paper>\n      </div>\n    </Div100vh>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login)\n","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { SnackbarProvider, useSnackbar } from 'notistack'\nimport { Button } from '@material-ui/core'\n\nimport { SNACKBAR_CLOSED } from '../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  snackbar: state.notifier.snackbar,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onSnackbarClose: () => dispatch({ type: SNACKBAR_CLOSED }),\n})\n\nconst Notification = (props) => {\n  const { snackbar } = props\n  const { enqueueSnackbar } = useSnackbar()\n\n  useEffect(() => {\n    if (snackbar) {\n      enqueueSnackbar(snackbar.message, { variant: snackbar.variant })\n    }\n  }, [snackbar])\n\n  return props.children\n}\n\nconst Notifier = (props) => {\n  const notistackRef = React.createRef()\n  const onSnackbarDismiss = (key) => () => {\n    notistackRef.current.closeSnackbar(key)\n  }\n\n  return (\n    <SnackbarProvider\n      maxSnack={3}\n      ref={notistackRef}\n      action={(key) => (\n        <Button onClick={onSnackbarDismiss(key)}>Dismiss</Button>\n      )}\n      onClose={() => {\n        props.onSnackbarClose()\n      }}\n    >\n      <Notification snackbar={props.snackbar}>{props.children}</Notification>\n    </SnackbarProvider>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Notifier)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Grid,\n  Typography,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\n\nimport agent from '../agent'\n\nimport { WHATS_NEW_DIALOG_UNLOADED } from '../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  ...state.common,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onExit: () =>\n    dispatch({\n      type: WHATS_NEW_DIALOG_UNLOADED,\n      payload: agent.Auth.save({ viewedChanges: true }), // @note: set to 'false' when testing\n    }),\n})\n\nconst WhatsNewDialog = ({ currentUser, onExit }) => {\n  const [open, setOpen] = useState(false)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  useEffect(() => {\n    if (currentUser)\n      setOpen(currentUser.role !== 'admin' && !currentUser.viewedChanges)\n  }, [currentUser])\n\n  return (\n    <Dialog\n      fullScreen={fullScreen}\n      fullWidth={true}\n      maxWidth={'md'}\n      open={open}\n      onClose={handleClose}\n      onClick={(ev) => ev.stopPropagation()}\n      onExit={onExit}\n      onFocus={(ev) => ev.stopPropagation()}\n    >\n      <DialogTitle>What's New in Chem Cash!</DialogTitle>\n      <DialogContent>\n        {currentUser?.role === 'student'\n          ? StudentWhatsNewContent()\n          : TeacherWhatsNewContent()}\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={handleClose} variant='contained'>\n          Close\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n\nconst StudentWhatsNewContent = () => (\n  <Grid container spacing={4}>\n    <Grid item xs={12} container spacing={2}>\n      <Grid item xs={12}>\n        <Typography variant='h6'>Latest Updates</Typography>\n      </Grid>\n      <Grid item xs={12}>\n        <Typography variant='body1'>\n          <em>Dec 30, 2021</em>\n        </Typography>\n      </Grid>\n      <Grid item xs={12}>\n        <Typography variant='subtitle2'>Delete Songs</Typography>\n        <Typography variant='body2'>\n          You can now request songs to be removed from your class playlist by\n          going to the 'Songs' tab and clicking the trash can icon next to the\n          song you want removed. This feature is only available if your teacher\n          has activated it.\n        </Typography>\n      </Grid>\n      <Grid item xs={12}>\n        <Typography variant='subtitle2'>What's New Notifications</Typography>\n        <Typography variant='body2'>\n          This notification is a new feature! When new Chem Cash udpates are\n          released this notification will appear once on the first time you\n          access the website after the update is released.\n        </Typography>\n      </Grid>\n    </Grid>\n    {/* <Grid item xs={12} container spacing={2}>\n      <Typography variant='h6'>Previous Updates</Typography>\n      <Grid item xs={12}>\n        <Typography variant='body2'>No previous updates</Typography>\n      </Grid>\n    </Grid> */}\n  </Grid>\n)\n\nconst TeacherWhatsNewContent = () => (\n  <Grid container spacing={4}>\n    <Grid item xs={12} container spacing={2}>\n      <Grid item xs={12}>\n        <Typography variant='h6'>Latest Updates</Typography>\n      </Grid>\n      <Grid item xs={12}>\n        <Typography variant='body1'>\n          <em>Dec 30, 2021</em>\n        </Typography>\n      </Grid>\n      <Grid item xs={12}>\n        <Typography variant='subtitle2'>Delete Songs</Typography>\n        <Typography variant='body2'>\n          Students can now request songs to be removed from thier class playlist\n          by going to the 'Songs' tab and clicking the trash can icon, once you\n          have activated the feature in the Settings.\n        </Typography>\n      </Grid>\n      <Grid item xs={12}>\n        <Typography variant='subtitle2'>Delete Songs Settings</Typography>\n        <Typography variant='body2'>\n          New settings have been added to control student ability to request\n          songs for deletion as well as settings for the amount of points\n          charged for a song removal and the amount of points refunded to the\n          person whose song was removed.\n        </Typography>\n      </Grid>\n      <Grid item xs={12}>\n        <Typography variant='subtitle2'>Search for Products</Typography>\n        <Typography variant='body2'>\n          You can now search for products in a dropdown menu when entering\n          purchases on the accounts page and the cost of the product will\n          automatically populate in the amount field.\n        </Typography>\n      </Grid>\n      <Grid item xs={12}>\n        <Typography variant='subtitle2'>What's New Notifications</Typography>\n        <Typography variant='body2'>\n          This notification is a new feature! When new Chem Cash udpates are\n          released this notification will appear once on the first time you\n          access the website after the update is released.\n        </Typography>\n      </Grid>\n    </Grid>\n    {/* <Grid item xs={12} container spacing={2}>\n      <Grid item xs={12}>\n        <Typography variant='h6'>Previous Updates</Typography>\n      </Grid>\n      <Grid item xs={12}>\n        <Typography variant='body2'>No previous updates</Typography>\n      </Grid>\n    </Grid> */}\n  </Grid>\n)\n\nexport default connect(mapStateToProps, mapDispatchToProps)(WhatsNewDialog)\n","import {\n  ASYNC_START,\n  LOGIN,\n  LOGIN_PAGE_UNLOADED,\n  REGISTER,\n  REGISTER_PAGE_UNLOADED,\n} from '../constants/actionTypes'\n\nexport default (state = {}, action) => {\n  switch (action.type) {\n    case ASYNC_START:\n      if (action.subtype === LOGIN || action.subtype === REGISTER) {\n        return { ...state, inProgress: true }\n      }\n      break\n    case LOGIN:\n    case REGISTER:\n      return {\n        ...state,\n        inProgress: false,\n        errors: action.error ? action.payload.errors : null,\n      }\n    case LOGIN_PAGE_UNLOADED:\n    case REGISTER_PAGE_UNLOADED:\n      return {}\n    default:\n      return state\n  }\n\n  return state\n}\n","import {\n  APP_LOAD,\n  LOGIN,\n  LOGIN_PAGE_UNLOADED,\n  LOGOUT,\n  REDIRECT,\n  REGISTER,\n  REGISTER_PAGE_UNLOADED,\n  SETTINGS_SAVED,\n  SETTINGS_PAGE_UNLOADED,\n  SPOTIFY_REMOVE_AUTH,\n  NAV_LOADED,\n  NAV_TAB_CHANGE,\n  WHATS_NEW_DIALOG_UNLOADED,\n} from '../constants/actionTypes'\n\nconst defaultState = {\n  appName: 'Chem Cash',\n  token: null,\n  viewChangeCounter: 0,\n}\n\nexport default (state = defaultState, action) => {\n  switch (action.type) {\n    case APP_LOAD:\n      return {\n        ...state,\n        token: action.token || null,\n        appLoaded: true,\n        currentUser: action.payload ? action.payload.user : null,\n        settings: action.payload ? action.payload.settings : null,\n      }\n    case LOGOUT:\n      return { ...state, redirectTo: '/login', token: null, currentUser: null }\n    case LOGIN:\n    case REGISTER:\n      return {\n        ...state,\n        redirectTo: action.error ? null : '/',\n        token: action.error ? null : action.payload.user.token,\n        currentUser: action.error ? null : action.payload.user,\n        settings: action.error ? null : action.payload.settings,\n      }\n    case LOGIN_PAGE_UNLOADED:\n    case REGISTER_PAGE_UNLOADED:\n    case SETTINGS_PAGE_UNLOADED:\n      return { ...state, viewChangeCounter: state.viewChangeCounter + 1 }\n    case NAV_LOADED:\n    case NAV_TAB_CHANGE:\n      return { ...state, redirectTo: action.redirectTo }\n    case REDIRECT:\n      return { ...state, redirectTo: null }\n    case SETTINGS_SAVED:\n      return {\n        ...state,\n        currentUser: action.error ? state.currentUser : action.payload[0].user,\n        // settings: action.error ? state.settings : action.payload[1].settings,\n        // @todo: the sharing of teacher settings with student accounts needs some cleanup to avoid messes like this\n        settings:\n          action.error || state.currentUser.role === 'student'\n            ? state.settings\n            : action.payload[1].settings,\n      }\n    case SPOTIFY_REMOVE_AUTH:\n      return {\n        ...state,\n        settings: action.error\n          ? state.settings\n          : { ...state.settings, spotifyTokens: undefined },\n      }\n    case WHATS_NEW_DIALOG_UNLOADED:\n      return {\n        ...state,\n        currentUser: action.payload ? action.payload.user : null,\n      }\n    default:\n      return state\n  }\n}\n","import {\n  ADD_COURSE,\n  ADD_STUDENT,\n  ALERT_CLOSED,\n  ASYNC_START,\n  COURSE_DIALOG_UNLOADED,\n  COURSES_PAGE_LOADED,\n  COURSES_PAGE_UNLOADED,\n  DELETE_COURSE,\n  DELETE_STUDENT,\n  IMPORT_STUDENTS,\n  MOVE_STUDENT,\n  RESET_STUDENT_PASSWORD,\n  STUDENT_DIALOG_UNLOADED,\n  STUDENT_SEARCH_LOADED,\n  STUDENT_SEARCH_UNLOADED,\n  UPDATE_COURSE,\n  UPDATE_STUDENT,\n} from '../constants/actionTypes'\n\nconst defaultState = {\n  courses: [],\n  errors: null,\n  importCount: null,\n  inProgress: false,\n  pageLoaded: false,\n}\n\nconst sortByLastName = (a, b) => a.lastName.localeCompare(b.lastName)\nconst sortByPeriod = (a, b) => a.period - b.period\n\nexport default (state = defaultState, action) => {\n  let courses = []\n  switch (action.type) {\n    case ADD_COURSE:\n      return {\n        ...state,\n        courses: action.error\n          ? state.courses\n          : [...state.courses, action.payload.course].sort((a, b) =>\n              sortByPeriod(a, b)\n            ),\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n      }\n    case ADD_STUDENT:\n      // Changing a deep-nested array requires deep-copying\n      // to avoid altering the previous state\n      courses = []\n      state.courses.forEach((course) => {\n        const courseCopy = { ...course }\n        if (course._id.toString() === action.courseId) {\n          courseCopy.students = [...course.students, action.payload.user].sort(\n            (a, b) => sortByLastName(a, b)\n          )\n        }\n        courses.push(courseCopy)\n      })\n      return {\n        ...state,\n        courses: action.error ? state.courses : courses,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n      }\n    case ALERT_CLOSED:\n      return { ...state, importCount: null }\n    case ASYNC_START:\n      if (\n        action.subtype === ADD_STUDENT ||\n        action.subtype === ADD_COURSE ||\n        action.subtype === MOVE_STUDENT ||\n        action.subtype === UPDATE_COURSE ||\n        action.subtype === UPDATE_STUDENT\n      ) {\n        return { ...state, errors: null, inProgress: true }\n      } else if (action.subtype === COURSES_PAGE_LOADED) {\n        return { ...state, errors: null, pageLoaded: true }\n      } else if (action.subtype === IMPORT_STUDENTS) {\n        return { ...state, errors: null, importCount: null, inProgress: true }\n      }\n      break\n    case COURSE_DIALOG_UNLOADED:\n    case STUDENT_DIALOG_UNLOADED:\n      return { ...state, errors: null }\n    case COURSES_PAGE_LOADED:\n    case STUDENT_SEARCH_LOADED:\n      return { ...state, courses: action.payload.courses, pageLoaded: false }\n    case COURSES_PAGE_UNLOADED:\n    case STUDENT_SEARCH_UNLOADED:\n      return defaultState\n    case DELETE_COURSE:\n      return {\n        ...state,\n        courses: action.error\n          ? state.courses\n          : state.courses.filter(\n              (course) => course.slug !== action.payload.course.slug\n            ),\n      }\n    case DELETE_STUDENT:\n      // Changing a deep-nested array requires deep-copying\n      // to avoid altering the previous state\n      courses = []\n      state.courses.forEach((course) => {\n        const courseCopy = { ...course }\n        if (course._id.toString() === action.payload.course._id.toString()) {\n          courseCopy.students = course.students.filter(\n            (student) => student.username !== action.payload.user.username\n          )\n        }\n        courses.push(courseCopy)\n      })\n      return {\n        ...state,\n        courses: action.error ? state.courses : courses,\n      }\n    case IMPORT_STUDENTS:\n      // Students are not sorted when returned from server (@todo: fix this?)\n      !action.error &&\n        action.payload.course.students.sort((a, b) => sortByLastName(a, b))\n      return {\n        ...state,\n        courses: action.error\n          ? state.courses\n          : state.courses.map((course) =>\n              course._id === action.payload.course._id\n                ? action.payload.course\n                : course\n            ),\n        errors: action.error ? action.payload.errors : null,\n        importCount: action.error ? null : action.payload.count,\n        inProgress: false,\n      }\n    case MOVE_STUDENT:\n      // Students are not sorted when returned from server (@todo: fix this?)\n      !action.error &&\n        action.payload[0].course.students.sort((a, b) => sortByLastName(a, b))\n      !action.error &&\n        action.payload[1].course.students.sort((a, b) => sortByLastName(a, b))\n      return {\n        ...state,\n        courses: action.error\n          ? state.courses\n          : state.courses.map((course) => {\n              if (course._id === action.payload[0].course._id) {\n                return action.payload[0].course\n              } else if (course._id === action.payload[1].course._id) {\n                return action.payload[1].course\n              } else {\n                return course\n              }\n            }),\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n      }\n    case RESET_STUDENT_PASSWORD:\n      return { ...state }\n    case UPDATE_COURSE:\n      return {\n        ...state,\n        courses: action.error\n          ? state.courses\n          : state.courses\n              .map((course) =>\n                course._id === action.payload.course._id\n                  ? action.payload.course\n                  : course\n              )\n              .sort((a, b) => sortByPeriod(a, b)),\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n      }\n    case UPDATE_STUDENT:\n      // Changing a deep-nested array requires deep-copying\n      // to avoid altering the previous state\n      courses = []\n      const updatedUser = action.payload.user\n      state.courses.forEach((course) => {\n        const courseCopy = { ...course }\n        if (course._id.toString() === action.courseId.toString()) {\n          courseCopy.students = course.students\n            .map((student) =>\n              student._id.toString() === updatedUser._id.toString()\n                ? updatedUser\n                : student\n            )\n            .sort((a, b) => sortByLastName(a, b))\n        }\n        courses.push(courseCopy)\n      })\n      return {\n        ...state,\n        courses: action.error ? state.courses : courses,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n      }\n    default:\n      return state\n  }\n\n  return state\n}\n","import {\n  NAV_LOADED,\n  NAV_UNLOADED,\n  NAV_TAB_CHANGE,\n} from '../constants/actionTypes'\n\nexport default (state = {}, action) => {\n  switch (action.type) {\n    case NAV_LOADED:\n    case NAV_TAB_CHANGE:\n      return {\n        ...state,\n        navTabValue: action.value,\n      }\n    case NAV_UNLOADED:\n      return {}\n    default:\n      return state\n  }\n}\n","import {\n  ADD_COURSE,\n  ADD_PRODUCT,\n  ADD_STUDENT,\n  ADD_TEACHER,\n  ADD_TRANSACTION,\n  ADD_TRANSACTIONS,\n  DELETE_COURSE,\n  DELETE_PRODUCT,\n  DELETE_SONG_REQUEST,\n  DELETE_STUDENT,\n  DELETE_TASK,\n  DELETE_TEACHER,\n  DELETE_TRANSACTION,\n  IMPORT_SCORES,\n  IMPORT_STUDENTS,\n  MOVE_STUDENT,\n  RESET_STUDENT_PASSWORD,\n  SETTINGS_SAVED,\n  SNACKBAR_CLOSED,\n  SUBMIT_SONG_REQUEST,\n  SUBMIT_SONG_REMOVAL_REQUEST,\n  UPDATE_COURSE,\n  UPDATE_PRODUCT,\n  UPDATE_STUDENT,\n  UPDATE_TASK,\n  UPDATE_TEACHER,\n  UPDATE_TRANSACTION,\n  WHATS_NEW_FLAGS_RESET,\n} from '../constants/actionTypes'\n\nexport default (state = {}, action) => {\n  switch (action.type) {\n    case ADD_COURSE:\n    case ADD_PRODUCT:\n    case ADD_STUDENT:\n    case ADD_TEACHER:\n    case ADD_TRANSACTION:\n    case ADD_TRANSACTIONS:\n    case DELETE_COURSE:\n    case DELETE_PRODUCT:\n    case DELETE_SONG_REQUEST:\n    case DELETE_STUDENT:\n    case DELETE_TASK:\n    case DELETE_TEACHER:\n    case DELETE_TRANSACTION:\n    case IMPORT_SCORES:\n    case IMPORT_STUDENTS:\n    case MOVE_STUDENT:\n    case RESET_STUDENT_PASSWORD:\n    case SETTINGS_SAVED:\n    case SUBMIT_SONG_REQUEST:\n    case SUBMIT_SONG_REMOVAL_REQUEST:\n    case UPDATE_COURSE:\n    case UPDATE_PRODUCT:\n    case UPDATE_STUDENT:\n    case UPDATE_TASK:\n    case UPDATE_TEACHER:\n    case UPDATE_TRANSACTION:\n    case WHATS_NEW_FLAGS_RESET:\n      return {\n        ...state,\n        snackbar: action.error\n          ? null //{ message: 'An error occurred', variant: 'error' }\n          : action.snackbar,\n      }\n    case SNACKBAR_CLOSED:\n      return { ...state, snackbar: null }\n    default:\n      return state\n  }\n}\n","import {\n  ACCOUNT_VIEW_LOADED,\n  ACCOUNT_VIEW_UNLOADED,\n  ADD_PRODUCT,\n  ASYNC_START,\n  PRODUCT_DIALOG_UNLOADED,\n  PRODUCTS_PAGE_LOADED,\n  PRODUCTS_PAGE_UNLOADED,\n  DELETE_PRODUCT,\n  UPDATE_PRODUCT,\n} from '../constants/actionTypes'\n\nconst defaultState = {\n  products: [],\n  errors: null,\n  inProgress: false,\n  pageLoaded: false,\n}\n\nconst sortByCost = (a, b) => a.cost - b.cost\n\nexport default (state = defaultState, action) => {\n  switch (action.type) {\n    case ACCOUNT_VIEW_LOADED:\n      return {\n        ...state,\n        products: action.payload[1].products,\n      }\n    case ACCOUNT_VIEW_UNLOADED:\n    case PRODUCTS_PAGE_UNLOADED:\n      return defaultState\n    case ADD_PRODUCT:\n      return {\n        ...state,\n        products: action.error\n          ? state.products\n          : [...state.products, action.payload.product].sort((a, b) =>\n              sortByCost(a, b)\n            ),\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n      }\n    case ASYNC_START:\n      if (action.subtype === ADD_PRODUCT || action.subtype === UPDATE_PRODUCT) {\n        return { ...state, errors: null, inProgress: true }\n      } else if (action.subtype === PRODUCTS_PAGE_LOADED) {\n        return { ...state, errors: null, pageLoaded: true }\n      }\n      break\n    case DELETE_PRODUCT:\n      return {\n        ...state,\n        products: action.error\n          ? state.products\n          : state.products.filter(\n              (product) => product.slug !== action.payload.product.slug\n            ),\n      }\n    case PRODUCT_DIALOG_UNLOADED:\n      return { ...state, errors: null }\n    case PRODUCTS_PAGE_LOADED:\n      return {\n        ...state,\n        products: action.payload.products,\n        pageLoaded: false,\n      }\n    case UPDATE_PRODUCT:\n      return {\n        ...state,\n        products: action.error\n          ? state.products\n          : state.products\n              .map((product) =>\n                product._id === action.payload.product._id\n                  ? action.payload.product\n                  : product\n              )\n              .sort((a, b) => sortByCost(a, b)),\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n      }\n    default:\n      return state\n  }\n\n  return state\n}\n","import { unionBy } from 'lodash'\nimport {\n  ACCOUNT_VIEW_LOADED,\n  ACCOUNT_VIEW_UNLOADED,\n  ACCOUNTS_PAGE_UNLOADED,\n  ADD_TRANSACTION,\n  ADD_TRANSACTIONS,\n  ALERT_CLOSED,\n  ASYNC_START,\n  DELETE_TRANSACTION,\n  IMPORT_SCORES,\n  IMPORT_SCORES_DIALOG_UNLOADED,\n  TRANSACTION_DIALOG_UNLOADED,\n  TRANSACTIONS_DIALOG_UNLOADED,\n  UPDATE_TRANSACTION,\n} from '../constants/actionTypes'\nimport convertScore from '../converter'\n\nconst defaultState = {\n  conversions: null,\n  errors: null,\n  importSummary: null,\n  inProgress: false,\n  total: null,\n  transactions: null,\n}\n\nconst getTotals = (transactions, conversions) => {\n  const sumTransactions = (total, transaction) => total + transaction.amount\n  const sumScores = (total, score) => total + convertScore(score, conversions)\n\n  const bonuses = transactions.bonuses.reduce(sumTransactions, 0)\n  const purchases = transactions.purchases.reduce(sumTransactions, 0)\n  const scores = transactions.scores.reduce(sumScores, 0)\n\n  const balance = bonuses + purchases + scores\n\n  return { balance, bonuses, purchases, scores }\n}\n\nconst addScores = (added, transactions, curUser) => {\n  if (curUser) {\n    const curUserId = curUser._id.toString()\n    const usersAdded = added.filter(\n      (score) => score.student._id.toString() === curUserId\n    )\n\n    if (usersAdded) {\n      transactions.scores = unionBy(usersAdded, [...transactions.scores], '_id')\n    }\n\n    return transactions\n  }\n\n  return null\n}\n\nconst addTransaction = (added, transactions) => {\n  const types = Object.keys(transactions)\n  for (const type of types) {\n    if (type.startsWith(added.type)) {\n      transactions[type] = [added, ...transactions[type]]\n    }\n  }\n  return transactions\n}\n\nconst addBulkTransaction = (added, transactions, curUser) => {\n  if (curUser) {\n    const curUserId = curUser._id.toString()\n    const usersAdded = added.find(\n      (transaction) => transaction.student._id.toString() === curUserId\n    )\n\n    if (usersAdded) return addTransaction(usersAdded, transactions)\n  }\n\n  return null\n}\n\nconst deleteTransaction = (deleted, transactions) => {\n  const types = Object.keys(transactions)\n  for (const type of types) {\n    if (type.startsWith(deleted.type)) {\n      transactions[type] = transactions[type].filter(\n        (transaction) => transaction._id !== deleted._id\n      )\n    }\n  }\n  return transactions\n}\n\nconst updateTransaction = (updated, transactions) => {\n  const types = Object.keys(transactions)\n  for (const type of types) {\n    if (type.startsWith(updated.type)) {\n      transactions[type] = transactions[type].map((transaction) =>\n        transaction._id === updated._id ? updated : transaction\n      )\n    }\n  }\n  return transactions\n}\n\nexport default (state = defaultState, action) => {\n  switch (action.type) {\n    case ACCOUNT_VIEW_LOADED:\n      return {\n        ...state,\n        conversions: action.error ? null : action.payload[0].scoreConverter,\n        total: action.error\n          ? null\n          : getTotals(\n              action.payload[0].transactions,\n              action.payload[0].scoreConverter\n            ),\n        transactions: action.error ? null : action.payload[0].transactions,\n      }\n    case ACCOUNT_VIEW_UNLOADED:\n      return { ...state, conversions: null, total: null, transactions: null }\n    case ACCOUNTS_PAGE_UNLOADED:\n    case ALERT_CLOSED:\n      return { ...state, importSummary: null }\n    case ADD_TRANSACTION:\n      const addedTransactions = !action.error\n        ? addTransaction(action.payload.transaction, {\n            ...state.transactions,\n          })\n        : {}\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n        transactions: action.error ? state.transactions : addedTransactions,\n        total: action.error\n          ? state.total\n          : getTotals(addedTransactions, state.conversions),\n      }\n    case ADD_TRANSACTIONS:\n      const addedBulkTransactions = !action.error\n        ? addBulkTransaction(\n            action.payload.transactions,\n            { ...state.transactions },\n            action.curStudent\n          )\n        : null\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n        transactions: action.error ? state.transactions : addedBulkTransactions,\n        total:\n          action.error || !state.transactions\n            ? state.total\n            : getTotals(addedBulkTransactions, state.conversions),\n      }\n    case ASYNC_START:\n      if (\n        action.subtype === ADD_TRANSACTION ||\n        action.subtype === ADD_TRANSACTIONS ||\n        action.subtype === DELETE_TRANSACTION ||\n        action.subtype === UPDATE_TRANSACTION\n      ) {\n        return { ...state, errors: null, inProgress: true }\n      } else if (action.subtype === IMPORT_SCORES) {\n        return { ...state, errors: null, importSummary: null, inProgress: true }\n      }\n      break\n    case DELETE_TRANSACTION:\n      const deletedTransactions = !action.error\n        ? deleteTransaction(action.payload.transaction, {\n            ...state.transactions,\n          })\n        : {}\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n        transactions: action.error ? state.transactions : deletedTransactions,\n        total: action.error\n          ? state.total\n          : getTotals(deletedTransactions, state.conversions),\n      }\n    case IMPORT_SCORES:\n      const addedScores = !action.error\n        ? addScores(\n            action.payload.scores,\n            { ...state.transactions },\n            action.curStudent\n          )\n        : null\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        importSummary: action.error ? null : action.payload.results,\n        inProgress: false,\n        transactions: action.error ? state.transactions : addedScores,\n        total:\n          action.error || !state.transactions\n            ? state.total\n            : getTotals(addedScores, state.conversions),\n      }\n    case IMPORT_SCORES_DIALOG_UNLOADED:\n    case TRANSACTION_DIALOG_UNLOADED:\n    case TRANSACTIONS_DIALOG_UNLOADED:\n      return { ...state, errors: null }\n    case UPDATE_TRANSACTION:\n      const updatedTransactions = !action.error\n        ? updateTransaction(action.payload.transaction, {\n            ...state.transactions,\n          })\n        : {}\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n        transactions: action.error ? state.transactions : updatedTransactions,\n        total: action.error\n          ? state.total\n          : getTotals(updatedTransactions, state.conversions),\n      }\n    default:\n      return state\n  }\n\n  return state\n}\n","import {\n  ASYNC_START,\n  SETTINGS_PAGE_UNLOADED,\n  SETTINGS_SAVED,\n  SPOTIFY_LINKER_LOADED,\n  SPOTIFY_LINKER_UNLOADED,\n} from '../constants/actionTypes'\n\nconst defaultState = {\n  errors: null,\n  inProgress: false,\n  spotifyAuthUrl: null,\n}\n\nexport default (state = defaultState, action) => {\n  switch (action.type) {\n    case ASYNC_START:\n      if (action.subtype === SETTINGS_SAVED) {\n        return {\n          ...state,\n          inProgress: true,\n        }\n      }\n      break\n    case SPOTIFY_LINKER_LOADED:\n      return { ...state, spotifyAuthUrl: action.payload.spotifyAuthUrl }\n    case SETTINGS_PAGE_UNLOADED:\n    case SPOTIFY_LINKER_UNLOADED:\n      return defaultState\n    case SETTINGS_SAVED:\n      return {\n        ...state,\n        inProgress: false,\n        errors: action.error ? action.payload.errors : null,\n      }\n    default:\n      return state\n  }\n\n  return state\n}\n","import {\n  ASYNC_START,\n  DELETE_TASK,\n  TASKS_DIALOG_LOADED,\n  TASKS_DIALOG_UNLOADED,\n  UPDATE_TASK,\n} from '../constants/actionTypes'\n\nconst defaultState = {\n  errors: null,\n  inProgress: false,\n  tasks: [],\n}\n\nexport default (state = defaultState, action) => {\n  switch (action.type) {\n    case ASYNC_START:\n      if (action.subtype === TASKS_DIALOG_LOADED) {\n        return { ...state, inProgress: true }\n      }\n      break\n    case DELETE_TASK:\n      return {\n        ...state,\n        tasks: action.error\n          ? state.tasks\n          : state.tasks.filter(\n              (task) => task.slug !== action.payload.task.slug\n            ),\n      }\n    case TASKS_DIALOG_LOADED:\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n        tasks: action.error ? [] : action.payload.tasks,\n      }\n    case TASKS_DIALOG_UNLOADED:\n      return defaultState\n    case UPDATE_TASK:\n      return {\n        ...state,\n        tasks: action.error\n          ? state.tasks\n          : state.tasks.map((task) =>\n              task.slug === action.payload.task.slug\n                ? action.payload.task\n                : task\n            ),\n      }\n    default:\n      return state\n  }\n\n  return state\n}\n","import {\n  ADD_TEACHER,\n  ASYNC_START,\n  DELETE_TEACHER,\n  MANAGE_TEACHERS_PAGE_LOADED,\n  MANAGE_TEACHERS_PAGE_UNLOADED,\n  TEACHER_DIALOG_UNLOADED,\n  UPDATE_TEACHER,\n} from '../constants/actionTypes'\n\nconst defaultState = {\n  errors: null,\n  inProgress: false,\n  teachers: [],\n}\n\nconst sortByLastName = (a, b) => a.lastName.localeCompare(b.lastName)\n\nexport default (state = defaultState, action) => {\n  switch (action.type) {\n    case ADD_TEACHER:\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n        teachers: action.error\n          ? state.teachers\n          : [...state.teachers, action.payload.user].sort((a, b) =>\n              sortByLastName(a, b)\n            ),\n      }\n    case ASYNC_START:\n      if (action.subtype === ADD_TEACHER || action.subtype === UPDATE_TEACHER) {\n        return { ...state, inProgress: true, errors: null }\n      }\n      break\n    case DELETE_TEACHER:\n      return {\n        ...state,\n        teachers: action.error\n          ? state.teachers\n          : state.teachers.filter(\n              (teacher) => teacher.username !== action.payload.user.username\n            ),\n      }\n    case MANAGE_TEACHERS_PAGE_LOADED:\n      return {\n        ...state,\n        teachers: action.payload.users,\n      }\n    case MANAGE_TEACHERS_PAGE_UNLOADED:\n      return defaultState\n    case TEACHER_DIALOG_UNLOADED:\n      return { ...state, errors: null }\n    case UPDATE_TEACHER:\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n        teachers: action.error\n          ? state.teachers\n          : state.teachers\n              .map((user) =>\n                user.username === action.payload.user.username\n                  ? action.payload.user\n                  : user\n              )\n              .sort((a, b) => sortByLastName(a, b)),\n      }\n    default:\n      return state\n  }\n\n  return state\n}\n","import {\n  ASYNC_START,\n  DELETE_SONG_REQUEST,\n  SONG_REQUESTS_DIALOG_UNLOADED,\n  SONGS_PAGE_UNLOADED,\n  STUDENT_SONGS_PAGE_LOADED,\n  SUBMIT_SONG_REQUEST,\n  SUBMIT_SONG_REMOVAL_REQUEST,\n  TEACHER_SONGS_PAGE_LOADED,\n  UPDATE_SONG_REQUEST,\n} from '../constants/actionTypes'\n\nconst defaultState = {\n  course: null,\n  courses: [],\n  courseSongs: [],\n  errors: null,\n  inProgress: false,\n  userSongs: [],\n}\n\nexport default (state = defaultState, action) => {\n  let courses = []\n  switch (action.type) {\n    case ASYNC_START:\n      if (action.subtype === UPDATE_SONG_REQUEST) {\n        return { ...state, inProgress: true, errors: null }\n      }\n      break\n    case DELETE_SONG_REQUEST:\n      // Changing a deep-nested array requires deep-copying\n      // to avoid altering the previous state\n      state.courses.forEach((course) => {\n        const courseCopy = { ...course }\n        courseCopy.songs = courseCopy.songs.filter(\n          (song) => song._id.toString() !== action.payload.song._id.toString()\n        )\n        courses.push(courseCopy)\n      })\n      return {\n        ...state,\n        courses: action.error ? state.courses : courses,\n      }\n    case SONG_REQUESTS_DIALOG_UNLOADED:\n      return { ...state, errors: null }\n    case SONGS_PAGE_UNLOADED:\n      return defaultState\n    case STUDENT_SONGS_PAGE_LOADED:\n      return {\n        ...state,\n        userSongs: action.payload.songsByUser,\n        courseSongs: action.payload.songsByCourse,\n        course: action.payload.course,\n      }\n    case SUBMIT_SONG_REQUEST:\n      return {\n        ...state,\n        userSongs: [action.payload.song, ...state.userSongs],\n        courseSongs: [action.payload.song, ...state.courseSongs],\n      }\n    case SUBMIT_SONG_REMOVAL_REQUEST:\n      return {\n        ...state,\n        userSongs: state.userSongs.map((song) =>\n          action.payload.song._id === song._id ? action.payload.song : song\n        ),\n        courseSongs: state.courseSongs.map((song) =>\n          action.payload.song._id === song._id ? action.payload.song : song\n        ),\n      }\n    case TEACHER_SONGS_PAGE_LOADED:\n      return { ...state, courses: action.payload.courses }\n    case UPDATE_SONG_REQUEST:\n      // Changing a deep-nested array requires deep-copying\n      // to avoid altering the previous state\n      !action.error &&\n        state.courses.forEach((course) => {\n          const courseCopy = { ...course }\n          courseCopy.songs = courseCopy.songs.map((song) =>\n            song._id.toString() === action.payload.song._id.toString()\n              ? action.payload.song\n              : song\n          )\n          courses.push(courseCopy)\n        })\n      return {\n        ...state,\n        courses: action.error ? state.courses : courses,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n      }\n    default:\n      return state\n  }\n\n  return state\n}\n","import agent from './agent'\nimport {\n  ASYNC_START,\n  ASYNC_END,\n  LOGIN,\n  LOGOUT,\n  REGISTER,\n} from './constants/actionTypes'\n\nconst promiseMiddleware = (store) => (next) => (action) => {\n  if (isPromise(action.payload)) {\n    store.dispatch({ type: ASYNC_START, subtype: action.type })\n\n    const currentView = store.getState().viewChangeCounter\n    const skipTracking = action.skipTracking\n\n    action.payload.then(\n      (res) => {\n        const currentState = store.getState()\n        if (!skipTracking && currentState.viewChangeCounter !== currentView) {\n          return\n        }\n        action.payload = res\n        store.dispatch({ type: ASYNC_END, promise: action.payload })\n        store.dispatch(action)\n      },\n      (error) => {\n        const currentState = store.getState()\n        if (!skipTracking && currentState.viewChangeCounter !== currentView) {\n          return\n        }\n        // console.log('ERROR', error)\n        action.error = true\n        action.payload = error.response.body\n        if (!action.skipTracking) {\n          store.dispatch({ type: ASYNC_END, promise: action.payload })\n        }\n        store.dispatch(action)\n      }\n    )\n\n    return\n  }\n\n  next(action)\n}\n\nconst localStorageMiddleware = (store) => (next) => (action) => {\n  if (action.type === REGISTER || action.type === LOGIN) {\n    if (!action.error) {\n      window.localStorage.setItem('jwt', action.payload.user.token)\n      agent.setToken(action.payload.user.token)\n    }\n  } else if (action.type === LOGOUT) {\n    window.localStorage.setItem('jwt', '')\n    agent.setToken(null)\n  }\n\n  next(action)\n}\n\nfunction isPromise(v) {\n  return v && typeof v.then === 'function'\n}\n\nexport { promiseMiddleware, localStorageMiddleware }\n","import { applyMiddleware, createStore } from 'redux'\nimport { composeWithDevTools } from 'redux-devtools-extension/developmentOnly'\nimport { createBrowserHistory } from 'history'\nimport { createLogger } from 'redux-logger'\nimport { routerMiddleware } from 'connected-react-router'\n\nimport createRootReducer from './reducer'\nimport { promiseMiddleware, localStorageMiddleware } from './middleware'\n\nexport const history = createBrowserHistory()\n\n// Build the middleware for intercepting and dispatching navigation actions\nconst myRouterMiddleware = routerMiddleware(history)\n\nconst getMiddleware = () => {\n  if (process.env.NODE_ENV === 'production') {\n    return applyMiddleware(\n      myRouterMiddleware,\n      promiseMiddleware,\n      localStorageMiddleware\n    )\n  } else {\n    // Enable additional logging in non-production environments\n    return applyMiddleware(\n      myRouterMiddleware,\n      promiseMiddleware,\n      localStorageMiddleware,\n      createLogger()\n    )\n  }\n}\n\nexport const store = createStore(\n  createRootReducer(history),\n  composeWithDevTools(getMiddleware())\n)\n","import { combineReducers } from 'redux'\nimport { connectRouter } from 'connected-react-router'\n\nimport auth from './reducers/auth'\nimport common from './reducers/common'\nimport courses from './reducers/courses'\nimport nav from './reducers/nav'\nimport notifier from './reducers/notifier'\nimport products from './reducers/products'\nimport scores from './reducers/scores'\nimport settings from './reducers/settings'\nimport tasks from './reducers/tasks'\nimport teachers from './reducers/teachers'\nimport songs from './reducers/songs'\n\nexport default (history) =>\n  combineReducers({\n    auth,\n    common,\n    courses,\n    nav,\n    notifier,\n    products,\n    scores,\n    settings,\n    tasks,\n    teachers,\n    songs,\n    router: connectRouter(history),\n  })\n","import React, { Suspense, useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { Route, Switch } from 'react-router-dom'\nimport { push } from 'connected-react-router'\nimport { CssBaseline, ThemeProvider } from '@material-ui/core'\n\nimport ChemCashTheme from './Theme'\nimport Home from './Home'\nimport Loading from './Loading'\nimport Login from './Login'\nimport Notifier from './Notifier'\nimport WhatsNewDialog from './WhatsNewDialog'\nimport agent from '../agent'\nimport { store } from '../store'\n\nimport { APP_LOAD, REDIRECT } from '../constants/actionTypes'\n\nconst mapStateToProps = (state) => {\n  return {\n    appLoaded: state.common.appLoaded,\n    redirectTo: state.common.redirectTo,\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => ({\n  onLoad: (payload, token) =>\n    dispatch({ type: APP_LOAD, payload, token, skipTracking: true }),\n  onRedirect: () => dispatch({ type: REDIRECT }),\n})\n\nconst App = (props) => {\n  const { appLoaded, redirectTo } = props\n\n  useEffect(() => {\n    if (redirectTo) {\n      store.dispatch(push(redirectTo))\n      props.onRedirect()\n    }\n  }, [redirectTo])\n\n  useEffect(() => {\n    const token = window.localStorage.getItem('jwt')\n    if (token) {\n      agent.setToken(token)\n    }\n\n    props.onLoad(token ? agent.Auth.current() : null, token)\n  }, [])\n\n  if (appLoaded) {\n    return (\n      <ThemeProvider theme={ChemCashTheme}>\n        <CssBaseline />\n        <Notifier>\n          <Suspense fallback={<p>Loading...</p>}>\n            <Switch>\n              <Route exact path='/login' component={Login} />\n              <Route exact path='/about' component={Login} />\n              <Route path='/' component={Home} />\n            </Switch>\n          </Suspense>\n        </Notifier>\n        <WhatsNewDialog />\n      </ThemeProvider>\n    )\n  }\n\n  return (\n    <ThemeProvider theme={ChemCashTheme}>\n      <CssBaseline />\n      <Loading />\n    </ThemeProvider>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App)\n","import { ConnectedRouter } from 'connected-react-router'\nimport { Provider } from 'react-redux'\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Route, Switch } from 'react-router-dom'\n\nimport App from './components/App'\nimport { store, history } from './store'\n\nReactDOM.render(\n  <Provider store={store}>\n    <ConnectedRouter history={history}>\n      <Switch>\n        <Route path='/' component={App} />\n      </Switch>\n    </ConnectedRouter>\n  </Provider>,\n\n  document.getElementById('root')\n)\n"],"sourceRoot":""}