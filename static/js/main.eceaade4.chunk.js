(this["webpackJsonpchem-cash"]=this["webpackJsonpchem-cash"]||[]).push([[0],{127:function(e,t,a){e.exports=a.p+"static/media/chemistry-background.58b9362d.jpg"},155:function(e,t,a){e.exports=a.p+"static/media/chem-cash-logo.30174016.png"},160:function(e,t,a){e.exports=a.p+"static/media/songs-background.cfcd4ce6.jpg"},17:function(e,t,a){"use strict";(function(e){var n=a(159),r=a.n(n),c=a(135),o=a.n(c),l=r()(o.a,e.Promise),u="http://localhost:4000/api",s=function(e){return e.body},i=null,m=function(e){i&&e.set("authorization","Token ".concat(i))},d=function(e){return l.del("".concat(u).concat(e)).use(m).then(s)},E=function(e){return l.get("".concat(u).concat(e)).use(m).then(s)},p=function(e,t){return l.post("".concat(u).concat(e),t).use(m).then(s)},f=function(e,t){return l.put("".concat(u).concat(e),t).use(m).then(s)},b={current:function(){return E("/user")},login:function(e,t){return p("/users/login",{user:{username:e,password:t}})},register:function(e){return p("/users",{user:e})},save:function(e){return f("/user",{user:e})}},g={add:function(e){return p("/courses",{course:e})},delete:function(e){return d("/courses/".concat(e))},getAll:function(){return E("/courses")},update:function(e){return f("/courses/".concat(e.slug),{course:e})}},h={forStudent:function(){return E("/songs/student")},request:function(e){return p("/songs",{song:e})}},O={getAll:function(){return E("/users?role=teacher")},delete:function(e){return d("/users/".concat(e))},update:function(e){return f("/users/".concat(e.username),{user:e})}};t.a={Auth:b,Courses:g,Songs:h,Teachers:O,setToken:function(e){i=e}}}).call(this,a(74))},178:function(e,t,a){e.exports=a(201)},201:function(e,t,a){"use strict";a.r(t);var n=a(75),r=a(14),c=a(0),o=a.n(c),l=a(12),u=a.n(l),s=a(112),i=a(29),m=a(273),d=a(274),E=a(76),p=a.n(E),f=a(163),b=a(153),g=a.n(b),h=a(154),O=a.n(h),v=Object(f.a)({breakpoints:{values:{md:768,lg:1024}},palette:{primary:g.a,secondary:O.a},overrides:{MuiDialogActions:{root:{padding:"16px 24px"}}}}),y=v,S=a(238),j=a(235),A=a(237),C=a(239),N=a(142),T=a(240),D=a(155),_=a.n(D),k=function(e){return o.a.createElement("img",Object.assign({alt:"Chem Cash Logo",src:_.a},e))},U="LOGIN",w=Object(j.a)((function(e){return{title:{color:"white",flexGrow:1},logo:{height:65,marginTop:e.spacing(2),marginRight:e.spacing(3),marginBottom:e.spacing(2)}}})),R=Object(r.c)((function(e){return{navTabValue:e.nav.navTabValue}}),(function(e){return{onClickLogout:function(){return e({type:"LOGOUT"})}}}))((function(e){var t=w(),a=e.navTabValue;return e.currentUser?o.a.createElement(A.a,{position:"static"},o.a.createElement(S.a,null,o.a.createElement(C.a,null,o.a.createElement(k,{className:t.logo}),o.a.createElement(N.a,{variant:"h5",align:"center",className:t.title},a&&a.charAt(0).toUpperCase()+a.slice(1)),o.a.createElement(T.a,{color:"inherit",onClick:e.onClickLogout},"Logout")))):null})),L=a(241),x=a(242),P=a(243),G=a(244),I=a(245),B=a(246),H=a(247),q=a(248),V=Object(j.a)({nav:{position:"fixed",bottom:0,width:"100%"}}),F=Object(r.c)((function(e){return{path:e.router.location.pathname,currentUser:e.common.currentUser,navTabValue:e.nav.navTabValue}}),(function(e){return{onTabChange:function(t,a){return e({type:"NAV_TAB_CHANGE",value:t,redirectTo:a})},onLoad:function(t,a){return e({type:"NAV_LOADED",value:t,redirectTo:a})},onUnload:function(){return e({type:"NAV_UNLOADED"})}}}))((function(e){var t=V(),a=e.currentUser.role,n=function(t){e.onTabChange(t,"/".concat(a,"/").concat(t))};return Object(c.useEffect)((function(){var t=e.path.split("/")[2],n=null!==t&&void 0!==t?t:"student"===a?"account":"courses",r="/".concat(a,"/").concat(n);return e.onLoad(n,r),function(){e.onUnload()}}),[]),"student"===a?o.a.createElement(L.a,{className:t.nav,onChange:function(e,t){n(t)},showLabels:!0,value:e.navTabValue},o.a.createElement(x.a,{label:"Account",icon:o.a.createElement(P.a,null),value:"account"}),o.a.createElement(x.a,{label:"Songs",icon:o.a.createElement(G.a,null),value:"songs"}),o.a.createElement(x.a,{label:"Settings",icon:o.a.createElement(I.a,null),value:"settings"})):o.a.createElement(L.a,{className:t.nav,onChange:function(e,t){n(t)},showLabels:!0,value:e.navTabValue},o.a.createElement(x.a,{label:"Accounts",icon:o.a.createElement(B.a,null),value:"accounts"}),o.a.createElement(x.a,{label:"Courses",icon:o.a.createElement(H.a,null),value:"courses"}),o.a.createElement(x.a,{label:"Songs",icon:o.a.createElement(G.a,null),value:"songs"}),"admin"===a&&o.a.createElement(x.a,{label:"Teachers",icon:o.a.createElement(q.a,null),value:"teachers"}),o.a.createElement(x.a,{label:"Settings",icon:o.a.createElement(I.a,null),value:"settings"}))})),W=Object(j.a)((function(e){return{wrapper:{marginTop:e.spacing(4),marginBottom:e.spacing(11)}}})),M=function(e){var t=W();return o.a.createElement("div",{className:t.wrapper},e.children)},Y=function(e){return o.a.createElement(M,null,o.a.createElement(S.a,null,o.a.createElement(N.a,{variant:"h2"},"Error 404: Page Not Found")))},z=Object(r.c)((function(e){return{currentUser:e.common.currentUser}}),(function(){return{}}))((function(e){return e.currentUser?o.a.createElement(s.b,{exact:!0,path:e.path,component:e.component}):o.a.createElement(s.a,{to:"/"})})),Q=a(46),J=a.n(Q),K=a(68),$=a(6),Z=a(13),X=a(27),ee=a(202),te=a(252),ae=a(18),ne=a(275),re=Object(j.a)((function(e){return{alert:{width:"100%","&:not(:last-of-type)":{marginBottom:e.spacing(1)}},alertList:{marginBottom:e.spacing(2)}}})),ce=function(e){var t=re(),a=e.errors;return a?o.a.createElement("div",{className:t.alertList},Object.keys(a).map((function(e){var n=e.replace(/([a-z0-9])([A-Z])/g,"$1 $2").toLowerCase();return o.a.createElement(ne.a,{className:t.alert,severity:"error",key:e},n," ",a[e])}))):null},oe=a(17),le=Object(j.a)((function(e){return{paper:{padding:e.spacing(2),marginBottom:e.spacing(4)}}})),ue=Object(r.c)((function(e){return Object($.a)(Object($.a)({},e.settings),{},{currentUser:e.common.currentUser})}),(function(e){return{onUnload:function(){return e({type:"SETTINGS_PAGE_UNLOADED"})},onSubmitForm:function(t){return e({type:"SETTINGS_SAVED",payload:oe.a.Auth.save(t),snackbar:{message:"Settings saved",variant:"success"}})}}}))((function(e){var t=e.currentUser,a=le();return Object(c.useEffect)((function(){return function(){e.onUnload()}}),[]),o.a.createElement(Z.c,{initialValues:{firstName:t.firstName,lastName:t.lastName,password:""},validationSchema:ae.a({firstName:ae.b(),lastName:ae.b(),password:ae.b()}),onSubmit:function(){var t=Object(K.a)(J.a.mark((function t(a,n){var r;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(r=Object($.a)({},a)).password||"student"===e.currentUser.role||delete r.password,e.onSubmitForm(r),n.resetForm({values:Object($.a)(Object($.a)({},r),{},{password:""})});case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},o.a.createElement(Z.b,null,o.a.createElement(ce,{errors:e.errors}),"student"!==t.role&&o.a.createElement(ee.a,{className:a.paper},o.a.createElement(te.a,{container:!0,spacing:2},o.a.createElement(te.a,{item:!0,xs:12},o.a.createElement(N.a,{variant:"h5",gutterBottom:!0},"Change your name")),o.a.createElement(te.a,{item:!0,xs:12,md:6},o.a.createElement(Z.a,{component:X.a,label:"First name",name:"firstName",type:"text",variant:"outlined",fullWidth:!0})),o.a.createElement(te.a,{item:!0,xs:12,md:6},o.a.createElement(Z.a,{component:X.a,label:"Last name",name:"lastName",type:"text",variant:"outlined",fullWidth:!0})))),o.a.createElement(ee.a,{className:a.paper},o.a.createElement(te.a,{container:!0,spacing:2},o.a.createElement(te.a,{item:!0,xs:12},o.a.createElement(N.a,{variant:"h5",gutterBottom:!0},"Change your password")),o.a.createElement(te.a,{item:!0,xs:12,md:6},o.a.createElement(Z.a,{component:X.a,label:"New password",name:"password",type:"password",variant:"outlined",fullWidth:!0})))),o.a.createElement(ee.a,{className:a.paper},o.a.createElement(te.a,{container:!0,spacing:2},o.a.createElement(te.a,{item:!0,xs:12},o.a.createElement(T.a,{color:"primary",disabled:e.inProgress,size:"large",type:"submit",variant:"contained"},e.inProgress?"Saving...":"Save"))))))})),se=function(e){return o.a.createElement("div",null,"Student Account")},ie=a(31),me=a(251),de=a(277),Ee=a(256),pe=a(257),fe=a(258),be=a(259),ge=a(260),he=a(261),Oe=a(30),ve=a(253),ye=a(254),Se=a(278),je=a(255),Ae=a(160),Ce=a.n(Ae),Ne=Object(j.a)((function(e){return{button:{marginBottom:e.spacing(2),marginRight:e.spacing(2)},dialog:{backgroundImage:"url(".concat(Ce.a,")"),backgroundPosition:"center bottom",backgroundSize:"cover",color:"white",padding:e.spacing(4)},icon:{marginRight:e.spacing(1)},input:{backgroundColor:"rgba(0,65,91,0.8)",borderRadius:e.spacing(1),height:78,"& input":{color:e.palette.secondary.main}},inputLabel:{color:"white"}}})),Te=function(e){var t=Object(c.useState)(!1),a=Object(ie.a)(t,2),n=a[0],r=a[1],l=Object(Oe.a)(),u=Object(ve.a)(l.breakpoints.down("md")),s=Ne(),i=function(){r(!1)},m=function(){var t=Object(K.a)(J.a.mark((function t(a){return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(!1),t.next=3,e.onSubmit(a);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return o.a.createElement(o.a.Fragment,null,o.a.createElement(ye.a,{color:"primary",onClick:function(){r(!0)},variant:"extended"},o.a.createElement(je.a,{className:s.icon}),"Buy a song"),o.a.createElement(Se.a,{classes:{paper:s.dialog},fullScreen:u,open:n,onClose:i},o.a.createElement(N.a,{variant:"h3",align:"center",color:"secondary",gutterBottom:!0},"Purchase a Song"),o.a.createElement(N.a,{variant:"body1",gutterBottom:!0},"Please provide the song and artist title for your request. If approved, 500 points will be charged to your account."),o.a.createElement(Z.c,{initialValues:{artist:"",title:""},validationSchema:ae.a({artist:ae.b().required("Required"),title:ae.b().required("Required")}),onSubmit:function(){var e=Object(K.a)(J.a.mark((function e(t){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},o.a.createElement(Z.b,null,o.a.createElement(te.a,{container:!0,spacing:4},o.a.createElement(te.a,{item:!0,xs:12,md:6},o.a.createElement(Z.a,{className:s.input,color:"primary",component:X.a,InputLabelProps:{classes:{root:s.inputLabel}},label:"Song Title",name:"title",type:"text",variant:"filled",fullWidth:!0})),o.a.createElement(te.a,{item:!0,xs:12,md:6},o.a.createElement(Z.a,{className:s.input,color:"primary",component:X.a,InputLabelProps:{classes:{root:s.inputLabel}},label:"Artist",name:"artist",type:"text",variant:"filled",fullWidth:!0})),o.a.createElement(te.a,{item:!0,xs:12},o.a.createElement(T.a,{className:s.button,color:"primary",type:"submit",variant:"contained"},"Buy"),o.a.createElement(T.a,{className:s.button,onClick:i,variant:"contained"},"Cancel")))))))},De=Object(j.a)((function(e){return{buttonCell:{alignItems:"center",display:"flex",justifyContent:"center"},paper:{padding:e.spacing(4),marginBottom:e.spacing(2)}}})),_e=Object(r.c)((function(e){return Object($.a)(Object($.a)({},e.songs),{},{currentUser:e.common.currentUser})}),(function(e){return{onLoad:function(t){return e({type:"SONGS_PAGE_LOADED",payload:t})},onSubmitSong:function(t){return e({type:"SUBMIT_SONG_REQUEST",payload:oe.a.Songs.request(t),snackbar:{message:"Song requested",variant:"success"}})},onUnload:function(){return e({type:"SONGS_PAGE_UNLOADED"})}}}))((function(e){var t=e.currentUser,a=e.userSongs,n=e.courseSongs,r=e.course,l=Object(c.useState)(!0),u=Object(ie.a)(l,2),s=u[0],i=u[1],m=De();return Object(c.useEffect)((function(){return e.onLoad(oe.a.Songs.forStudent()),function(){return e.onUnload()}}),[]),o.a.createElement(o.a.Fragment,null,o.a.createElement(ee.a,{className:m.paper},o.a.createElement(te.a,{container:!0,spacing:2,className:m.grid},o.a.createElement(te.a,{item:!0,xs:12,md:6,className:m.grid},o.a.createElement(N.a,{variant:"h5"},"Songs for"," ",s?t.firstName:"Period "+r.period)),o.a.createElement(te.a,{item:!0,xs:12,md:6,className:m.buttonCell},o.a.createElement(Te,{onSubmit:function(t){e.onSubmitSong(t)}})),o.a.createElement(te.a,{item:!0,xs:12,className:m.grid},o.a.createElement(me.a,{control:o.a.createElement(de.a,{checked:s,onChange:function(e){i(e.target.checked)},name:"mySongsOnly"}),label:"show only my songs"})))),o.a.createElement(Ee.a,{component:ee.a},o.a.createElement(pe.a,null,o.a.createElement(fe.a,null,o.a.createElement(be.a,null,o.a.createElement(ge.a,null,"Request Date"),o.a.createElement(ge.a,null,"Song Title"),o.a.createElement(ge.a,null,"Song Artist"),!s&&o.a.createElement(ge.a,null,"Purchased by"),o.a.createElement(ge.a,null,"Status"))),o.a.createElement(he.a,null,s?a&&a.map((function(e){return o.a.createElement(be.a,{key:e._id},o.a.createElement(ge.a,null,new Date(e.createdAt).toDateString()),o.a.createElement(ge.a,null,e.title),o.a.createElement(ge.a,null,e.artist),o.a.createElement(ge.a,null,e.status))})):n&&n.map((function(e){return o.a.createElement(be.a,{key:e._id},o.a.createElement(ge.a,null,new Date(e.createdAt).toDateString()),o.a.createElement(ge.a,null,e.title),o.a.createElement(ge.a,null,e.artist),o.a.createElement(ge.a,null,e.student.firstName," ",e.student.lastName),o.a.createElement(ge.a,null,e.status))}))))))})),ke=a(263),Ue=a(264),we=a(265),Re=a(262),Le=a(279),xe=a(165),Pe=Object(j.a)((function(e){return{actionButton:{color:e.palette.text.disabled}}})),Ge=function(e){var t=Pe();return o.a.createElement(Le.a,{title:e.action,arrow:!0},o.a.createElement(xe.a,{"aria-label":e.action,className:t.actionButton,onClick:function(t){t.stopPropagation(),e.onClick()},onFocus:function(e){return e.stopPropagation()}},e.children))},Ie=Object(j.a)((function(e){return{icon:{marginRight:e.spacing(1)}}})),Be=function(e){var t,a,n=Object(c.useState)(!1),r=Object(ie.a)(n,2),l=r[0],u=r[1],s=Object(Oe.a)(),i=Object(ve.a)(s.breakpoints.down("md")),m=Ie(),d=function(){u(!0)},E=function(){u(!1)};return o.a.createElement(o.a.Fragment,null,e.course?o.a.createElement(Ge,{action:"Update course",onClick:d},o.a.createElement(Re.a,null)):o.a.createElement(ye.a,{color:"primary",onClick:d,variant:"extended"},o.a.createElement(je.a,{className:m.icon}),"Add course"),o.a.createElement(Se.a,{fullScreen:i,open:l,onClose:E,onClick:function(e){return e.stopPropagation()},onFocus:function(e){return e.stopPropagation()}},o.a.createElement(Z.c,{initialValues:{name:(null===(t=e.course)||void 0===t?void 0:t.name)||"",period:(null===(a=e.course)||void 0===a?void 0:a.period)||""},validationSchema:ae.a({name:ae.b().required("Required"),period:ae.b().required("Required")}),onSubmit:function(t){!function(t){u(!1),e.onSubmit(Object($.a)(Object($.a)({},e.course),t))}(t)}},o.a.createElement(Z.b,null,o.a.createElement(ke.a,null,e.course?"Edit Course":"Add Course"),o.a.createElement(Ue.a,null,o.a.createElement(te.a,{container:!0,spacing:2},o.a.createElement(te.a,{item:!0,xs:12,md:6},o.a.createElement(Z.a,{color:"primary",component:X.a,label:"Course Name",name:"name",type:"text",fullWidth:!0})),o.a.createElement(te.a,{item:!0,xs:12,md:6},o.a.createElement(Z.a,{color:"primary",component:X.a,label:"Period",name:"period",type:"text",fullWidth:!0})))),o.a.createElement(we.a,null,o.a.createElement(T.a,{color:"primary",type:"submit",variant:"contained"},e.course?"Update":"Add"),o.a.createElement(T.a,{onClick:E,variant:"contained"},"Cancel"))))))},He=a(280),qe=a(269),Ve=a(281),Fe=a(271),We=a(270),Me=a(267),Ye=a(266),ze=function(e){var t=Object(c.useState)(!1),a=Object(ie.a)(t,2),n=a[0],r=a[1],l=function(){r(!1)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ge,{action:"Delete course",onClick:function(){r(!0)}},o.a.createElement(Ye.a,null)),o.a.createElement(Se.a,{open:n,onClose:l,onClick:function(e){return e.stopPropagation()},onFocus:function(e){return e.stopPropagation()}},o.a.createElement(ke.a,null,"Delete course?"),o.a.createElement(Ue.a,null,o.a.createElement(Me.a,null,"Are you sure you want to delete this course? This action cannot be undone.")),o.a.createElement(we.a,null,o.a.createElement(T.a,{onClick:function(){r(!1),e.onSubmit(e.course)},color:"secondary",variant:"contained",autoFocus:!0},"Delete"),o.a.createElement(T.a,{onClick:l,variant:"outlined",color:"primary"},"Cancel"))))},Qe=Object(j.a)((function(e){return{courseDetails:{display:"block"},courseHeader:{alignItems:"center",display:"flex",justifyContent:"space-between",width:"100%"},coursePeriod:{backgroundColor:e.palette.secondary.main,marginRight:e.spacing(2)},courseTitle:{flexGrow:"1"}}})),Je=function(e){var t=e.courses,a=Object(c.useState)(!1),n=Object(ie.a)(a,2),r=n[0],l=n[1],u=Qe(),s=function(t){e.onUpdate(t)},i=function(t){e.onDelete(t.slug)};return o.a.createElement(o.a.Fragment,null,(null===t||void 0===t?void 0:t.length)>0?t.map((function(e){return o.a.createElement(He.a,{expanded:r===e._id,key:e._id,onChange:(t=e._id,function(e,a){l(!!a&&t)})},o.a.createElement(qe.a,{expandIcon:o.a.createElement(We.a,null)},o.a.createElement("div",{className:u.courseHeader},o.a.createElement(Ve.a,{className:u.coursePeriod},e.period),o.a.createElement(N.a,{className:u.courseTitle,variant:"h5"},e.name),o.a.createElement(Be,{course:e,onSubmit:s}),o.a.createElement(ze,{course:e,onSubmit:i}))),o.a.createElement(Fe.a,{className:u.courseDetails},o.a.createElement(N.a,{variant:"h6"},"Students"),e.students&&e.students.length>0?e.students.map((function(e){return o.a.createElement("div",{key:e._id},o.a.createElement(N.a,null,e.lastName,", ",e.firstName))})):o.a.createElement("div",null,o.a.createElement(N.a,null,"No students have been added"))));var t})):o.a.createElement(N.a,null,"You have no courses yet"))},Ke=Object(j.a)((function(e){return{pageHeader:{alignItems:"center",display:"flex",justifyContent:"space-between",marginBottom:e.spacing(4)}}})),$e=function(e){var t=Ke();return o.a.createElement("div",{className:t.pageHeader},o.a.createElement(N.a,{variant:"h4"},"My Courses"),o.a.createElement(Be,{onSubmit:function(t){e.onAdd(t)}}))},Ze=Object(r.c)((function(e){return Object($.a)({},e.courses)}),(function(e){return{onAdd:function(t){return e({type:"ADD_COURSE",payload:oe.a.Courses.add(t),snackbar:{message:"Course added",variant:"success"}})},onDelete:function(t){return e({type:"DELETE_COURSE",payload:oe.a.Courses.delete(t),slug:t,snackbar:{message:"Course deleted",variant:"success"}})},onLoad:function(){return e({type:"COURSES_PAGE_LOADED",payload:oe.a.Courses.getAll()})},onUnload:function(){return e({type:"COURSES_PAGE_UNLOADED"})},onUpdate:function(t){return e({type:"UPDATE_COURSE",payload:oe.a.Courses.update(t),snackbar:{message:"Course updated",variant:"success"}})}}}))((function(e){return Object(c.useEffect)((function(){return e.onLoad(),function(){e.onUnload()}}),[]),o.a.createElement(o.a.Fragment,null,o.a.createElement($e,e),o.a.createElement(Je,e))})),Xe=Object(j.a)((function(e){return{icon:{marginRight:e.spacing(1)}}})),et=function(e){var t=e.errors,a=e.inProgress,n=e.onDialogClose,r=e.onSubmit,l=e.teacher,u=Object(c.useState)(!1),s=Object(ie.a)(u,2),i=s[0],m=s[1],d=Object(Oe.a)(),E=Object(ve.a)(d.breakpoints.down("md")),p=Xe(),f=function(){m(!0)},b=function(){m(!1)},g=function(e){r(Object($.a)(Object($.a)({},l),e))};return Object(c.useEffect)((function(){a||t||m(!1)}),[a]),o.a.createElement(o.a.Fragment,null,l?o.a.createElement(Ge,{action:"Update teacher",onClick:f},o.a.createElement(Re.a,null)):o.a.createElement(ye.a,{color:"primary",onClick:f,variant:"extended"},o.a.createElement(je.a,{className:p.icon}),"Add teacher"),o.a.createElement(Se.a,{fullScreen:E,open:i,onClose:b,onClick:function(e){return e.stopPropagation()},onExit:n,onFocus:function(e){return e.stopPropagation()}},o.a.createElement(Z.c,{initialValues:{firstName:(null===l||void 0===l?void 0:l.firstName)||"",lastName:(null===l||void 0===l?void 0:l.lastName)||"",username:(null===l||void 0===l?void 0:l.username)||"",password:""},validationSchema:ae.a({firstName:ae.b().required("Required"),lastName:ae.b().required("Required"),username:ae.b().required("Required"),password:ae.b().required(l?"":"Required")}),onSubmit:function(){var e=Object(K.a)(J.a.mark((function e(t){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},o.a.createElement(Z.b,null,o.a.createElement(ke.a,null,l?"Edit Teacher":"Add Teacher"),o.a.createElement(Ue.a,null,o.a.createElement(ce,{errors:e.errors}),o.a.createElement(te.a,{container:!0,spacing:2},o.a.createElement(te.a,{item:!0,xs:12,md:6},o.a.createElement(Z.a,{color:"primary",component:X.a,label:"First Name",name:"firstName",type:"text",fullWidth:!0})),o.a.createElement(te.a,{item:!0,xs:12,md:6},o.a.createElement(Z.a,{color:"primary",component:X.a,label:"Last Name",name:"lastName",type:"text",fullWidth:!0})),o.a.createElement(te.a,{item:!0,xs:12,md:6},o.a.createElement(Z.a,{color:"primary",component:X.a,disabled:!!l,label:"Username",name:"username",type:"text",fullWidth:!0})),o.a.createElement(te.a,{item:!0,xs:12,md:6},o.a.createElement(Z.a,{color:"primary",component:X.a,label:"Password",name:"password",type:"text",fullWidth:!0})))),o.a.createElement(we.a,null,o.a.createElement(T.a,{color:"primary",type:"submit",variant:"contained"},l?a?"Updating":"Update":a?"Adding":"Add"),o.a.createElement(T.a,{onClick:b,variant:"contained"},"Cancel"))))))},tt=a(282),at=function(e){var t=e.onSubmit,a=e.teacher,n=Object(c.useState)(!1),r=Object(ie.a)(n,2),l=r[0],u=r[1],s=function(){u(!1)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ge,{action:"Delete teacher",onClick:function(){u(!0)}},o.a.createElement(Ye.a,null)),o.a.createElement(Se.a,{open:l,onClose:s,onClick:function(e){return e.stopPropagation()},onFocus:function(e){return e.stopPropagation()}},o.a.createElement(ke.a,null,"Delete teacher?"),o.a.createElement(Ue.a,null,o.a.createElement(Me.a,null,"Are you sure you want to delete this teacher? This action cannot be undone.")),o.a.createElement(we.a,null,o.a.createElement(T.a,{onClick:function(){u(!1),t(a)},color:"secondary",variant:"contained",autoFocus:!0},"Delete"),o.a.createElement(T.a,{onClick:s,variant:"outlined",color:"primary"},"Cancel"))))},nt=Object(j.a)((function(e){return{teacherDetails:{display:"block"},teacherHeader:{alignItems:"center",display:"flex",justifyContent:"space-between",width:"100%"},teacherUsername:{marginRight:e.spacing(2),minWidth:e.spacing(12)},teacherName:{flexGrow:"1"}}})),rt=function(e){var t=e.onDelete,a=e.onUpdate,n=e.teachers,r=Object(c.useState)(!1),l=Object(ie.a)(r,2),u=l[0],s=l[1],i=nt(),m=function(e){a(e)},d=function(e){t(e.username)};return o.a.createElement(o.a.Fragment,null,(null===n||void 0===n?void 0:n.length)>0?n.map((function(t){return o.a.createElement(He.a,{expanded:u===t.username,key:t.username,onChange:(a=t.username,function(e,t){s(!!t&&a)})},o.a.createElement(qe.a,{expandIcon:o.a.createElement(We.a,null)},o.a.createElement("div",{className:i.teacherHeader},o.a.createElement(tt.a,{color:"secondary",label:t.username,className:i.teacherUsername}),o.a.createElement(N.a,{className:i.teacherName,variant:"h5"},t.firstName," ",t.lastName),o.a.createElement(et,Object.assign({teacher:t,onSubmit:m},e)),o.a.createElement(at,{teacher:t,onSubmit:d}))),o.a.createElement(Fe.a,{className:i.teacherDetails},o.a.createElement(N.a,{variant:"h6"},"Courses"),t.courses&&t.courses.length>0?t.courses.map((function(e){return o.a.createElement("div",{key:e._id},o.a.createElement(N.a,null,"Period ",e.period," | ",e.name," |"," ",e.students.length," students"))})):o.a.createElement("div",null,o.a.createElement(N.a,null,"No courses have been created"))));var a})):o.a.createElement(N.a,null,"No teachers found"))},ct=Object(j.a)((function(e){return{pageHeader:{alignItems:"center",display:"flex",justifyContent:"space-between",marginBottom:e.spacing(4)}}})),ot=function(e){var t=ct();return o.a.createElement("div",{className:t.pageHeader},o.a.createElement(N.a,{variant:"h4"},"Manage Teachers"),o.a.createElement(et,Object.assign({onSubmit:function(t){t.role="teacher",e.onAdd(t)}},e)))},lt=Object(r.c)((function(e){return Object($.a)({},e.teachers)}),(function(e){return{onAdd:function(t){return e({type:"ADD_TEACHER",payload:oe.a.Auth.register(t),snackbar:{message:"Teacher added",variant:"success"}})},onDelete:function(t){return e({type:"DELETE_TEACHER",payload:oe.a.Teachers.delete(t),username:t,snackbar:{message:"Teacher deleted",variant:"success"}})},onDialogClose:function(){return e({type:"TEACHER_DIALOG_UNLOADED"})},onLoad:function(){return e({type:"MANAGE_TEACHERS_PAGE_LOADED",payload:oe.a.Teachers.getAll()})},onUnload:function(){return e({type:"MANAGE_TEACHERS_PAGE_UNLOADED"})},onUpdate:function(t){return e({type:"UPDATE_TEACHER",payload:oe.a.Teachers.update(t),snackbar:{message:"Teacher updated",variant:"success"}})}}}))((function(e){return Object(c.useEffect)((function(){return e.onLoad(),function(){e.onUnload()}}),[]),o.a.createElement(o.a.Fragment,null,o.a.createElement(ot,e),o.a.createElement(rt,e))})),ut=Object(r.c)((function(e){return{currentUser:e.common.currentUser}}),(function(){return{}}))((function(e){var t=e.currentUser;return t?o.a.createElement(o.a.Fragment,null,o.a.createElement(R,{currentUser:t}),o.a.createElement(M,null,o.a.createElement(S.a,null,o.a.createElement(s.d,null,o.a.createElement(z,{path:"/student/account",component:se}),o.a.createElement(z,{path:"/student/songs",component:_e}),o.a.createElement(z,{path:"/student/settings",component:ue}),o.a.createElement(z,{path:"/teacher/courses",component:Ze}),o.a.createElement(z,{path:"/teacher/settings",component:ue}),o.a.createElement(z,{path:"/admin/courses",component:Ze}),o.a.createElement(z,{path:"/admin/teachers",component:lt}),o.a.createElement(z,{path:"/admin/settings",component:ue}),o.a.createElement(s.b,{component:Y}))),o.a.createElement(F,null))):o.a.createElement(s.a,{to:"/login"})})),st=a(127),it=a.n(st),mt=Object(j.a)((function(e){return{background:{alignItems:"center",backgroundImage:"url(".concat(it.a,")"),backgroundSize:"cover",display:"flex",height:"100%",justifyContent:"center"},logo:{marginBottom:e.spacing(4),width:160},panel:{alignItems:"center",borderRadius:"1rem",display:"flex",flexFlow:"column nowrap",overflowY:"scroll",padding:"2rem 4rem",position:"relative"},text:{color:e.palette.primary.main,fontStyle:"italic"}}})),dt=function(e){var t=mt();return o.a.createElement(p.a,{className:t.background},o.a.createElement(ee.a,{elevation:12,className:t.panel},o.a.createElement(k,{className:t.logo}),o.a.createElement(N.a,{className:t.text,variant:"h4"},"Loading...")))},Et=a(98),pt=a(272),ft=Object(r.c)((function(e){return Object($.a)({},e.auth)}),(function(e){return{onSubmit:function(t,a){return e({type:U,payload:oe.a.Auth.login(t,a)})}}}))((function(e){return o.a.createElement(Z.c,{initialValues:{username:"teacher",password:"teacher"},validationSchema:ae.a({username:ae.b().required("Required"),password:ae.b().required("Required")}),onSubmit:function(t){!function(t,a){e.onSubmit(t,a)}(t.username,t.password)}},o.a.createElement(Z.b,null,o.a.createElement(te.a,{container:!0,spacing:4},o.a.createElement(te.a,{item:!0,xs:12},o.a.createElement(ce,{errors:e.errors}),o.a.createElement(Z.a,{component:X.a,disabled:e.inProgress,fullWidth:!0,label:"Username",name:"username",type:"text",variant:"outlined"})),o.a.createElement(te.a,{item:!0,xs:12},o.a.createElement(Z.a,{component:X.a,disabled:e.inProgress,fullWidth:!0,label:"Password",name:"password",type:"password",variant:"outlined"})),o.a.createElement(te.a,{item:!0,xs:12},o.a.createElement(T.a,{color:"primary",disabled:e.inProgress,size:"large",type:"submit",variant:"contained"},e.inProgress?"Loading...":"Login")))))})),bt=Object(j.a)((function(e){return{logo:{display:"block",margin:"0 auto",width:120},page:Object(Et.a)({alignItems:"center",backgroundImage:"url(".concat(it.a,")"),backgroundSize:"cover",display:"flex",height:"100%",justifyContent:"center"},e.breakpoints.up("lg"),{backgroundSize:"initial",justifyContent:"flex-end"}),panel:Object(Et.a)({borderRadius:"1rem",overflowY:"scroll",padding:"4rem 2rem",position:"relative",width:"80%"},e.breakpoints.up("lg"),{borderRadius:"0",height:"100%",width:"40%"}),progress:{height:10,left:"0",position:"absolute",top:"0",width:"100%"}}})),gt=Object(r.c)((function(e){return Object($.a)(Object($.a)({},e.auth),{},{currentUser:e.common.currentUser})}),(function(e){return{onUnload:function(){return e({type:"LOGIN_PAGE_UNLOADED"})}}}))((function(e){var t=bt();return Object(c.useEffect)((function(){return function(){return e.onUnload()}}),[]),e.currentUser?o.a.createElement(s.a,{to:"/"}):o.a.createElement(p.a,null,o.a.createElement("div",{className:t.page},o.a.createElement(ee.a,{elevation:12,className:t.panel},e.inProgress&&o.a.createElement(pt.a,{className:t.progress}),o.a.createElement(te.a,{container:!0,spacing:4},o.a.createElement(te.a,{item:!0,xs:12},o.a.createElement(k,{className:t.logo})),o.a.createElement(te.a,{item:!0,xs:12},o.a.createElement(ft,null))))))})),ht=a(140),Ot=function(e){var t=e.snackbar,a=Object(ht.b)().enqueueSnackbar;return Object(c.useEffect)((function(){t&&a(t.message,{variant:t.variant})}),[t]),e.children},vt=Object(r.c)((function(e){return{snackbar:e.notifier.snackbar}}),(function(e){return{onSnackbarClose:function(){return e({type:"SNACKBAR_CLOSED"})}}}))((function(e){var t=o.a.createRef(),a=function(e){return function(){t.current.closeSnackbar(e)}};return o.a.createElement(ht.a,{maxSnack:3,ref:t,action:function(e){return o.a.createElement(T.a,{onClick:a(e)},"Dismiss")},onClose:function(){e.onSnackbarClose()}},o.a.createElement(Ot,{snackbar:e.snackbar},e.children))})),yt=a(55),St=a(162),jt=a(50),At=(a(200),a(151)),Ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ASYNC_START":if(t.subtype===U||"REGISTER"===t.subtype)return Object($.a)(Object($.a)({},e),{},{inProgress:!0});break;case U:case"REGISTER":return Object($.a)(Object($.a)({},e),{},{inProgress:!1,errors:t.error?t.payload.errors:null});case"LOGIN_PAGE_UNLOADED":case"REGISTER_PAGE_UNLOADED":return{};default:return e}return e},Nt={appName:"Chem Cash",token:null,viewChangeCounter:0},Tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP_LOAD":return Object($.a)(Object($.a)({},e),{},{token:t.token||null,appLoaded:!0,currentUser:t.payload?t.payload.user:null});case"LOGOUT":return Object($.a)(Object($.a)({},e),{},{redirectTo:"/login",token:null,currentUser:null});case U:case"REGISTER":return Object($.a)(Object($.a)({},e),{},{redirectTo:t.error?null:"/",token:t.error?null:t.payload.user.token,currentUser:t.error?null:t.payload.user});case"LOGIN_PAGE_UNLOADED":case"REGISTER_PAGE_UNLOADED":case"SETTINGS_PAGE_UNLOADED":return Object($.a)(Object($.a)({},e),{},{viewChangeCounter:e.viewChangeCounter+1});case"NAV_LOADED":case"NAV_TAB_CHANGE":return Object($.a)(Object($.a)({},e),{},{redirectTo:t.redirectTo});case"REDIRECT":return Object($.a)(Object($.a)({},e),{},{redirectTo:null});case"SETTINGS_SAVED":return Object($.a)(Object($.a)({},e),{},{currentUser:t.error?e.currentUser:t.payload.user});default:return e}},Dt=a(72),_t={courses:[]},kt=function(e,t){return e.period-t.period},Ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_t,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_COURSE":return Object($.a)(Object($.a)({},e),{},{courses:t.error?e.courses:[].concat(Object(Dt.a)(e.courses),[t.payload.course]).sort((function(e,t){return kt(e,t)}))});case"COURSES_PAGE_LOADED":return Object($.a)(Object($.a)({},e),{},{courses:t.payload.courses});case"COURSES_PAGE_UNLOADED":return _t;case"DELETE_COURSE":return Object($.a)(Object($.a)({},e),{},{courses:t.error?e.courses:e.courses.filter((function(e){return e.slug!==t.slug}))});case"UPDATE_COURSE":return Object($.a)(Object($.a)({},e),{},{courses:t.error?e.courses:e.courses.map((function(e){return e._id===t.payload.course._id?t.payload.course:e})).sort((function(e,t){return kt(e,t)}))});default:return e}},wt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NAV_LOADED":case"NAV_TAB_CHANGE":return Object($.a)(Object($.a)({},e),{},{navTabValue:t.value});case"NAV_UNLOADED":return{};default:return e}},Rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_COURSE":case"ADD_TEACHER":case"DELETE_COURSE":case"DELETE_TEACHER":case"SETTINGS_SAVED":case"SUBMIT_SONG_REQUEST":case"UPDATE_COURSE":case"UPDATE_TEACHER":return Object($.a)(Object($.a)({},e),{},{snackbar:t.error?null:t.snackbar});case"SNACKBAR_CLOSED":return Object($.a)(Object($.a)({},e),{},{snackbar:null});default:return e}},Lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ASYNC_START":if("SETTINGS_SAVED"===t.subtype)return Object($.a)(Object($.a)({},e),{},{inProgress:!0});break;case"SETTINGS_PAGE_UNLOADED":return{};case"SETTINGS_SAVED":return Object($.a)(Object($.a)({},e),{},{inProgress:!1,errors:t.error?t.payload.errors:null});default:return e}return e},xt={errors:null,inProgress:!1,teachers:[]},Pt=function(e,t){return e.lastName.localeCompare(t.lastName)},Gt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ASYNC_START":if("ADD_TEACHER"===t.subtype||"UPDATE_TEACHER"===t.subtype)return Object($.a)(Object($.a)({},e),{},{inProgress:!0,errors:null});break;case"ADD_TEACHER":return Object($.a)(Object($.a)({},e),{},{errors:t.error?t.payload.errors:null,inProgress:!1,teachers:t.error?e.teachers:[].concat(Object(Dt.a)(e.teachers),[t.payload.user]).sort((function(e,t){return Pt(e,t)}))});case"DELETE_TEACHER":return Object($.a)(Object($.a)({},e),{},{teachers:t.error?e.teachers:e.teachers.filter((function(e){return e.username!==t.username}))});case"MANAGE_TEACHERS_PAGE_LOADED":return Object($.a)(Object($.a)({},e),{},{teachers:t.payload.users});case"MANAGE_TEACHERS_PAGE_UNLOADED":return xt;case"TEACHER_DIALOG_UNLOADED":return Object($.a)(Object($.a)({},e),{},{errors:null});case"UPDATE_TEACHER":return Object($.a)(Object($.a)({},e),{},{errors:t.error?t.payload.errors:null,inProgress:!1,teachers:t.error?e.teachers:e.teachers.map((function(e){return e.username===t.payload.user.username?t.payload.user:e})).sort((function(e,t){return Pt(e,t)}))});default:return e}return e},It=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SONGS_PAGE_LOADED":return Object($.a)(Object($.a)({},e),{},{userSongs:t.payload.songsByUser,courseSongs:t.payload.songsByCourse,course:t.payload.course});case"SUBMIT_SONG_REQUEST":return Object($.a)(Object($.a)({},e),{},{userSongs:[t.payload.song].concat(Object(Dt.a)(e.userSongs)),courseSongs:[t.payload.song].concat(Object(Dt.a)(e.courseSongs))});case"SONGS_PAGE_UNLOADED":return{};default:return e}},Bt=function(e){return function(t){return function(a){if((c=a.payload)&&"function"===typeof c.then){e.dispatch({type:"ASYNC_START",subtype:a.type});var n=e.getState().viewChangeCounter,r=a.skipTracking;a.payload.then((function(t){var c=e.getState();(r||c.viewChangeCounter===n)&&(a.payload=t,e.dispatch({type:"ASYNC_END",promise:a.payload}),e.dispatch(a))}),(function(t){var c=e.getState();(r||c.viewChangeCounter===n)&&(console.log("ERROR",t),a.error=!0,a.payload=t.response.body,a.skipTracking||e.dispatch({type:"ASYNC_END",promise:a.payload}),e.dispatch(a))}))}else{var c;t(a)}}}},Ht=function(e){return function(e){return function(t){"REGISTER"===t.type||t.type===U?t.error||(window.localStorage.setItem("jwt",t.payload.user.token),oe.a.setToken(t.payload.user.token)):"LOGOUT"===t.type&&(window.localStorage.setItem("jwt",""),oe.a.setToken(null)),e(t)}}};var qt,Vt=Object(jt.a)(),Ft=Object(At.a)(Vt),Wt=Object(yt.createStore)((qt=Vt,Object(yt.combineReducers)({auth:Ct,common:Tt,courses:Ut,nav:wt,notifier:Rt,settings:Lt,teachers:Gt,songs:It,router:Object(n.b)(qt)})),Object(St.composeWithDevTools)(Object(yt.applyMiddleware)(Ft,Bt,Ht))),Mt=Object(r.c)((function(e){return{appLoaded:e.common.appLoaded,redirectTo:e.common.redirectTo}}),(function(e){return{onLoad:function(t,a){return e({type:"APP_LOAD",payload:t,token:a,skipTracking:!0})},onRedirect:function(){return e({type:"REDIRECT"})}}}))((function(e){var t=e.appLoaded,a=e.redirectTo;return Object(c.useEffect)((function(){a&&(Wt.dispatch(Object(i.d)(a)),e.onRedirect())}),[a]),Object(c.useEffect)((function(){var t=window.localStorage.getItem("jwt");t&&oe.a.setToken(t),e.onLoad(t?oe.a.Auth.current():null,t)}),[]),t?o.a.createElement(m.a,{theme:y},o.a.createElement(d.a,null),o.a.createElement(vt,null,o.a.createElement(p.a,null,o.a.createElement(c.Suspense,{fallback:o.a.createElement("p",null,"Loading...")},o.a.createElement(s.d,null,o.a.createElement(s.b,{exact:!0,path:"/login",component:gt}),o.a.createElement(s.b,{path:"/",component:ut})))))):o.a.createElement(m.a,{theme:y},o.a.createElement(d.a,null),o.a.createElement(dt,null))}));u.a.render(o.a.createElement(r.a,{store:Wt},o.a.createElement(n.a,{history:Vt},o.a.createElement(s.d,null,o.a.createElement(s.b,{path:"/",component:Mt})))),document.getElementById("root"))}},[[178,1,2]]]);
//# sourceMappingURL=main.eceaade4.chunk.js.map