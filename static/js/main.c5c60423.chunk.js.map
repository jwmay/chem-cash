{"version":3,"sources":["agent.js","images/chemistry-background.jpg","images/chem-cash-logo.png","images/songs-background.jpg","images/doc-may-profile.jpg","components/Theme.js","components/Logo.js","constants/actionTypes.js","components/Header.js","components/Navigation.js","components/PageWrapper.js","components/NotFound.js","components/ProtectedRoute.js","components/ListErrors.js","components/PageHeader.js","components/Settings.js","components/ActionButton.js","components/Teacher/ResetStudentPasswordAlert.js","components/Teacher/ProductSelector.js","components/Teacher/TransactionDialog.js","converter.js","components/AccountView.js","components/Student/StudentAccount.js","components/Student/SongRequestDialog.js","components/Student/StudentSongs.js","components/Alert.js","components/Teacher/StudentSearch.js","components/Teacher/CourseSelector.js","components/Teacher/StudentsTable.js","components/Teacher/BulkTransactionsDialog.js","components/Filedrop.js","components/Spinner.js","components/Teacher/ImportScoresDialog.js","components/Teacher/UpdateAccountsMenu.js","components/Teacher/TeacherAccounts.js","components/Teacher/CourseDialog.js","components/Teacher/DeleteStudentAlert.js","components/Teacher/StudentDialog.js","components/Teacher/StudentTransferDialog.js","components/Teacher/CourseStudentList.js","components/Teacher/DeleteCourseAlert.js","components/Teacher/ImportStudentsDialog.js","components/Teacher/TasksTable.js","components/Teacher/TasksDialog.js","components/Teacher/CourseList.js","components/Teacher/TeacherCourses.js","components/Teacher/ProcessSongRequestsDialog.js","components/Teacher/TeacherSongs.js","components/Admin/TeacherDialog.js","components/Admin/DeleteTeacherAlert.js","components/Admin/TeacherList.js","components/Admin/ManageTeachers.js","components/ImagePreview.js","components/TextFieldLimit.js","components/Products/ProductDialog.js","components/Products/DeleteProductDialog.js","components/Products/ProductsGallery.js","components/Products/Products.js","components/Home.js","components/Loading.js","components/About.js","components/Login/LoginForm.js","components/Login/index.js","components/Notifier.js","reducers/auth.js","reducers/common.js","reducers/courses.js","reducers/nav.js","reducers/notifier.js","reducers/products.js","reducers/scores.js","reducers/settings.js","reducers/tasks.js","reducers/teachers.js","reducers/songs.js","middleware.js","store.js","reducer.js","components/App.js","index.js"],"names":["superagent","superagentPromise","_superagent","global","Promise","API_ROOT","encode","encodeURIComponent","responseBody","res","body","token","tokenPlugin","req","set","requests","url","del","use","then","get","post","put","Auth","current","login","username","password","user","register","save","Courses","add","course","delete","slug","enroll","getAll","unenroll","update","Products","product","Scores","import","data","Settings","settings","Songs","id","forStudent","forTeacher","request","song","Spotify","getAuthUrl","removeAuth","Students","courseId","users","Tasks","task","Teachers","Transactions","transaction","addMany","transactions","_id","setToken","_token","module","exports","ChemCashTheme","createMuiTheme","breakpoints","values","md","lg","palette","primary","lightGreen","secondary","amber","overrides","MuiDialogActions","root","padding","Logo","props","alt","src","logo","ASYNC_START","LOGIN","useStyles","makeStyles","theme","title","color","flexGrow","height","marginTop","spacing","marginRight","marginBottom","connect","state","navTabValue","nav","dispatch","onClickLogout","type","classes","currentUser","AppBar","position","Container","Toolbar","className","Typography","variant","align","charAt","toUpperCase","slice","Button","onClick","bottom","width","zIndex","path","router","location","pathname","common","onTabChange","tabValue","redirectTo","value","onLoad","onUnload","userRole","role","enabled","products","productsEnabled","songs","songRequestEnabled","handleTabChange","useEffect","tabFromPath","split","BottomNavigation","onChange","event","newValue","showLabels","BottomNavigationAction","label","icon","LocalAtm","QueueMusic","Store","SupervisorAccount","People","wrapper","PageWrapper","children","NotFound","exact","component","to","alert","alertList","ListErrors","errors","Object","keys","map","key","readableKey","replace","toLowerCase","severity","headerLeft","alignItems","display","headerRight","justifyContent","pageHeader","PageHeader","Grid","container","item","xs","paper","onSubmitForm","payload","all","agent","snackbar","message","inProgress","enableReinitialize","initialValues","defaultStudentPassword","songRequestPurchaseAmount","firstName","lastName","score100","scoreConverter","score90","score80","score70","score60","score50","validationSchema","Yup","typeError","onSubmit","form","a","userSettings","100","90","80","70","60","50","40","30","20","10","0","resetForm","Fab","disabled","SaveAlt","Paper","gutterBottom","TextField","name","fullWidth","Switch","actionButton","text","ActionButton","passedClasses","Tooltip","arrow","enterTouchDelay","action","IconButton","aria-label","ev","stopPropagation","onFocus","size","btnSize","student","useState","open","setOpen","handleClose","LockOpen","fontSize","Dialog","onClose","DialogTitle","DialogContent","DialogContentText","DialogActions","autoFocus","ProductSelector","Autocomplete","autoHighlight","freeSolo","getOptionLabel","noOptionsText","onInputChange","options","renderInput","params","placeholder","required","renderOption","option","inputValue","matches","match","parts","parse","part","index","style","fontWeight","highlight","scores","onAdd","typeTitle","onExit","useTheme","fullScreen","useMediaQuery","down","handleSubmitAdd","Grade","ShoppingCart","maxWidth","amount","description","formik","setFieldValue","cost","convertScore","score","conversions","total","totalPoints","nonZeroTotal","percent","Math","round","floor","actions","balance","borderTop","fontStyle","textTransform","edit","backgroundColor","main","subtotal","typography","pxToRem","unit","AccountHeader","canEdit","doEdit","onEditClick","period","bonuses","purchases","Close","Edit","TransactionList","onDelete","onUpdate","setData","mapTransaction","createdAt","Date","toDateString","mappedData","mapped","bonus","purchase","mapScore","field","editable","defaultSort","columns","localization","emptyDataSourceMessage","editRow","deleteText","actionsColumnIndex","paging","toolbar","onRowUpdate","newData","oldData","resolve","reject","dataUpdate","tableData","onRowDelete","splice","setDoEdit","button","dialog","backgroundImage","background","backgroundPosition","backgroundSize","input","inputLabel","handleSubmit","Add","artist","InputLabelProps","marginLeft","paddingLeft","status","DataRow","showStudent","TableRow","TableCell","statusDescription","InfoOutlined","CourseSongs","length","colSpan","UserSongs","courseSongs","userSongs","mySongsOnly","setMySongsOnly","grid","FormControlLabel","control","Checkbox","checked","target","TableContainer","Table","TableHead","TableBody","Collapse","in","search","courses","setMappedData","students","flat","groupBy","shadows","boxShadow","light","onSelect","tabIndex","StudentsTable","fullName","nRowsSelected","onSelectionChange","rows","selection","up","curStudent","isClosed","isOpen","setCourse","setStudents","filedrop","grey","borderRadius","flexDirection","outline","transition","filedropActive","contrastText","filedropReject","Filedrop","onFiledrop","onDrop","useCallback","acceptedFiles","forEach","file","reader","FileReader","onabort","console","log","onerror","onload","parsedFile","result","skip_empty_lines","readAsBinaryString","useDropzone","accept","multiple","onDropAccepted","getRootProps","getInputProps","isDragActive","isDragReject","minWidth","spinner","Spinner","CircularProgress","ScoreImportStepper","onDataChange","onShowImport","setFile","tasks","setTasks","handleTaskChange","tasksSelected","some","el","FormControl","FormGroup","onImport","ready","setReady","importData","selected","usernames","pop","filter","parsed","taskName","find","row","endsWith","push","UpdateAccountsMenu","menuAnchorEl","setMenuAnchorEl","menuSelection","setMenuSelection","handleMenuSelect","currentTarget","dataset","handleDialogClose","Money","Menu","anchorEl","Boolean","MenuItem","data-type","ListItemIcon","Publish","ListItemText","importSummary","setStudent","plural","qty","tasksCreated","scoresImported","scoresUpdated","handleClickOpen","handleSubmitUpdate","Delete","PersonAdd","courseOut","courseIn","Loop","ds","select","borderBottomColor","rowHeader","studentUsername","StudentListRow","Chip","CourseStudentList","column","trim","element","minHeight","Assignment","courseDetails","courseHeader","coursePeriod","courseTitle","CourseList","expanded","setExpanded","ExpansionPanel","panel","isExpanded","ExpansionPanelSummary","expandIcon","ExpandMore","Avatar","ExpansionPanelDetails","importCount","pageLoaded","songInfo","statusButton","studentInfo","borderTopColor","borderTopStyle","borderTopWidth","paddingTop","setSong","setStatus","setStatusDescription","skippedSongs","setSkippedSongs","getNextSong","nextSong","includes","handleStatusButtonClick","handleStatusDescriptionChange","PlaylistAddCheck","ButtonGroup","href","getSpotifySearchUrl","ThumbUp","ThumbDown","RadioGroup","Radio","AlertTitle","purchasedBy","render","rowData","renderType","lookup","approved","pending","rejected","removed","grouping","dataDelete","teachers","teacher","teacherDetails","teacherHeader","teacherUsername","teacherName","TeacherList","header","paddingRight","top","img","maxHeight","window","borderColor","borderStyle","borderWidth","ImagePreview","TextFieldLimit","error","inputProps","maxLength","limit","helperText","addIcon","updateIcon","CHAR_LIMITS","photoUrl","quantity","max","as","actionIcon","lineHeight","opacity","h5","whiteSpace","tile","tileBar","paddingBottom","ProductsGallery","isSmall","isMedium","cols","GridList","GridListTile","GridListTileBar","placement","subtitle","displayType","thousandSeparator","suffix","DeleteProductDialog","StudentAccount","StudentSongs","TeacherAccounts","TeacherCourses","TeacherSongs","ManageTeachers","flexFlow","overflowY","Loading","elevation","page","profile","float","About","Link","auth","submitForm","aboutLink","right","loginLink","textDecoration","margin","progress","left","AboutLink","LoginLink","startIcon","ArrowBackIos","LinearProgress","Notification","enqueueSnackbar","useSnackbar","notifier","onSnackbarClose","notistackRef","React","createRef","onSnackbarDismiss","closeSnackbar","maxSnack","ref","subtype","defaultState","appName","viewChangeCounter","appLoaded","spotifyTokens","undefined","sortByLastName","b","localeCompare","sortByPeriod","sort","courseCopy","toString","count","updatedUser","sortByCost","getTotals","sumTransactions","reduce","addScores","added","curUser","curUserId","usersAdded","unionBy","addTransaction","startsWith","addBulkTransaction","deleteTransaction","deleted","updateTransaction","updated","addedTransactions","addedBulkTransactions","deletedTransactions","addedScores","results","updatedTransactions","spotifyAuthUrl","songsByUser","songsByCourse","promiseMiddleware","store","next","v","currentView","getState","skipTracking","currentState","promise","response","localStorageMiddleware","localStorage","setItem","history","createBrowserHistory","myRouterMiddleware","routerMiddleware","createStore","combineReducers","connectRouter","composeWithDevTools","applyMiddleware","onRedirect","getItem","ThemeProvider","CssBaseline","fallback","Login","Home","ReactDOM","App","document","getElementById"],"mappings":"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","file":"static/js/main.c5c60423.chunk.js","sourcesContent":["import superagentPromise from 'superagent-promise'\nimport _superagent from 'superagent'\n\nconst superagent = superagentPromise(_superagent, global.Promise)\n\nconst API_ROOT =\n  process.env.NODE_ENV === 'production'\n    ? 'https://chem-cash.herokuapp.com/api'\n    : 'http://localhost:4000/api'\n\nconst encode = encodeURIComponent\nconst responseBody = (res) => res.body\n\nlet token = null\nlet tokenPlugin = (req) => {\n  if (token) {\n    req.set('authorization', `Token ${token}`)\n  }\n}\n\nconst requests = {\n  // @todo update superagent-promise from v1.1.0 when available\n  // superagent-promise does not allow for body to pass, so it has been manually added to the package file\n  // This is a known issue, see: https://github.com/lightsofapollo/superagent-promise/issues/28\n  del: (url, body) =>\n    superagent\n      .del(`${API_ROOT}${url}`, body)\n      .use(tokenPlugin)\n      .then(responseBody),\n  get: (url) =>\n    superagent.get(`${API_ROOT}${url}`).use(tokenPlugin).then(responseBody),\n  post: (url, body) =>\n    superagent\n      .post(`${API_ROOT}${url}`, body)\n      .use(tokenPlugin)\n      .then(responseBody),\n  put: (url, body) =>\n    superagent\n      .put(`${API_ROOT}${url}`, body)\n      .use(tokenPlugin)\n      .then(responseBody),\n}\n\nconst Auth = {\n  current: () => requests.get('/user'),\n  login: (username, password) =>\n    requests.post('/users/login', { user: { username, password } }),\n  register: (user) => requests.post('/users', { user }),\n  save: (user) => requests.put('/user', { user }),\n}\n\nconst Courses = {\n  add: (course) => requests.post('/courses', { course }),\n  delete: (slug) => requests.del(`/courses/${slug}`),\n  enroll: (course) =>\n    requests.post(`/courses/${course.slug}/enroll`, { course }),\n  getAll: () => requests.get('/courses'),\n  unenroll: (course) =>\n    requests.del(`/courses/${course.slug}/enroll`, { course }),\n  update: (course) => requests.put(`/courses/${course.slug}`, { course }),\n}\n\nconst Products = {\n  add: (product) => requests.post('/products', { product }),\n  delete: (slug) => requests.del(`/products/${slug}`),\n  getAll: () => requests.get('/products'),\n  update: (product) => requests.put(`/products/${product.slug}`, { product }),\n}\n\nconst Scores = {\n  getAll: (username) => requests.get(`/scores?username=${username}`),\n  import: (data) => requests.post('/scores/import', { data }),\n}\n\nconst Settings = {\n  // get: () => requests.get('/user/settings'),\n  update: (settings) => requests.put('/user/settings', { settings }),\n}\n\nconst Songs = {\n  delete: (id) => requests.del(`/songs/${id}`),\n  forStudent: () => requests.get('/songs/student'),\n  forTeacher: () => requests.get('/songs/teacher'),\n  request: (song) => requests.post('/songs', { song }),\n  update: (song) => requests.put(`/songs/${song.id}`, { song }),\n}\n\nconst Spotify = {\n  getAuthUrl: () => requests.get('/spotify/auth'),\n  removeAuth: () => requests.del('/spotify/auth'),\n}\n\nconst Students = {\n  add: (user, courseId) =>\n    requests.post(`/users?courseId=${encode(courseId)}`, { user }),\n  delete: (user) => requests.del(`/users/student/${user.username}`),\n  import: (users, courseId) =>\n    requests.post(`/users/import?courseId=${encode(courseId)}`, { users }),\n  update: (user) => requests.put(`/users/${user.username}`, { user }),\n}\n\nconst Tasks = {\n  getAll: (courseId) => requests.get(`/tasks?courseId=${courseId}`),\n  delete: (task) => requests.del(`/tasks/${task.slug}`),\n  update: (task) => requests.put(`/tasks/${task.slug}`, { task }),\n}\n\nconst Teachers = {\n  getAll: () => requests.get('/users?role=teacher'),\n  delete: (user) => requests.del(`/users/teacher/${user.username}`),\n  update: (user) => requests.put(`/users/${user.username}`, { user }),\n}\n\nconst Transactions = {\n  add: (transaction) => requests.post('/transactions', { transaction }),\n  addMany: (transactions) =>\n    requests.post('/transactions/bulk', { transactions }),\n  delete: (transaction) => requests.del(`/transactions/${transaction._id}`),\n  update: (transaction) =>\n    requests.put(`/transactions/${transaction._id}`, { transaction }),\n}\n\nexport default {\n  Auth,\n  Courses,\n  Products,\n  Scores,\n  Settings,\n  Songs,\n  Spotify,\n  Students,\n  Tasks,\n  Teachers,\n  Transactions,\n  setToken: (_token) => {\n    token = _token\n  },\n}\n","module.exports = __webpack_public_path__ + \"static/media/chemistry-background.11d1d297.jpg\";","module.exports = __webpack_public_path__ + \"static/media/chem-cash-logo.30174016.png\";","module.exports = __webpack_public_path__ + \"static/media/songs-background.cfcd4ce6.jpg\";","module.exports = __webpack_public_path__ + \"static/media/doc-may-profile.f927335d.jpg\";","import { createMuiTheme } from '@material-ui/core/styles'\nimport lightGreen from '@material-ui/core/colors/lightGreen'\nimport amber from '@material-ui/core/colors/amber'\n\nconst ChemCashTheme = createMuiTheme({\n  breakpoints: {\n    values: {\n      md: 768,\n      lg: 1024,\n    },\n  },\n  palette: {\n    primary: lightGreen,\n    secondary: amber,\n  },\n  overrides: {\n    MuiDialogActions: {\n      root: {\n        padding: '16px 24px',\n      },\n    },\n  },\n})\n\nexport default ChemCashTheme\n","import React from 'react'\nimport logo from '../images/chem-cash-logo.png'\n\nconst Logo = (props) => {\n  return <img alt='Chem Cash Logo' src={logo} {...props} />\n}\n\nexport default Logo\n","export const APP_LOAD = 'APP_LOAD'\nexport const REDIRECT = 'REDIRECT'\n\nexport const ASYNC_START = 'ASYNC_START'\nexport const ASYNC_END = 'ASYNC_END'\n\nexport const LOGIN = 'LOGIN'\nexport const LOGIN_PAGE_UNLOADED = 'LOGIN_PAGE_UNLOADED'\nexport const LOGOUT = 'LOGOUT'\n\nexport const REGISTER = 'REGISTER'\nexport const REGISTER_PAGE_UNLOADED = 'REGISTER_PAGE_UNLOADED'\n\nexport const SETTINGS_PAGE_UNLOADED = 'SETTINGS_PAGE_UNLOADED'\nexport const SETTINGS_SAVED = 'SETTINGS_SAVED'\n\nexport const NAV_LOADED = 'NAV_LOADED'\nexport const NAV_UNLOADED = 'NAV_UNLOADED'\nexport const NAV_TAB_CHANGE = 'NAV_TAB_CHANGE'\n\nexport const ALERT_CLOSED = 'ALERT_CLOSED'\nexport const SNACKBAR_CLOSED = 'SNACKBAR_CLOSED'\n\nexport const DELETE_SONG_REQUEST = 'DELETE_SONG_REQUEST'\nexport const SONG_REQUESTS_DIALOG_UNLOADED = 'SONG_REQUESTS_DIALOG_UNLOADED'\nexport const SONGS_PAGE_UNLOADED = 'SONGS_PAGE_UNLOADED'\nexport const STUDENT_SONGS_PAGE_LOADED = 'STUDENT_SONGS_PAGE_LOADED'\nexport const SUBMIT_SONG_REQUEST = 'SUBMIT_SONG_REQUEST'\nexport const TEACHER_SONGS_PAGE_LOADED = 'TEACHER_SONGS_PAGE_LOADED'\nexport const UPDATE_SONG_REQUEST = 'UPDATE_SONG_REQUEST'\n\nexport const ADD_COURSE = 'ADD_COURSE'\nexport const COURSE_DIALOG_UNLOADED = 'COURSE_DIALOG_UNLOADED'\nexport const COURSES_PAGE_LOADED = 'COURSES_PAGE_LOADED'\nexport const COURSES_PAGE_UNLOADED = 'COURSES_PAGE_UNLOADED'\nexport const DELETE_COURSE = 'DELETE_COURSE'\nexport const UPDATE_COURSE = 'UPDATE_COURSE'\n\nexport const ADD_STUDENT = 'ADD_STUDENT'\nexport const DELETE_STUDENT = 'DELETE_STUDENT'\nexport const IMPORT_STUDENTS = 'IMPORT_STUDENTS'\nexport const MOVE_STUDENT = 'MOVE_STUDENT'\nexport const RESET_STUDENT_PASSWORD = 'RESET_STUDENT_PASSWORD'\nexport const STUDENT_DIALOG_UNLOADED = 'STUDENT_DIALOG_UNLOADED'\nexport const UPDATE_STUDENT = 'UPDATE_STUDENT'\n\nexport const ADD_TEACHER = 'ADD_TEACHER'\nexport const DELETE_TEACHER = 'DELETE_TEACHER'\nexport const MANAGE_TEACHERS_PAGE_LOADED = 'MANAGE_TEACHERS_PAGE_LOADED'\nexport const MANAGE_TEACHERS_PAGE_UNLOADED = 'MANAGE_TEACHERS_PAGE_UNLOADED'\nexport const TEACHER_DIALOG_UNLOADED = 'TEACHER_DIALOG_UNLOADED'\nexport const UPDATE_TEACHER = 'UPDATE_TEACHER'\n\nexport const SPOTIFY_REMOVE_AUTH = 'SPOTIFY_REMOVE_AUTH'\nexport const SPOTIFY_LINKER_LOADED = 'SPOTIFY_LINKER_LOADED'\nexport const SPOTIFY_LINKER_UNLOADED = 'SPOTIFY_LINKER_UNLOADED'\n\nexport const IMPORT_SCORES = 'IMPORT_SCORES'\nexport const IMPORT_SCORES_DIALOG_UNLOADED = 'IMPORT_SCORES_DIALOG_UNLOADED'\n\nexport const DELETE_TASK = 'DELETE_TASK'\nexport const TASKS_DIALOG_LOADED = 'TASKS_DIALOG_LOADED'\nexport const TASKS_DIALOG_UNLOADED = 'TASKS_DIALOG_UNLOADED'\nexport const UPDATE_TASK = 'UPDATE_TASK'\n\nexport const ACCOUNT_VIEW_LOADED = 'ACCOUNT_VIEW_LOADED'\nexport const ACCOUNT_VIEW_UNLOADED = 'ACCOUNT_VIEW_UNLOADED'\nexport const ACCOUNTS_PAGE_UNLOADED = 'ACCOUNTS_PAGE_UNLOADED'\nexport const ADD_TRANSACTION = 'ADD_TRANSACTION'\nexport const ADD_TRANSACTIONS = 'ADD_TRANSACTIONS'\nexport const DELETE_TRANSACTION = 'DELETE_TRANSACTION'\nexport const UPDATE_TRANSACTION = 'UPDATE_TRANSACTION'\nexport const TRANSACTION_DIALOG_UNLOADED = 'TRANSACTION_DIALOG_UNLOADED'\nexport const TRANSACTIONS_DIALOG_UNLOADED = 'TRANSACTIONS_DIALOG_UNLOADED'\n\nexport const STUDENT_SEARCH_LOADED = 'STUDENT_SEARCH_LOADED'\nexport const STUDENT_SEARCH_UNLOADED = 'STUDENT_SEARCH_UNLOADED'\n\nexport const PRODUCTS_PAGE_LOADED = 'PRODUCTS_PAGE_LOADED'\nexport const PRODUCTS_PAGE_UNLOADED = 'PRODUCTS_PAGE_UNLOADED'\nexport const PRODUCT_DIALOG_UNLOADED = 'PRODUCT_DIALOG_UNLOADED'\nexport const ADD_PRODUCT = 'ADD_PRODUCT'\nexport const DELETE_PRODUCT = 'DELETE_PRODUCT'\nexport const UPDATE_PRODUCT = 'UPDATE_PRODUCT'\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport {\n  AppBar,\n  Button,\n  Container,\n  Toolbar,\n  Typography,\n  makeStyles,\n} from '@material-ui/core'\n\nimport Logo from '../components/Logo'\n\nimport { LOGOUT } from '../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  title: {\n    color: 'white',\n    flexGrow: 1,\n  },\n  logo: {\n    height: 65,\n    marginTop: theme.spacing(2),\n    marginRight: theme.spacing(3),\n    marginBottom: theme.spacing(2),\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  navTabValue: state.nav.navTabValue,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onClickLogout: () => dispatch({ type: LOGOUT }),\n})\n\nconst Header = (props) => {\n  const classes = useStyles()\n  const title = props.navTabValue\n\n  if (props.currentUser) {\n    return (\n      <AppBar position='static'>\n        <Container>\n          <Toolbar>\n            <Logo className={classes.logo} />\n            <Typography variant='h5' align='center' className={classes.title}>\n              {title && title.charAt(0).toUpperCase() + title.slice(1)}\n            </Typography>\n            <Button color='inherit' onClick={props.onClickLogout}>\n              Logout\n            </Button>\n          </Toolbar>\n        </Container>\n      </AppBar>\n    )\n  } else {\n    return null\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Header)\n","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  BottomNavigation,\n  BottomNavigationAction,\n  makeStyles,\n} from '@material-ui/core'\nimport {\n  LocalAtm,\n  People,\n  QueueMusic,\n  Settings,\n  Store,\n  SupervisorAccount,\n} from '@material-ui/icons'\n\nimport {\n  NAV_TAB_CHANGE,\n  NAV_LOADED,\n  NAV_UNLOADED,\n} from '../constants/actionTypes'\n\nconst useStyles = makeStyles({\n  nav: {\n    position: 'fixed',\n    bottom: 0,\n    width: '100%',\n    zIndex: '1000',\n  },\n})\n\nconst mapStateToProps = (state) => ({\n  path: state.router.location.pathname,\n  currentUser: state.common.currentUser,\n  settings: state.common.settings,\n  navTabValue: state.nav.navTabValue,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onTabChange: (tabValue, redirectTo) =>\n    dispatch({ type: NAV_TAB_CHANGE, value: tabValue, redirectTo: redirectTo }),\n  onLoad: (tabValue, redirectTo) =>\n    dispatch({ type: NAV_LOADED, value: tabValue, redirectTo: redirectTo }),\n  onUnload: () => dispatch({ type: NAV_UNLOADED }),\n})\n\nconst Navigation = (props) => {\n  const classes = useStyles()\n  const userRole = props.currentUser.role\n  const enabled = {\n    products: props.settings.productsEnabled,\n    songs: props.settings.songRequestEnabled,\n  }\n\n  const handleTabChange = (tabValue) => {\n    props.onTabChange(tabValue, `/${userRole}/${tabValue}`)\n  }\n\n  useEffect(() => {\n    const tabFromPath = props.path.split('/')[2]\n    const tabValue =\n      tabFromPath ??\n      (userRole === 'student'\n        ? 'account'\n        : userRole === 'admin'\n        ? 'teachers'\n        : 'accounts')\n    const redirectTo = `/${userRole}/${tabValue}`\n    props.onLoad(tabValue, redirectTo)\n\n    return () => {\n      props.onUnload()\n    }\n  }, [])\n\n  if (userRole === 'student') {\n    return (\n      <BottomNavigation\n        className={classes.nav}\n        onChange={(event, newValue) => {\n          handleTabChange(newValue)\n        }}\n        showLabels\n        value={props.navTabValue}\n      >\n        <BottomNavigationAction\n          label='Account'\n          icon={<LocalAtm />}\n          value='account'\n        />\n        {enabled.songs && (\n          <BottomNavigationAction\n            label='Songs'\n            icon={<QueueMusic />}\n            value='songs'\n          />\n        )}\n        {enabled.products && (\n          <BottomNavigationAction\n            label='Products'\n            icon={<Store />}\n            value='products'\n          />\n        )}\n        <BottomNavigationAction\n          label='Settings'\n          icon={<Settings />}\n          value='settings'\n        />\n      </BottomNavigation>\n    )\n  }\n\n  if (userRole === 'admin') {\n    return (\n      <BottomNavigation\n        className={classes.nav}\n        onChange={(event, newValue) => {\n          handleTabChange(newValue)\n        }}\n        showLabels\n        value={props.navTabValue}\n      >\n        <BottomNavigationAction\n          label='Teachers'\n          icon={<SupervisorAccount />}\n          value='teachers'\n        />\n        <BottomNavigationAction\n          label='Settings'\n          icon={<Settings />}\n          value='settings'\n        />\n      </BottomNavigation>\n    )\n  }\n\n  return (\n    <BottomNavigation\n      className={classes.nav}\n      onChange={(event, newValue) => {\n        handleTabChange(newValue)\n      }}\n      showLabels\n      value={props.navTabValue}\n    >\n      <BottomNavigationAction\n        label='Accounts'\n        icon={<LocalAtm />}\n        value='accounts'\n      />\n      {enabled.songs && (\n        <BottomNavigationAction\n          label='Songs'\n          icon={<QueueMusic />}\n          value='songs'\n        />\n      )}\n      {enabled.products && (\n        <BottomNavigationAction\n          label='Products'\n          icon={<Store />}\n          value='products'\n        />\n      )}\n      <BottomNavigationAction\n        label='Courses'\n        icon={<People />}\n        value='courses'\n      />\n      <BottomNavigationAction\n        label='Settings'\n        icon={<Settings />}\n        value='settings'\n      />\n    </BottomNavigation>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Navigation)\n","import React from 'react'\nimport { makeStyles } from '@material-ui/core/styles'\n\nconst useStyles = makeStyles((theme) => ({\n  wrapper: {\n    marginTop: theme.spacing(4),\n    marginBottom: theme.spacing(11),\n  },\n}))\n\nconst PageWrapper = (props) => {\n  const classes = useStyles()\n\n  return <div className={classes.wrapper}>{props.children}</div>\n}\n\nexport default PageWrapper\n","import React from 'react'\nimport { Container, Typography } from '@material-ui/core'\nimport PageWrapper from './PageWrapper'\n\nconst NotFound = (props) => {\n  return (\n    <PageWrapper>\n      <Container>\n        <Typography variant='h2'>Error 404: Page Not Found</Typography>\n      </Container>\n    </PageWrapper>\n  )\n}\n\nexport default NotFound\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Route, Redirect } from 'react-router-dom'\n\nconst mapStateToProps = (state) => ({ currentUser: state.common.currentUser })\n\nconst ProtectedRoute = (props) => {\n  if (!props.currentUser) {\n    return <Redirect to='/' />\n  }\n\n  return <Route exact path={props.path} component={props.component} />\n}\n\nexport default connect(mapStateToProps, () => ({}))(ProtectedRoute)\n","import React from 'react'\nimport { makeStyles } from '@material-ui/core/styles'\nimport Alert from '@material-ui/lab/Alert'\n\nconst useStyles = makeStyles((theme) => ({\n  alert: {\n    'width': '100%',\n    '&:not(:last-of-type)': {\n      marginBottom: theme.spacing(1),\n    },\n  },\n  alertList: {\n    marginBottom: theme.spacing(2),\n  },\n}))\n\nconst ListErrors = ({ errors }) => {\n  const classes = useStyles()\n\n  if (errors) {\n    return (\n      <div className={classes.alertList}>\n        {Object.keys(errors).map((key) => {\n          const readableKey = key\n            .replace(/([a-z0-9])([A-Z])/g, '$1 $2')\n            .toLowerCase()\n          return (\n            <Alert className={classes.alert} severity='error' key={key}>\n              {readableKey} {errors[key]}\n            </Alert>\n          )\n        })}\n      </div>\n    )\n  }\n\n  return null\n}\n\nexport default ListErrors\n","import React from 'react'\nimport { Grid, Typography, makeStyles } from '@material-ui/core'\n\nconst useStyles = makeStyles((theme) => ({\n  headerLeft: {\n    alignItems: 'center',\n    display: 'flex',\n  },\n  headerRight: {\n    alignItems: 'center',\n    display: 'flex',\n    justifyContent: 'flex-end',\n  },\n  pageHeader: {\n    marginBottom: theme.spacing(4),\n  },\n}))\n\nconst PageHeader = ({ children, title }) => {\n  const classes = useStyles()\n\n  return (\n    <Grid container spacing={2} className={classes.pageHeader}>\n      <Grid item xs={12} md={6} className={classes.headerLeft}>\n        <Typography variant='h4'>{title}</Typography>\n      </Grid>\n      <Grid item xs={12} md={6} className={classes.headerRight}>\n        {children}\n      </Grid>\n    </Grid>\n  )\n}\n\nexport default PageHeader\n","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Form, Field } from 'formik'\nimport { Switch, TextField } from 'formik-material-ui'\nimport * as Yup from 'yup'\nimport { Fab, Grid, Paper, Typography, makeStyles } from '@material-ui/core'\nimport { SaveAlt } from '@material-ui/icons'\n\nimport ListErrors from './ListErrors'\nimport PageHeader from './PageHeader'\n// import SpotifyLinker from './Teacher/SpotifyLinker'\nimport agent from '../agent'\n\nimport {\n  SETTINGS_PAGE_UNLOADED,\n  SETTINGS_SAVED,\n} from '../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  icon: {\n    marginRight: theme.spacing(1),\n  },\n  paper: {\n    padding: theme.spacing(2),\n    marginBottom: theme.spacing(4),\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.settings,\n  currentUser: state.common.currentUser,\n  settings: state.common.settings,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onSubmitForm: (settings) =>\n    dispatch({\n      type: SETTINGS_SAVED,\n      payload: Promise.all([\n        agent.Auth.save(settings),\n        agent.Settings.update(settings),\n      ]),\n      snackbar: { message: 'Settings saved', variant: 'success' },\n    }),\n  onUnload: () => dispatch({ type: SETTINGS_PAGE_UNLOADED }),\n})\n\nconst Settings = ({\n  currentUser,\n  errors,\n  inProgress,\n  onSubmitForm,\n  onUnload,\n  settings,\n}) => {\n  const classes = useStyles()\n\n  useEffect(() => {\n    return () => {\n      onUnload()\n    }\n  }, [])\n\n  return (\n    <Formik\n      enableReinitialize={true}\n      initialValues={{\n        defaultStudentPassword: settings?.defaultStudentPassword || '',\n        productsEnabled: settings?.productsEnabled || false,\n        songRequestEnabled: settings?.songRequestEnabled || false,\n        songRequestPurchaseAmount: settings?.songRequestPurchaseAmount || 0,\n        firstName: currentUser.firstName,\n        lastName: currentUser.lastName,\n        password: '',\n        score100: settings?.scoreConverter?.[100] || 1200,\n        score90: settings?.scoreConverter?.[90] || 1000,\n        score80: settings?.scoreConverter?.[80] || 800,\n        score70: settings?.scoreConverter?.[70] || 600,\n        score60: settings?.scoreConverter?.[60] || 0,\n        score50: settings?.scoreConverter?.[50] || 0,\n      }}\n      validationSchema={Yup.object({\n        defaultStudentPassword: Yup.string(),\n        productsEnabled: Yup.boolean(),\n        songRequestEnabled: Yup.boolean(),\n        songRequestPurchaseAmount: Yup.number().typeError('Numbers only'),\n        firstName: Yup.string(),\n        lastName: Yup.string(),\n        password: Yup.string(),\n        score100: Yup.number().typeError('Numbers only'),\n        score90: Yup.number().typeError('Numbers only'),\n        score80: Yup.number().typeError('Numbers only'),\n        score70: Yup.number().typeError('Numbers only'),\n        score60: Yup.number().typeError('Numbers only'),\n        score50: Yup.number().typeError('Numbers only'),\n      })}\n      onSubmit={async (values, form) => {\n        const userSettings = { ...values }\n\n        if (!userSettings.password && currentUser.role !== 'student')\n          delete userSettings.password\n\n        if (currentUser.role !== 'student')\n          userSettings.scoreConverter = {\n            100: values.score100,\n            90: values.score90,\n            80: values.score80,\n            70: values.score70,\n            60: values.score60,\n            50: values.score50,\n            40: 0,\n            30: 0,\n            20: 0,\n            10: 0,\n            0: 0,\n          }\n\n        onSubmitForm(userSettings)\n\n        form.resetForm({\n          values: { ...userSettings, password: '' },\n        })\n      }}\n    >\n      <Form>\n        <PageHeader title='Manage Account'>\n          <Fab\n            color='primary'\n            disabled={inProgress}\n            type='sumbit'\n            variant='extended'\n          >\n            <SaveAlt className={classes.icon} />\n            {inProgress ? 'Saving...' : 'Save settings'}\n          </Fab>\n        </PageHeader>\n        <ListErrors errors={errors} />\n\n        {currentUser.role !== 'student' && (\n          <Paper className={classes.paper}>\n            <Grid container spacing={2}>\n              <Grid item xs={12}>\n                <Typography variant='h5' gutterBottom>\n                  Song Requests\n                </Typography>\n              </Grid>\n              <Grid item xs={12} md={6}>\n                <Field\n                  component={TextField}\n                  label='Song request purchase amount'\n                  name='songRequestPurchaseAmount'\n                  type='text'\n                  variant='outlined'\n                  fullWidth\n                />\n              </Grid>\n              <Grid item xs={12} md={6}>\n                <label>\n                  <Field\n                    component={Switch}\n                    label='Display the Songs page'\n                    name='songRequestEnabled'\n                    type='checkbox'\n                  />\n                  Display the Songs page\n                </label>\n              </Grid>\n              {/* <Grid item xs={12} md={6}>\n                <SpotifyLinker />\n              </Grid> */}\n            </Grid>\n          </Paper>\n        )}\n\n        {currentUser.role !== 'student' && (\n          <Paper className={classes.paper}>\n            <Grid container spacing={2}>\n              <Grid item xs={12}>\n                <Typography variant='h5' gutterBottom>\n                  Products\n                </Typography>\n              </Grid>\n              <Grid item xs={12} md={6}>\n                <label>\n                  <Field\n                    component={Switch}\n                    label='Display the Products page'\n                    name='productsEnabled'\n                    type='checkbox'\n                  />\n                  Display the Products page\n                </label>\n              </Grid>\n            </Grid>\n          </Paper>\n        )}\n\n        {currentUser.role !== 'student' && (\n          <Paper className={classes.paper}>\n            <Grid container spacing={2}>\n              <Grid item xs={12}>\n                <Typography variant='h5' gutterBottom>\n                  Student Accounts\n                </Typography>\n              </Grid>\n              <Grid item xs={12} md={6}>\n                <Field\n                  component={TextField}\n                  label='Default student password'\n                  name='defaultStudentPassword'\n                  type='text'\n                  variant='outlined'\n                  fullWidth\n                />\n              </Grid>\n            </Grid>\n          </Paper>\n        )}\n\n        {currentUser.role !== 'student' && (\n          <Paper className={classes.paper}>\n            <Grid container spacing={2}>\n              <Grid item xs={12}>\n                <Typography variant='h5' gutterBottom>\n                  Score Conversions\n                </Typography>\n              </Grid>\n              <Grid item xs={12} md={2}>\n                <Field\n                  component={TextField}\n                  label='100% and up'\n                  name='score100'\n                  type='number'\n                  variant='outlined'\n                  fullWidth\n                />\n              </Grid>\n              <Grid item xs={12} md={2}>\n                <Field\n                  component={TextField}\n                  label='90% and up'\n                  name='score90'\n                  type='number'\n                  variant='outlined'\n                  fullWidth\n                />\n              </Grid>\n              <Grid item xs={12} md={2}>\n                <Field\n                  component={TextField}\n                  label='80% and up'\n                  name='score80'\n                  type='number'\n                  variant='outlined'\n                  fullWidth\n                />\n              </Grid>\n              <Grid item xs={12} md={2}>\n                <Field\n                  component={TextField}\n                  label='70% and up'\n                  name='score70'\n                  type='number'\n                  variant='outlined'\n                  fullWidth\n                />\n              </Grid>\n              <Grid item xs={12} md={2}>\n                <Field\n                  component={TextField}\n                  label='60% and up'\n                  name='score60'\n                  type='number'\n                  variant='outlined'\n                  fullWidth\n                />\n              </Grid>\n              <Grid item xs={12} md={2}>\n                <Field\n                  component={TextField}\n                  label='50% and up'\n                  name='score50'\n                  type='number'\n                  variant='outlined'\n                  fullWidth\n                />\n              </Grid>\n            </Grid>\n          </Paper>\n        )}\n\n        {currentUser.role !== 'student' && (\n          <Paper className={classes.paper}>\n            <Grid container spacing={2}>\n              <Grid item xs={12}>\n                <Typography variant='h5' gutterBottom>\n                  Account Details\n                </Typography>\n              </Grid>\n              <Grid item xs={12} md={6}>\n                <Field\n                  component={TextField}\n                  label='First name'\n                  name='firstName'\n                  type='text'\n                  variant='outlined'\n                  fullWidth\n                />\n              </Grid>\n              <Grid item xs={12} md={6}>\n                <Field\n                  component={TextField}\n                  label='Last name'\n                  name='lastName'\n                  type='text'\n                  variant='outlined'\n                  fullWidth\n                />\n              </Grid>\n            </Grid>\n          </Paper>\n        )}\n\n        <Paper className={classes.paper}>\n          <Grid container spacing={2}>\n            <Grid item xs={12}>\n              <Typography variant='h5' gutterBottom>\n                Account Security\n              </Typography>\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <Field\n                component={TextField}\n                label='New password'\n                name='password'\n                type='password'\n                variant='outlined'\n                fullWidth\n              />\n            </Grid>\n          </Grid>\n        </Paper>\n      </Form>\n    </Formik>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Settings)\n","import React from 'react'\nimport { IconButton, Tooltip, makeStyles } from '@material-ui/core'\n\nconst useStyles = makeStyles((theme) => ({\n  actionButton: {\n    color: theme.palette.text.disabled,\n  },\n}))\n\nconst ActionButton = (props) => {\n  const classes = useStyles()\n\n  const passedClasses = props.className || ''\n\n  const handleClick = (ev) => {\n    ev.stopPropagation()\n    props.onClick()\n  }\n\n  return (\n    <Tooltip arrow enterTouchDelay={0} title={props.action}>\n      <IconButton\n        aria-label={props.action}\n        className={`${classes.actionButton} ${passedClasses}`}\n        onClick={handleClick}\n        onFocus={(ev) => ev.stopPropagation()}\n        size={props.size}\n      >\n        {props.children}\n      </IconButton>\n    </Tooltip>\n  )\n}\n\nexport default ActionButton\n","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n} from '@material-ui/core'\nimport { LockOpen } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport agent from '../../agent'\n\nimport { RESET_STUDENT_PASSWORD } from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  defaultStudentPassword: state.common.settings.defaultStudentPassword,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onSubmit: (user) =>\n    dispatch({\n      type: RESET_STUDENT_PASSWORD,\n      payload: agent.Students.update(user),\n      snackbar: { message: 'Password reset', variant: 'success' },\n    }),\n})\n\nconst ResetStudentPasswordAlert = ({\n  btnSize,\n  defaultStudentPassword,\n  onSubmit,\n  student,\n}) => {\n  const [open, setOpen] = useState(false)\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmit = () => {\n    const user = { ...student, password: defaultStudentPassword }\n    onSubmit(user)\n    setOpen(false)\n  }\n\n  return (\n    <>\n      <ActionButton\n        action='Reset password'\n        onClick={handleClickOpen}\n        size={btnSize ?? 'small'}\n      >\n        <LockOpen fontSize='inherit' />\n      </ActionButton>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        onClick={(ev) => ev.stopPropagation()}\n        onFocus={(ev) => ev.stopPropagation()}\n      >\n        <DialogTitle>Reset Password</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Do you want to reset{' '}\n            <b>\n              {student.firstName} {student.lastName}\n            </b>\n            's password to <strong>{defaultStudentPassword}</strong>?\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button\n            onClick={handleSubmit}\n            color='primary'\n            variant='contained'\n            autoFocus\n          >\n            Reset\n          </Button>\n          <Button onClick={handleClose} variant='contained'>\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ResetStudentPasswordAlert)\n","import React from 'react'\nimport { TextField } from '@material-ui/core'\nimport { Autocomplete } from '@material-ui/lab'\nimport parse from 'autosuggest-highlight/parse'\nimport match from 'autosuggest-highlight/match'\n\nconst ProductSelector = ({ onChange, products }) => {\n  return (\n    <Autocomplete\n      autoHighlight\n      freeSolo\n      getOptionLabel={(product) => product.name}\n      noOptionsText='No products have been added'\n      onInputChange={(ev, value) => {\n        onChange(value)\n      }}\n      onChange={(ev, value) => {\n        onChange(value)\n      }}\n      options={products}\n      renderInput={(params) => (\n        <TextField\n          {...params}\n          label='Description'\n          placeholder='Type or select a product'\n          required\n        />\n      )}\n      renderOption={(option, { inputValue }) => {\n        const matches = match(option.name, inputValue)\n        const parts = parse(option.name, matches)\n\n        return (\n          <div>\n            {parts.map((part, index) => (\n              <span\n                key={index}\n                style={{\n                  fontWeight: part.highlight ? 700 : 400,\n                }}\n              >\n                {part.text}\n              </span>\n            ))}\n          </div>\n        )\n      }}\n    />\n  )\n}\n\nexport default ProductSelector\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Form, Field } from 'formik'\nimport { TextField } from 'formik-material-ui'\nimport * as Yup from 'yup'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Grid,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport { Grade, ShoppingCart } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport ListErrors from '../ListErrors'\nimport ProductSelector from './ProductSelector'\nimport agent from '../../agent'\n\nimport {\n  ADD_TRANSACTION,\n  TRANSACTION_DIALOG_UNLOADED,\n} from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  ...state.scores,\n  products: state.products.products,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onAdd: (transaction) =>\n    dispatch({\n      type: ADD_TRANSACTION,\n      payload: agent.Transactions.add(transaction),\n      snackbar: {\n        message: `${transaction.typeTitle} added`,\n        variant: 'success',\n      },\n    }),\n  onExit: () => dispatch({ type: TRANSACTION_DIALOG_UNLOADED }),\n})\n\nconst TransactionDialog = ({\n  errors,\n  inProgress,\n  onAdd,\n  onExit,\n  products,\n  student,\n  type,\n}) => {\n  const [open, setOpen] = useState(false)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmitAdd = (values) => {\n    onAdd({ ...values, student, type: type.toLowerCase(), typeTitle: type })\n  }\n\n  useEffect(() => {\n    // Close the dialog only if there are no errors\n    if (!inProgress && !errors) setOpen(false)\n  }, [inProgress])\n\n  return (\n    <>\n      <ActionButton\n        action={`Add ${type.toLowerCase()}`}\n        onClick={handleClickOpen}\n      >\n        {type === 'Bonus' && <Grade />}\n        {type === 'Purchase' && <ShoppingCart />}\n      </ActionButton>\n\n      <Dialog\n        fullScreen={fullScreen}\n        fullWidth={true}\n        maxWidth={'md'}\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onExit={onExit}\n        onFocus={(ev) => ev.stopPropagation()}\n        open={open}\n      >\n        <Formik\n          initialValues={{\n            amount: '',\n            description: '',\n          }}\n          validationSchema={Yup.object({\n            amount: Yup.number().typeError('Numbers only').required('Required'),\n            description: Yup.string().required('Required'),\n          })}\n          onSubmit={async (values) => {\n            handleSubmitAdd(values)\n          }}\n        >\n          {(formik) => (\n            <Form>\n              <DialogTitle>Add {type}</DialogTitle>\n              <DialogContent>\n                <ListErrors errors={errors} />\n                <Grid container spacing={2}>\n                  <Grid item xs={12} md={6}>\n                    {type === 'Bonus' ? (\n                      <Field\n                        autoFocus\n                        color='primary'\n                        component={TextField}\n                        disabled={inProgress}\n                        label='Description'\n                        name='description'\n                        type='text'\n                        fullWidth\n                      />\n                    ) : (\n                      <ProductSelector\n                        products={products}\n                        onChange={(product) => {\n                          if (typeof product === 'string') {\n                            formik.setFieldValue('description', product)\n                          } else if (product && typeof product === 'object') {\n                            formik.setFieldValue('amount', product.cost)\n                            formik.setFieldValue('description', product.name)\n                          } else {\n                            formik.setFieldValue('amount', '')\n                            formik.setFieldValue('description', '')\n                          }\n                        }}\n                      />\n                    )}\n                  </Grid>\n                  <Grid item xs={12} md={6}>\n                    <Field\n                      color='primary'\n                      component={TextField}\n                      disabled={inProgress}\n                      label='Amount'\n                      name='amount'\n                      type='text'\n                      fullWidth\n                    />\n                  </Grid>\n                </Grid>\n              </DialogContent>\n              <DialogActions>\n                <Button\n                  disabled={inProgress}\n                  color='primary'\n                  type='submit'\n                  variant='contained'\n                >\n                  {inProgress ? 'Adding...' : 'Add'}\n                </Button>\n                <Button\n                  disabled={inProgress}\n                  onClick={handleClose}\n                  variant='contained'\n                >\n                  Cancel\n                </Button>\n              </DialogActions>\n            </Form>\n          )}\n        </Formik>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TransactionDialog)\n","// Convert the given score to points using the given conversions\nconst convertScore = (score, conversions) => {\n  const total = score.task.totalPoints\n  const nonZeroTotal = total === 0 ? 1 : total\n  const percent = Math.round((score.value / nonZeroTotal) * 100)\n  const conversionKey = Math.floor((percent > 100 ? 100 : percent) / 10) * 10\n  return conversions[conversionKey]\n}\n\nexport default convertScore\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport MaterialTable from 'material-table'\nimport { Grid, Paper, Typography, makeStyles } from '@material-ui/core'\nimport { Close, Edit } from '@material-ui/icons'\n\nimport ActionButton from '../components/ActionButton'\nimport ResetStudentPasswordAlert from './Teacher/ResetStudentPasswordAlert'\nimport TransactionDialog from './Teacher/TransactionDialog'\nimport agent from '../agent'\nimport convertScore from '../converter'\n\nimport {\n  ACCOUNT_VIEW_LOADED,\n  ACCOUNT_VIEW_UNLOADED,\n  DELETE_TRANSACTION,\n  UPDATE_TRANSACTION,\n} from '../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  actions: {\n    alignItems: 'flex-start',\n    display: 'flex',\n    justifyContent: 'flex-end',\n  },\n  balance: {\n    'textAlign': 'center',\n    '& > h6': {\n      borderTop: '1px solid #ccc',\n      fontStyle: 'italic',\n      textTransform: 'lowercase',\n    },\n  },\n  edit: {\n    backgroundColor: theme.palette.primary.main,\n  },\n  paper: {\n    padding: theme.spacing(2),\n  },\n  subtotal: {\n    'position': 'relative',\n    'textAlign': 'center',\n    '& > p': {\n      position: 'relative',\n      bottom: -theme.spacing(1),\n    },\n    '& > h6': {\n      fontSize: theme.typography.pxToRem(12),\n      fontStyle: 'italic',\n      textTransform: 'lowercase',\n    },\n  },\n  unit: {\n    fontSize: theme.typography.pxToRem(12),\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  conversions: state.scores.conversions,\n  total: state.scores.total,\n  transactions: state.scores.transactions,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onDelete: (transaction) =>\n    dispatch({\n      type: DELETE_TRANSACTION,\n      payload: agent.Transactions.delete(transaction),\n      snackbar: { message: 'Transaction deleted', variant: 'success' },\n    }),\n  onLoad: (username) =>\n    dispatch({\n      type: ACCOUNT_VIEW_LOADED,\n      payload: Promise.all([\n        agent.Scores.getAll(username),\n        agent.Products.getAll(),\n      ]),\n    }),\n  onUnload: () => dispatch({ type: ACCOUNT_VIEW_UNLOADED }),\n  onUpdate: (transaction) =>\n    dispatch({\n      type: UPDATE_TRANSACTION,\n      payload: agent.Transactions.update(transaction),\n      snackbar: { message: 'Transaction updated', variant: 'success' },\n    }),\n})\n\nconst AccountHeader = ({ canEdit, doEdit, onEditClick, student, total }) => {\n  const classes = useStyles()\n\n  return (\n    <Paper className={classes.paper}>\n      <Grid container spacing={2}>\n        <Grid item xs={12} md={4}>\n          <Typography gutterBottom variant='h5'>\n            {student.firstName} {student.lastName}\n          </Typography>\n          {student.course && (\n            <Typography color='textSecondary' variant='subtitle1'>\n              {student.course} &middot; Period {student.period}\n            </Typography>\n          )}\n        </Grid>\n        <Grid item xs={12} md={4} container>\n          <Grid item xs={12} className={classes.balance}>\n            <Typography\n              color={total?.balance >= 0 ? 'primary' : 'secondary'}\n              variant='h4'\n            >\n              {total?.balance} <span className={classes.unit}>pts</span>\n            </Typography>\n            <Typography color='textSecondary' variant='subtitle2'>\n              Balance\n            </Typography>\n          </Grid>\n          <Grid item xs={4} className={classes.subtotal}>\n            <Typography color='primary' variant='body1'>\n              {total?.bonuses} <span className={classes.unit}>pts</span>\n            </Typography>\n            <Typography color='primary' variant='subtitle2'>\n              Bonuses\n            </Typography>\n          </Grid>\n          <Grid item xs={4} className={classes.subtotal}>\n            <Typography color='secondary' variant='body1'>\n              {total?.purchases} <span className={classes.unit}>pts</span>\n            </Typography>\n            <Typography color='secondary' variant='subtitle2'>\n              Purchases\n            </Typography>\n          </Grid>\n          <Grid item xs={4} className={classes.subtotal}>\n            <Typography color='primary' variant='body1'>\n              {total?.scores} <span className={classes.unit}>pts</span>\n            </Typography>\n            <Typography color='primary' variant='subtitle2'>\n              Assessments\n            </Typography>\n          </Grid>\n        </Grid>\n        {canEdit && (\n          <Grid item xs={12} md={4} className={classes.actions}>\n            <TransactionDialog student={student} type='Bonus' />\n            <TransactionDialog student={student} type='Purchase' />\n            <ActionButton\n              action={doEdit ? 'Finish editing' : 'Edit transactions'}\n              className={doEdit && classes.edit}\n              onClick={onEditClick}\n            >\n              {doEdit ? <Close /> : <Edit />}\n            </ActionButton>\n            <ResetStudentPasswordAlert btnSize='medium' student={student} />\n          </Grid>\n        )}\n      </Grid>\n    </Paper>\n  )\n}\n\nconst TransactionList = ({\n  conversions,\n  doEdit,\n  onDelete,\n  onUpdate,\n  transactions,\n}) => {\n  const [data, setData] = useState([])\n\n  const mapTransaction = (transaction) => ({\n    amount: transaction.amount,\n    createdAt: new Date(transaction.createdAt).toDateString(),\n    description: transaction.description,\n    type: transaction.type,\n    _id: transaction._id,\n  })\n\n  const mapScore = (score) => ({\n    amount: convertScore(score, conversions),\n    createdAt: new Date(score.createdAt).toDateString(),\n    description: score.task.title,\n    type: 'assessment',\n  })\n\n  // @todo: sort by date?\n  const mappedData = (transactions) => {\n    const { bonuses, purchases, scores } = transactions\n    const mapped = [\n      ...bonuses.map((bonus) => mapTransaction(bonus)),\n      ...purchases.map((purchase) => mapTransaction(purchase)),\n    ]\n    if (doEdit) {\n      return mapped\n    } else {\n      return [...mapped, ...scores.map((score) => mapScore(score))]\n    }\n  }\n\n  const [columns] = useState([\n    {\n      title: 'Date',\n      field: 'createdAt',\n      editable: 'never',\n      defaultSort: 'desc',\n    },\n    { title: 'Description', field: 'description' },\n    { title: 'Amount', field: 'amount' },\n    { title: 'Type', field: 'type', editable: 'never' },\n  ])\n\n  useEffect(() => {\n    transactions && setData(mappedData(transactions))\n  }, [doEdit, transactions])\n\n  return (\n    <MaterialTable\n      columns={columns}\n      data={data}\n      localization={{\n        body: {\n          emptyDataSourceMessage: 'No activity to report',\n          editRow: {\n            deleteText: 'Delete this transaction?',\n          },\n        },\n      }}\n      options={{ actionsColumnIndex: -1, paging: false, toolbar: false }}\n      editable={\n        doEdit\n          ? {\n              onRowUpdate: (newData, oldData) =>\n                new Promise((resolve, reject) => {\n                  const dataUpdate = [...data]\n                  const index = oldData.tableData.id\n                  dataUpdate[index] = newData\n                  setData([...dataUpdate])\n                  onUpdate(newData)\n                  resolve()\n                }),\n              onRowDelete: (oldData) =>\n                new Promise((resolve, reject) => {\n                  const newData = [...data]\n                  const index = oldData.tableData.id\n                  newData.splice(index, 1)\n                  setData([...newData])\n                  onDelete(oldData)\n                  resolve()\n                }),\n            }\n          : {}\n      }\n    />\n  )\n}\n\nconst AccountView = ({\n  canEdit,\n  conversions,\n  onDelete,\n  onLoad,\n  onUnload,\n  onUpdate,\n  student,\n  total,\n  transactions,\n}) => {\n  const [doEdit, setDoEdit] = useState(false)\n\n  const handleEditClick = () => {\n    setDoEdit(!doEdit)\n  }\n\n  useEffect(() => {\n    return () => {\n      onUnload()\n    }\n  }, [])\n\n  useEffect(() => {\n    onLoad(student.username)\n  }, [student])\n\n  return (\n    <>\n      {transactions && (\n        <Grid container spacing={2}>\n          <Grid item xs={12}>\n            <AccountHeader\n              canEdit={canEdit}\n              doEdit={doEdit}\n              onEditClick={handleEditClick}\n              student={student}\n              total={total}\n            />\n          </Grid>\n          <Grid item xs={12}>\n            <TransactionList\n              conversions={conversions}\n              doEdit={doEdit}\n              onDelete={onDelete}\n              onUpdate={onUpdate}\n              transactions={transactions}\n            />\n          </Grid>\n        </Grid>\n      )}\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AccountView)\n","import React from 'react'\nimport { connect } from 'react-redux'\n\nimport AccountView from '../AccountView'\n\nconst mapStateToProps = (state) => ({\n  currentUser: state.common.currentUser,\n})\n\nconst StudentAccount = ({ currentUser }) => {\n  return <AccountView student={currentUser} />\n}\n\nexport default connect(mapStateToProps, () => ({}))(StudentAccount)\n","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Form, Field } from 'formik'\nimport { TextField } from 'formik-material-ui'\nimport * as Yup from 'yup'\nimport {\n  Button,\n  Dialog,\n  Fab,\n  Grid,\n  Typography,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport { Add } from '@material-ui/icons'\n\nimport agent from '../../agent'\nimport background from './../../images/songs-background.jpg'\n\nimport { SUBMIT_SONG_REQUEST } from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  button: {\n    marginBottom: theme.spacing(2),\n    marginRight: theme.spacing(2),\n  },\n  dialog: {\n    backgroundImage: `url(${background})`,\n    backgroundPosition: 'center bottom',\n    backgroundSize: 'cover',\n    color: 'white',\n    padding: theme.spacing(4),\n  },\n  icon: {\n    marginRight: theme.spacing(1),\n  },\n  input: {\n    'backgroundColor': 'rgba(0,65,91,0.8)',\n    'borderRadius': theme.spacing(1),\n    'height': 78,\n    '& input': {\n      color: theme.palette.secondary.main,\n    },\n  },\n  inputLabel: {\n    color: 'white',\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  settings: state.common.settings,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onSubmit: (song) =>\n    dispatch({\n      type: SUBMIT_SONG_REQUEST,\n      payload: agent.Songs.request(song),\n      snackbar: { message: 'Song requested', variant: 'success' },\n    }),\n})\n\nconst SongRequestDialog = ({ onSubmit, settings }) => {\n  const [open, setOpen] = useState(false)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n  const classes = useStyles()\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmit = (values) => {\n    onSubmit(values)\n    setOpen(false)\n  }\n\n  return (\n    <>\n      <Fab color='primary' onClick={handleClickOpen} variant='extended'>\n        <Add className={classes.icon} />\n        Buy a song\n      </Fab>\n      <Dialog\n        classes={{\n          paper: classes.dialog,\n        }}\n        fullScreen={fullScreen}\n        open={open}\n        onClose={handleClose}\n      >\n        <Typography variant='h3' align='center' color='secondary' gutterBottom>\n          Purchase a Song\n        </Typography>\n        <Typography variant='body1' gutterBottom>\n          Please provide the song and artist title for your request. If\n          approved, {settings.songRequestPurchaseAmount} points will be charged\n          to your account.\n        </Typography>\n        <Formik\n          initialValues={{\n            artist: '',\n            title: '',\n          }}\n          validationSchema={Yup.object({\n            artist: Yup.string().required('Required'),\n            title: Yup.string().required('Required'),\n          })}\n          onSubmit={async (values) => {\n            handleSubmit(values)\n          }}\n        >\n          <Form>\n            <Grid container spacing={4}>\n              <Grid item xs={12} md={6}>\n                <Field\n                  autoFocus\n                  className={classes.input}\n                  color='primary'\n                  component={TextField}\n                  InputLabelProps={{\n                    classes: {\n                      root: classes.inputLabel,\n                    },\n                  }}\n                  label='Song Title'\n                  name='title'\n                  type='text'\n                  variant='filled'\n                  fullWidth\n                />\n              </Grid>\n              <Grid item xs={12} md={6}>\n                <Field\n                  className={classes.input}\n                  color='primary'\n                  component={TextField}\n                  InputLabelProps={{\n                    classes: {\n                      root: classes.inputLabel,\n                    },\n                  }}\n                  label='Artist'\n                  name='artist'\n                  type='text'\n                  variant='filled'\n                  fullWidth\n                />\n              </Grid>\n              <Grid item xs={12}>\n                <Button\n                  className={classes.button}\n                  color='primary'\n                  type='submit'\n                  variant='contained'\n                >\n                  Buy\n                </Button>\n                <Button\n                  className={classes.button}\n                  onClick={handleClose}\n                  variant='contained'\n                >\n                  Cancel\n                </Button>\n              </Grid>\n            </Grid>\n          </Form>\n        </Formik>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SongRequestDialog)\n","import React, { useState, useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Checkbox,\n  Grid,\n  FormControlLabel,\n  Paper,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Tooltip,\n  Typography,\n  makeStyles,\n} from '@material-ui/core'\nimport { InfoOutlined } from '@material-ui/icons'\n\nimport PageHeader from '../PageHeader'\nimport SongRequestDialog from './SongRequestDialog'\nimport agent from '../../agent'\n\nimport {\n  STUDENT_SONGS_PAGE_LOADED,\n  SONGS_PAGE_UNLOADED,\n} from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  icon: {\n    marginLeft: theme.spacing(1),\n  },\n  paper: {\n    paddingLeft: theme.spacing(2),\n    marginBottom: theme.spacing(4),\n  },\n  status: {\n    alignItems: 'center',\n    display: 'flex',\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.songs,\n  currentUser: state.common.currentUser,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onLoad: (payload) => dispatch({ type: STUDENT_SONGS_PAGE_LOADED, payload }),\n  onUnload: () => dispatch({ type: SONGS_PAGE_UNLOADED }),\n})\n\nconst DataRow = ({ song, showStudent }) => {\n  const classes = useStyles()\n\n  return (\n    <TableRow>\n      <TableCell>{new Date(song.createdAt).toDateString()}</TableCell>\n      <TableCell>{song.title}</TableCell>\n      <TableCell>{song.artist}</TableCell>\n      {showStudent && (\n        <TableCell>\n          {song.student.firstName} {song.student.lastName}\n        </TableCell>\n      )}\n      <TableCell>\n        <span className={classes.status}>\n          {song.statusDescription ? (\n            <>\n              {song.status}\n              <Tooltip\n                arrow\n                color='primary'\n                enterTouchDelay={0}\n                title={song.statusDescription}\n              >\n                <InfoOutlined className={classes.icon} />\n              </Tooltip>\n            </>\n          ) : (\n            song.status\n          )}\n        </span>\n      </TableCell>\n    </TableRow>\n  )\n}\n\nconst CourseSongs = ({ songs }) =>\n  songs.length > 0 ? (\n    songs.map((song) => (\n      <DataRow key={song._id} song={song} showStudent={true} />\n    ))\n  ) : (\n    <TableRow>\n      <TableCell colSpan='5'>\n        <Typography align='center'>\n          No songs have been requested for your period\n        </Typography>\n      </TableCell>\n    </TableRow>\n  )\n\nconst UserSongs = ({ songs }) =>\n  songs.length > 0 ? (\n    songs.map((song) => (\n      <DataRow key={song._id} song={song} showStudent={false} />\n    ))\n  ) : (\n    <TableRow>\n      <TableCell colSpan='4'>\n        <Typography align='center'>You have not requested any songs</Typography>\n      </TableCell>\n    </TableRow>\n  )\n\nconst StudentSongs = ({\n  course,\n  courseSongs,\n  currentUser,\n  onLoad,\n  onUnload,\n  userSongs,\n}) => {\n  const [mySongsOnly, setMySongsOnly] = useState(true)\n\n  const classes = useStyles()\n\n  const handleMySongsOnlyClick = (event) => {\n    setMySongsOnly(event.target.checked)\n  }\n\n  useEffect(() => {\n    onLoad(agent.Songs.forStudent())\n\n    return () => {\n      return onUnload()\n    }\n  }, [])\n\n  return (\n    <>\n      <PageHeader\n        title={\n          'Songs for ' +\n          (mySongsOnly ? currentUser.firstName : 'Period ' + course.period)\n        }\n      >\n        <SongRequestDialog />\n      </PageHeader>\n\n      <Paper className={classes.paper}>\n        <Grid container spacing={2} className={classes.grid}>\n          <Grid item xs={12} className={classes.grid}>\n            <FormControlLabel\n              control={\n                <Checkbox\n                  checked={mySongsOnly}\n                  onChange={handleMySongsOnlyClick}\n                  name='mySongsOnly'\n                />\n              }\n              label='show only my songs'\n            />\n          </Grid>\n        </Grid>\n      </Paper>\n\n      <TableContainer component={Paper}>\n        <Table>\n          <TableHead>\n            <TableRow>\n              <TableCell>Request Date</TableCell>\n              <TableCell>Song Title</TableCell>\n              <TableCell>Song Artist</TableCell>\n              {!mySongsOnly && <TableCell>Purchased by</TableCell>}\n              <TableCell>Status</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {mySongsOnly ? (\n              <UserSongs songs={userSongs} />\n            ) : (\n              <CourseSongs songs={courseSongs} />\n            )}\n          </TableBody>\n        </Table>\n      </TableContainer>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StudentSongs)\n","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Collapse, IconButton, makeStyles } from '@material-ui/core'\nimport { Alert as MuiAlert } from '@material-ui/lab'\nimport { Close } from '@material-ui/icons'\n\nimport { ALERT_CLOSED } from '../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  alert: {\n    marginBottom: theme.spacing(2),\n  },\n}))\n\nconst mapDispatchToProps = (dispatch) => ({\n  onClose: () => dispatch({ type: ALERT_CLOSED }),\n})\n\nconst Alert = ({ children, onClose, severity, variant }) => {\n  const classes = useStyles()\n  const [open, setOpen] = useState(true)\n\n  return (\n    <div className={classes.alert}>\n      <Collapse in={open}>\n        <MuiAlert\n          action={\n            <IconButton\n              aria-label='close'\n              color='inherit'\n              size='small'\n              onClick={() => {\n                setOpen(false)\n                onClose()\n              }}\n            >\n              <Close fontSize='inherit' />\n            </IconButton>\n          }\n          severity={severity || 'info'}\n          variant={variant || 'outlined'}\n        >\n          {children}\n        </MuiAlert>\n      </Collapse>\n    </div>\n  )\n}\n\nexport default connect(() => ({}), mapDispatchToProps)(Alert)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Paper, TextField, makeStyles } from '@material-ui/core'\nimport { Autocomplete } from '@material-ui/lab'\nimport parse from 'autosuggest-highlight/parse'\nimport match from 'autosuggest-highlight/match'\n\nimport agent from '../../agent'\n\nimport {\n  STUDENT_SEARCH_LOADED,\n  STUDENT_SEARCH_UNLOADED,\n} from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  search: {\n    padding: theme.spacing(2),\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  courses: state.courses.courses,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onLoad: () =>\n    dispatch({ type: STUDENT_SEARCH_LOADED, payload: agent.Courses.getAll() }),\n  onUnload: () => dispatch({ type: STUDENT_SEARCH_UNLOADED }),\n})\n\nconst StudentSearch = ({ courses, onChange, onLoad, onUnload }) => {\n  const [mappedData, setMappedData] = useState([])\n\n  const classes = useStyles()\n\n  useEffect(() => {\n    onLoad()\n\n    return () => {\n      onUnload()\n    }\n  }, [])\n\n  useEffect(() => {\n    const mapped = courses\n      .map((course) =>\n        course.students.map((student) => ({\n          ...student,\n          course: course.name,\n          period: course.period,\n          name: `${student.firstName} ${student.lastName}`,\n        }))\n      )\n      .flat()\n    setMappedData(mapped)\n  }, [courses])\n\n  return (\n    <Paper className={classes.search}>\n      <Autocomplete\n        autoHighlight\n        getOptionLabel={(option) => option.name}\n        groupBy={(option) => `Period ${option.period} | ${option.course}`}\n        noOptionsText='No students have been added'\n        onChange={(ev, value) => onChange(value)}\n        options={mappedData}\n        renderInput={(params) => (\n          <TextField\n            {...params}\n            label='Student'\n            placeholder='Type or select a name'\n          />\n        )}\n        renderOption={(option, { inputValue }) => {\n          const matches = match(option.name, inputValue)\n          const parts = parse(option.name, matches)\n\n          return (\n            <div>\n              {parts.map((part, index) => (\n                <span\n                  key={index}\n                  style={{ fontWeight: part.highlight ? 700 : 400 }}\n                >\n                  {part.text}\n                </span>\n              ))}\n            </div>\n          )\n        }}\n      />\n    </Paper>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StudentSearch)\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Typography, makeStyles } from '@material-ui/core'\nimport { Alert } from '@material-ui/lab'\n\nconst useStyles = makeStyles((theme) => ({\n  courses: {\n    '& div': {\n      'boxShadow': theme.shadows[4],\n      'cursor': 'pointer',\n      'marginBottom': theme.spacing(1),\n      'padding': `${theme.spacing(3)}px ${theme.spacing(4)}px`,\n      'transition': 'all 0.15s ease-in-out',\n      '&:focus': {\n        backgroundColor: theme.palette.primary.main,\n        boxShadow: theme.shadows[1],\n      },\n      '&:hover': {\n        backgroundColor: theme.palette.primary.light,\n        boxShadow: theme.shadows[1],\n      },\n    },\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  courses: state.courses.courses,\n})\n\nconst CourseSelector = ({ courses, onSelect }) => {\n  const classes = useStyles()\n\n  return (\n    <div>\n      <Typography gutterBottom variant='h6'>\n        Select a course\n      </Typography>\n      {courses.length > 0 ? (\n        <div className={classes.courses}>\n          {courses.map((course) => (\n            <div\n              key={course.slug}\n              onClick={() => {\n                onSelect(course)\n              }}\n              tabIndex='0'\n            >\n              <Typography variant='body1'>\n                <b>{course.name}</b> &middot; Period {course.period}\n              </Typography>\n            </div>\n          ))}\n        </div>\n      ) : (\n        <Alert severity='info'>\n          You must create a course before continuing\n        </Alert>\n      )}\n    </div>\n  )\n}\n\nexport default connect(mapStateToProps, () => ({}))(CourseSelector)\n","import React, { useEffect, useState } from 'react'\nimport MaterialTable from 'material-table'\n\nconst StudentsTable = ({ course, onSelect }) => {\n  const [data, setData] = useState([])\n\n  const mappedData = course.students.map((student) => ({\n    username: student.username,\n    firstName: student.firstName,\n    lastName: student.lastName,\n    fullName: `${student.firstName} ${student.lastName}`,\n    role: student.role,\n    _id: student._id,\n  }))\n\n  const [columns] = useState([{ title: 'Students', field: 'fullName' }])\n\n  useEffect(() => {\n    setData(mappedData)\n  }, [course])\n\n  return (\n    <MaterialTable\n      columns={columns}\n      data={data}\n      localization={{\n        body: {\n          emptyDataSourceMessage: 'No students found for this course',\n        },\n        toolbar: {\n          nRowsSelected: '{0} student(s) selected',\n        },\n      }}\n      onSelectionChange={(rows) => onSelect(rows)}\n      options={{ paging: false, selection: true, toolbar: true }}\n      title={`${course.name} | Period ${course.period}`}\n    />\n  )\n}\n\nexport default StudentsTable\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Form, Field } from 'formik'\nimport { TextField } from 'formik-material-ui'\nimport * as Yup from 'yup'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Grid,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\n\nimport CourseSelector from './CourseSelector'\nimport ListErrors from '../ListErrors'\nimport StudentsTable from './StudentsTable'\nimport agent from '../../agent'\n\nimport {\n  ADD_TRANSACTIONS,\n  TRANSACTIONS_DIALOG_UNLOADED,\n} from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  dialog: {\n    '& > .MuiDialog-container > .MuiPaper-root': {\n      [theme.breakpoints.up('lg')]: {\n        width: theme.spacing(80),\n      },\n    },\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.scores,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onAdd: (transactions, curStudent) =>\n    dispatch({\n      type: ADD_TRANSACTIONS,\n      payload: agent.Transactions.addMany(transactions),\n      curStudent,\n      snackbar: {\n        message: `${transactions.typeTitle} added`,\n        variant: 'success',\n      },\n    }),\n  onExit: () => dispatch({ type: TRANSACTIONS_DIALOG_UNLOADED }),\n})\n\nconst BulkTransactionsDialog = ({\n  curStudent,\n  errors,\n  inProgress,\n  isClosed,\n  isOpen,\n  onAdd,\n  onExit,\n  type,\n}) => {\n  const [open, setOpen] = useState(false)\n  const [course, setCourse] = useState(null)\n  const [students, setStudents] = useState([])\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n  const classes = useStyles()\n\n  const handleClose = () => {\n    setOpen(false)\n    setCourse(null)\n    isClosed()\n  }\n\n  const handleSubmitAdd = (values) => {\n    onAdd(\n      {\n        ...values,\n        students: students.map((student) => student._id),\n        type: type === 'Bonuses' ? 'bonus' : 'purchase',\n        typeTitle: type,\n      },\n      curStudent\n    )\n  }\n\n  const handleCourseSelect = (slug) => {\n    setCourse(slug)\n  }\n\n  const handleStudentSelect = (rows) => {\n    setStudents(rows)\n  }\n\n  useEffect(() => {\n    // Close the dialog only if there are no errors\n    if (!inProgress && !errors) handleClose()\n  }, [inProgress])\n\n  // Allow for external component control of displaying the dialog\n  useEffect(() => {\n    setOpen(isOpen)\n  }, [isOpen])\n\n  return (\n    <Dialog\n      className={classes.dialog}\n      fullScreen={fullScreen}\n      onClick={(ev) => ev.stopPropagation()}\n      onClose={handleClose}\n      onExit={onExit}\n      onFocus={(ev) => ev.stopPropagation()}\n      open={open}\n    >\n      <Formik\n        initialValues={{\n          amount: '',\n          description: '',\n        }}\n        validationSchema={Yup.object({\n          amount: Yup.number().typeError('Numbers only').required('Required'),\n          description: Yup.string().required('Required'),\n        })}\n        onSubmit={async (values) => {\n          handleSubmitAdd(values)\n        }}\n      >\n        <Form>\n          <DialogTitle>Add {type}</DialogTitle>\n          <DialogContent>\n            <ListErrors errors={errors} />\n            {!course && <CourseSelector onSelect={handleCourseSelect} />}\n            {course && (\n              <Grid container spacing={2}>\n                <Grid item xs={12} md={6}>\n                  <Field\n                    autoFocus\n                    color='primary'\n                    component={TextField}\n                    disabled={inProgress}\n                    label='Description'\n                    name='description'\n                    type='text'\n                    fullWidth\n                  />\n                </Grid>\n                <Grid item xs={12} md={6}>\n                  <Field\n                    color='primary'\n                    component={TextField}\n                    disabled={inProgress}\n                    label='Amount'\n                    name='amount'\n                    type='text'\n                    fullWidth\n                  />\n                </Grid>\n                <Grid item xs={12}>\n                  <StudentsTable\n                    course={course}\n                    onSelect={handleStudentSelect}\n                  />\n                </Grid>\n              </Grid>\n            )}\n          </DialogContent>\n          <DialogActions>\n            <Button\n              disabled={inProgress || students.length === 0}\n              color='primary'\n              type='submit'\n              variant='contained'\n            >\n              {inProgress ? 'Adding...' : 'Add'}\n            </Button>\n            <Button\n              disabled={inProgress}\n              onClick={handleClose}\n              variant='contained'\n            >\n              Cancel\n            </Button>\n          </DialogActions>\n        </Form>\n      </Formik>\n    </Dialog>\n  )\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(BulkTransactionsDialog)\n","import React, { useCallback } from 'react'\nimport { useDropzone } from 'react-dropzone'\nimport parse from 'csv-parse/lib/sync'\nimport { Typography, makeStyles } from '@material-ui/core'\n\nconst useStyles = makeStyles((theme) => ({\n  filedrop: {\n    alignItems: 'center',\n    backgroundColor: theme.palette.grey[300],\n    borderRadius: theme.spacing(1),\n    color: theme.palette.grey[600],\n    display: 'flex',\n    flexDirection: 'column',\n    outline: 'none',\n    padding: '20px',\n    transition: 'all 0.25s ease-in-out',\n  },\n  filedropActive: {\n    backgroundColor: theme.palette.primary.light,\n    color: theme.palette.primary.contrastText,\n  },\n  filedropReject: {\n    backgroundColor: theme.palette.secondary.light,\n    color: theme.palette.secondary.contrastText,\n  },\n}))\n\nfunction Filedrop({ onFiledrop }) {\n  const classes = useStyles()\n\n  const onDrop = useCallback((acceptedFiles) => {\n    // Due to {multiple: false} in useDropzone(), only one file will be received\n    acceptedFiles.forEach((file) => {\n      const reader = new FileReader()\n      reader.onabort = () => console.log('file reading was aborted')\n      reader.onerror = () => console.log('file reading has failed')\n      reader.onload = () => {\n        const parsedFile = parse(reader.result, {\n          columns: true,\n          skip_empty_lines: true,\n        })\n        onFiledrop(parsedFile)\n      }\n      reader.readAsBinaryString(file)\n    })\n  }, [])\n\n  const {\n    getRootProps,\n    getInputProps,\n    isDragActive,\n    isDragReject,\n  } = useDropzone({\n    accept: 'text/csv, text/plain',\n    multiple: false,\n    onDropAccepted: onDrop,\n  })\n\n  return (\n    <div\n      {...getRootProps({\n        className: `${classes.filedrop} ${\n          isDragActive ? classes.filedropActive : ''\n        } ${isDragReject ? classes.filedropReject : ''}`,\n      })}\n    >\n      <input {...getInputProps()} />\n      {!isDragActive && (\n        <Typography>\n          Drop a .csv file here or click to select a .csv file\n        </Typography>\n      )}\n      {isDragActive && !isDragReject && (\n        <Typography>Drop .csv file here</Typography>\n      )}\n      {isDragReject && <Typography>File type not accepted</Typography>}\n    </div>\n  )\n}\n\nexport default Filedrop\n","import React from 'react'\nimport { CircularProgress, Typography, makeStyles } from '@material-ui/core'\n\nconst useStyles = makeStyles((theme) => ({\n  message: {\n    fontStyle: 'italic',\n  },\n  root: {\n    alignItems: 'center',\n    display: 'flex',\n    justifyContent: 'center',\n    minWidth: theme.spacing(40),\n  },\n  spinner: {\n    marginRight: theme.spacing(2),\n  },\n}))\n\nconst Spinner = ({ message }) => {\n  const classes = useStyles()\n\n  return (\n    <div className={classes.root}>\n      <CircularProgress className={classes.spinner} />\n      <Typography className={classes.message}>\n        {message || 'Working...'}\n      </Typography>\n    </div>\n  )\n}\n\nexport default Spinner\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Checkbox,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  FormControl,\n  FormControlLabel,\n  FormGroup,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n  Typography,\n} from '@material-ui/core'\n\nimport CourseSelector from './CourseSelector'\nimport Filedrop from '../Filedrop'\nimport ListErrors from '../ListErrors'\nimport Spinner from '../Spinner'\nimport agent from '../../agent'\n\nimport {\n  IMPORT_SCORES,\n  IMPORT_SCORES_DIALOG_UNLOADED,\n} from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  dialog: {\n    '& > .MuiDialog-container > .MuiPaper-root': {\n      [theme.breakpoints.up('lg')]: {\n        width: theme.spacing(100),\n      },\n    },\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.scores,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onImport: (data, curStudent) =>\n    dispatch({\n      type: IMPORT_SCORES,\n      payload: agent.Scores.import(data),\n      curStudent,\n      snackbar: { message: 'Scores imported', variant: 'success' },\n    }),\n  onExit: () => dispatch({ type: IMPORT_SCORES_DIALOG_UNLOADED }),\n})\n\nconst ScoreImportStepper = ({ onDataChange, onShowImport }) => {\n  const [file, setFile] = useState(null)\n  const [course, setCourse] = useState(null)\n  const [tasks, setTasks] = useState(null)\n\n  const handleCourseSelect = (course) => {\n    setCourse(course)\n  }\n\n  const handleFiledrop = (file) => {\n    const tasks = {}\n    Object.keys(file[0])\n      .slice(1)\n      .forEach((task) => {\n        tasks[task] = false\n      })\n    setFile(file)\n    setTasks(tasks)\n  }\n\n  const handleTaskChange = (ev) => {\n    setTasks({ ...tasks, [ev.target.name]: ev.target.checked })\n  }\n\n  // Determine if any tasks have been checked/selected\n  useEffect(() => {\n    const tasksSelected = tasks\n      ? Object.values(tasks).some((el) => el === true)\n      : false\n    onShowImport(tasksSelected)\n  }, [tasks])\n\n  // Keep the imported data object current\n  useEffect(() => {\n    onDataChange({ file, course, tasks })\n  }, [file, course, tasks])\n\n  return (\n    <>\n      {!file && !course && !tasks && (\n        <CourseSelector onSelect={handleCourseSelect} />\n      )}\n\n      {!file && course && !tasks && (\n        <div>\n          <Typography gutterBottom>\n            Scores must be imported from a .csv file exported from Infinite\n            Campus\n          </Typography>\n          <Filedrop onFiledrop={handleFiledrop} />\n        </div>\n      )}\n\n      {file &&\n      course &&\n      tasks && ( // @todo: use material-table here?\n          <FormControl component='fieldset'>\n            <Typography gutterBottom variant='body1'>\n              Select the assignments to import\n            </Typography>\n            <FormGroup>\n              {Object.keys(tasks).map((task) => (\n                <FormControlLabel\n                  control={\n                    <Checkbox\n                      checked={tasks[task]}\n                      onChange={handleTaskChange}\n                      name={task}\n                    />\n                  }\n                  key={task}\n                  label={task}\n                />\n              ))}\n            </FormGroup>\n          </FormControl>\n        )}\n    </>\n  )\n}\n\nconst ImportScoresDialog = ({\n  curStudent,\n  errors,\n  inProgress,\n  isClosed,\n  isOpen,\n  onExit,\n  onImport,\n}) => {\n  const [open, setOpen] = useState(false)\n  const [ready, setReady] = useState(false)\n  const [data, setData] = useState(null)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n  const classes = useStyles()\n\n  const handleClose = () => {\n    setOpen(false)\n    isClosed()\n  }\n\n  const handleDataChange = (importData) => {\n    setData(importData)\n  }\n\n  const handleShowImport = (selected) => {\n    setReady(selected)\n  }\n\n  const handleClickImport = () => {\n    // Get student usernames (student numbers)\n    const usernames = data.file\n      .map(\n        (student, index) =>\n          index > 1 && student['Assignment Name'].split('#').pop()\n      )\n      .filter((username) => username !== false)\n\n    // Prepare data to send to server\n    const parsed = { course: data.course, tasks: [] }\n    for (const taskName in data.tasks) {\n      const selected = data.tasks[taskName]\n      if (selected) {\n        const task = {\n          title: taskName,\n          totalPoints: data.file[1][taskName],\n          scores: {},\n        }\n\n        for (const username of usernames) {\n          const student = data.file.find((row) =>\n            row['Assignment Name'].endsWith(username)\n          )\n          if (student) task.scores[username] = student[taskName]\n        }\n\n        parsed.tasks.push(task)\n      }\n    }\n\n    onImport(parsed, curStudent)\n  }\n\n  useEffect(() => {\n    // Close the dialog only if there are no errors\n    if (!inProgress && !errors) handleClose()\n  }, [inProgress])\n\n  // Allow for external component control of displaying the dialog\n  useEffect(() => {\n    setOpen(isOpen)\n  }, [isOpen])\n\n  return (\n    <Dialog\n      className={classes.dialog}\n      fullScreen={fullScreen}\n      onClick={(ev) => ev.stopPropagation()}\n      onClose={handleClose}\n      onExit={onExit}\n      onFocus={(ev) => ev.stopPropagation()}\n      open={open}\n    >\n      <DialogTitle>Import Scores</DialogTitle>\n      <DialogContent>\n        <ListErrors errors={errors} />\n        {inProgress ? (\n          <Spinner message='Importing...' />\n        ) : (\n          <ScoreImportStepper\n            onDataChange={handleDataChange}\n            onShowImport={handleShowImport}\n          />\n        )}\n      </DialogContent>\n      <DialogActions>\n        {ready && (\n          <Button\n            color='primary'\n            disabled={inProgress}\n            onClick={handleClickImport}\n            variant='contained'\n          >\n            {inProgress ? 'Importing...' : 'Import'}\n          </Button>\n        )}\n        <Button disabled={inProgress} onClick={handleClose} variant='contained'>\n          Cancel\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ImportScoresDialog)\n","import React, { useState } from 'react'\nimport {\n  Fab,\n  ListItemIcon,\n  ListItemText,\n  Menu,\n  MenuItem,\n  makeStyles,\n} from '@material-ui/core'\nimport { Grade, Money, Publish, ShoppingCart } from '@material-ui/icons'\n\nimport BulkTransactionsDialog from './BulkTransactionsDialog'\nimport ImportScoresDialog from '../Teacher/ImportScoresDialog'\n\nconst useStyles = makeStyles((theme) => ({\n  icon: {\n    marginRight: theme.spacing(1),\n  },\n}))\n\nconst UpdateAccountsMenu = ({ curStudent }) => {\n  const [menuAnchorEl, setMenuAnchorEl] = useState(null)\n  const [menuSelection, setMenuSelection] = useState(null)\n\n  const classes = useStyles()\n\n  const handleMenuOpen = (ev) => {\n    setMenuAnchorEl(ev.currentTarget)\n  }\n\n  const handleMenuClose = () => {\n    setMenuAnchorEl(null)\n  }\n\n  const handleMenuSelect = (ev) => {\n    setMenuSelection(ev.currentTarget.dataset.type)\n    setMenuAnchorEl(null)\n  }\n\n  const handleDialogClose = () => {\n    setMenuSelection(null)\n  }\n\n  return (\n    <>\n      <Fab color='primary' onClick={handleMenuOpen} variant='extended'>\n        <Money className={classes.icon} />\n        Update Accounts\n      </Fab>\n      <Menu\n        anchorEl={menuAnchorEl}\n        open={Boolean(menuAnchorEl)}\n        onClose={handleMenuClose}\n      >\n        <MenuItem data-type='scores' onClick={handleMenuSelect}>\n          <ListItemIcon>\n            <Publish />\n          </ListItemIcon>\n          <ListItemText>Import scores</ListItemText>\n        </MenuItem>\n        <MenuItem data-type='bonuses' onClick={handleMenuSelect}>\n          <ListItemIcon>\n            <Grade />\n          </ListItemIcon>\n          <ListItemText>Add Bonuses</ListItemText>\n        </MenuItem>\n        <MenuItem data-type='purchases' onClick={handleMenuSelect}>\n          <ListItemIcon>\n            <ShoppingCart />\n          </ListItemIcon>\n          <ListItemText>Add Purchases</ListItemText>\n        </MenuItem>\n      </Menu>\n      <ImportScoresDialog\n        curStudent={curStudent}\n        isClosed={handleDialogClose}\n        isOpen={menuSelection === 'scores'}\n      />\n      <BulkTransactionsDialog\n        curStudent={curStudent}\n        isClosed={handleDialogClose}\n        isOpen={menuSelection === 'bonuses'}\n        type='Bonuses'\n      />\n      <BulkTransactionsDialog\n        curStudent={curStudent}\n        isClosed={handleDialogClose}\n        isOpen={menuSelection === 'purchases'}\n        type='Purchases'\n      />\n    </>\n  )\n}\n\nexport default UpdateAccountsMenu\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Grid } from '@material-ui/core'\n\nimport AccountView from '../AccountView'\nimport Alert from '../Alert'\nimport PageHeader from '../PageHeader'\nimport StudentSearch from './StudentSearch'\nimport UpdateAccountsMenu from './UpdateAccountsMenu'\n\nimport { ACCOUNTS_PAGE_UNLOADED } from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  importSummary: state.scores.importSummary,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onUnload: () => dispatch({ type: ACCOUNTS_PAGE_UNLOADED }),\n})\n\nconst TeacherAccounts = ({ importSummary, onUnload }) => {\n  const [student, setStudent] = useState(null)\n\n  const plural = (qty, unit) => `${qty} ${unit}${qty !== 1 ? 's' : ''}`\n\n  const handleStudentSelect = (student) => {\n    setStudent(student)\n  }\n\n  useEffect(() => {\n    return () => {\n      onUnload()\n    }\n  }, [])\n\n  return (\n    <>\n      <PageHeader title='Manage Accounts'>\n        <UpdateAccountsMenu curStudent={student} />\n      </PageHeader>\n\n      {importSummary && (\n        <Alert>\n          Created {plural(importSummary.tasksCreated, 'assignment')}, imported{' '}\n          {plural(importSummary.scoresImported, 'score')}, and updated{' '}\n          {plural(importSummary.scoresUpdated, 'score')}\n        </Alert>\n      )}\n\n      <Grid container spacing={4}>\n        <Grid item xs={12}>\n          <StudentSearch onChange={handleStudentSelect} />\n        </Grid>\n        <Grid item xs={12}>\n          {student && <AccountView canEdit={true} student={student} />}\n        </Grid>\n      </Grid>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TeacherAccounts)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Form, Field } from 'formik'\nimport { TextField } from 'formik-material-ui'\nimport * as Yup from 'yup'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Fab,\n  Grid,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport { Add, Edit } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport ListErrors from '../ListErrors'\nimport agent from '../../agent'\n\nimport {\n  ADD_COURSE,\n  COURSE_DIALOG_UNLOADED,\n  UPDATE_COURSE,\n} from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  icon: {\n    marginRight: theme.spacing(1),\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.courses,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onAdd: (course) =>\n    dispatch({\n      type: ADD_COURSE,\n      payload: agent.Courses.add(course),\n      snackbar: { message: 'Course added', variant: 'success' },\n    }),\n  onExit: () => dispatch({ type: COURSE_DIALOG_UNLOADED }),\n  onUpdate: (course) =>\n    dispatch({\n      type: UPDATE_COURSE,\n      payload: agent.Courses.update(course),\n      snackbar: { message: 'Course updated', variant: 'success' },\n    }),\n})\n\nconst CourseDialog = ({\n  course,\n  errors,\n  inProgress,\n  onAdd,\n  onExit,\n  onUpdate,\n}) => {\n  const [open, setOpen] = useState(false)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n  const classes = useStyles()\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmitAdd = (values) => {\n    onAdd({ ...values })\n  }\n\n  const handleSubmitUpdate = (values) => {\n    onUpdate({ ...course, ...values })\n  }\n\n  useEffect(() => {\n    // Close the dialog only if there are no errors\n    if (!inProgress && !errors) setOpen(false)\n  }, [inProgress])\n\n  return (\n    <>\n      {course ? (\n        <ActionButton action='Edit course' onClick={handleClickOpen}>\n          <Edit />\n        </ActionButton>\n      ) : (\n        <Fab color='primary' onClick={handleClickOpen} variant='extended'>\n          <Add className={classes.icon} />\n          Create course\n        </Fab>\n      )}\n\n      <Dialog\n        fullScreen={fullScreen}\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onExit={onExit}\n        onFocus={(ev) => ev.stopPropagation()}\n        open={open}\n      >\n        <Formik\n          initialValues={{\n            name: course?.name || '',\n            period: course?.period || '',\n          }}\n          validationSchema={Yup.object({\n            name: Yup.string().required('Required'),\n            period: Yup.number().typeError('Numbers only').required('Required'),\n          })}\n          onSubmit={async (values) => {\n            course ? handleSubmitUpdate(values) : handleSubmitAdd(values)\n          }}\n        >\n          <Form>\n            <DialogTitle>\n              {course ? 'Edit Course' : 'Create Course'}\n            </DialogTitle>\n            <DialogContent>\n              <ListErrors errors={errors} />\n              <Grid container spacing={2}>\n                <Grid item xs={12} md={6}>\n                  <Field\n                    autoFocus={course ? false : true}\n                    color='primary'\n                    component={TextField}\n                    disabled={inProgress}\n                    label='Course Name'\n                    name='name'\n                    type='text'\n                    fullWidth\n                  />\n                </Grid>\n                <Grid item xs={12} md={6}>\n                  <Field\n                    color='primary'\n                    component={TextField}\n                    disabled={inProgress}\n                    label='Period'\n                    name='period'\n                    type='text'\n                    fullWidth\n                  />\n                </Grid>\n              </Grid>\n            </DialogContent>\n            <DialogActions>\n              <Button\n                disabled={inProgress}\n                color='primary'\n                type='submit'\n                variant='contained'\n              >\n                {course\n                  ? inProgress\n                    ? 'Updating...'\n                    : 'Update'\n                  : inProgress\n                  ? 'Adding...'\n                  : 'Add'}\n              </Button>\n              <Button\n                disabled={inProgress}\n                onClick={handleClose}\n                variant='contained'\n              >\n                Cancel\n              </Button>\n            </DialogActions>\n          </Form>\n        </Formik>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CourseDialog)\n","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n} from '@material-ui/core'\nimport { Delete } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport agent from '../../agent'\n\nimport { DELETE_STUDENT } from '../../constants/actionTypes'\n\nconst mapDispatchToProps = (dispatch) => ({\n  onDelete: (user) =>\n    dispatch({\n      type: DELETE_STUDENT,\n      payload: agent.Students.delete(user),\n      snackbar: { message: 'Student deleted', variant: 'success' },\n    }),\n})\n\nconst DeleteStudentAlert = ({ course, onDelete, student }) => {\n  const [open, setOpen] = useState(false)\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmit = () => {\n    setOpen(false)\n    onDelete(student)\n  }\n\n  return (\n    <>\n      <ActionButton\n        action='Delete student'\n        onClick={handleClickOpen}\n        size='small'\n      >\n        <Delete fontSize='inherit' />\n      </ActionButton>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        onClick={(ev) => ev.stopPropagation()}\n        onFocus={(ev) => ev.stopPropagation()}\n      >\n        <DialogTitle>Delete Student</DialogTitle>\n        <DialogContent>\n          <DialogContentText component='div'>\n            Are you sure you want to delete{' '}\n            <b>\n              {student.firstName} {student.lastName}\n            </b>\n            ? This action will permanently delete:\n            <ul>\n              <li>the student's account, and</li>\n              <li>all song requests</li>\n              <li>all transactions</li>\n              <li>all scores</li>\n            </ul>\n            associated with this student. This action <b>cannot be undone</b>.\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button\n            onClick={handleSubmit}\n            color='secondary'\n            variant='contained'\n            autoFocus\n          >\n            Delete\n          </Button>\n          <Button onClick={handleClose} variant='contained'>\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(() => ({}), mapDispatchToProps)(DeleteStudentAlert)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Form, Field } from 'formik'\nimport { TextField } from 'formik-material-ui'\nimport * as Yup from 'yup'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Grid,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport { Edit, PersonAdd } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport ListErrors from '../ListErrors'\nimport agent from '../../agent'\n\nimport {\n  ADD_STUDENT,\n  STUDENT_DIALOG_UNLOADED,\n  UPDATE_STUDENT,\n} from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  ...state.common.settings,\n  ...state.courses,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onAdd: (user, courseId) =>\n    dispatch({\n      type: ADD_STUDENT,\n      payload: agent.Students.add(user, courseId),\n      courseId,\n      snackbar: { message: 'Student added', variant: 'success' },\n    }),\n  onExit: () => dispatch({ type: STUDENT_DIALOG_UNLOADED }),\n  onUpdate: (user, courseId) =>\n    dispatch({\n      type: UPDATE_STUDENT,\n      payload: agent.Students.update(user),\n      courseId,\n      snackbar: { message: 'Student updated', variant: 'success' },\n    }),\n})\n\nconst StudentDialog = ({\n  course,\n  defaultStudentPassword,\n  errors,\n  inProgress,\n  onAdd,\n  onExit,\n  onUpdate,\n  student,\n}) => {\n  const [open, setOpen] = useState(false)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmitAdd = (values) => {\n    const user = { ...values }\n    const courseId = course._id\n    user.role = 'student'\n    onAdd(user, courseId)\n  }\n\n  const handleSubmitUpdate = (values) => {\n    const user = { ...student, ...values }\n    const courseId = course._id\n    onUpdate(user, courseId)\n  }\n\n  useEffect(() => {\n    // Close the dialog only if there are no errors\n    if (!inProgress && !errors) setOpen(false)\n  }, [inProgress])\n\n  return (\n    <>\n      {student ? (\n        <ActionButton\n          action='Edit student'\n          onClick={handleClickOpen}\n          size='small'\n        >\n          <Edit fontSize='inherit' />\n        </ActionButton>\n      ) : (\n        <ActionButton action='Add student' onClick={handleClickOpen}>\n          <PersonAdd />\n        </ActionButton>\n      )}\n\n      <Dialog\n        fullScreen={fullScreen}\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onExit={onExit}\n        onFocus={(ev) => ev.stopPropagation()}\n        open={open}\n      >\n        <Formik\n          initialValues={{\n            firstName: student?.firstName || '',\n            lastName: student?.lastName || '',\n            username: student?.username || '',\n            password: !student ? defaultStudentPassword : '',\n          }}\n          validationSchema={Yup.object({\n            firstName: Yup.string().required('Required'),\n            lastName: Yup.string().required('Required'),\n            username: Yup.number()\n              .typeError('Numbers only')\n              .required('Required'),\n            password: Yup.string().required(!student ? 'Required' : ''),\n          })}\n          onSubmit={async (values) => {\n            student ? handleSubmitUpdate(values) : handleSubmitAdd(values)\n          }}\n        >\n          <Form>\n            <DialogTitle>\n              {student ? 'Edit Student' : 'Add Student'}\n            </DialogTitle>\n            <DialogContent>\n              <ListErrors errors={errors} />\n              <Grid container spacing={2}>\n                <Grid item xs={12} md={6}>\n                  <Field\n                    autoFocus={student ? false : true}\n                    color='primary'\n                    component={TextField}\n                    disabled={inProgress}\n                    label='First Name'\n                    name='firstName'\n                    type='text'\n                    fullWidth\n                  />\n                </Grid>\n                <Grid item xs={12} md={6}>\n                  <Field\n                    color='primary'\n                    component={TextField}\n                    disabled={inProgress}\n                    label='Last Name'\n                    name='lastName'\n                    type='text'\n                    fullWidth\n                  />\n                </Grid>\n                <Grid item xs={12} md={6}>\n                  <Field\n                    color='primary'\n                    component={TextField}\n                    disabled={!!student || inProgress}\n                    label='Student Number'\n                    name='username'\n                    type='text'\n                    fullWidth\n                  />\n                </Grid>\n                <Grid item xs={12} md={6}>\n                  <Field\n                    color='primary'\n                    component={TextField}\n                    disabled={inProgress}\n                    label='Password'\n                    name='password'\n                    type='text'\n                    fullWidth\n                  />\n                </Grid>\n              </Grid>\n            </DialogContent>\n            <DialogActions>\n              <Button\n                color='primary'\n                disabled={inProgress}\n                type='submit'\n                variant='contained'\n              >\n                {student\n                  ? inProgress\n                    ? 'Updating...'\n                    : 'Update'\n                  : inProgress\n                  ? 'Adding...'\n                  : 'Add'}\n              </Button>\n              <Button\n                disabled={inProgress}\n                onClick={handleClose}\n                variant='contained'\n              >\n                Cancel\n              </Button>\n            </DialogActions>\n          </Form>\n        </Formik>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StudentDialog)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Form, Field } from 'formik'\nimport { TextField } from 'formik-material-ui'\nimport * as Yup from 'yup'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Grid,\n  MenuItem,\n} from '@material-ui/core'\nimport { Loop } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport ListErrors from '../ListErrors'\nimport agent from '../../agent'\n\nimport { MOVE_STUDENT } from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  ...state.courses,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onSubmit: (courseOut, courseIn) =>\n    dispatch({\n      type: MOVE_STUDENT,\n      payload: Promise.all([\n        agent.Courses.unenroll(courseOut),\n        agent.Courses.enroll(courseIn),\n      ]),\n      snackbar: { message: 'Student moved', variant: 'success' },\n    }),\n})\n\nconst StudentTransferDialog = ({\n  course,\n  courses,\n  errors,\n  inProgress,\n  onSubmit,\n  student,\n}) => {\n  const [open, setOpen] = useState(false)\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmit = (values) => {\n    if (course.slug !== values.course) {\n      const courseOut = { usernames: [student.username], slug: course.slug }\n      const courseIn = { usernames: [student.username], slug: values.course }\n      onSubmit(courseOut, courseIn)\n    }\n  }\n\n  useEffect(() => {\n    // Close the dialog only if there are no errors\n    if (!inProgress && !errors) setOpen(false)\n  }, [inProgress])\n\n  return (\n    <>\n      <ActionButton\n        action='Move student'\n        onClick={handleClickOpen}\n        size='small'\n      >\n        <Loop fontSize='inherit' />\n      </ActionButton>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        onClick={(ev) => ev.stopPropagation()}\n        onFocus={(ev) => ev.stopPropagation()}\n      >\n        <Formik\n          initialValues={{\n            course: course.slug || '',\n          }}\n          validationSchema={Yup.object({\n            course: Yup.string().required('Required'),\n          })}\n          onSubmit={async (values) => {\n            handleSubmit(values)\n          }}\n        >\n          {(formik) => (\n            <Form>\n              <DialogTitle>Move Student</DialogTitle>\n              <DialogContent>\n                <ListErrors errors={errors} />\n                <Grid container spacing={2}>\n                  <Grid item ds={12}>\n                    Move{' '}\n                    <b>\n                      {student.firstName} {student.lastName}\n                    </b>{' '}\n                    to...\n                  </Grid>\n                  <Grid item xs={12}>\n                    <Field\n                      color='primary'\n                      component={TextField}\n                      disabled={inProgress}\n                      id='course'\n                      label='Course'\n                      name='course'\n                      type='select'\n                      select\n                      fullWidth\n                    >\n                      {courses.map((course) => (\n                        <MenuItem key={course.slug} value={course.slug}>\n                          {`Period ${course.period} | ${course.name}`}\n                        </MenuItem>\n                      ))}\n                    </Field>\n                  </Grid>\n                </Grid>\n              </DialogContent>\n              <DialogActions>\n                <Button\n                  color='primary'\n                  disabled={inProgress || formik.values.course === course.slug}\n                  type='submit'\n                  variant='contained'\n                >\n                  {inProgress ? 'Moving...' : 'Move'}\n                </Button>\n                <Button onClick={handleClose} variant='contained'>\n                  Cancel\n                </Button>\n              </DialogActions>\n            </Form>\n          )}\n        </Formik>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(StudentTransferDialog)\n","import React from 'react'\nimport { Chip, Typography, makeStyles } from '@material-ui/core'\n\nimport DeleteStudentAlert from './DeleteStudentAlert'\nimport ResetStudentPasswordAlert from './ResetStudentPasswordAlert'\nimport StudentDialog from './StudentDialog'\nimport StudentTransferDialog from './StudentTransferDialog'\n\nconst useStyles = makeStyles((theme) => ({\n  row: {\n    'alignItems': 'center',\n    'borderBottom': 'solid 2px white',\n    'display': 'flex',\n    'height': theme.spacing(5),\n    'justifyContent': 'space-between',\n    'padding': theme.spacing(1),\n    '&:hover': {\n      borderBottomColor: theme.palette.secondary.main,\n    },\n  },\n  rowHeader: {\n    alignItems: 'center',\n    display: 'flex',\n  },\n  studentUsername: {\n    marginRight: theme.spacing(2),\n    minWidth: theme.spacing(12),\n  },\n}))\n\nconst StudentListRow = ({ course, student }) => {\n  const classes = useStyles()\n\n  return (\n    <div className={classes.row}>\n      <div className={classes.rowHeader}>\n        <Chip\n          color='primary'\n          label={student.username}\n          className={classes.studentUsername}\n        />\n        <Typography>\n          {student.lastName}, {student.firstName}\n        </Typography>\n      </div>\n      <div>\n        <ResetStudentPasswordAlert student={student} />\n        <StudentTransferDialog course={course} student={student} />\n        <StudentDialog course={course} student={student} />\n        <DeleteStudentAlert course={course} student={student} />\n      </div>\n    </div>\n  )\n}\n\nconst CourseStudentList = ({ course }) => {\n  return (\n    <>\n      <Typography variant='h6'>Students</Typography>{' '}\n      {course.students && course.students.length > 0 ? (\n        course.students.map((student) => {\n          return (\n            <StudentListRow\n              key={student._id}\n              course={course}\n              student={student}\n            />\n          )\n        })\n      ) : (\n        <div>\n          <Typography>No students have been added to this course</Typography>\n        </div>\n      )}\n    </>\n  )\n}\n\nexport default CourseStudentList\n","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n} from '@material-ui/core'\nimport { Delete } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport agent from '../../agent'\n\nimport { DELETE_COURSE } from '../../constants/actionTypes'\n\nconst mapDispatchToProps = (dispatch) => ({\n  onDelete: (slug) =>\n    dispatch({\n      type: DELETE_COURSE,\n      payload: agent.Courses.delete(slug),\n      snackbar: { message: 'Course deleted', variant: 'success' },\n    }),\n})\n\nconst DeleteCourseAlert = ({ course, onDelete }) => {\n  const [open, setOpen] = useState(false)\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmit = () => {\n    setOpen(false)\n    onDelete(course.slug)\n  }\n\n  return (\n    <>\n      <ActionButton action='Delete course' onClick={handleClickOpen}>\n        <Delete />\n      </ActionButton>\n\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        onClick={(ev) => ev.stopPropagation()}\n        onFocus={(ev) => ev.stopPropagation()}\n      >\n        <DialogTitle>Delete Course</DialogTitle>\n        <DialogContent>\n          <DialogContentText component='div'>\n            Are you sure you want to delete{' '}\n            <b>\n              {course.name} Period {course.period}\n            </b>\n            ? This action will permanently delete:\n            <ul>\n              <li>all student accounts</li>\n              <li>all song requests</li>\n              <li>all transactions</li>\n              <li>all scores</li>\n            </ul>\n            associated with this course. This action <b>cannot be undone</b>.\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button\n            onClick={handleSubmit}\n            color='secondary'\n            variant='contained'\n            autoFocus\n          >\n            Delete\n          </Button>\n          <Button onClick={handleClose} variant='contained'>\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(() => ({}), mapDispatchToProps)(DeleteCourseAlert)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  useMediaQuery,\n  useTheme,\n  Typography,\n} from '@material-ui/core'\nimport { Publish } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport Filedrop from '../Filedrop'\nimport Spinner from '../Spinner'\nimport agent from '../../agent'\n\nimport {\n  IMPORT_STUDENTS,\n  STUDENT_DIALOG_UNLOADED,\n} from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  ...state.common.settings,\n  ...state.courses,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onDrop: (users, courseId) =>\n    dispatch({\n      type: IMPORT_STUDENTS,\n      payload: agent.Students.import(users, courseId),\n      snackbar: { message: 'Students imported', variant: 'success' },\n    }),\n  onExit: () => dispatch({ type: STUDENT_DIALOG_UNLOADED }),\n})\n\nconst ImportStudentsDialog = ({\n  course,\n  defaultStudentPassword,\n  errors,\n  inProgress,\n  onDrop,\n  onExit,\n}) => {\n  const [open, setOpen] = useState(false)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleFiledrop = (file) => {\n    const column = Object.keys(file[0])\n    const users = file\n      .map((row, index) => {\n        // Parse csv data for Infinite Campus grade book export\n        if (index < 2) return null\n        const student = row[column[0]]\n        const user = {\n          firstName: student\n            .split(',')[1]\n            .split(/(\\s\\w)*\\s#/)[0]\n            .trim(),\n          lastName: student.split(',')[0],\n          username: student.split('#')[1],\n          password: defaultStudentPassword,\n          role: 'student',\n        }\n        return user\n      })\n      .filter((element) => element !== null)\n    onDrop(users, course._id)\n  }\n\n  useEffect(() => {\n    // Close the dialog only if there are no errors\n    if (!inProgress && !errors) setOpen(false)\n  }, [inProgress])\n\n  return (\n    <>\n      <ActionButton action='Import students' onClick={handleClickOpen}>\n        <Publish />\n      </ActionButton>\n\n      <Dialog\n        fullScreen={fullScreen}\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onExit={onExit}\n        onFocus={(ev) => ev.stopPropagation()}\n        open={open}\n      >\n        <DialogTitle>Import Students</DialogTitle>\n        <DialogContent>\n          {inProgress ? (\n            <Spinner message='Importing...' />\n          ) : (\n            <>\n              <Typography gutterBottom>\n                Students can be imported from a .csv file exported from Infinite\n                Campus\n              </Typography>\n              <Filedrop onFiledrop={handleFiledrop} />\n            </>\n          )}\n        </DialogContent>\n        <DialogActions>\n          <Button\n            disabled={inProgress}\n            onClick={handleClose}\n            variant='contained'\n          >\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ImportStudentsDialog)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport MaterialTable from 'material-table'\n\nimport agent from '../../agent'\n\nimport {\n  DELETE_TASK,\n  TASKS_DIALOG_LOADED,\n  UPDATE_TASK,\n} from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  tasks: state.tasks.tasks,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onDelete: (task) =>\n    dispatch({\n      type: DELETE_TASK,\n      payload: agent.Tasks.delete(task),\n      snackbar: { message: 'Assignment removed', variant: 'success' },\n    }),\n  onLoad: (courseId) =>\n    dispatch({\n      type: TASKS_DIALOG_LOADED,\n      payload: agent.Tasks.getAll(courseId),\n    }),\n  onUpdate: (task) =>\n    dispatch({\n      type: UPDATE_TASK,\n      payload: agent.Tasks.update(task),\n      snackbar: { message: 'Assignment updated', variant: 'success' },\n    }),\n})\n\nconst TasksTable = ({ course, onDelete, onLoad, onUpdate, tasks }) => {\n  const [data, setData] = useState([])\n\n  const mappedData = tasks.map((task) => ({\n    createdAt: new Date(task.createdAt).toDateString(),\n    title: task.title,\n    totalPoints: task.totalPoints,\n    slug: task.slug,\n  }))\n\n  const [columns] = useState([\n    { title: 'Date', field: 'createdAt', editable: 'never' },\n    { title: 'Title', field: 'title', editable: 'never' },\n    { title: 'Total Points', field: 'totalPoints' },\n  ])\n\n  useEffect(() => {\n    onLoad(course._id)\n  }, [])\n\n  useEffect(() => {\n    setData(mappedData)\n  }, [tasks])\n\n  return (\n    <MaterialTable\n      columns={columns}\n      data={data}\n      localization={{\n        body: {\n          emptyDataSourceMessage: 'No assignments found for this course',\n          editRow: {\n            deleteText:\n              'Delete assignment? This will delete all scores for this assignment.',\n          },\n        },\n      }}\n      options={{ actionsColumnIndex: -1, paging: false, toolbar: false }}\n      editable={{\n        onRowUpdate: (newData, oldData) =>\n          new Promise((resolve, reject) => {\n            const dataUpdate = [...data]\n            const index = oldData.tableData.id\n            dataUpdate[index] = newData\n            setData([...dataUpdate])\n            onUpdate(newData)\n            resolve()\n          }),\n        onRowDelete: (oldData) =>\n          new Promise((resolve, reject) => {\n            const newData = [...data]\n            const index = oldData.tableData.id\n            newData.splice(index, 1)\n            setData([...newData])\n            onDelete(oldData)\n            resolve()\n          }),\n      }}\n    />\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TasksTable)\n","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport { Assignment } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport ListErrors from '../ListErrors'\nimport TasksTable from './TasksTable'\n\nimport { TASKS_DIALOG_UNLOADED } from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  dialog: {\n    '& > .MuiDialog-container > .MuiPaper-root': {\n      [theme.breakpoints.up('lg')]: {\n        minHeight: theme.spacing(54),\n        width: theme.spacing(100),\n      },\n    },\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.tasks,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onExit: () => dispatch({ type: TASKS_DIALOG_UNLOADED }),\n})\n\nconst TasksDialog = ({ course, errors, inProgress, onExit }) => {\n  const [open, setOpen] = useState(false)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n  const classes = useStyles()\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  return (\n    <>\n      <ActionButton action='Manage assignments' onClick={handleClickOpen}>\n        <Assignment />\n      </ActionButton>\n\n      <Dialog\n        className={classes.dialog}\n        fullScreen={fullScreen}\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onExit={onExit}\n        onFocus={(ev) => ev.stopPropagation()}\n        open={open}\n      >\n        <DialogTitle>Manage Assignments</DialogTitle>\n        <DialogContent>\n          <ListErrors errors={errors} />\n          <TasksTable course={course} />\n        </DialogContent>\n        <DialogActions>\n          <Button\n            disabled={inProgress}\n            onClick={handleClose}\n            variant='contained'\n          >\n            Close\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TasksDialog)\n","import React, { useState } from 'react'\nimport {\n  Avatar,\n  ExpansionPanel,\n  ExpansionPanelDetails,\n  ExpansionPanelSummary,\n  Typography,\n  makeStyles,\n} from '@material-ui/core'\nimport { ExpandMore } from '@material-ui/icons'\n\nimport CourseDialog from './CourseDialog'\nimport CourseStudentList from './CourseStudentList'\nimport DeleteCourseAlert from './DeleteCourseAlert'\nimport ImportStudentsDialog from './ImportStudentsDialog'\nimport StudentDialog from './StudentDialog'\nimport TasksDialog from './TasksDialog'\n\nconst useStyles = makeStyles((theme) => ({\n  courseDetails: {\n    display: 'block',\n  },\n  courseHeader: {\n    alignItems: 'center',\n    display: 'flex',\n    justifyContent: 'space-between',\n    width: '100%',\n  },\n  coursePeriod: {\n    backgroundColor: theme.palette.secondary.main,\n    marginRight: theme.spacing(2),\n  },\n  courseTitle: {\n    flexGrow: '1',\n  },\n}))\n\nconst CourseList = ({ courses }) => {\n  const [expanded, setExpanded] = useState(false)\n\n  const classes = useStyles()\n\n  const handleChange = (panel) => (ev, isExpanded) => {\n    setExpanded(isExpanded ? panel : false)\n  }\n\n  return (\n    <>\n      {courses?.length > 0 ? (\n        courses.map((course) => {\n          return (\n            <ExpansionPanel\n              expanded={expanded === course._id}\n              key={course._id}\n              onChange={handleChange(course._id)}\n            >\n              <ExpansionPanelSummary expandIcon={<ExpandMore />}>\n                <div className={classes.courseHeader}>\n                  <Avatar className={classes.coursePeriod}>\n                    {course.period}\n                  </Avatar>\n                  <Typography className={classes.courseTitle} variant='h5'>\n                    {course.name}\n                  </Typography>\n                  <TasksDialog course={course} />\n                  <StudentDialog course={course} />\n                  <ImportStudentsDialog course={course} />\n                  <CourseDialog course={course} />\n                  <DeleteCourseAlert course={course} />\n                </div>\n              </ExpansionPanelSummary>\n              <ExpansionPanelDetails className={classes.courseDetails}>\n                <CourseStudentList course={course} />\n              </ExpansionPanelDetails>\n            </ExpansionPanel>\n          )\n        })\n      ) : (\n        <Typography>You have no courses</Typography>\n      )}\n    </>\n  )\n}\n\nexport default CourseList\n","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\n\nimport Alert from '../Alert'\nimport CourseDialog from './CourseDialog'\nimport CourseList from './CourseList'\nimport PageHeader from '../PageHeader'\nimport Spinner from '../Spinner'\nimport agent from '../../agent'\n\nimport {\n  COURSES_PAGE_LOADED,\n  COURSES_PAGE_UNLOADED,\n} from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  ...state.courses,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onLoad: () =>\n    dispatch({ type: COURSES_PAGE_LOADED, payload: agent.Courses.getAll() }),\n  onUnload: () => dispatch({ type: COURSES_PAGE_UNLOADED }),\n})\n\nconst TeacherCourses = ({\n  courses,\n  importCount,\n  onLoad,\n  onUnload,\n  pageLoaded,\n}) => {\n  useEffect(() => {\n    onLoad()\n\n    return () => {\n      onUnload()\n    }\n  }, [])\n\n  return (\n    <>\n      <PageHeader title='Manage Courses'>\n        <CourseDialog />\n      </PageHeader>\n      {importCount !== null && <Alert>{importCount} students imported</Alert>}\n      {pageLoaded ? (\n        <Spinner message='Loading...' />\n      ) : (\n        <CourseList courses={courses} />\n      )}\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TeacherCourses)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  ButtonGroup,\n  Chip,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Fab,\n  FormControl,\n  FormControlLabel,\n  Grid,\n  Radio,\n  RadioGroup,\n  Tooltip,\n  Typography,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport { Alert, AlertTitle } from '@material-ui/lab'\nimport { PlaylistAddCheck, ThumbDown, ThumbUp } from '@material-ui/icons'\n\nimport ListErrors from '../ListErrors'\nimport agent from '../../agent'\n\nimport {\n  SONG_REQUESTS_DIALOG_UNLOADED,\n  UPDATE_SONG_REQUEST,\n} from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  dialog: {\n    '& > .MuiDialog-container > .MuiPaper-root': {\n      [theme.breakpoints.up('lg')]: {\n        minHeight: theme.spacing(54),\n        width: theme.spacing(100),\n      },\n    },\n  },\n  icon: {\n    marginRight: theme.spacing(1),\n  },\n  panel: {\n    minWidth: theme.spacing(40),\n    maxWidth: theme.spacing(60),\n  },\n  selected: {\n    backgroundColor: theme.palette.primary.main,\n  },\n  songInfo: {\n    marginBottom: theme.spacing(4),\n  },\n  statusButton: {\n    '&:hover': {\n      backgroundColor: theme.palette.primary.light,\n    },\n  },\n  statusDescription: {\n    backgroundColor: theme.palette.grey[100],\n    borderRadius: theme.spacing(1),\n    marginTop: theme.spacing(2),\n    padding: theme.spacing(2),\n  },\n  studentInfo: {\n    'alignItems': 'center',\n    'display': 'flex',\n    'marginTop': theme.spacing(4),\n    '& > div': {\n      marginRight: theme.spacing(1),\n    },\n    [theme.breakpoints.up('md')]: {\n      borderTopColor: theme.palette.primary.main,\n      borderTopStyle: 'dotted',\n      borderTopWidth: '4px',\n      paddingTop: theme.spacing(2),\n    },\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.songs,\n  songRequestPurchaseAmount: state.common.settings.songRequestPurchaseAmount,\n  // spotifyTokens: state.common.settings.spotifyTokens,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onExit: () => dispatch({ type: SONG_REQUESTS_DIALOG_UNLOADED }),\n  onSubmit: (song) =>\n    dispatch({\n      type: UPDATE_SONG_REQUEST,\n      payload: agent.Songs.update(song),\n    }),\n})\n\nconst ProcessSongRequestsDialog = ({\n  courses,\n  errors,\n  inProgress,\n  onExit,\n  onSubmit,\n  songRequestPurchaseAmount,\n  // spotifyTokens,\n}) => {\n  const [open, setOpen] = useState(false)\n  const [song, setSong] = useState(null)\n  const [status, setStatus] = useState(null)\n  const [statusDescription, setStatusDescription] = useState(null)\n  const [skippedSongs, setSkippedSongs] = useState([])\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n  const classes = useStyles()\n\n  const getLyricSearchUrl = (artist, title) => {\n    const url = `http://www.google.com/search?q=${encodeURIComponent(\n      'lyrics: ' + title + ' by ' + artist\n    )}`\n    return url\n  }\n\n  const getSpotifySearchUrl = (artist, title) => {\n    const url = `https://open.spotify.com/search/${encodeURIComponent(\n      title + ' ' + artist\n    )}`\n    return url\n  }\n\n  const getNextSong = () => {\n    setSong(null)\n    if (courses.length > 0) {\n      for (const course of courses) {\n        if (course.songs.length > 0) {\n          const nextSong = course.songs.find(\n            (song) =>\n              song.status === 'pending' && !skippedSongs.includes(song._id)\n          )\n          if (nextSong) {\n            nextSong.period = course.period\n            setSong(nextSong)\n            break\n          }\n        }\n      }\n    }\n  }\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n    setStatus(null)\n    setStatusDescription(null)\n    setSkippedSongs([])\n  }\n\n  const handleStatusButtonClick = (status) => {\n    setStatus(status)\n  }\n\n  const handleStatusDescriptionChange = (ev) => {\n    setStatusDescription(ev.target.value)\n  }\n\n  const handleSkip = () => {\n    setSkippedSongs([...skippedSongs, song._id])\n  }\n\n  const handleSubmit = async () => {\n    onSubmit({\n      amount: songRequestPurchaseAmount,\n      id: song._id,\n      status,\n      statusDescription,\n    })\n    setStatus(null)\n    setStatusDescription(null)\n  }\n\n  useEffect(() => {\n    getNextSong()\n  }, [courses])\n\n  useEffect(() => {\n    getNextSong()\n  }, [skippedSongs])\n\n  return (\n    <>\n      <Fab color='primary' onClick={handleClickOpen} variant='extended'>\n        <PlaylistAddCheck className={classes.icon} />\n        Process requests\n      </Fab>\n\n      <Dialog\n        className={classes.dialog}\n        fullScreen={fullScreen}\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onExit={onExit}\n        onFocus={(ev) => ev.stopPropagation()}\n        open={open}\n      >\n        <DialogTitle>Process Song Requests</DialogTitle>\n        <DialogContent>\n          <ListErrors errors={errors} />\n          {song ? (\n            <Grid container spacing={2}>\n              <Grid item xs={12} md={6}>\n                <div className={classes.panel}>\n                  <div className={classes.songInfo}>\n                    <Typography variant='h6'>{song.title}</Typography>\n                    <Typography\n                      color='textSecondary'\n                      variant='body1'\n                      gutterBottom\n                    >\n                      Song\n                    </Typography>\n                    <Typography variant='h6'>{song.artist}</Typography>\n                    <Typography color='textSecondary' variant='body1'>\n                      Artist\n                    </Typography>\n                  </div>\n\n                  <ButtonGroup>\n                    <Button\n                      href={getLyricSearchUrl(song.artist, song.title)}\n                      target='_blank'\n                    >\n                      Search Lyrics\n                    </Button>\n                    <Button\n                      href={getSpotifySearchUrl(song.artist, song.title)}\n                      target='_blank'\n                    >\n                      Search Spotify\n                    </Button>\n                  </ButtonGroup>\n\n                  <div className={classes.studentInfo}>\n                    <Chip color='secondary' label={song.period} />\n                    <Typography>\n                      {song.student.firstName} {song.student.lastName}\n                    </Typography>\n                  </div>\n                </div>\n              </Grid>\n\n              <Grid item xs={12} md={6}>\n                <div className={classes.panel}>\n                  <Typography variant='h6'>Status</Typography>\n\n                  <ButtonGroup fullWidth size='large'>\n                    <Tooltip arrow enterTouchDelay={0} title='Approve'>\n                      <Button\n                        className={`${classes.statusButton} ${\n                          status === 'approved' && classes.selected\n                        }`}\n                        onClick={() => handleStatusButtonClick('approved')}\n                      >\n                        <ThumbUp />\n                      </Button>\n                    </Tooltip>\n                    <Tooltip arrow enterTouchDelay={0} title='Reject'>\n                      <Button\n                        className={`${classes.statusButton} ${\n                          status === 'rejected' && classes.selected\n                        }`}\n                        onClick={() => handleStatusButtonClick('rejected')}\n                      >\n                        <ThumbDown />\n                      </Button>\n                    </Tooltip>\n                  </ButtonGroup>\n                  {status === 'approved' && (\n                    <div className={classes.statusDescription}>\n                      <Typography gutterBottom>\n                        <strong>Condition for Approval</strong> (optional)\n                      </Typography>\n                      <FormControl component='fieldset'>\n                        <RadioGroup\n                          name='statusDescription'\n                          value={statusDescription}\n                          onChange={handleStatusDescriptionChange}\n                        >\n                          <FormControlLabel\n                            value='Clean version'\n                            control={<Radio />}\n                            label='Clean version'\n                          />\n                          <FormControlLabel\n                            value='Instrumental version'\n                            control={<Radio />}\n                            label='Instrumental version'\n                          />\n                          <FormControlLabel\n                            value='Picked my best guess'\n                            control={<Radio />}\n                            label='Picked my best guess'\n                          />\n                        </RadioGroup>\n                      </FormControl>\n                    </div>\n                  )}\n                  {status === 'rejected' && (\n                    <div className={classes.statusDescription}>\n                      <Typography gutterBottom>\n                        <strong>Reason for Rejection</strong> (optional)\n                      </Typography>\n                      <FormControl component='fieldset'>\n                        <RadioGroup\n                          name='statusDescription'\n                          value={statusDescription}\n                          onChange={handleStatusDescriptionChange}\n                        >\n                          <FormControlLabel\n                            value='Inappropriate content (language, drugs, sex, and/or violence)'\n                            control={<Radio />}\n                            label='Inappropriate content (language, drugs, sex, and/or violence)'\n                          />\n                          <FormControlLabel\n                            value='Not available on Spotify'\n                            control={<Radio />}\n                            label='Not available on Spotify'\n                          />\n                          <FormControlLabel\n                            value='other'\n                            control={<Radio />}\n                            label='Other'\n                          />\n                        </RadioGroup>\n                      </FormControl>\n                    </div>\n                  )}\n                </div>\n              </Grid>\n            </Grid>\n          ) : (\n            <Alert severity='info'>\n              <AlertTitle>All caught up!</AlertTitle>\n              There are no songs to process at this time\n            </Alert>\n          )}\n        </DialogContent>\n\n        <DialogActions>\n          {song && (\n            <Button\n              color='primary'\n              disabled={inProgress}\n              onClick={handleSubmit}\n              variant='contained'\n            >\n              {inProgress ? 'Saving...' : 'Save & Continue'}\n            </Button>\n          )}\n          {song && (\n            <Button\n              disabled={inProgress}\n              onClick={handleSkip}\n              variant='contained'\n            >\n              Skip\n            </Button>\n          )}\n          <Button\n            disabled={inProgress}\n            onClick={handleClose}\n            variant='contained'\n          >\n            {song ? 'Cancel' : 'Close'}\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ProcessSongRequestsDialog)\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport MaterialTable from 'material-table'\nimport { Chip, Tooltip } from '@material-ui/core'\nimport { InfoOutlined } from '@material-ui/icons'\n\nimport PageHeader from '../PageHeader'\nimport ProcessSongRequestsDialog from './ProcessSongRequestsDialog'\nimport agent from '../../agent'\n\nimport {\n  DELETE_SONG_REQUEST,\n  SONGS_PAGE_UNLOADED,\n  TEACHER_SONGS_PAGE_LOADED,\n} from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({ ...state.songs })\n\nconst mapDispatchToProps = (dispatch) => ({\n  onDelete: (id) =>\n    dispatch({\n      type: DELETE_SONG_REQUEST,\n      payload: agent.Songs.delete(id),\n      snackbar: { message: 'Song request removed', variant: 'success' },\n    }),\n  onLoad: () =>\n    dispatch({\n      type: TEACHER_SONGS_PAGE_LOADED,\n      payload: agent.Songs.forTeacher(),\n    }),\n  onUnload: () => dispatch({ type: SONGS_PAGE_UNLOADED }),\n})\n\nconst TeacherSongs = ({ courses, onDelete, onLoad, onUnload }) => {\n  const [data, setData] = useState([])\n\n  const mappedData = courses\n    .map((course) =>\n      course.songs.map((song) => ({\n        createdAt: new Date(song.createdAt).toDateString(),\n        title: song.title,\n        artist: song.artist,\n        purchasedBy: `${song.student.firstName} ${song.student.lastName}`,\n        period: course.period,\n        status: song.status,\n        statusDescription: song.statusDescription,\n        _id: song._id,\n      }))\n    )\n    .flat()\n\n  const [columns] = useState([\n    { title: 'Request Date', field: 'createdAt', editable: 'never' },\n    { title: 'Song Title', field: 'title' },\n    { title: 'Song Artist', field: 'artist' },\n    { title: 'Purchased by', field: 'purchasedBy', editable: 'never' },\n    {\n      title: 'Period',\n      field: 'period',\n      editable: 'never',\n      render: (rowData, renderType) =>\n        renderType === 'row' ? (\n          <Chip label={rowData.period} color='secondary' />\n        ) : (\n          <Chip label={rowData} color='secondary' />\n        ),\n    },\n    {\n      title: 'Status',\n      field: 'status',\n      lookup: {\n        approved: 'approved',\n        pending: 'pending',\n        rejected: 'rejected',\n        removed: 'removed',\n      },\n      render: (rowData, renderType) =>\n        renderType === 'row' ? (\n          <span style={{ alignItems: 'center', display: 'flex' }}>\n            {rowData.statusDescription ? (\n              <>\n                {rowData.status}\n                <Tooltip\n                  arrow\n                  color='primary'\n                  enterTouchDelay={0}\n                  title={rowData.statusDescription}\n                >\n                  <InfoOutlined style={{ marginLeft: '8px' }} />\n                </Tooltip>\n              </>\n            ) : (\n              rowData.status\n            )}\n          </span>\n        ) : (\n          <span>{rowData}</span>\n        ),\n    },\n  ])\n\n  useEffect(() => {\n    onLoad()\n\n    return () => {\n      return onUnload()\n    }\n  }, [])\n\n  useEffect(() => {\n    setData(mappedData)\n  }, [courses])\n\n  return (\n    <>\n      <PageHeader title='Manage Song Requests'>\n        <ProcessSongRequestsDialog />\n      </PageHeader>\n\n      <MaterialTable\n        title='Song Requests'\n        columns={columns}\n        data={data}\n        localization={{\n          body: {\n            emptyDataSourceMessage: 'No song requests have been submitted',\n            editRow: {\n              deleteText: 'Delete song request?',\n            },\n          },\n        }}\n        options={{ actionsColumnIndex: -1, paging: false, grouping: true }}\n        editable={{\n          onRowDelete: (oldData) =>\n            new Promise((resolve, reject) => {\n              const dataDelete = [...data]\n              const index = oldData.tableData.id\n              dataDelete.splice(index, 1)\n              setData([...dataDelete])\n              onDelete(oldData._id)\n              resolve()\n            }),\n        }}\n      />\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TeacherSongs)\n","import React, { useState, useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Form, Field } from 'formik'\nimport { TextField } from 'formik-material-ui'\nimport * as Yup from 'yup'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Fab,\n  Grid,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport { Add, Edit } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport ListErrors from '../ListErrors'\nimport agent from '../../agent'\n\nimport {\n  ADD_TEACHER,\n  TEACHER_DIALOG_UNLOADED,\n  UPDATE_TEACHER,\n} from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  icon: {\n    marginRight: theme.spacing(1),\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.teachers,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onAdd: (user) =>\n    dispatch({\n      type: ADD_TEACHER,\n      payload: agent.Auth.register(user),\n      snackbar: { message: 'Teacher added', variant: 'success' },\n    }),\n  onExit: () => dispatch({ type: TEACHER_DIALOG_UNLOADED }),\n  onUpdate: (user) =>\n    dispatch({\n      type: UPDATE_TEACHER,\n      payload: agent.Teachers.update(user),\n      snackbar: { message: 'Teacher updated', variant: 'success' },\n    }),\n})\n\nconst TeacherDialog = ({\n  errors,\n  inProgress,\n  onAdd,\n  onExit,\n  onUpdate,\n  teacher,\n}) => {\n  const [open, setOpen] = useState(false)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n  const classes = useStyles()\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmitAdd = (values) => {\n    onAdd({ ...values, role: 'teacher' })\n  }\n\n  const handleSubmitUpdate = (values) => {\n    onUpdate({ ...teacher, ...values })\n  }\n\n  useEffect(() => {\n    // Close the dialog only if there are no errors\n    if (!inProgress && !errors) setOpen(false)\n  }, [inProgress])\n\n  return (\n    <>\n      {teacher ? (\n        <ActionButton action='Update teacher' onClick={handleClickOpen}>\n          <Edit />\n        </ActionButton>\n      ) : (\n        <Fab color='primary' onClick={handleClickOpen} variant='extended'>\n          <Add className={classes.icon} />\n          Add teacher\n        </Fab>\n      )}\n      <Dialog\n        fullScreen={fullScreen}\n        open={open}\n        onClose={handleClose}\n        onClick={(ev) => ev.stopPropagation()}\n        onExit={onExit}\n        onFocus={(ev) => ev.stopPropagation()}\n      >\n        <Formik\n          initialValues={{\n            firstName: teacher?.firstName || '',\n            lastName: teacher?.lastName || '',\n            username: teacher?.username || '',\n            password: '',\n          }}\n          validationSchema={Yup.object({\n            firstName: Yup.string().required('Required'),\n            lastName: Yup.string().required('Required'),\n            username: Yup.string().required('Required'),\n            password: Yup.string().required(!teacher ? 'Required' : ''),\n          })}\n          onSubmit={async (values) => {\n            teacher ? handleSubmitUpdate(values) : handleSubmitAdd(values)\n          }}\n        >\n          <Form>\n            <DialogTitle>\n              {teacher ? 'Edit Teacher' : 'Add Teacher'}\n            </DialogTitle>\n            <DialogContent>\n              <ListErrors errors={errors} />\n              <Grid container spacing={2}>\n                <Grid item xs={12} md={6}>\n                  <Field\n                    autoFocus={teacher ? false : true}\n                    color='primary'\n                    component={TextField}\n                    disabled={inProgress}\n                    label='First Name'\n                    name='firstName'\n                    type='text'\n                    fullWidth\n                  />\n                </Grid>\n                <Grid item xs={12} md={6}>\n                  <Field\n                    color='primary'\n                    component={TextField}\n                    disabled={inProgress}\n                    label='Last Name'\n                    name='lastName'\n                    type='text'\n                    fullWidth\n                  />\n                </Grid>\n                <Grid item xs={12} md={6}>\n                  <Field\n                    color='primary'\n                    component={TextField}\n                    disabled={!!teacher || inProgress}\n                    label='Username'\n                    name='username'\n                    type='text'\n                    fullWidth\n                  />\n                </Grid>\n                <Grid item xs={12} md={6}>\n                  <Field\n                    color='primary'\n                    component={TextField}\n                    disabled={inProgress}\n                    label='Password'\n                    name='password'\n                    type='text'\n                    fullWidth\n                  />\n                </Grid>\n              </Grid>\n            </DialogContent>\n            <DialogActions>\n              <Button\n                color='primary'\n                disabled={inProgress}\n                type='submit'\n                variant='contained'\n              >\n                {teacher\n                  ? inProgress\n                    ? 'Updating...'\n                    : 'Update'\n                  : inProgress\n                  ? 'Adding...'\n                  : 'Add'}\n              </Button>\n              <Button\n                disabled={inProgress}\n                onClick={handleClose}\n                variant='contained'\n              >\n                Cancel\n              </Button>\n            </DialogActions>\n          </Form>\n        </Formik>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TeacherDialog)\n","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n} from '@material-ui/core'\nimport { Delete } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport agent from '../../agent'\n\nimport { DELETE_TEACHER } from '../../constants/actionTypes'\n\nconst mapDispatchToProps = (dispatch) => ({\n  onDelete: (user) =>\n    dispatch({\n      type: DELETE_TEACHER,\n      payload: agent.Teachers.delete(user),\n      snackbar: { message: 'Teacher deleted', variant: 'success' },\n    }),\n})\n\nconst DeleteTeacherAlert = ({ onDelete, teacher }) => {\n  const [open, setOpen] = useState(false)\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmit = () => {\n    setOpen(false)\n    onDelete(teacher)\n  }\n\n  return (\n    <>\n      <ActionButton action='Delete teacher' onClick={handleClickOpen}>\n        <Delete />\n      </ActionButton>\n      <Dialog\n        open={open}\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onFocus={(ev) => ev.stopPropagation()}\n      >\n        <DialogTitle>Delete Teacher</DialogTitle>\n        <DialogContent>\n          <DialogContentText component='div'>\n            Are you sure you want to delete{' '}\n            <b>\n              {teacher.firstName} {teacher.lastName}\n            </b>\n            ? This action will permanently delete:\n            <ul>\n              <li>all student accounts</li>\n              <li>all song requests</li>\n              <li>all transactions</li>\n              <li>all products</li>\n              <li>all scores</li>\n            </ul>\n            associated with this teacher. This action <b>cannot be undone</b>.\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button\n            onClick={handleSubmit}\n            color='secondary'\n            variant='contained'\n            autoFocus\n          >\n            Delete\n          </Button>\n          <Button onClick={handleClose} variant='contained'>\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(() => ({}), mapDispatchToProps)(DeleteTeacherAlert)\n","import React, { useState } from 'react'\nimport {\n  Chip,\n  ExpansionPanel,\n  ExpansionPanelDetails,\n  ExpansionPanelSummary,\n  Typography,\n  makeStyles,\n} from '@material-ui/core'\nimport { ExpandMore } from '@material-ui/icons'\n\nimport TeacherDialog from './TeacherDialog'\nimport DeleteTeacherAlert from './DeleteTeacherAlert'\n\nconst useStyles = makeStyles((theme) => ({\n  teacherDetails: {\n    display: 'block',\n  },\n  teacherHeader: {\n    alignItems: 'center',\n    display: 'flex',\n    justifyContent: 'space-between',\n    width: '100%',\n  },\n  teacherUsername: {\n    marginRight: theme.spacing(2),\n    minWidth: theme.spacing(12),\n  },\n  teacherName: {\n    flexGrow: '1',\n  },\n}))\n\nconst TeacherList = ({ teachers }) => {\n  const [expanded, setExpanded] = useState(false)\n\n  const classes = useStyles()\n\n  const handleChange = (panel) => (ev, isExpanded) => {\n    setExpanded(isExpanded ? panel : false)\n  }\n\n  return (\n    <>\n      {teachers?.length > 0 ? (\n        teachers.map((teacher) => {\n          return (\n            <ExpansionPanel\n              expanded={expanded === teacher.username}\n              key={teacher.username}\n              onChange={handleChange(teacher.username)}\n            >\n              <ExpansionPanelSummary expandIcon={<ExpandMore />}>\n                <div className={classes.teacherHeader}>\n                  <Chip\n                    color='secondary'\n                    label={teacher.username}\n                    className={classes.teacherUsername}\n                  />\n                  <Typography className={classes.teacherName} variant='h5'>\n                    {teacher.firstName} {teacher.lastName}\n                  </Typography>\n                  <TeacherDialog teacher={teacher} />\n                  <DeleteTeacherAlert teacher={teacher} />\n                </div>\n              </ExpansionPanelSummary>\n              <ExpansionPanelDetails className={classes.teacherDetails}>\n                <Typography variant='h6'>Courses</Typography>\n                {teacher.courses && teacher.courses.length > 0 ? (\n                  teacher.courses.map((course) => {\n                    return (\n                      <div key={course._id}>\n                        <Typography>\n                          Period {course.period} | {course.name} |{' '}\n                          {course.students.length} students\n                        </Typography>\n                      </div>\n                    )\n                  })\n                ) : (\n                  <div>\n                    <Typography>No courses have been created</Typography>\n                  </div>\n                )}\n              </ExpansionPanelDetails>\n            </ExpansionPanel>\n          )\n        })\n      ) : (\n        <Typography>No teachers found</Typography>\n      )}\n    </>\n  )\n}\n\nexport default TeacherList\n","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\n\nimport PageHeader from './../PageHeader'\nimport TeacherDialog from './TeacherDialog'\nimport TeacherList from './TeacherList'\nimport agent from '../../agent'\n\nimport {\n  MANAGE_TEACHERS_PAGE_LOADED,\n  MANAGE_TEACHERS_PAGE_UNLOADED,\n} from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  ...state.teachers,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onLoad: () =>\n    dispatch({\n      type: MANAGE_TEACHERS_PAGE_LOADED,\n      payload: agent.Teachers.getAll(),\n    }),\n  onUnload: () => dispatch({ type: MANAGE_TEACHERS_PAGE_UNLOADED }),\n})\n\nconst ManageTeachers = ({ onLoad, onUnload, teachers }) => {\n  useEffect(() => {\n    onLoad()\n\n    return () => {\n      onUnload()\n    }\n  }, [])\n\n  return (\n    <>\n      <PageHeader title={'Manage Teachers'}>\n        <TeacherDialog />\n      </PageHeader>\n      <TeacherList teachers={teachers} />\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ManageTeachers)\n","import React from 'react'\nimport { Typography, makeStyles } from '@material-ui/core'\n\nconst useStyles = makeStyles((theme) => ({\n  header: {\n    backgroundColor: 'white',\n    paddingLeft: theme.spacing(1),\n    paddingRight: theme.spacing(1),\n    position: 'absolute',\n    top: '-18px',\n  },\n  img: {\n    maxHeight: '100%',\n    maxWidth: '100%',\n    minWidth: '20px',\n  },\n  window: {\n    alignItems: 'center',\n    display: 'flex',\n    borderColor: theme.palette.secondary.main,\n    borderStyle: 'solid',\n    borderWidth: '4px',\n    height: '300px',\n    justifyContent: 'center',\n    padding: theme.spacing(2),\n    position: 'relative',\n  },\n}))\n\nconst ImagePreview = ({ src }) => {\n  const classes = useStyles()\n\n  return (\n    <div className={classes.window}>\n      <Typography variant='h6' className={classes.header}>\n        Image Preview\n      </Typography>\n      {src ? (\n        <img className={classes.img} src={src} />\n      ) : (\n        <Typography>No photo url provided</Typography>\n      )}\n    </div>\n  )\n}\n\nexport default ImagePreview\n","import React from 'react'\nimport { TextField } from '@material-ui/core'\n\nconst TextFieldLimit = (props) => {\n  return (\n    <TextField\n      error={Boolean(props.errors)}\n      inputProps={{ maxLength: props.limit }}\n      helperText={\n        props.errors\n          ? `${props.errors} | ${props.value.length}/${props.limit}`\n          : `${props.value.length}/${props.limit}`\n      }\n      {...props}\n    />\n  )\n}\n\nexport default TextFieldLimit\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Form, Field } from 'formik'\nimport { TextField } from 'formik-material-ui'\nimport * as Yup from 'yup'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Fab,\n  Grid,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport { Add, Edit } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport ImagePreview from '../ImagePreview'\nimport ListErrors from '../ListErrors'\nimport TextFieldLimit from '../TextFieldLimit'\nimport agent from '../../agent'\n\nimport {\n  ADD_PRODUCT,\n  PRODUCT_DIALOG_UNLOADED,\n  UPDATE_PRODUCT,\n} from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  addIcon: {\n    marginRight: theme.spacing(1),\n  },\n  updateIcon: {\n    'color': 'rgba(255, 255, 255, 0.7)',\n    '&:hover': { backgroundColor: 'rgba(255, 255, 255, 0.3)', color: 'white' },\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.products,\n  currentUser: state.common.currentUser,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onAdd: (product) =>\n    dispatch({\n      type: ADD_PRODUCT,\n      payload: agent.Products.add(product),\n      snackbar: { message: 'Product added', variant: 'success' },\n    }),\n  onExit: () => dispatch({ type: PRODUCT_DIALOG_UNLOADED }),\n  onUpdate: (product) =>\n    dispatch({\n      type: UPDATE_PRODUCT,\n      payload: agent.Products.update(product),\n      snackbar: { message: 'Product updated', variant: 'success' },\n    }),\n})\n\nconst ProductDialog = ({\n  currentUser,\n  product,\n  errors,\n  inProgress,\n  onAdd,\n  onExit,\n  onUpdate,\n}) => {\n  const CHAR_LIMITS = { name: 60, description: 140 }\n\n  const [open, setOpen] = useState(false)\n\n  const theme = useTheme()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'))\n  const classes = useStyles()\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmitAdd = (values) => {\n    onAdd({ ...values })\n  }\n\n  const handleSubmitUpdate = (values) => {\n    onUpdate({ ...product, ...values })\n  }\n\n  useEffect(() => {\n    // Close the dialog only if there are no errors\n    if (!inProgress && !errors) setOpen(false)\n  }, [inProgress])\n\n  return (\n    <>\n      {product ? (\n        currentUser.role === 'teacher' && (\n          <ActionButton\n            action='Edit product'\n            onClick={handleClickOpen}\n            className={classes.updateIcon}\n          >\n            <Edit />\n          </ActionButton>\n        )\n      ) : (\n        <Fab color='primary' onClick={handleClickOpen} variant='extended'>\n          <Add className={classes.addIcon} />\n          Add product\n        </Fab>\n      )}\n\n      <Dialog\n        fullScreen={fullScreen}\n        maxWidth='lg'\n        onClick={(ev) => ev.stopPropagation()}\n        onClose={handleClose}\n        onExit={onExit}\n        onFocus={(ev) => ev.stopPropagation()}\n        open={open}\n      >\n        <Formik\n          initialValues={{\n            name: product?.name || '',\n            description: product?.description || '',\n            photoUrl: product?.photoUrl || '',\n            cost: product?.cost || '',\n            quantity: product?.quantity || '',\n          }}\n          validationSchema={Yup.object({\n            name: Yup.string()\n              .max(\n                CHAR_LIMITS.name,\n                `Cannot be longer than ${CHAR_LIMITS.name} characters`\n              )\n              .required('Required'),\n            description: Yup.string().max(\n              CHAR_LIMITS.description,\n              `Cannot be longer than ${CHAR_LIMITS.description} characters`\n            ),\n            photoUrl: Yup.string().url('Not a valid url').required('Required'),\n            cost: Yup.number().typeError('Numbers only').required('Required'),\n            quantity: Yup.number()\n              .typeError('Numbers only')\n              .required('Required'),\n          })}\n          onSubmit={async (values) => {\n            product ? handleSubmitUpdate(values) : handleSubmitAdd(values)\n          }}\n        >\n          {(formik) => (\n            <Form>\n              <DialogTitle>\n                {product ? 'Edit product' : 'Add product'}\n              </DialogTitle>\n              <DialogContent>\n                <ListErrors errors={errors} />\n                <Grid container spacing={2}>\n                  <Grid item xs={12}>\n                    <Field\n                      as={TextFieldLimit}\n                      autoFocus={product ? false : true}\n                      color='primary'\n                      disabled={inProgress}\n                      label='Product Name'\n                      name='name'\n                      type='text'\n                      limit={CHAR_LIMITS.name}\n                      errors={formik.errors.name}\n                      fullWidth\n                    />\n                  </Grid>\n                  <Grid item xs={12}>\n                    <Field\n                      as={TextFieldLimit}\n                      color='primary'\n                      disabled={inProgress}\n                      label='Product Description'\n                      name='description'\n                      type='text'\n                      limit={CHAR_LIMITS.description}\n                      errors={formik.errors.description}\n                      fullWidth\n                    />\n                  </Grid>\n                  <Grid item xs={12}>\n                    <Field\n                      color='primary'\n                      component={TextField}\n                      disabled={inProgress}\n                      label='Photo Url'\n                      name='photoUrl'\n                      type='url'\n                      fullWidth\n                    />\n                  </Grid>\n                  <Grid item xs={12} md={6}>\n                    <Field\n                      color='primary'\n                      component={TextField}\n                      disabled={inProgress}\n                      label='Cost'\n                      name='cost'\n                      type='number'\n                      fullWidth\n                    />\n                  </Grid>\n                  <Grid item xs={12} md={6}>\n                    <Field\n                      color='primary'\n                      component={TextField}\n                      disabled={inProgress}\n                      label='Quantity'\n                      name='quantity'\n                      type='number'\n                      fullWidth\n                    />\n                  </Grid>\n                  <Grid item xs={12} md={6}>\n                    <ImagePreview src={formik.values.photoUrl} />\n                  </Grid>\n                </Grid>\n              </DialogContent>\n              <DialogActions>\n                <Button\n                  disabled={inProgress}\n                  color='primary'\n                  type='submit'\n                  variant='contained'\n                >\n                  {product\n                    ? inProgress\n                      ? 'Updating...'\n                      : 'Update'\n                    : inProgress\n                    ? 'Adding...'\n                    : 'Add'}\n                </Button>\n                <Button\n                  disabled={inProgress}\n                  onClick={handleClose}\n                  variant='contained'\n                >\n                  Cancel\n                </Button>\n              </DialogActions>\n            </Form>\n          )}\n        </Formik>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductDialog)\n","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  makeStyles,\n} from '@material-ui/core'\nimport { Delete } from '@material-ui/icons'\n\nimport ActionButton from '../ActionButton'\nimport agent from '../../agent'\n\nimport { DELETE_PRODUCT } from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  icon: {\n    'color': 'rgba(255, 255, 255, 0.7)',\n    '&:hover': { backgroundColor: 'rgba(255, 255, 255, 0.3)', color: 'white' },\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  currentUser: state.common.currentUser,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onDelete: (slug) =>\n    dispatch({\n      type: DELETE_PRODUCT,\n      payload: agent.Products.delete(slug),\n      snackbar: { message: 'Product deleted', variant: 'success' },\n    }),\n})\n\nconst DeleteProductAlert = ({ currentUser, product, onDelete }) => {\n  const classes = useStyles()\n\n  const [open, setOpen] = useState(false)\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleSubmit = () => {\n    setOpen(false)\n    onDelete(product.slug)\n  }\n\n  return (\n    <>\n      {currentUser.role === 'teacher' && (\n        <ActionButton\n          action='Delete product'\n          onClick={handleClickOpen}\n          className={classes.icon}\n        >\n          <Delete />\n        </ActionButton>\n      )}\n\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        onClick={(ev) => ev.stopPropagation()}\n        onFocus={(ev) => ev.stopPropagation()}\n      >\n        <DialogTitle>Delete Product</DialogTitle>\n        <DialogContent>\n          <DialogContentText component='div'>\n            Are you sure you want to delete <b>{product.name}</b>? This action{' '}\n            <b>cannot be undone</b>.\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button\n            onClick={handleSubmit}\n            color='secondary'\n            variant='contained'\n            autoFocus\n          >\n            Delete\n          </Button>\n          <Button onClick={handleClose} variant='contained'>\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DeleteProductAlert)\n","import React from 'react'\nimport {\n  GridList,\n  GridListTile,\n  GridListTileBar,\n  Tooltip,\n  Typography,\n  makeStyles,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core'\nimport CurrencyFormat from 'react-currency-format'\n\nimport DeleteProductDialog from './DeleteProductDialog'\nimport ProductDialog from './ProductDialog'\n\nconst useStyles = makeStyles((theme) => ({\n  actionIcon: { display: 'flex' },\n  cost: {\n    backgroundColor: theme.palette.primary.main,\n    color: 'white',\n    fontSize: '1rem',\n    lineHeight: '1.5rem',\n    padding: theme.spacing(1),\n  },\n  description: {\n    marginBottom: '-1.5rem',\n    opacity: 0,\n    transition: 'opacity 0s ease-in-out',\n  },\n  name: {\n    color: theme.palette.secondary.main,\n    fontSize: theme.typography.h5.fontSize,\n    whiteSpace: 'nowrap',\n  },\n  tile: {\n    '&:hover .MuiGridListTileBar-root': {\n      'height': '100%',\n      '& #description': {\n        marginBottom: 0,\n        opacity: 1,\n        transition: 'margin-bottom 0.35s ease-in-out, opacity 0.5s ease-in-out',\n      },\n    },\n  },\n  tileBar: {\n    alignItems: 'flex-end',\n    paddingBottom: theme.spacing(1),\n    transition: 'height 0.35s ease-in-out',\n  },\n  title: {\n    whiteSpace: 'normal',\n  },\n}))\n\nconst ProductsGallery = ({ products, userRole }) => {\n  const classes = useStyles()\n\n  const theme = useTheme()\n  const isSmall = useMediaQuery(theme.breakpoints.down('sm'))\n  const isMedium = useMediaQuery(theme.breakpoints.down('md'))\n  const cols = isSmall ? 1 : isMedium ? 2 : 3\n\n  return (\n    <div>\n      <GridList cols={cols} spacing={8}>\n        {products?.length > 0 ? (\n          products.map((product) => {\n            return (\n              <GridListTile key={product.slug} className={classes.tile}>\n                <img src={product.photoUrl} alt={product.name} />\n\n                <GridListTileBar\n                  classes={{\n                    actionIcon: classes.actionIcon,\n                    title: classes.title,\n                  }}\n                  className={classes.tileBar}\n                  title={\n                    <div>\n                      <div className={classes.description} id='description'>\n                        {product.description}\n                      </div>\n                      <Tooltip\n                        arrow\n                        enterTouchDelay={0}\n                        placement='bottom-start'\n                        title={product.name}\n                      >\n                        <div className={classes.name}>{product.name}</div>\n                      </Tooltip>\n                    </div>\n                  }\n                  subtitle={\n                    <span className={classes.cost}>\n                      <CurrencyFormat\n                        value={product.cost}\n                        displayType={'text'}\n                        thousandSeparator={true}\n                        suffix={' pts'}\n                      />\n                    </span>\n                  }\n                  actionIcon={\n                    userRole === 'teacher' && (\n                      <>\n                        <ProductDialog product={product} />\n                        <DeleteProductDialog product={product} />\n                      </>\n                    )\n                  }\n                />\n              </GridListTile>\n            )\n          })\n        ) : (\n          <Typography>You have no products</Typography>\n        )}\n      </GridList>\n    </div>\n  )\n}\n\nexport default ProductsGallery\n","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\n\nimport PageHeader from '../PageHeader'\nimport ProductDialog from './ProductDialog'\nimport ProductsGallery from './ProductsGallery'\nimport Spinner from '../Spinner'\nimport agent from '../../agent'\n\nimport {\n  PRODUCTS_PAGE_LOADED,\n  PRODUCTS_PAGE_UNLOADED,\n} from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  ...state.products,\n  currentUser: state.common.currentUser,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onLoad: () =>\n    dispatch({ type: PRODUCTS_PAGE_LOADED, payload: agent.Products.getAll() }),\n  onUnload: () => dispatch({ type: PRODUCTS_PAGE_UNLOADED }),\n})\n\nconst Products = ({ currentUser, products, onLoad, onUnload, pageLoaded }) => {\n  useEffect(() => {\n    onLoad()\n\n    return () => {\n      onUnload()\n    }\n  }, [])\n\n  return (\n    <>\n      <PageHeader\n        title={\n          currentUser.role === 'teacher' ? 'Manage Products' : 'View Products'\n        }\n      >\n        {currentUser.role === 'teacher' && <ProductDialog />}\n      </PageHeader>\n      {pageLoaded ? (\n        <Spinner message='Loading...' />\n      ) : (\n        <ProductsGallery products={products} userRole={currentUser.role} />\n      )}\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Products)\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Redirect } from 'react-router-dom'\nimport { Route, Switch } from 'react-router-dom'\nimport { Container } from '@material-ui/core'\n\nimport Header from './Header'\nimport Navigation from './Navigation'\nimport NotFound from './NotFound'\nimport PageWrapper from './PageWrapper'\nimport ProtectedRoute from './ProtectedRoute'\nimport Settings from './Settings'\nimport StudentAccount from './Student/StudentAccount'\nimport StudentSongs from './Student/StudentSongs'\nimport TeacherAccounts from './Teacher/TeacherAccounts'\nimport TeacherCourses from './Teacher/TeacherCourses'\nimport TeacherSongs from './Teacher/TeacherSongs'\nimport ManageTeachers from './Admin/ManageTeachers'\nimport Products from './Products/Products'\n\nconst mapStateToProps = (state) => ({\n  currentUser: state.common.currentUser,\n})\n\nconst Home = (props) => {\n  const { currentUser } = props\n\n  if (!currentUser) {\n    return <Redirect to='/login' />\n  }\n\n  return (\n    <>\n      <Header currentUser={currentUser} />\n      <PageWrapper>\n        <Container>\n          <Switch>\n            <ProtectedRoute\n              path='/student/account'\n              component={StudentAccount}\n            />\n            <ProtectedRoute path='/student/settings' component={Settings} />\n            <ProtectedRoute path='/student/songs' component={StudentSongs} />\n            <ProtectedRoute path='/student/products' component={Products} />\n\n            <ProtectedRoute\n              path='/teacher/accounts'\n              component={TeacherAccounts}\n            />\n            <ProtectedRoute\n              path='/teacher/courses'\n              component={TeacherCourses}\n            />\n            <ProtectedRoute path='/teacher/settings' component={Settings} />\n            <ProtectedRoute path='/teacher/songs' component={TeacherSongs} />\n            <ProtectedRoute path='/teacher/products' component={Products} />\n\n            <ProtectedRoute path='/admin/settings' component={Settings} />\n            <ProtectedRoute path='/admin/teachers' component={ManageTeachers} />\n\n            <Route component={NotFound} />\n          </Switch>\n        </Container>\n        <Navigation />\n      </PageWrapper>\n    </>\n  )\n}\n\nexport default connect(mapStateToProps, () => ({}))(Home)\n","import React from 'react'\nimport { Paper, Typography, makeStyles } from '@material-ui/core'\nimport Div100vh from 'react-div-100vh'\n\nimport Logo from './Logo'\nimport background from './../images/chemistry-background.jpg'\n\nconst useStyles = makeStyles((theme) => ({\n  background: {\n    alignItems: 'center',\n    backgroundImage: `url(${background})`,\n    backgroundSize: 'cover',\n    display: 'flex',\n    height: '100%',\n    justifyContent: 'center',\n  },\n  logo: {\n    marginBottom: theme.spacing(4),\n    width: 160,\n  },\n  panel: {\n    alignItems: 'center',\n    borderRadius: '1rem',\n    display: 'flex',\n    flexFlow: 'column nowrap',\n    overflowY: 'scroll',\n    padding: '2rem 4rem',\n    position: 'relative',\n  },\n  text: {\n    color: theme.palette.primary.main,\n    fontStyle: 'italic',\n  },\n}))\n\nconst Loading = (props) => {\n  const classes = useStyles()\n\n  return (\n    <Div100vh className={classes.background}>\n      <Paper elevation={12} className={classes.panel}>\n        <Logo className={classes.logo} />\n        <Typography className={classes.text} variant='h4'>\n          Loading...\n        </Typography>\n      </Paper>\n    </Div100vh>\n  )\n}\n\nexport default Loading\n","import React from 'react'\nimport { Grid, Link, Typography, makeStyles } from '@material-ui/core'\n\nimport profile from '../images/doc-may-profile.jpg'\n\nconst useStyles = makeStyles((theme) => ({\n  page: {\n    '& p:not(:last-of-type)': {\n      marginBottom: theme.spacing(2),\n    },\n  },\n  profile: {\n    borderRadius: '100%',\n    boxShadow: theme.shadows[10],\n    float: 'right',\n    marginBottom: theme.spacing(2),\n    marginLeft: theme.spacing(2),\n    width: '120px',\n  },\n}))\n\nconst About = () => {\n  const classes = useStyles()\n\n  return (\n    <Grid className={classes.page} container spacing={2}>\n      <Grid item xs={12}>\n        <Typography align='center' gutterBottom variant='h5'>\n          What is Chem Cash?\n        </Typography>\n        <img className={classes.profile} src={profile} />\n        <Typography variant='body2'>\n          Hi! I'm Joseph May, a high school chemistry teacher from Las Vegas.\n          While I love teaching chemistry, I also love programming for the web,\n          so why not combine the two.\n        </Typography>\n        <Typography variant='body2'>\n          Chem Cash is a points-based rewards system I use in my classroom. The\n          idea for this site came from a colleage who was inspired by one of his\n          own high school science teachers.\n        </Typography>\n        <Typography variant='body2'>\n          Students earn points in two ways: (1) through payouts based on their\n          assessment scores and (2) with bonus points earned for anything I deam\n          worthy of reward such as winning in-class competitions or going above\n          and beyond to help me or a student.\n        </Typography>\n        <Typography variant='body2'>\n          These points can be used to \"purchase\" goods such as school supplies,\n          electronics, and anything I can find for cheap or get for free.\n        </Typography>\n        <Typography variant='body2'>\n          However, the hottest-selling item is song requests. During work time\n          in my class I play music for my students. Each class period has its\n          own playlist and students can only add songs to the playlist by\n          spending their Chem Cash points.\n        </Typography>\n        <Typography variant='body2'>\n          I created this program to help manage all of the logistics behind this\n          system of incentives. While it can support multiple teachers, I am\n          running it on no-cost servers, so it was not intended to be a public\n          program. Although, if you are interested in learning more, please\n          reach out to me{' '}\n          <Link href='mailto:jwmay87+chemcash@gmail.com'>here</Link>.\n        </Typography>\n      </Grid>\n    </Grid>\n  )\n}\n\nexport default About\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Form, Field } from 'formik'\nimport { TextField } from 'formik-material-ui'\nimport { Button, Grid } from '@material-ui/core'\nimport * as Yup from 'yup'\n\nimport ListErrors from '../ListErrors'\nimport agent from '../../agent'\n\nimport { LOGIN } from '../../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({ ...state.auth })\n\nconst mapDispatchToProps = (dispatch) => ({\n  onSubmit: (username, password) =>\n    dispatch({ type: LOGIN, payload: agent.Auth.login(username, password) }),\n})\n\nconst LoginForm = (props) => {\n  const submitForm = (username, password) => {\n    props.onSubmit(username, password)\n  }\n\n  return (\n    <Formik\n      initialValues={{\n        username: '',\n        password: '',\n      }}\n      validationSchema={Yup.object({\n        username: Yup.string().required('Required'),\n        // .matches(/^[0-9]+$/, 'Must be numbers only')\n        password: Yup.string().required('Required'),\n        // .matches(/^[0-9]{4}$/, 'Must be exactly 4 numbers')\n      })}\n      onSubmit={(values) => {\n        const { username, password } = values\n        submitForm(username, password)\n      }}\n    >\n      <Form>\n        <Grid container spacing={4}>\n          <Grid item xs={12}>\n            <ListErrors errors={props.errors} />\n            <Field\n              component={TextField}\n              disabled={props.inProgress}\n              fullWidth\n              label='Username'\n              name='username'\n              type='text'\n              variant='outlined'\n            />\n          </Grid>\n          <Grid item xs={12}>\n            <Field\n              component={TextField}\n              disabled={props.inProgress}\n              fullWidth\n              label='Password'\n              name='password'\n              type='password'\n              variant='outlined'\n            />\n          </Grid>\n          <Grid item xs={12}>\n            <Button\n              color='primary'\n              disabled={props.inProgress}\n              size='large'\n              type='submit'\n              variant='contained'\n            >\n              {props.inProgress ? 'Loading...' : 'Login'}\n            </Button>\n          </Grid>\n        </Grid>\n      </Form>\n    </Formik>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LoginForm)\n","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { Link, Redirect } from 'react-router-dom'\nimport Div100vh from 'react-div-100vh'\nimport {\n  Button,\n  Grid,\n  LinearProgress,\n  Paper,\n  Tooltip,\n  makeStyles,\n} from '@material-ui/core'\nimport { ArrowBackIos, InfoOutlined } from '@material-ui/icons'\n\nimport About from '../About'\nimport Logo from '../Logo'\nimport LoginForm from './LoginForm'\nimport background from '../../images/chemistry-background.jpg'\n\nimport { LOGIN_PAGE_UNLOADED } from '../../constants/actionTypes'\n\nconst useStyles = makeStyles((theme) => ({\n  aboutLink: {\n    bottom: theme.spacing(2),\n    position: 'absolute',\n    right: theme.spacing(4),\n  },\n  loginLink: {\n    'marginBottom': theme.spacing(2),\n    '& > a': {\n      textDecoration: 'none',\n    },\n  },\n  logo: {\n    display: 'block',\n    margin: '0 auto',\n    width: 120,\n  },\n  page: {\n    alignItems: 'center',\n    backgroundImage: `url(${background})`,\n    backgroundSize: 'cover',\n    display: 'flex',\n    height: '100%',\n    justifyContent: 'center',\n    [theme.breakpoints.up('lg')]: {\n      backgroundSize: 'initial',\n      justifyContent: 'flex-end',\n    },\n  },\n  panel: {\n    borderRadius: '1rem',\n    maxHeight: '90%',\n    overflowY: 'scroll',\n    padding: '4rem 2rem',\n    position: 'relative',\n    width: '80%',\n    [theme.breakpoints.up('lg')]: {\n      borderRadius: '0',\n      height: '100%',\n      maxHeight: '100%',\n      width: '40%',\n    },\n  },\n  progress: {\n    height: 10,\n    left: '0',\n    position: 'absolute',\n    top: '0',\n    width: '100%',\n  },\n}))\n\nconst mapStateToProps = (state) => ({\n  ...state.auth,\n  currentUser: state.common.currentUser,\n  pathname: state.router.location.pathname,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onUnload: () => dispatch({ type: LOGIN_PAGE_UNLOADED }),\n})\n\nconst AboutLink = () => {\n  const classes = useStyles()\n  return (\n    <span className={classes.aboutLink}>\n      <Tooltip arrow enterTouchDelay={0} title='Learn more'>\n        <Link to='/about'>\n          <InfoOutlined color='secondary' fontSize='small' />\n        </Link>\n      </Tooltip>\n    </span>\n  )\n}\n\nconst LoginLink = () => {\n  const classes = useStyles()\n  return (\n    <div className={classes.loginLink}>\n      <Link to='/login'>\n        <Button color='secondary' startIcon={<ArrowBackIos />}>\n          Login\n        </Button>\n      </Link>\n    </div>\n  )\n}\n\nconst Login = ({ currentUser, inProgress, onUnload, pathname }) => {\n  const classes = useStyles()\n\n  useEffect(() => {\n    return () => onUnload()\n  }, [])\n\n  if (currentUser) {\n    return <Redirect to='/' />\n  }\n\n  return (\n    <Div100vh>\n      <div className={classes.page}>\n        <Paper elevation={12} className={classes.panel}>\n          {inProgress && <LinearProgress className={classes.progress} />}\n          <Grid container spacing={4}>\n            <Grid item xs={12}>\n              <Logo className={classes.logo} />\n            </Grid>\n            <Grid item xs={12}>\n              {pathname.includes('about') ? (\n                <>\n                  <LoginLink />\n                  <About />\n                </>\n              ) : (\n                <>\n                  <AboutLink />\n                  <LoginForm />\n                </>\n              )}\n            </Grid>\n          </Grid>\n        </Paper>\n      </div>\n    </Div100vh>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login)\n","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { SnackbarProvider, useSnackbar } from 'notistack'\nimport { Button } from '@material-ui/core'\n\nimport { SNACKBAR_CLOSED } from '../constants/actionTypes'\n\nconst mapStateToProps = (state) => ({\n  snackbar: state.notifier.snackbar,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onSnackbarClose: () => dispatch({ type: SNACKBAR_CLOSED }),\n})\n\nconst Notification = (props) => {\n  const { snackbar } = props\n  const { enqueueSnackbar } = useSnackbar()\n\n  useEffect(() => {\n    if (snackbar) {\n      enqueueSnackbar(snackbar.message, { variant: snackbar.variant })\n    }\n  }, [snackbar])\n\n  return props.children\n}\n\nconst Notifier = (props) => {\n  const notistackRef = React.createRef()\n  const onSnackbarDismiss = (key) => () => {\n    notistackRef.current.closeSnackbar(key)\n  }\n\n  return (\n    <SnackbarProvider\n      maxSnack={3}\n      ref={notistackRef}\n      action={(key) => (\n        <Button onClick={onSnackbarDismiss(key)}>Dismiss</Button>\n      )}\n      onClose={() => {\n        props.onSnackbarClose()\n      }}\n    >\n      <Notification snackbar={props.snackbar}>{props.children}</Notification>\n    </SnackbarProvider>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Notifier)\n","import {\n  ASYNC_START,\n  LOGIN,\n  LOGIN_PAGE_UNLOADED,\n  REGISTER,\n  REGISTER_PAGE_UNLOADED,\n} from '../constants/actionTypes'\n\nexport default (state = {}, action) => {\n  switch (action.type) {\n    case ASYNC_START:\n      if (action.subtype === LOGIN || action.subtype === REGISTER) {\n        return { ...state, inProgress: true }\n      }\n      break\n    case LOGIN:\n    case REGISTER:\n      return {\n        ...state,\n        inProgress: false,\n        errors: action.error ? action.payload.errors : null,\n      }\n    case LOGIN_PAGE_UNLOADED:\n    case REGISTER_PAGE_UNLOADED:\n      return {}\n    default:\n      return state\n  }\n\n  return state\n}\n","import {\n  APP_LOAD,\n  LOGIN,\n  LOGIN_PAGE_UNLOADED,\n  LOGOUT,\n  REDIRECT,\n  REGISTER,\n  REGISTER_PAGE_UNLOADED,\n  SETTINGS_SAVED,\n  SETTINGS_PAGE_UNLOADED,\n  SPOTIFY_REMOVE_AUTH,\n  NAV_LOADED,\n  NAV_TAB_CHANGE,\n} from '../constants/actionTypes'\n\nconst defaultState = {\n  appName: 'Chem Cash',\n  token: null,\n  viewChangeCounter: 0,\n}\n\nexport default (state = defaultState, action) => {\n  switch (action.type) {\n    case APP_LOAD:\n      return {\n        ...state,\n        token: action.token || null,\n        appLoaded: true,\n        currentUser: action.payload ? action.payload.user : null,\n        settings: action.payload ? action.payload.settings : null,\n      }\n    case LOGOUT:\n      return { ...state, redirectTo: '/login', token: null, currentUser: null }\n    case LOGIN:\n    case REGISTER:\n      return {\n        ...state,\n        redirectTo: action.error ? null : '/',\n        token: action.error ? null : action.payload.user.token,\n        currentUser: action.error ? null : action.payload.user,\n        settings: action.error ? null : action.payload.settings,\n      }\n    case LOGIN_PAGE_UNLOADED:\n    case REGISTER_PAGE_UNLOADED:\n    case SETTINGS_PAGE_UNLOADED:\n      return { ...state, viewChangeCounter: state.viewChangeCounter + 1 }\n    case NAV_LOADED:\n    case NAV_TAB_CHANGE:\n      return { ...state, redirectTo: action.redirectTo }\n    case REDIRECT:\n      return { ...state, redirectTo: null }\n    case SETTINGS_SAVED:\n      return {\n        ...state,\n        currentUser: action.error ? state.currentUser : action.payload[0].user,\n        // settings: action.error ? state.settings : action.payload[1].settings,\n        // @todo: the sharing of teacher settings with student accounts needs some cleanup to avoid messes like this\n        settings:\n          action.error || state.currentUser.role === 'student'\n            ? state.settings\n            : action.payload[1].settings,\n      }\n    case SPOTIFY_REMOVE_AUTH:\n      return {\n        ...state,\n        settings: action.error\n          ? state.settings\n          : { ...state.settings, spotifyTokens: undefined },\n      }\n    default:\n      return state\n  }\n}\n","import {\n  ADD_COURSE,\n  ADD_STUDENT,\n  ALERT_CLOSED,\n  ASYNC_START,\n  COURSE_DIALOG_UNLOADED,\n  COURSES_PAGE_LOADED,\n  COURSES_PAGE_UNLOADED,\n  DELETE_COURSE,\n  DELETE_STUDENT,\n  IMPORT_STUDENTS,\n  MOVE_STUDENT,\n  RESET_STUDENT_PASSWORD,\n  STUDENT_DIALOG_UNLOADED,\n  STUDENT_SEARCH_LOADED,\n  STUDENT_SEARCH_UNLOADED,\n  UPDATE_COURSE,\n  UPDATE_STUDENT,\n} from '../constants/actionTypes'\n\nconst defaultState = {\n  courses: [],\n  errors: null,\n  importCount: null,\n  inProgress: false,\n  pageLoaded: false,\n}\n\nconst sortByLastName = (a, b) => a.lastName.localeCompare(b.lastName)\nconst sortByPeriod = (a, b) => a.period - b.period\n\nexport default (state = defaultState, action) => {\n  let courses = []\n  switch (action.type) {\n    case ADD_COURSE:\n      return {\n        ...state,\n        courses: action.error\n          ? state.courses\n          : [...state.courses, action.payload.course].sort((a, b) =>\n              sortByPeriod(a, b)\n            ),\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n      }\n    case ADD_STUDENT:\n      // Changing a deep-nested array requires deep-copying\n      // to avoid altering the previous state\n      courses = []\n      state.courses.forEach((course) => {\n        const courseCopy = { ...course }\n        if (course._id.toString() === action.courseId) {\n          courseCopy.students = [...course.students, action.payload.user].sort(\n            (a, b) => sortByLastName(a, b)\n          )\n        }\n        courses.push(courseCopy)\n      })\n      return {\n        ...state,\n        courses: action.error ? state.courses : courses,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n      }\n    case ALERT_CLOSED:\n      return { ...state, importCount: null }\n    case ASYNC_START:\n      if (\n        action.subtype === ADD_STUDENT ||\n        action.subtype === ADD_COURSE ||\n        action.subtype === MOVE_STUDENT ||\n        action.subtype === UPDATE_COURSE ||\n        action.subtype === UPDATE_STUDENT\n      ) {\n        return { ...state, errors: null, inProgress: true }\n      } else if (action.subtype === COURSES_PAGE_LOADED) {\n        return { ...state, errors: null, pageLoaded: true }\n      } else if (action.subtype === IMPORT_STUDENTS) {\n        return { ...state, errors: null, importCount: null, inProgress: true }\n      }\n      break\n    case COURSE_DIALOG_UNLOADED:\n    case STUDENT_DIALOG_UNLOADED:\n      return { ...state, errors: null }\n    case COURSES_PAGE_LOADED:\n    case STUDENT_SEARCH_LOADED:\n      return { ...state, courses: action.payload.courses, pageLoaded: false }\n    case COURSES_PAGE_UNLOADED:\n    case STUDENT_SEARCH_UNLOADED:\n      return defaultState\n    case DELETE_COURSE:\n      return {\n        ...state,\n        courses: action.error\n          ? state.courses\n          : state.courses.filter(\n              (course) => course.slug !== action.payload.course.slug\n            ),\n      }\n    case DELETE_STUDENT:\n      // Changing a deep-nested array requires deep-copying\n      // to avoid altering the previous state\n      courses = []\n      state.courses.forEach((course) => {\n        const courseCopy = { ...course }\n        if (course._id.toString() === action.payload.course._id.toString()) {\n          courseCopy.students = course.students.filter(\n            (student) => student.username !== action.payload.user.username\n          )\n        }\n        courses.push(courseCopy)\n      })\n      return {\n        ...state,\n        courses: action.error ? state.courses : courses,\n      }\n    case IMPORT_STUDENTS:\n      // Students are not sorted when returned from server (@todo: fix this?)\n      !action.error &&\n        action.payload.course.students.sort((a, b) => sortByLastName(a, b))\n      return {\n        ...state,\n        courses: action.error\n          ? state.courses\n          : state.courses.map((course) =>\n              course._id === action.payload.course._id\n                ? action.payload.course\n                : course\n            ),\n        errors: action.error ? action.payload.errors : null,\n        importCount: action.error ? null : action.payload.count,\n        inProgress: false,\n      }\n    case MOVE_STUDENT:\n      // Students are not sorted when returned from server (@todo: fix this?)\n      !action.error &&\n        action.payload[0].course.students.sort((a, b) => sortByLastName(a, b))\n      !action.error &&\n        action.payload[1].course.students.sort((a, b) => sortByLastName(a, b))\n      return {\n        ...state,\n        courses: action.error\n          ? state.courses\n          : state.courses.map((course) => {\n              if (course._id === action.payload[0].course._id) {\n                return action.payload[0].course\n              } else if (course._id === action.payload[1].course._id) {\n                return action.payload[1].course\n              } else {\n                return course\n              }\n            }),\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n      }\n    case RESET_STUDENT_PASSWORD:\n      return { ...state }\n    case UPDATE_COURSE:\n      return {\n        ...state,\n        courses: action.error\n          ? state.courses\n          : state.courses\n              .map((course) =>\n                course._id === action.payload.course._id\n                  ? action.payload.course\n                  : course\n              )\n              .sort((a, b) => sortByPeriod(a, b)),\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n      }\n    case UPDATE_STUDENT:\n      // Changing a deep-nested array requires deep-copying\n      // to avoid altering the previous state\n      courses = []\n      const updatedUser = action.payload.user\n      state.courses.forEach((course) => {\n        const courseCopy = { ...course }\n        if (course._id.toString() === action.courseId.toString()) {\n          courseCopy.students = course.students\n            .map((student) =>\n              student._id.toString() === updatedUser._id.toString()\n                ? updatedUser\n                : student\n            )\n            .sort((a, b) => sortByLastName(a, b))\n        }\n        courses.push(courseCopy)\n      })\n      return {\n        ...state,\n        courses: action.error ? state.courses : courses,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n      }\n    default:\n      return state\n  }\n\n  return state\n}\n","import {\n  NAV_LOADED,\n  NAV_UNLOADED,\n  NAV_TAB_CHANGE,\n} from '../constants/actionTypes'\n\nexport default (state = {}, action) => {\n  switch (action.type) {\n    case NAV_LOADED:\n    case NAV_TAB_CHANGE:\n      return {\n        ...state,\n        navTabValue: action.value,\n      }\n    case NAV_UNLOADED:\n      return {}\n    default:\n      return state\n  }\n}\n","import {\n  ADD_COURSE,\n  ADD_PRODUCT,\n  ADD_STUDENT,\n  ADD_TEACHER,\n  ADD_TRANSACTION,\n  ADD_TRANSACTIONS,\n  DELETE_COURSE,\n  DELETE_PRODUCT,\n  DELETE_SONG_REQUEST,\n  DELETE_STUDENT,\n  DELETE_TASK,\n  DELETE_TEACHER,\n  DELETE_TRANSACTION,\n  IMPORT_SCORES,\n  IMPORT_STUDENTS,\n  MOVE_STUDENT,\n  RESET_STUDENT_PASSWORD,\n  SETTINGS_SAVED,\n  SNACKBAR_CLOSED,\n  SUBMIT_SONG_REQUEST,\n  UPDATE_COURSE,\n  UPDATE_PRODUCT,\n  UPDATE_STUDENT,\n  UPDATE_TASK,\n  UPDATE_TEACHER,\n  UPDATE_TRANSACTION,\n} from '../constants/actionTypes'\n\nexport default (state = {}, action) => {\n  switch (action.type) {\n    case ADD_COURSE:\n    case ADD_PRODUCT:\n    case ADD_STUDENT:\n    case ADD_TEACHER:\n    case ADD_TRANSACTION:\n    case ADD_TRANSACTIONS:\n    case DELETE_COURSE:\n    case DELETE_PRODUCT:\n    case DELETE_SONG_REQUEST:\n    case DELETE_STUDENT:\n    case DELETE_TASK:\n    case DELETE_TEACHER:\n    case DELETE_TRANSACTION:\n    case IMPORT_SCORES:\n    case IMPORT_STUDENTS:\n    case MOVE_STUDENT:\n    case RESET_STUDENT_PASSWORD:\n    case SETTINGS_SAVED:\n    case SUBMIT_SONG_REQUEST:\n    case UPDATE_COURSE:\n    case UPDATE_PRODUCT:\n    case UPDATE_STUDENT:\n    case UPDATE_TASK:\n    case UPDATE_TEACHER:\n    case UPDATE_TRANSACTION:\n      return {\n        ...state,\n        snackbar: action.error\n          ? null //{ message: 'An error occurred', variant: 'error' }\n          : action.snackbar,\n      }\n    case SNACKBAR_CLOSED:\n      return { ...state, snackbar: null }\n    default:\n      return state\n  }\n}\n","import {\n  ACCOUNT_VIEW_LOADED,\n  ACCOUNT_VIEW_UNLOADED,\n  ADD_PRODUCT,\n  ASYNC_START,\n  PRODUCT_DIALOG_UNLOADED,\n  PRODUCTS_PAGE_LOADED,\n  PRODUCTS_PAGE_UNLOADED,\n  DELETE_PRODUCT,\n  UPDATE_PRODUCT,\n} from '../constants/actionTypes'\n\nconst defaultState = {\n  products: [],\n  errors: null,\n  inProgress: false,\n  pageLoaded: false,\n}\n\nconst sortByCost = (a, b) => a.cost - b.cost\n\nexport default (state = defaultState, action) => {\n  switch (action.type) {\n    case ACCOUNT_VIEW_LOADED:\n      return {\n        ...state,\n        products: action.payload[1].products,\n      }\n    case ACCOUNT_VIEW_UNLOADED:\n    case PRODUCTS_PAGE_UNLOADED:\n      return defaultState\n    case ADD_PRODUCT:\n      return {\n        ...state,\n        products: action.error\n          ? state.products\n          : [...state.products, action.payload.product].sort((a, b) =>\n              sortByCost(a, b)\n            ),\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n      }\n    case ASYNC_START:\n      if (action.subtype === ADD_PRODUCT || action.subtype === UPDATE_PRODUCT) {\n        return { ...state, errors: null, inProgress: true }\n      } else if (action.subtype === PRODUCTS_PAGE_LOADED) {\n        return { ...state, errors: null, pageLoaded: true }\n      }\n      break\n    case DELETE_PRODUCT:\n      return {\n        ...state,\n        products: action.error\n          ? state.products\n          : state.products.filter(\n              (product) => product.slug !== action.payload.product.slug\n            ),\n      }\n    case PRODUCT_DIALOG_UNLOADED:\n      return { ...state, errors: null }\n    case PRODUCTS_PAGE_LOADED:\n      return {\n        ...state,\n        products: action.payload.products,\n        pageLoaded: false,\n      }\n    case UPDATE_PRODUCT:\n      return {\n        ...state,\n        products: action.error\n          ? state.products\n          : state.products\n              .map((product) =>\n                product._id === action.payload.product._id\n                  ? action.payload.product\n                  : product\n              )\n              .sort((a, b) => sortByCost(a, b)),\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n      }\n    default:\n      return state\n  }\n\n  return state\n}\n","import { unionBy } from 'lodash'\nimport {\n  ACCOUNT_VIEW_LOADED,\n  ACCOUNT_VIEW_UNLOADED,\n  ACCOUNTS_PAGE_UNLOADED,\n  ADD_TRANSACTION,\n  ADD_TRANSACTIONS,\n  ALERT_CLOSED,\n  ASYNC_START,\n  DELETE_TRANSACTION,\n  IMPORT_SCORES,\n  IMPORT_SCORES_DIALOG_UNLOADED,\n  TRANSACTION_DIALOG_UNLOADED,\n  TRANSACTIONS_DIALOG_UNLOADED,\n  UPDATE_TRANSACTION,\n} from '../constants/actionTypes'\nimport convertScore from '../converter'\n\nconst defaultState = {\n  conversions: null,\n  errors: null,\n  importSummary: null,\n  inProgress: false,\n  total: null,\n  transactions: null,\n}\n\nconst getTotals = (transactions, conversions) => {\n  const sumTransactions = (total, transaction) => total + transaction.amount\n  const sumScores = (total, score) => total + convertScore(score, conversions)\n\n  const bonuses = transactions.bonuses.reduce(sumTransactions, 0)\n  const purchases = transactions.purchases.reduce(sumTransactions, 0)\n  const scores = transactions.scores.reduce(sumScores, 0)\n\n  const balance = bonuses + purchases + scores\n\n  return { balance, bonuses, purchases, scores }\n}\n\nconst addScores = (added, transactions, curUser) => {\n  if (curUser) {\n    const curUserId = curUser._id.toString()\n    const usersAdded = added.filter(\n      (score) => score.student._id.toString() === curUserId\n    )\n\n    if (usersAdded) {\n      transactions.scores = unionBy(usersAdded, [...transactions.scores], '_id')\n    }\n\n    return transactions\n  }\n\n  return null\n}\n\nconst addTransaction = (added, transactions) => {\n  const types = Object.keys(transactions)\n  for (const type of types) {\n    if (type.startsWith(added.type)) {\n      transactions[type] = [added, ...transactions[type]]\n    }\n  }\n  return transactions\n}\n\nconst addBulkTransaction = (added, transactions, curUser) => {\n  if (curUser) {\n    const curUserId = curUser._id.toString()\n    const usersAdded = added.find(\n      (transaction) => transaction.student._id.toString() === curUserId\n    )\n\n    if (usersAdded) return addTransaction(usersAdded, transactions)\n  }\n\n  return null\n}\n\nconst deleteTransaction = (deleted, transactions) => {\n  const types = Object.keys(transactions)\n  for (const type of types) {\n    if (type.startsWith(deleted.type)) {\n      transactions[type] = transactions[type].filter(\n        (transaction) => transaction._id !== deleted._id\n      )\n    }\n  }\n  return transactions\n}\n\nconst updateTransaction = (updated, transactions) => {\n  const types = Object.keys(transactions)\n  for (const type of types) {\n    if (type.startsWith(updated.type)) {\n      transactions[type] = transactions[type].map((transaction) =>\n        transaction._id === updated._id ? updated : transaction\n      )\n    }\n  }\n  return transactions\n}\n\nexport default (state = defaultState, action) => {\n  switch (action.type) {\n    case ACCOUNT_VIEW_LOADED:\n      return {\n        ...state,\n        conversions: action.error ? null : action.payload[0].scoreConverter,\n        total: action.error\n          ? null\n          : getTotals(\n              action.payload[0].transactions,\n              action.payload[0].scoreConverter\n            ),\n        transactions: action.error ? null : action.payload[0].transactions,\n      }\n    case ACCOUNT_VIEW_UNLOADED:\n      return { ...state, conversions: null, total: null, transactions: null }\n    case ACCOUNTS_PAGE_UNLOADED:\n    case ALERT_CLOSED:\n      return { ...state, importSummary: null }\n    case ADD_TRANSACTION:\n      const addedTransactions = !action.error\n        ? addTransaction(action.payload.transaction, {\n            ...state.transactions,\n          })\n        : {}\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n        transactions: action.error ? state.transactions : addedTransactions,\n        total: action.error\n          ? state.total\n          : getTotals(addedTransactions, state.conversions),\n      }\n    case ADD_TRANSACTIONS:\n      const addedBulkTransactions = !action.error\n        ? addBulkTransaction(\n            action.payload.transactions,\n            { ...state.transactions },\n            action.curStudent\n          )\n        : null\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n        transactions: action.error ? state.transactions : addedBulkTransactions,\n        total:\n          action.error || !state.transactions\n            ? state.total\n            : getTotals(addedBulkTransactions, state.conversions),\n      }\n    case ASYNC_START:\n      if (\n        action.subtype === ADD_TRANSACTION ||\n        action.subtype === ADD_TRANSACTIONS ||\n        action.subtype === DELETE_TRANSACTION ||\n        action.subtype === UPDATE_TRANSACTION\n      ) {\n        return { ...state, errors: null, inProgress: true }\n      } else if (action.subtype === IMPORT_SCORES) {\n        return { ...state, errors: null, importSummary: null, inProgress: true }\n      }\n      break\n    case DELETE_TRANSACTION:\n      const deletedTransactions = !action.error\n        ? deleteTransaction(action.payload.transaction, {\n            ...state.transactions,\n          })\n        : {}\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n        transactions: action.error ? state.transactions : deletedTransactions,\n        total: action.error\n          ? state.total\n          : getTotals(deletedTransactions, state.conversions),\n      }\n    case IMPORT_SCORES:\n      const addedScores = !action.error\n        ? addScores(\n            action.payload.scores,\n            { ...state.transactions },\n            action.curStudent\n          )\n        : null\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        importSummary: action.error ? null : action.payload.results,\n        inProgress: false,\n        transactions: action.error ? state.transactions : addedScores,\n        total:\n          action.error || !state.transactions\n            ? state.total\n            : getTotals(addedScores, state.conversions),\n      }\n    case IMPORT_SCORES_DIALOG_UNLOADED:\n    case TRANSACTION_DIALOG_UNLOADED:\n    case TRANSACTIONS_DIALOG_UNLOADED:\n      return { ...state, errors: null }\n    case UPDATE_TRANSACTION:\n      const updatedTransactions = !action.error\n        ? updateTransaction(action.payload.transaction, {\n            ...state.transactions,\n          })\n        : {}\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n        transactions: action.error ? state.transactions : updatedTransactions,\n        total: action.error\n          ? state.total\n          : getTotals(updatedTransactions, state.conversions),\n      }\n    default:\n      return state\n  }\n\n  return state\n}\n","import {\n  ASYNC_START,\n  SETTINGS_PAGE_UNLOADED,\n  SETTINGS_SAVED,\n  SPOTIFY_LINKER_LOADED,\n  SPOTIFY_LINKER_UNLOADED,\n} from '../constants/actionTypes'\n\nconst defaultState = {\n  errors: null,\n  inProgress: false,\n  spotifyAuthUrl: null,\n}\n\nexport default (state = defaultState, action) => {\n  switch (action.type) {\n    case ASYNC_START:\n      if (action.subtype === SETTINGS_SAVED) {\n        return {\n          ...state,\n          inProgress: true,\n        }\n      }\n      break\n    case SPOTIFY_LINKER_LOADED:\n      return { ...state, spotifyAuthUrl: action.payload.spotifyAuthUrl }\n    case SETTINGS_PAGE_UNLOADED:\n    case SPOTIFY_LINKER_UNLOADED:\n      return defaultState\n    case SETTINGS_SAVED:\n      return {\n        ...state,\n        inProgress: false,\n        errors: action.error ? action.payload.errors : null,\n      }\n    default:\n      return state\n  }\n\n  return state\n}\n","import {\n  ASYNC_START,\n  DELETE_TASK,\n  TASKS_DIALOG_LOADED,\n  TASKS_DIALOG_UNLOADED,\n  UPDATE_TASK,\n} from '../constants/actionTypes'\n\nconst defaultState = {\n  errors: null,\n  inProgress: false,\n  tasks: [],\n}\n\nexport default (state = defaultState, action) => {\n  switch (action.type) {\n    case ASYNC_START:\n      if (action.subtype === TASKS_DIALOG_LOADED) {\n        return { ...state, inProgress: true }\n      }\n      break\n    case DELETE_TASK:\n      return {\n        ...state,\n        tasks: action.error\n          ? state.tasks\n          : state.tasks.filter(\n              (task) => task.slug !== action.payload.task.slug\n            ),\n      }\n    case TASKS_DIALOG_LOADED:\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n        tasks: action.error ? [] : action.payload.tasks,\n      }\n    case TASKS_DIALOG_UNLOADED:\n      return defaultState\n    case UPDATE_TASK:\n      return {\n        ...state,\n        tasks: action.error\n          ? state.tasks\n          : state.tasks.map((task) =>\n              task.slug === action.payload.task.slug\n                ? action.payload.task\n                : task\n            ),\n      }\n    default:\n      return state\n  }\n\n  return state\n}\n","import {\n  ADD_TEACHER,\n  ASYNC_START,\n  DELETE_TEACHER,\n  MANAGE_TEACHERS_PAGE_LOADED,\n  MANAGE_TEACHERS_PAGE_UNLOADED,\n  TEACHER_DIALOG_UNLOADED,\n  UPDATE_TEACHER,\n} from '../constants/actionTypes'\n\nconst defaultState = {\n  errors: null,\n  inProgress: false,\n  teachers: [],\n}\n\nconst sortByLastName = (a, b) => a.lastName.localeCompare(b.lastName)\n\nexport default (state = defaultState, action) => {\n  switch (action.type) {\n    case ADD_TEACHER:\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n        teachers: action.error\n          ? state.teachers\n          : [...state.teachers, action.payload.user].sort((a, b) =>\n              sortByLastName(a, b)\n            ),\n      }\n    case ASYNC_START:\n      if (action.subtype === ADD_TEACHER || action.subtype === UPDATE_TEACHER) {\n        return { ...state, inProgress: true, errors: null }\n      }\n      break\n    case DELETE_TEACHER:\n      return {\n        ...state,\n        teachers: action.error\n          ? state.teachers\n          : state.teachers.filter(\n              (teacher) => teacher.username !== action.payload.user.username\n            ),\n      }\n    case MANAGE_TEACHERS_PAGE_LOADED:\n      return {\n        ...state,\n        teachers: action.payload.users,\n      }\n    case MANAGE_TEACHERS_PAGE_UNLOADED:\n      return defaultState\n    case TEACHER_DIALOG_UNLOADED:\n      return { ...state, errors: null }\n    case UPDATE_TEACHER:\n      return {\n        ...state,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n        teachers: action.error\n          ? state.teachers\n          : state.teachers\n              .map((user) =>\n                user.username === action.payload.user.username\n                  ? action.payload.user\n                  : user\n              )\n              .sort((a, b) => sortByLastName(a, b)),\n      }\n    default:\n      return state\n  }\n\n  return state\n}\n","import {\n  ASYNC_START,\n  DELETE_SONG_REQUEST,\n  SONG_REQUESTS_DIALOG_UNLOADED,\n  SONGS_PAGE_UNLOADED,\n  STUDENT_SONGS_PAGE_LOADED,\n  SUBMIT_SONG_REQUEST,\n  TEACHER_SONGS_PAGE_LOADED,\n  UPDATE_SONG_REQUEST,\n} from '../constants/actionTypes'\n\nconst defaultState = {\n  course: null,\n  courses: [],\n  courseSongs: [],\n  errors: null,\n  inProgress: false,\n  userSongs: [],\n}\n\nexport default (state = defaultState, action) => {\n  let courses = []\n  switch (action.type) {\n    case ASYNC_START:\n      if (action.subtype === UPDATE_SONG_REQUEST) {\n        return { ...state, inProgress: true, errors: null }\n      }\n      break\n    case DELETE_SONG_REQUEST:\n      // Changing a deep-nested array requires deep-copying\n      // to avoid altering the previous state\n      state.courses.forEach((course) => {\n        const courseCopy = { ...course }\n        courseCopy.songs = courseCopy.songs.filter(\n          (song) => song._id.toString() !== action.payload.song._id.toString()\n        )\n        courses.push(courseCopy)\n      })\n      return {\n        ...state,\n        courses: action.error ? state.courses : courses,\n      }\n    case SONG_REQUESTS_DIALOG_UNLOADED:\n      return { ...state, errors: null }\n    case SONGS_PAGE_UNLOADED:\n      return defaultState\n    case STUDENT_SONGS_PAGE_LOADED:\n      return {\n        ...state,\n        userSongs: action.payload.songsByUser,\n        courseSongs: action.payload.songsByCourse,\n        course: action.payload.course,\n      }\n    case SUBMIT_SONG_REQUEST:\n      return {\n        ...state,\n        userSongs: [action.payload.song, ...state.userSongs],\n        courseSongs: [action.payload.song, ...state.courseSongs],\n      }\n    case TEACHER_SONGS_PAGE_LOADED:\n      return { ...state, courses: action.payload.courses }\n    case UPDATE_SONG_REQUEST:\n      // Changing a deep-nested array requires deep-copying\n      // to avoid altering the previous state\n      !action.error &&\n        state.courses.forEach((course) => {\n          const courseCopy = { ...course }\n          courseCopy.songs = courseCopy.songs.map((song) =>\n            song._id.toString() === action.payload.song._id.toString()\n              ? action.payload.song\n              : song\n          )\n          courses.push(courseCopy)\n        })\n      return {\n        ...state,\n        courses: action.error ? state.courses : courses,\n        errors: action.error ? action.payload.errors : null,\n        inProgress: false,\n      }\n    default:\n      return state\n  }\n\n  return state\n}\n","import agent from './agent'\nimport {\n  ASYNC_START,\n  ASYNC_END,\n  LOGIN,\n  LOGOUT,\n  REGISTER,\n} from './constants/actionTypes'\n\nconst promiseMiddleware = (store) => (next) => (action) => {\n  if (isPromise(action.payload)) {\n    store.dispatch({ type: ASYNC_START, subtype: action.type })\n\n    const currentView = store.getState().viewChangeCounter\n    const skipTracking = action.skipTracking\n\n    action.payload.then(\n      (res) => {\n        const currentState = store.getState()\n        if (!skipTracking && currentState.viewChangeCounter !== currentView) {\n          return\n        }\n        action.payload = res\n        store.dispatch({ type: ASYNC_END, promise: action.payload })\n        store.dispatch(action)\n      },\n      (error) => {\n        const currentState = store.getState()\n        if (!skipTracking && currentState.viewChangeCounter !== currentView) {\n          return\n        }\n        // console.log('ERROR', error)\n        action.error = true\n        action.payload = error.response.body\n        if (!action.skipTracking) {\n          store.dispatch({ type: ASYNC_END, promise: action.payload })\n        }\n        store.dispatch(action)\n      }\n    )\n\n    return\n  }\n\n  next(action)\n}\n\nconst localStorageMiddleware = (store) => (next) => (action) => {\n  if (action.type === REGISTER || action.type === LOGIN) {\n    if (!action.error) {\n      window.localStorage.setItem('jwt', action.payload.user.token)\n      agent.setToken(action.payload.user.token)\n    }\n  } else if (action.type === LOGOUT) {\n    window.localStorage.setItem('jwt', '')\n    agent.setToken(null)\n  }\n\n  next(action)\n}\n\nfunction isPromise(v) {\n  return v && typeof v.then === 'function'\n}\n\nexport { promiseMiddleware, localStorageMiddleware }\n","import { applyMiddleware, createStore } from 'redux'\nimport { composeWithDevTools } from 'redux-devtools-extension/developmentOnly'\nimport { createBrowserHistory } from 'history'\nimport { createLogger } from 'redux-logger'\nimport { routerMiddleware } from 'connected-react-router'\n\nimport createRootReducer from './reducer'\nimport { promiseMiddleware, localStorageMiddleware } from './middleware'\n\nexport const history = createBrowserHistory()\n\n// Build the middleware for intercepting and dispatching navigation actions\nconst myRouterMiddleware = routerMiddleware(history)\n\nconst getMiddleware = () => {\n  if (process.env.NODE_ENV === 'production') {\n    return applyMiddleware(\n      myRouterMiddleware,\n      promiseMiddleware,\n      localStorageMiddleware\n    )\n  } else {\n    // Enable additional logging in non-production environments\n    return applyMiddleware(\n      myRouterMiddleware,\n      promiseMiddleware,\n      localStorageMiddleware,\n      createLogger()\n    )\n  }\n}\n\nexport const store = createStore(\n  createRootReducer(history),\n  composeWithDevTools(getMiddleware())\n)\n","import { combineReducers } from 'redux'\nimport { connectRouter } from 'connected-react-router'\n\nimport auth from './reducers/auth'\nimport common from './reducers/common'\nimport courses from './reducers/courses'\nimport nav from './reducers/nav'\nimport notifier from './reducers/notifier'\nimport products from './reducers/products'\nimport scores from './reducers/scores'\nimport settings from './reducers/settings'\nimport tasks from './reducers/tasks'\nimport teachers from './reducers/teachers'\nimport songs from './reducers/songs'\n\nexport default (history) =>\n  combineReducers({\n    auth,\n    common,\n    courses,\n    nav,\n    notifier,\n    products,\n    scores,\n    settings,\n    tasks,\n    teachers,\n    songs,\n    router: connectRouter(history),\n  })\n","import React, { Suspense, useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { Route, Switch } from 'react-router-dom'\nimport { push } from 'connected-react-router'\nimport { CssBaseline, ThemeProvider } from '@material-ui/core'\n\nimport ChemCashTheme from './Theme'\nimport Home from './Home'\nimport Loading from './Loading'\nimport Login from './Login'\nimport Notifier from './Notifier'\nimport agent from '../agent'\nimport { store } from '../store'\n\nimport { APP_LOAD, REDIRECT } from '../constants/actionTypes'\n\nconst mapStateToProps = (state) => {\n  return {\n    appLoaded: state.common.appLoaded,\n    redirectTo: state.common.redirectTo,\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => ({\n  onLoad: (payload, token) =>\n    dispatch({ type: APP_LOAD, payload, token, skipTracking: true }),\n  onRedirect: () => dispatch({ type: REDIRECT }),\n})\n\nconst App = (props) => {\n  const { appLoaded, redirectTo } = props\n\n  useEffect(() => {\n    if (redirectTo) {\n      store.dispatch(push(redirectTo))\n      props.onRedirect()\n    }\n  }, [redirectTo])\n\n  useEffect(() => {\n    const token = window.localStorage.getItem('jwt')\n    if (token) {\n      agent.setToken(token)\n    }\n\n    props.onLoad(token ? agent.Auth.current() : null, token)\n  }, [])\n\n  if (appLoaded) {\n    return (\n      <ThemeProvider theme={ChemCashTheme}>\n        <CssBaseline />\n        <Notifier>\n          <Suspense fallback={<p>Loading...</p>}>\n            <Switch>\n              <Route exact path='/login' component={Login} />\n              <Route exact path='/about' component={Login} />\n              <Route path='/' component={Home} />\n            </Switch>\n          </Suspense>\n        </Notifier>\n      </ThemeProvider>\n    )\n  }\n\n  return (\n    <ThemeProvider theme={ChemCashTheme}>\n      <CssBaseline />\n      <Loading />\n    </ThemeProvider>\n  )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App)\n","import { ConnectedRouter } from 'connected-react-router'\nimport { Provider } from 'react-redux'\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Route, Switch } from 'react-router-dom'\n\nimport App from './components/App'\nimport { store, history } from './store'\n\nReactDOM.render(\n  <Provider store={store}>\n    <ConnectedRouter history={history}>\n      <Switch>\n        <Route path='/' component={App} />\n      </Switch>\n    </ConnectedRouter>\n  </Provider>,\n\n  document.getElementById('root')\n)\n"],"sourceRoot":""}