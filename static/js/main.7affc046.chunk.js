(this["webpackJsonpchem-cash"]=this["webpackJsonpchem-cash"]||[]).push([[0],{131:function(e,t,a){e.exports=a.p+"static/media/chem-cash-logo.30174016.png"},138:function(e,t,a){e.exports=a.p+"static/media/chemistry-background.58b9362d.jpg"},152:function(e,t,a){e.exports=a(175)},175:function(e,t,a){"use strict";a.r(t);var n=a(63),r=a(14),c=a(0),o=a.n(c),u=a(9),l=a.n(u),i=a(95),s=a(22),m=a(230),p=a(231),d=a(90),E=a.n(d),b=a(140),f=a(129),g=a.n(f),h=a(130),O=a.n(h),v=Object(b.a)({breakpoints:{values:{md:768,lg:1024}},palette:{primary:g.a,secondary:O.a}}),j=a(6),y=a(218),N=a(214),A=a(216),S=a(219),T=a(220),w=a(221),k=a(131),L=a.n(k),C=function(e){return o.a.createElement("img",Object.assign({alt:"Chem Cash Logo",src:L.a},e))},D="LOGIN",_=Object(N.a)((function(e){return{title:{color:"white",flexGrow:1},logo:{height:65,marginTop:e.spacing(2),marginRight:e.spacing(3),marginBottom:e.spacing(2)}}})),U=Object(r.c)((function(e){return{navTabValue:e.nav.navTabValue}}),(function(e){return{onClickLogout:function(){return e({type:"LOGOUT"})}}}))((function(e){var t=_(),a=e.navTabValue;return e.currentUser?o.a.createElement(A.a,{position:"static"},o.a.createElement(y.a,null,o.a.createElement(S.a,null,o.a.createElement(C,{className:t.logo}),o.a.createElement(T.a,{variant:"h5",align:"center",className:t.title},a&&a.charAt(0).toUpperCase()+a.slice(1)),o.a.createElement(w.a,{color:"inherit",onClick:e.onClickLogout},"Logout")))):null})),G=a(222),R=a(223),P=a(224),x=a(225),I=a(226),V=Object(N.a)({nav:{position:"fixed",bottom:0,width:"100%"}}),B=Object(r.c)((function(e){return{currentUser:e.common.currentUser,navTabValue:e.nav.navTabValue}}),(function(e){return{onTabChange:function(t,a){return e({type:"NAV_TAB_CHANGE",value:t,redirectTo:a})},onLoad:function(t,a){return e({type:"NAV_LOADED",value:t,redirectTo:a})},onUnload:function(){return e({type:"NAV_UNLOADED"})}}}))((function(e){var t=V(),a=e.currentUser.role;return Object(c.useEffect)((function(){var t="student"===a?"account":"settings";return e.onLoad(t,"/".concat(a,"/").concat(t)),function(){e.onUnload()}}),[]),"student"===a?o.a.createElement(G.a,{className:t.nav,onChange:function(t,n){e.onTabChange(n,"/".concat(a,"/").concat(n))},showLabels:!0,value:e.navTabValue},o.a.createElement(R.a,{label:"Account",icon:o.a.createElement(P.a,null),value:"account"}),o.a.createElement(R.a,{label:"Songs",icon:o.a.createElement(x.a,null),value:"songs"}),o.a.createElement(R.a,{label:"Settings",icon:o.a.createElement(I.a,null),value:"settings"})):o.a.createElement(G.a,{className:t.nav,onChange:function(t,a){e.onTabChange(a)},showLabels:!0,value:e.navTabValue},o.a.createElement(R.a,{label:"Settings",icon:o.a.createElement(I.a,null),value:"settings"}))})),H=Object(N.a)((function(e){return{wrapper:{marginTop:e.spacing(4)}}})),Y=function(e){var t=H();return o.a.createElement("div",{className:t.wrapper},e.children)},z=function(e){return o.a.createElement(Y,null,o.a.createElement(y.a,null,o.a.createElement(T.a,{variant:"h2"},"Error 404: Page Not Found")))},F=Object(r.c)((function(e){return{currentUser:e.common.currentUser}}),(function(){return{}}))((function(e){return e.currentUser?o.a.createElement(i.b,{exact:!0,path:e.path,component:e.component}):o.a.createElement(i.a,{to:"/"})})),M=a(114),W=a.n(M),q=a(132),J=a(23),K=a(60),$=a(176),Z=a(229),Q=a(42),X=a(232),ee=Object(N.a)((function(e){return{alert:{width:"100%","&:not(:last-of-type)":{marginBottom:e.spacing(1)}},alertList:{marginBottom:e.spacing(2)}}})),te=function(e){var t=ee(),a=e.errors;return a?o.a.createElement("div",{className:t.alertList},Object.keys(a).map((function(e){var n=e.replace(/([a-z0-9])([A-Z])/g,"$1 $2").toLowerCase();return o.a.createElement(X.a,{className:t.alert,severity:"error",key:e},n," ",a[e])}))):null},ae=a(37),ne=Object(N.a)((function(e){return{paper:{padding:e.spacing(2),marginBottom:e.spacing(4)}}})),re=Object(r.c)((function(e){return Object(j.a)(Object(j.a)({},e.settings),{},{currentUser:e.common.currentUser})}),(function(e){return{onSubmitForm:function(t){return e({type:"SETTINGS_SAVED",payload:ae.a.Auth.save(t),snackbar:{message:"Settings saved",variant:"success"}})}}}))((function(e){var t=e.currentUser,a=ne();return o.a.createElement(J.c,{initialValues:{firstName:t.firstName,lastName:t.lastName,password:""},validationSchema:Q.a({firstName:Q.b(),lastName:Q.b(),password:Q.b()}),onSubmit:function(){var t=Object(q.a)(W.a.mark((function t(a,n){var r;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(r=Object(j.a)({},a)).password||"student"===e.currentUser.role||delete r.password,e.onSubmitForm(r),n.resetForm({values:Object(j.a)(Object(j.a)({},r),{},{password:""})});case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},o.a.createElement(J.b,null,o.a.createElement(te,{errors:e.errors}),"student"!==t.role&&o.a.createElement($.a,{className:a.paper},o.a.createElement(Z.a,{container:!0,spacing:2},o.a.createElement(Z.a,{item:!0,xs:12},o.a.createElement(T.a,{variant:"h5",gutterBottom:!0},"Change your name")),o.a.createElement(Z.a,{item:!0,xs:12,md:6},o.a.createElement(J.a,{component:K.a,label:"First name",name:"firstName",type:"text",variant:"outlined",fullWidth:!0})),o.a.createElement(Z.a,{item:!0,xs:12,md:6},o.a.createElement(J.a,{component:K.a,label:"Last name",name:"lastName",type:"text",variant:"outlined",fullWidth:!0})))),o.a.createElement($.a,{className:a.paper},o.a.createElement(Z.a,{container:!0,spacing:2},o.a.createElement(Z.a,{item:!0,xs:12},o.a.createElement(T.a,{variant:"h5",gutterBottom:!0},"Change your password")),o.a.createElement(Z.a,{item:!0,xs:12,md:6},o.a.createElement(J.a,{component:K.a,label:"New password",name:"password",type:"password",variant:"outlined",fullWidth:!0})))),o.a.createElement($.a,{className:a.paper},o.a.createElement(Z.a,{container:!0,spacing:2},o.a.createElement(Z.a,{item:!0,xs:12},o.a.createElement(w.a,{color:"primary",disabled:e.inProgress,size:"large",type:"submit",variant:"contained"},e.inProgress?"Saving...":"Save"))))))})),ce=Object(r.c)((function(e){return Object(j.a)(Object(j.a)({},e.home),{},{appName:e.common.appName,currentUser:e.common.currentUser,token:e.common.token})}),(function(e){return{onLoad:function(){return e({type:"HOME_PAGE_LOADED"})},onUnload:function(){return e({type:"HOME_PAGE_UNLOADED"})}}}))((function(e){var t=e.appName,a=e.currentUser;return Object(c.useEffect)((function(){return e.onLoad(),function(){e.onUnload()}}),[]),a?o.a.createElement(o.a.Fragment,null,o.a.createElement(U,{appName:t,currentUser:a}),o.a.createElement(Y,null,o.a.createElement(y.a,null,o.a.createElement(i.d,null,o.a.createElement(F,{path:"/student/settings",component:re}),o.a.createElement(F,{path:"/teacher/settings",component:re}),o.a.createElement(F,{path:"/admin/settings",component:re}),o.a.createElement(i.b,{component:z}))),o.a.createElement(B,null))):o.a.createElement(i.a,{to:"/login"})})),oe=a(85),ue=Object(r.c)((function(e){return Object(j.a)({},e.auth)}),(function(e){return{onSubmit:function(t,a){return e({type:D,payload:ae.a.Auth.login(t,a)})}}}))((function(e){return o.a.createElement(J.c,{initialValues:{username:"student1",password:"student"},validationSchema:Q.a({username:Q.b().required("Required"),password:Q.b().required("Required")}),onSubmit:function(t){!function(t,a){e.onSubmit(t,a)}(t.username,t.password)}},o.a.createElement(J.b,null,o.a.createElement(Z.a,{container:!0,spacing:4},o.a.createElement(Z.a,{item:!0,xs:12},o.a.createElement(te,{errors:e.errors}),o.a.createElement(J.a,{component:K.a,disabled:e.inProgress,fullWidth:!0,label:"Username",name:"username",type:"text",variant:"outlined"})),o.a.createElement(Z.a,{item:!0,xs:12},o.a.createElement(J.a,{component:K.a,disabled:e.inProgress,fullWidth:!0,label:"Password",name:"password",type:"password",variant:"outlined"})),o.a.createElement(Z.a,{item:!0,xs:12},o.a.createElement(w.a,{color:"primary",disabled:e.inProgress,size:"large",type:"submit",variant:"contained"},"Login")))))})),le=a(138),ie=a.n(le),se=Object(N.a)((function(e){return{page:Object(oe.a)({alignItems:"center",backgroundImage:"url(".concat(ie.a,")"),backgroundSize:"cover",display:"flex",height:"100%",justifyContent:"center"},e.breakpoints.up("lg"),{backgroundSize:"initial",justifyContent:"flex-end"}),panel:Object(oe.a)({borderRadius:"1rem",overflowY:"scroll",padding:"4rem 2rem",position:"relative",width:"80%"},e.breakpoints.up("lg"),{borderRadius:"0",height:"100%",width:"40%"}),logo:{display:"block",margin:"0 auto",width:120}}})),me=Object(r.c)((function(e){return{currentUser:e.common.currentUser}}),(function(e){return{onUnload:function(){return e({type:"LOGIN_PAGE_UNLOADED"})}}}))((function(e){var t=se();return Object(c.useEffect)((function(){return function(){return e.onUnload()}}),[]),e.currentUser?o.a.createElement(i.a,{to:"/"}):o.a.createElement(E.a,null,o.a.createElement("div",{className:t.page},o.a.createElement($.a,{elevation:12,className:t.panel},o.a.createElement(Z.a,{container:!0,spacing:4},o.a.createElement(Z.a,{item:!0,xs:12},o.a.createElement(C,{className:t.logo})),o.a.createElement(Z.a,{item:!0,xs:12},o.a.createElement(ue,null))))))})),pe=a(116),de=function(e){var t=e.snackbar,a=Object(pe.b)().enqueueSnackbar;return Object(c.useEffect)((function(){t&&a(t.message,{variant:t.variant})}),[t]),e.children},Ee=Object(r.c)((function(e){return{snackbar:e.notifier.snackbar}}),(function(e){return{onSnackbarClose:function(){return e({type:"SNACKBAR_CLOSED"})}}}))((function(e){var t=o.a.createRef(),a=function(e){return function(){t.current.closeSnackbar(e)}};return o.a.createElement(pe.a,{maxSnack:3,ref:t,action:function(e){return o.a.createElement(w.a,{onClick:a(e)},"Dismiss")},onClose:function(){e.onSnackbarClose()}},o.a.createElement(de,{snackbar:e.snackbar},e.children))})),be=a(45),fe=a(139),ge=a(39),he=(a(174),a(124)),Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:case"REGISTER":return Object(j.a)(Object(j.a)({},e),{},{inProgress:!1,errors:t.error?t.payload.errors:null});case"LOGIN_PAGE_UNLOADED":case"REGISTER_PAGE_UNLOADED":return{};case"ASYNC_START":if(t.subtype===D||"REGISTER"===t.subtype)return Object(j.a)(Object(j.a)({},e),{},{inProgress:!0});break;default:return e}return e},ve={appName:"Chem Cash",token:null,viewChangeCounter:0},je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP_LOAD":return Object(j.a)(Object(j.a)({},e),{},{token:t.token||null,appLoaded:!0,currentUser:t.payload?t.payload.user:null});case"REDIRECT":return Object(j.a)(Object(j.a)({},e),{},{redirectTo:null});case"LOGOUT":return Object(j.a)(Object(j.a)({},e),{},{redirectTo:"/login",token:null,currentUser:null});case"SETTINGS_SAVED":return Object(j.a)(Object(j.a)({},e),{},{currentUser:t.error?e.currentUser:t.payload.user});case D:case"REGISTER":return Object(j.a)(Object(j.a)({},e),{},{redirectTo:t.error?null:"/",token:t.error?null:t.payload.user.token,currentUser:t.error?null:t.payload.user});case"HOME_PAGE_UNLOADED":case"SETTINGS_PAGE_UNLOADED":case"LOGIN_PAGE_UNLOADED":case"REGISTER_PAGE_UNLOADED":return Object(j.a)(Object(j.a)({},e),{},{viewChangeCounter:e.viewChangeCounter+1});case"NAV_LOADED":case"NAV_TAB_CHANGE":return Object(j.a)(Object(j.a)({},e),{},{redirectTo:t.redirectTo});default:return e}},ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"HOME_PAGE_LOADED":return Object(j.a)({},e);case"HOME_PAGE_UNLOADED":return{};default:return e}},Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NAV_LOADED":case"NAV_TAB_CHANGE":return Object(j.a)(Object(j.a)({},e),{},{navTabValue:t.value});case"NAV_UNLOADED":return{};default:return e}},Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SETTINGS_SAVED":return Object(j.a)(Object(j.a)({},e),{},{snackbar:t.error?null:t.snackbar});case"SNACKBAR_CLOSED":return Object(j.a)(Object(j.a)({},e),{},{snackbar:null});default:return e}},Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SETTINGS_SAVED":return Object(j.a)(Object(j.a)({},e),{},{inProgress:!1,errors:t.error?t.payload.errors:null});case"SETTINGS_PAGE_UNLOADED":return{};case"ASYNC_START":return Object(j.a)(Object(j.a)({},e),{},{inProgress:!0});case"ASYNC_END":return Object(j.a)(Object(j.a)({},e),{},{inProgress:!1});default:return e}},Te=function(e){return function(t){return function(a){if((c=a.payload)&&"function"===typeof c.then){e.dispatch({type:"ASYNC_START",subtype:a.type});var n=e.getState().viewChangeCounter,r=a.skipTracking;a.payload.then((function(t){var c=e.getState();(r||c.viewChangeCounter===n)&&(a.payload=t,e.dispatch({type:"ASYNC_END",promise:a.payload}),e.dispatch(a))}),(function(t){var c=e.getState();(r||c.viewChangeCounter===n)&&(console.log("ERROR",t),a.error=!0,a.payload=t.response.body,a.skipTracking||e.dispatch({type:"ASYNC_END",promise:a.payload}),e.dispatch(a))}))}else{var c;t(a)}}}},we=function(e){return function(e){return function(t){"REGISTER"===t.type||t.type===D?t.error||(window.localStorage.setItem("jwt",t.payload.user.token),ae.a.setToken(t.payload.user.token)):"LOGOUT"===t.type&&(window.localStorage.setItem("jwt",""),ae.a.setToken(null)),e(t)}}};var ke,Le=Object(ge.a)(),Ce=Object(he.a)(Le),De=Object(be.createStore)((ke=Le,Object(be.combineReducers)({auth:Oe,common:je,home:ye,nav:Ne,notifier:Ae,settings:Se,router:Object(n.b)(ke)})),Object(fe.composeWithDevTools)(Object(be.applyMiddleware)(Ce,Te,we))),_e=Object(r.c)((function(e){return{appLoaded:e.common.appLoaded,redirectTo:e.common.redirectTo}}),(function(e){return{onLoad:function(t,a){return e({type:"APP_LOAD",payload:t,token:a,skipTracking:!0})},onRedirect:function(){return e({type:"REDIRECT"})}}}))((function(e){var t=e.appLoaded,a=e.redirectTo;return Object(c.useEffect)((function(){a&&(De.dispatch(Object(s.d)(a)),e.onRedirect())}),[a]),Object(c.useEffect)((function(){var t=window.localStorage.getItem("jwt");t&&ae.a.setToken(t),e.onLoad(t?ae.a.Auth.current():null,t)}),[]),t?o.a.createElement(m.a,{theme:v},o.a.createElement(p.a,null),o.a.createElement(Ee,null,o.a.createElement(E.a,null,o.a.createElement(c.Suspense,{fallback:o.a.createElement("p",null,"Loading...")},o.a.createElement(i.d,null,o.a.createElement(i.b,{exact:!0,path:"/login",component:me}),o.a.createElement(i.b,{path:"/",component:ce})))))):o.a.createElement("div",null,"Sorry, there was an error loading the app.")}));l.a.render(o.a.createElement(r.a,{store:De},o.a.createElement(n.a,{history:Le},o.a.createElement(i.d,null,o.a.createElement(i.b,{path:"/",component:_e})))),document.getElementById("root"))},37:function(e,t,a){"use strict";(function(e){var n=a(136),r=a.n(n),c=a(137),o=a.n(c),u=r()(o.a,e.Promise),l="https://chem-cash.herokuapp.com/api",i=function(e){return e.body},s=null,m=function(e){s&&e.set("authorization","Token ".concat(s))},p=function(e){return u.get("".concat(l).concat(e)).use(m).then(i)},d=function(e,t){return u.post("".concat(l).concat(e),t).use(m).then(i)},E=function(e,t){return u.put("".concat(l).concat(e),t).use(m).then(i)},b={current:function(){return p("/user")},login:function(e,t){return d("/users/login",{user:{username:e,password:t}})},register:function(e,t,a,n,r,c){return d("/users",{user:{role:e,username:t,firstName:a,lastName:n,period:r,password:c}})},save:function(e){return E("/user",{user:e})}};t.a={Auth:b,setToken:function(e){s=e}}}).call(this,a(83))}},[[152,1,2]]]);
//# sourceMappingURL=main.7affc046.chunk.js.map